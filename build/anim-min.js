/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Oct 15 14:01
*/
KISSY.add("anim",function(d,c,b){c.Easing=b;d.mix(d,{Anim:c,Easing:c.Easing});return c},{requires:["anim/base","anim/easing","anim/color","anim/background-position"]});
KISSY.add("anim/background-position",function(d,c,b,f){function a(a){a=a.replace(/left|top/g,"0px").replace(/right|bottom/g,"100%").replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");a=a.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(a[1]),a[2],parseFloat(a[3]),a[4]]}function e(){e.superclass.constructor.apply(this,arguments)}d.extend(e,f,{load:function(){e.superclass.load.apply(this,arguments);this.unit=["px","px"];if(this.from){var c=a(this.from);this.from=[c[0],c[2]]}else this.from=
[0,0];this.to?(c=a(this.to),this.to=[c[0],c[2]],this.unit=[c[1],c[3]]):this.to=[0,0]},interpolate:function(a,c,d){var b=this.unit,f=e.superclass.interpolate;return f(a[0],c[0],d)+b[0]+" "+f(a[1],c[1],d)+b[1]},cur:function(){return c.css(this.anim.config.el,"backgroundPosition")},update:function(){var a=this.prop,d=this.anim.config.el,e=this.interpolate(this.from,this.to,this.pos);c.css(d,a,e)}});return f.Factories.backgroundPosition=e},{requires:["dom","./base","./fx"]});
KISSY.add("anim/base",function(d,c,b,f,a,e,q,h){function g(a,e,i,h,b){if(a.el)return i=a.el,e=a.props,delete a.el,delete a.props,new g(i,e,a);if(a=c.get(a)){if(!(this instanceof g))return new g(a,e,i,h,b);e="string"==typeof e?d.unparam(""+e,";",":"):d.clone(e);d.each(e,function(a,c){var i=d.trim(n(c));i?c!=i&&(e[i]=e[c],delete e[c]):delete e[c]});i=d.isPlainObject(i)?d.clone(i):{duration:parseFloat(i)||void 0,easing:h,complete:b};i=d.merge(y,i);i.el=a;i.props=e;this.config=i;this._duration=1E3*i.duration;
this.domEl=a;this._backupProps={};this._fxs={};this.on("complete",s)}}function s(a){var e,i,h=this.config;d.isEmptyObject(e=this._backupProps)||c.css(h.el,e);(i=h.complete)&&i.call(this,a)}function j(){var u=this.config,h=this._backupProps,i=u.el,b,g,l,o=u.specialEasing||{},s=this._fxs,j=u.props;p(this);if(!1===this.fire("beforeStart"))this.stop(0);else{if(i.nodeType==w.ELEMENT_NODE)for(l in g="none"===c.css(i,"display"),j)if(b=j[l],"hide"==b&&g||"show"==b&&!g){this.stop(1);return}if(i.nodeType==
w.ELEMENT_NODE&&(j.width||j.height))b=i.style,d.mix(h,{overflow:b.overflow,"overflow-x":b.overflowX,"overflow-y":b.overflowY}),b.overflow="hidden","inline"===c.css(i,"display")&&"none"===c.css(i,"float")&&(a.ie?b.zoom=1:b.display="inline-block");d.each(j,function(a,c){var e;d.isArray(a)?(e=o[c]=a[1],j[c]=a[0]):e=o[c]=o[c]||u.easing;"string"==typeof e&&(e=o[c]=f[e]);o[c]=e||f.easeNone});d.each(x,function(a,e){var b,h;if(h=j[e])b={},d.each(a,function(a){b[a]=c.css(i,a);o[a]=o[e]}),c.css(i,e,h),d.each(b,
function(a,e){j[e]=c.css(i,e);c.css(i,e,a)}),delete j[e]});for(l in j){b=d.trim(j[l]);var n,k,r={prop:l,anim:this,easing:o[l]},m=q.getFx(r);d.inArray(b,z)?(h[l]=c.style(i,l),"toggle"==b&&(b=g?"show":"hide"),"hide"==b?(n=0,k=m.cur(),h.display="none"):(k=0,n=m.cur(),c.css(i,l,k),c.show(i)),b=n):(n=b,k=m.cur());b+="";var v="",t=b.match(A);if(t){n=parseFloat(t[2]);if((v=t[3])&&"px"!==v)c.css(i,l,b),k*=n/m.cur(),c.css(i,l,k+v);t[1]&&(n=("-="===t[1]?-1:1)*n+k)}r.from=k;r.to=n;r.unit=v;m.load(r);s[l]=m}this._startTime=
d.now();e.start(this)}}function p(a){var e=a.config.el,b=c.data(e,k);b||c.data(e,k,b={});b[d.stamp(a)]=a}function o(a){var e=a.config.el,b=c.data(e,k);b&&(delete b[d.stamp(a)],d.isEmptyObject(b)&&c.removeData(e,k))}function l(a,e,b){a=c.data(a,"resume"==b?m:k);a=d.merge(a);d.each(a,function(a){if(void 0===e||a.config.queue==e)a[b]()})}function r(a,e,b,g){b&&!1!==g&&h.removeQueue(a,g);a=c.data(a,k);a=d.merge(a);d.each(a,function(a){a.config.queue==g&&a.stop(e)})}var n=c._camelCase,w=c.NodeType,z=["hide",
"show","toggle"],x={background:["backgroundPosition"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},y={duration:1,easing:"easeNone"},A=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;g.SHORT_HANDS=
x;g.prototype={constructor:g,isRunning:function(){var a=c.data(this.config.el,k);return a?!!a[d.stamp(this)]:0},isPaused:function(){var a=c.data(this.config.el,m);return a?!!a[d.stamp(this)]:0},pause:function(){if(this.isRunning()){this._pauseDiff=d.now()-this._startTime;e.stop(this);o(this);var a=this.config.el,b=c.data(a,m);b||c.data(a,m,b={});b[d.stamp(this)]=this}return this},resume:function(){if(this.isPaused()){this._startTime=d.now()-this._pauseDiff;var a=this.config.el,b=c.data(a,m);b&&(delete b[d.stamp(this)],
d.isEmptyObject(b)&&c.removeData(a,m));p(this);e.start(this)}return this},_runInternal:j,run:function(){!1===this.config.queue?j.call(this):h.queue(this);return this},_frame:function(){var a,e=this.config,b=1,c,d,h=this._fxs;for(a in h)if(!(d=h[a]).finished)e.frame&&(c=e.frame(d)),1==c||0==c?(d.finished=c,b&=c):(b&=d.frame())&&e.frame&&e.frame(d);(!1===this.fire("step")||b)&&this.stop(b)},stop:function(a){var b=this.config,c=b.queue,d,g=this._fxs;if(!this.isRunning())return!1!==c&&h.remove(this),
this;if(a){for(d in g)if(!(a=g[d]).finished)b.frame?b.frame(a,1):a.frame(1);this.fire("complete")}e.stop(this);o(this);!1!==c&&h.dequeue(this);return this}};d.augment(g,b.Target);var k=d.guid("ks-anim-unqueued-"+d.now()+"-"),m=d.guid("ks-anim-paused-"+d.now()+"-");g.stop=function(a,b,e,g){if(null===g||"string"==typeof g||!1===g)return r.apply(void 0,arguments);e&&h.removeQueues(a);var l=c.data(a,k),l=d.merge(l);d.each(l,function(a){a.stop(b)})};d.each(["pause","resume"],function(a){g[a]=function(b,
e){if(null===e||"string"==typeof e||!1===e)return l(b,e,a);l(b,void 0,a)}});g.isRunning=function(a){return(a=c.data(a,k))&&!d.isEmptyObject(a)};g.isPaused=function(a){return(a=c.data(a,m))&&!d.isEmptyObject(a)};g.Q=h;return g},{requires:"dom,event,./easing,ua,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(d,c,b,f){function a(a){var a=a+"",b;if(b=a.match(s))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=a.match(j))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=a.match(p)){for(a=1;a<b.length;a++)2>b[a].length&&(b[a]+=b[a]);return[parseInt(b[1],q),parseInt(b[2],q),parseInt(b[3],q)]}return g[a=a.toLowerCase()]?g[a]:[255,255,255]}function e(){e.superclass.constructor.apply(this,arguments)}var q=16,h=Math.floor,g={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},s=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,j=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,p=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,c=b.SHORT_HANDS;c.background=c.background||[];c.background.push("backgroundColor");
c.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];c.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");c.borderBottom.push("borderBottomColor");c.borderLeft.push("borderLeftColor");c.borderRight.push("borderRightColor");c.borderTop.push("borderTopColor");d.extend(e,f,{load:function(){e.superclass.load.apply(this,arguments);this.from&&(this.from=a(this.from));this.to&&(this.to=a(this.to))},interpolate:function(a,b,c){var d=
e.superclass.interpolate;if(3==a.length&&3==b.length)return"rgb("+[h(d(a[0],b[0],c)),h(d(a[1],b[1],c)),h(d(a[2],b[2],c))].join(", ")+")";if(4==a.length||4==b.length)return"rgba("+[h(d(a[0],b[0],c)),h(d(a[1],b[1],c)),h(d(a[2],b[2],c)),h(d(a[3]||1,b[3]||1,c))].join(", ")+")"}});d.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){f.Factories[a]=e});return e},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var d=Math.PI,c=Math.pow,b=Math.sin,f={swing:function(a){return-Math.cos(a*d)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(c(2,10*(a-=
1))*b((a-0.075)*2*d/0.3))},elasticOut:function(a){return 0===a||1===a?a:c(2,-10*a)*b((a-0.075)*2*d/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*c(2,10*(a-=1))*b((a-0.1125)*2*d/0.45):0.5*c(2,-10*(a-=1))*b((a-0.1125)*2*d/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,c=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(c*a-b):0.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-
f.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*f.bounceIn(2*a):0.5*f.bounceOut(2*a-1)+0.5}};return f});
KISSY.add("anim/fx",function(d,c,b){function f(a){this.load(a)}function a(a,d){return(!a.style||null==a.style[d])&&null!=c.attr(a,d,b,1)?1:0}f.prototype={constructor:f,load:function(a){d.mix(this,a);this.pos=0;this.unit=this.unit||""},frame:function(a){var b=this.anim,c=0;if(this.finished)return 1;var g=d.now(),f=b._startTime,b=b._duration;a||g>=b+f?c=this.pos=1:this.pos=this.easing((g-f)/b);this.update();this.finished=this.finished||c;return c},interpolate:function(a,c,h){return d.isNumber(a)&&d.isNumber(c)?
(a+(c-a)*h).toFixed(3):b},update:function(){var d=this.prop,f=this.anim.config.el,h=this.to,g=this.interpolate(this.from,h,this.pos);g===b?this.finished||(this.finished=1,c.css(f,d,h)):(g+=this.unit,a(f,d)?c.attr(f,d,g,1):c.css(f,d,g))},cur:function(){var d=this.prop,f=this.anim.config.el;if(a(f,d))return c.attr(f,d,b,1);var h,d=c.css(f,d);return isNaN(h=parseFloat(d))?!d||"auto"===d?0:d:h}};f.Factories={};f.getFx=function(a){return new (f.Factories[a.prop]||f)(a)};return f},{requires:["dom"]});
KISSY.add("anim/manager",function(d){var c=d.stamp;return{interval:15,runnings:{},timer:null,start:function(b){var d=c(b);this.runnings[d]||(this.runnings[d]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[c(b)];d.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},
b.interval))},stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,c=this.runnings,a;for(a in c)b=0,c[a]._frame();return b}}});
KISSY.add("anim/queue",function(d,c){function b(b,d,f){var d=d||e,j,p=c.data(b,a);!p&&!f&&c.data(b,a,p={});p&&(j=p[d],!j&&!f&&(j=p[d]=[]));return j}function f(b,g){var g=g||e,f=c.data(b,a);f&&delete f[g];d.isEmptyObject(f)&&c.removeData(b,a)}var a=d.guid("ks-queue-"+d.now()+"-"),e=d.guid("ks-queue-"+d.now()+"-"),q={queueCollectionKey:a,queue:function(a){var c=b(a.config.el,a.config.queue);c.push(a);"..."!==c[0]&&q.dequeue(a);return c},remove:function(a){var c=b(a.config.el,a.config.queue,1);c&&(a=
d.indexOf(a,c),-1<a&&c.splice(a,1))},removeQueues:function(b){c.removeData(b,a)},removeQueue:f,dequeue:function(a){var c=a.config.el,a=a.config.queue,d=b(c,a,1),e=d&&d.shift();"..."==e&&(e=d.shift());e?(d.unshift("..."),e._runInternal()):f(c,a)}};return q},{requires:["dom"]});
