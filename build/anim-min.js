/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Sep 22 13:53
*/
KISSY.add("anim/base",function(g,h,k,e,l,a,u){function r(b,c,d,f,p,q){if(b=h.get(b)){if(!(this instanceof r))return new r(b,c,d,f,p,q);if(q===u)q=false;var m=g.isPlainObject(d);c=c;this.domEl=b;if(g.isPlainObject(c))c=String(g.param(c,";")).replace(/=/g,":").replace(/%23/g,"#").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var v=c;b=b;var t,o={},B=w.length,n;if(A(b)){n=h.clone(b,true);h.insertAfter(n,b);t=n.style;for(i(n,v);B--;){var z=w[B];if(t[z])o[z]=(s[z]||s["*"]).getter(n,z)}}else n=b;v=j(v);
for(var x in v)o[x]=n!==b?(s[x]||s["*"]).getter(n,x):y(v[x]);n!==b&&h.remove(n);this.props=o;this.targetStyle=c;if(m)m=g.merge(F,d);else{m=g.clone(F);if(d!=null)m.duration=parseFloat(d)||1;if(g.isString(f)||g.isFunction(f))m.easing=f;if(g.isFunction(p))m.complete=p;m.nativeSupport=q}if(m.nativeSupport&&!g.isEmptyObject(j(c)))m.nativeSupport=false;this.config=m;if(m.nativeSupport&&I()&&g.isString(f=m.easing))if(/cubic-bezier\([\s\d.,]+\)/.test(f)||(f=e.NativeTimeFunction[f])){m.easing=f;this.transitionName=
I()}if(g.isFunction(p))this.callback=p}}function E(b,c,d){return(b+(c-b)*d).toFixed(3)}function C(b,c){return c}function y(b){var c=parseFloat(b);b=(b+"").replace(/^[-\d.]+/,"");if(isNaN(c))return{v:b,u:"",f:C};return{v:c,u:b,f:E}}function i(b,c){if(l.ie&&c.indexOf(G)>-1){var d=c.match(/opacity\s*:\s*([^;]+)(;|$)/);d&&h.css(b,G,parseFloat(d[1]))}if(A(b))b.style.cssText+=";"+c;d=j(c);for(var f in d)(s[f]||s["*"]).setter(b,f,d[f])}function j(b){for(var c={},d=0;d<D.length;d++){var f=D[d].replace(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase();if(f=b.match(RegExp(f+"\\s*:([^;]+)(;|$)")))c[D[d]]=g.trim(f[1])}return c}k=k.Target;var A=h._isElementNode,w,D,G,F,H;w="borderBottomWidth borderBottomStyle borderLeftWidth borderLeftStyle borderRightWidth borderRightStyle borderSpacing borderTopWidth borderTopStyle bottom fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" ");
D=[];G="opacity";F={duration:1,easing:"easeNone",nativeSupport:true};r.PROPS=w;r.CUSTOM_ATTRS=D;r.PROP_OPS={"*":{getter:function(b,c){return y(h.css(b,c))},setter:function(b,c,d){return h.css(b,c,d)},interpolate:E,eq:function(b,c){return b.v==c.v&&b.u==c.u}}};var s=r.PROP_OPS;g.augment(r,k,{isRunning:false,elapsedTime:0,start:0,finish:0,duration:0,run:function(){var b=this,c=b.config,d=b.domEl,f,p=b.props,q={},m;if(b.fire("start")!==false){b.stop();f=c.duration*1E3;b.duration=f;if(b.transitionName)setTimeout(function(){b._nativeRun()},
10);else{for(m in p)q[m]=(s[m]||s["*"]).getter(d,m);b.source=q;d=g.now();f=d+f;c=c.easing;if(g.isString(c))c=e[c]||e.easeNone;b.start=d;b.finish=f;b.easing=c;a.start(b)}b.isRunning=true;return b}},_complete:function(){this.fire("complete");this.callback&&this.callback()},_runFrame:function(){var b=this.domEl,c=this.finish,d=this.start,f=this.duration,p=g.now(),q=this.source,m=this.easing,v=this.props,t;d=p-d;f=p>c?1:d/f;var o,B;this.elapsedTime=d;for(t in v){d=q[t];o=v[t];var n;n=o;var z=d,x=s[t];
n=x&&x.eq?x.eq(n,z):s["*"].eq(n,z);if(!n){if(o.v===0)o.u=d.u;if(d.u!==o.u){d.v=0;d.u=o.u}n=o.f(d.v,o.v,m(f))+o.u;(s[t]||s["*"]).setter(b,t,n);if(o.f==C){d.v=o.v;d.u=o.u}}}if(this.fire("step")===false||(B=p>c))this.stop(B)},_nativeRun:function(){var b=this,c=b.domEl,d=b.duration,f=b.config.easing,p=b.transitionName,q={};q[p+"Property"]="all";q[p+"Duration"]=d+"ms";q[p+"TimingFunction"]=f;h.css(c,q);setTimeout(function(){i(c,b.targetStyle)},0);g.later(function(){b.stop(true)},d)},stop:function(b){if(this.isRunning){if(this.transitionName)this._nativeStop(b);
else{if(b){i(this.domEl,this.targetStyle);this._complete()}a.stop(this)}this.isRunning=false;return this}},_nativeStop:function(b){var c=this.domEl,d=this.props,f;if(b){this._clearNativeProperty();this._complete()}else{for(f in d)h.css(c,f,h._getComputedStyle(c,f));this._clearNativeProperty()}},_clearNativeProperty:function(){var b={},c=this.domEl,d=this.transitionName;b[d+"Property"]="none";b[d+"Duration"]="";b[d+"TimingFunction"]="";h.css(c,b)}});r.supportTransition=function(){if(H)return H;var b=
"transition",c,d=document.documentElement;if(d.style[b]!==u)c=b;else g.each(["Webkit","Moz","O"],function(f){if(d.style[b=f+"Transition"]!==u){c=b;return false}});return H=c};var I=r.supportTransition;return r},{requires:["dom","event","./easing","ua","./manager"]});
KISSY.add("anim/color",function(g,h,k){function e(i){i=i.toLowerCase();var j;if(j=i.match(r))return[parseInt(j[1]),parseInt(j[2]),parseInt(j[3])];else if(j=i.match(E)){for(i=1;i<j.length;i++)if(j[i].length<2)j[i]+=j[i];return[parseInt(j[1],a),parseInt(j[2],a),parseInt(j[3],a)]}if(u[i])return u[i];return[255,255,255]}function l(i,j,A){var w=y["*"].interpolate;return"rgb("+[Math.floor(w(i[0],j[0],A)),Math.floor(w(i[1],j[1],A)),Math.floor(w(i[2],j[2],A))].join(", ")+")"}var a=16,u={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},r=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,E=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,C="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),y=k.PROP_OPS;k=k.PROPS;k.push.apply(k,
C);y.color={getter:function(i,j){return{v:e(h.css(i,j)),u:"",f:l}},setter:y["*"].setter,eq:function(i,j){return i.v+""==j.v+""}};g.each(C,function(i){y[i]=y.color})},{requires:["dom","./base"]});
KISSY.add("anim/easing",function(){var g=Math.PI,h=Math.pow,k=Math.sin,e=1.70158,l={easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;return-(h(2,10*(a-=1))*k((a-0.075)*2*g/0.3))},
elasticOut:function(a){if(a===0||a===1)return a;return h(2,-10*a)*k((a-0.075)*2*g/0.3)+1},elasticBoth:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*h(2,10*(a-=1))*k((a-0.1125)*2*g/0.45);return h(2,-10*(a-=1))*k((a-0.1125)*2*g/0.45)*0.5+1},backIn:function(a){if(a===1)a-=0.0010;return a*a*((e+1)*a-e)},backOut:function(a){return(a-=1)*a*((e+1)*a+e)+1},backBoth:function(a){if((a*=2)<1)return 0.5*a*a*(((e*=1.525)+1)*a-e);return 0.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},bounceIn:function(a){return 1-
l.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){if(a<0.5)return l.bounceIn(a*2)*0.5;return l.bounceOut(a*2-1)*0.5+0.5}};l.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};
return l});
KISSY.add("anim/manager",function(g){function h(e){e[k]=e[k]||g.guid("anim-");return e[k]}var k=g.guid("anim-");return{interval:20,runnings:{},timer:null,start:function(e){var l=h(e);if(!this.runnings[l]){this.runnings[l]=e;this.startTimer()}},stop:function(e){this.notRun(e)},notRun:function(e){delete this.runnings[h(e)];g.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(e){this.notRun(e)},resume:function(e){this.start(e)},startTimer:function(){var e=this;if(!e.timer)e.timer=setTimeout(function(){if(e.runFrames())e.stopTimer();
else{e.timer=null;e.startTimer()}},e.interval)},stopTimer:function(){var e=this.timer;if(e){clearTimeout(e);this.timer=null}},runFrames:function(){var e=true,l=this.runnings,a;for(a in l)if(l.hasOwnProperty(a)){e=false;l[a]._runFrame()}return e}}});KISSY.add("anim/scroll",function(g,h,k){var e=k.PROP_OPS;k.CUSTOM_ATTRS.push("scrollLeft","scrollTop");e.scrollLeft=e.scrollTop={getter:function(l,a){return{v:h[a](l),u:"",f:e["*"].interpolate}},setter:function(l,a,u){h[a](l,u)}}},{requires:["dom","./base"]});
KISSY.add("anim",function(g,h,k){h.Easing=k;return h},{requires:["anim/base","anim/easing","anim/color","anim/scroll"]});
