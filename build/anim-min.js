/*
Copyright 2011, KISSY UI Library v1.30dev
MIT Licensed
build time: Dec 27 11:30
*/
KISSY.add("anim",function(c,b,g){b.Easing=g;return b},{requires:["anim/base","anim/easing","anim/color","anim/backgroundPosition"]});
KISSY.add("anim/backgroundPosition",function(c,b,g,j){function n(f){f=f.replace(/left|top/g,"0px").replace(/right|bottom/g,"100%").replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");f=f.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(f[1]),f[2],parseFloat(f[3]),f[4]]}function a(){a.superclass.constructor.apply(this,arguments)}c.extend(a,j,{load:function(){a.superclass.load.apply(this,arguments);this.unit=["px","px"];if(this.from){var f=n(this.from);this.from=[f[0],f[2]]}else this.from=
[0,0];if(this.to){f=n(this.to);this.to=[f[0],f[2]];this.unit=[f[1],f[3]]}else this.to=[0,0]},interpolate:function(f,d,i){var r=this.unit,s=a.superclass.interpolate;return s(f[0],d[0],i)+r[0]+" "+s(f[1],d[1],i)+r[1]},cur:function(){return b.css(this.elem,"backgroundPosition")},update:function(){var f=this.prop,d=this.elem,i=this.interpolate(this.from,this.to,this.pos);b.css(d,f,i)}});return j.Factories.backgroundPosition=a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/base",function(c,b,g,j,n,a,f,d){function i(h,k,e,p,m){if(h=b.get(h)){if(!(this instanceof i))return new i(h,k,e,p,m);k=c.isString(k)?c.unparam(k,";",":"):c.clone(k);for(var q in k){var w=l(c.trim(q));if(q!=w){k[w]=k[q];delete k[q]}}e=c.isPlainObject(e)?c.clone(e):{duration:parseFloat(e)||undefined,easing:p,complete:m};this.config=e=c.merge(M,e);e.duration*=1E3;this.elem=this.domEl=h;this.props=k;this._backupProps={};this._fxs={};this.on("complete",r)}}function r(h){var k,e=this.config;
c.isEmptyObject(k=this._backupProps)||b.css(this.elem,k);e.complete&&e.complete.call(this,h)}function s(){var h=this.config,k=this._backupProps,e=this.elem,p,m,q,w=h.specialEasing||{},N=this._fxs,t=this.props;y(this);if(this.fire("start")===false)this.stop(0);else{if(x(e)){p=b.css(e,"display")=="none";for(q in t){m=t[q];if(m=="hide"&&p||m=="show"&&!p){this.stop(1);return}}}c.each(t,function(E,u){if(t.hasOwnProperty(u)){var v;if(c.isArray(E)){v=w[u]=E[1];t[u]=E[0]}else v=w[u]=w[u]||h.easing;if(c.isString(v))v=
w[u]=j[v];w[u]=v||j.easeNone}});c.each(K,function(E,u){var v,H,L;if(L=t[u]){H={};c.each(E,function(J){H[J]=b.css(e,J);w[J]=w[u]});b.css(e,u,L);for(v in H){t[v]=b.css(e,v);b.css(e,v,H[v])}delete t[u]}});for(q in t)if(t.hasOwnProperty(q)){m=c.trim(t[q]);var z,A,F={elem:e,prop:q,duration:h.duration,easing:w[q]},D=f.getFx(F);if(c.inArray(m,B)){k[q]=b.style(e,q);if(m=="toggle")m=p?"show":"hide";if(m=="hide"){z=0;A=D.cur();k.display="none"}else{A=0;z=D.cur();b.css(e,q,A);b.show(e)}m=z}else{z=m;A=D.cur()}m+=
"";var I="",G=m.match(O);if(G){z=parseFloat(G[2]);if((I=G[3])&&I!=="px"){b.css(e,q,m);A=z/D.cur()*A;b.css(e,q,A+I)}if(G[1])z=(G[1]==="-="?-1:1)*z+A}F.from=A;F.to=z;F.unit=I;D.load(F);N[q]=D}if(x(e)&&(t.width||t.height)){c.mix(k,{overflow:b.style(e,"overflow"),"overflow-x":b.style(e,"overflowX"),"overflow-y":b.style(e,"overflowY")});b.css(e,"overflow","hidden");if(b.css(e,"display")==="inline"&&b.css(e,"float")==="none")n.ie?b.css(e,"zoom",1):b.css(e,"display","inline-block")}a.start(this)}}function y(h){var k=
h.elem,e=b.data(k,C);e||b.data(k,C,e={});e[c.stamp(h)]=h}function o(h,k,e,p){e&&p!==false&&d.removeQueue(h,p);h=b.data(h,C);h=c.merge(h);for(var m in h){e=h[m];e.config.queue==p&&e.stop(k)}}var l=b._camelCase,x=b._isElementNode,B=["hide","show","toggle"],K={background:["backgroundPosition"],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],
font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},M={duration:1,easing:"easeNone"},O=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;i.SHORT_HANDS=K;c.augment(i,g.Target,{isRunning:function(){var h;h=(h=b.data(this.elem,C))?!!h[c.stamp(this)]:0;return h},_runInternal:s,run:function(){this.config.queue===false?s.call(this):d.queue(this);return this},_frame:function(){var h,k=this.config,e=1,p,m,q=this._fxs;
for(h in q)if(q.hasOwnProperty(h)&&!(m=q[h]).finished){if(k.frame)p=k.frame(m);if(p==1||p==0){m.finished=p;e&=p}else e&=m.frame()}if(this.fire("step")===false||e)this.stop(e)},stop:function(h){var k=this.config.queue,e,p=this._fxs;if(this.isRunning()){if(h){for(e in p)p.hasOwnProperty(e)&&p[e].frame(1);this.fire("complete")}a.stop(this);h=this.elem;if(e=b.data(h,C)){delete e[c.stamp(this)];c.isEmptyObject(e)&&b.removeData(h,C)}k!==false&&d.dequeue(this);return this}else k!==false&&d.remove(this)}});
var C=c.guid("ks-anim-unqueued-"+c.now()+"-");i.stop=function(h,k,e,p){if(p===null||c.isString(p)||p===false)return o.apply(undefined,arguments);e&&d.removeQueues(h);var m=b.data(h,C);m=c.merge(m);for(var q in m)m[q].stop(k)};i.isRunning=function(h){return(h=b.data(h,C))&&!c.isEmptyObject(h)};i.Q=d;return i},{requires:["dom","event","./easing","ua","./manager","./fx","./queue"]});
KISSY.add("anim/color",function(c,b,g,j){function n(o){o+="";var l;if(l=o.match(r))return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])];else if(l=o.match(s))return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseInt(l[4])];else if(l=o.match(y)){for(o=1;o<l.length;o++)if(l[o].length<2)l[o]+=l[o];return[parseInt(l[1],f),parseInt(l[2],f),parseInt(l[3],f)]}if(i[o=o.toLowerCase()])return i[o];return[255,255,255]}function a(){a.superclass.constructor.apply(this,arguments)}var f=16,d=Math.floor,i={black:[0,
0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},r=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,s=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,y=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;b=g.SHORT_HANDS;b.background=b.background||[];b.background.push("backgroundColor");
b.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];b.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");b.borderBottom.push("borderBottomColor");b.borderLeft.push("borderLeftColor");b.borderRight.push("borderRightColor");b.borderTop.push("borderTopColor");c.extend(a,j,{load:function(){a.superclass.load.apply(this,arguments);if(this.from)this.from=n(this.from);if(this.to)this.to=n(this.to)},interpolate:function(o,l,x){var B=
a.superclass.interpolate;if(o.length==3&&l.length==3)return"rgb("+[d(B(o[0],l[0],x)),d(B(o[1],l[1],x)),d(B(o[2],l[2],x))].join(", ")+")";else if(o.length==4||l.length==4)return"rgba("+[d(B(o[0],l[0],x)),d(B(o[1],l[1],x)),d(B(o[2],l[2],x)),d(B(o[3]||1,l[3]||1,x))].join(", ")+")"}});c.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(o){j.Factories[o]=a});return a},{requires:["dom","./base","./fx"]});
KISSY.add("anim/easing",function(){var c=Math.PI,b=Math.pow,g=Math.sin,j=1.70158,n={swing:function(a){return-Math.cos(a*c)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){if(a===0||a===1)return a;
return-(b(2,10*(a-=1))*g((a-0.075)*2*c/0.3))},elasticOut:function(a){if(a===0||a===1)return a;return b(2,-10*a)*g((a-0.075)*2*c/0.3)+1},elasticBoth:function(a){if(a===0||(a*=2)===2)return a;if(a<1)return-0.5*b(2,10*(a-=1))*g((a-0.1125)*2*c/0.45);return b(2,-10*(a-=1))*g((a-0.1125)*2*c/0.45)*0.5+1},backIn:function(a){if(a===1)a-=0.0010;return a*a*((j+1)*a-j)},backOut:function(a){return(a-=1)*a*((j+1)*a+j)+1},backBoth:function(a){if((a*=2)<1)return 0.5*a*a*(((j*=1.525)+1)*a-j);return 0.5*((a-=2)*a*
(((j*=1.525)+1)*a+j)+2)},bounceIn:function(a){return 1-n.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){if(a<0.5)return n.bounceIn(a*2)*0.5;return n.bounceOut(a*2-1)*0.5+0.5}};n.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",
easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"};return n});
KISSY.add("anim/fx",function(c,b,g){function j(a){this.load(a)}function n(a,f){if((!a.style||a.style[f]==null)&&b.attr(a,f,g,1)!=null)return 1;return 0}c.augment(j,{load:function(a){c.mix(this,a);this.startTime=c.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var f=0;if(this.finished)return 1;var d=c.now();if(a||d>=this.duration+this.startTime)f=this.pos=1;else{a=d-this.startTime;this.pos=this.easing(a/this.duration)}this.update();this.finished=this.finished||f;return f},interpolate:function(a,
f,d){return c.isNumber(a)&&c.isNumber(f)?(a+(f-a)*d).toFixed(3):g},update:function(){var a=this.prop,f=this.elem,d=this.to,i=this.interpolate(this.from,d,this.pos);if(i===g){if(!this.finished){this.finished=1;b.css(f,a,d)}}else{i+=this.unit;n(f,a)?b.attr(f,a,i,1):b.css(f,a,i)}},cur:function(){var a=this.prop,f=this.elem;if(n(f,a))return b.attr(f,a,g,1);var d;a=b.css(f,a);return isNaN(d=parseFloat(a))?!a||a==="auto"?0:a:d}});j.Factories={};j.getFx=function(a){return new (j.Factories[a.prop]||j)(a)};
return j},{requires:["dom"]});
KISSY.add("anim/manager",function(c){var b=c.stamp;return{interval:15,runnings:{},timer:null,start:function(g){var j=b(g);if(!this.runnings[j]){this.runnings[j]=g;this.startTimer()}},stop:function(g){this.notRun(g)},notRun:function(g){delete this.runnings[b(g)];c.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(g){this.notRun(g)},resume:function(g){this.start(g)},startTimer:function(){var g=this;if(!g.timer)g.timer=setTimeout(function(){if(g.runFrames())g.stopTimer();else{g.timer=0;
g.startTimer()}},g.interval)},stopTimer:function(){var g=this.timer;if(g){clearTimeout(g);this.timer=0}},runFrames:function(){var g=1,j=this.runnings,n;for(n in j)if(j.hasOwnProperty(n)){g=0;j[n]._frame()}return g}}});
KISSY.add("anim/queue",function(c,b){function g(d,i,r){i=i||a;var s,y=b.data(d,n);if(!y&&!r)b.data(d,n,y={});if(y){s=y[i];if(!s&&!r)s=y[i]=[]}return s}function j(d,i){i=i||a;var r=b.data(d,n);r&&delete r[i];c.isEmptyObject(r)&&b.removeData(d,n)}var n=c.guid("ks-queue-"+c.now()+"-"),a=c.guid("ks-queue-"+c.now()+"-"),f={queueCollectionKey:n,queue:function(d){var i=g(d.elem,d.config.queue);i.push(d);i[0]!=="..."&&f.dequeue(d);return i},remove:function(d){var i=g(d.elem,d.config.queue,1);if(i){d=c.indexOf(d,
i);d>-1&&i.splice(d,1)}},removeQueues:function(d){b.removeData(d,n)},removeQueue:j,dequeue:function(d){var i=d.elem;d=d.config.queue;var r=g(i,d,1),s=r&&r.shift();if(s=="...")s=r.shift();if(s){r.unshift("...");s._runInternal()}else j(i,d)}};return f},{requires:["dom"]});
