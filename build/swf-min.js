/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 3 13:58
*/
KISSY.add("swf/ua",function(h,d){function r(k){var d="string"==typeof k?k.match(/\d+/g).splice(0,3):k;h.isArray(d)&&(k=parseFloat(d[0]+"."+s(d[1],3)+s(d[2],5)));return k||0}function s(d,e){var d=(d||0)+"",h=e+1-d.length;return Array(0<h?h:0).join("0")+d}function i(h){if(h||e){e=!1;var l;if(navigator.plugins&&navigator.mimeTypes.length)l=(navigator.plugins["Shockwave Flash"]||0).description;else if(z.ActiveXObject)try{l=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(i){}p=
!l?d:l.match(/\d+/g).splice(0,3)}return p}var p,e=!0,z=h.Env.host;return{fpv:i,fpvGTE:function(d,h){return r(i(h))>=r(d)}}});
KISSY.add("swf",function(h,d,r,s,i,p){function e(a){e.superclass.constructor.apply(this,arguments);var b=this.get("expressInstall"),m,c,g=this.get("htmlMode");c=this.get("params");var f=this.get("attrs"),j=this.get("document"),n=d.create("<span>",p,j),l=this.get("elBefore"),i=this.get("src"),q=this.get("version");m=f.id=f.id||h.guid("ks-swf-");if(B()){if(q&&!A(q)&&(this.set("status",e.Status.TOO_LOW),b)){i=b;if(!("width"in f)||!/%$/.test(f.width)&&310>parseInt(f.width,10))f.width="310";if(!("height"in
f)||!/%$/.test(f.height)&&137>parseInt(f.height,10))f.height="137";b=c.flashVars=c.flashVars||{};h.mix(b,{MMredirectURL:location.href,MMplayerType:o.ie?"ActiveX":"PlugIn",MMdoctitle:j.title.slice(0,47)+" - Flash Player Installation"})}"full"==g?(o.ie?(b=k(i,f,c,1),delete f.id,delete f.style,q=k(i,f,c,0)):(q=k(i,f,c,0),delete f.id,delete f.style,b=k(i,f,c,1)),c=b+q+t+"/"+u+v+t+"/"+u+v):c=k(i,f,c,o.ie)+t+"/"+u+v;this.set("html",c);l?d.insertBefore(n,l):d.append(n,this.get("render"));"outerHTML"in n?
n.outerHTML=c:n.parentNode.replaceChild(d.create(c),n);m=d.get("#"+m,j);this.set("swfObject",m);"full"==g&&(o.ie?this.set("swfObject",m):this.set("swfObject",m.parentNode));this.set("el",m);this.get("status")||this.set("status",e.Status.SUCCESS)}else this.set("status",e.Status.NOT_INSTALLED)}function z(a){var b=g;h.each(a,function(a,c){c=c.toLowerCase();c in C?b+=y(c,a):c==D&&(b+=y(c,l(a)))});return b}function k(a,b,d,c){var e=g,f=g;c==p&&(c=o.ie);h.each(b,function(a,b){e=e+(w+b+x+j+a+j)});c?(e+=
w+"classid"+x+j+E+j,f+=y("movie",a)):(e+=w+"data"+x+j+a+j,e+=w+"type"+x+j+F+j);f+=z(d);return t+u+e+v+f}function l(a){var b=[];h.each(a,function(a,c){"string"!=typeof a&&(a=r.stringify(a));a&&b.push(c+"="+G(a))});return b.join("&")}function y(a,b){return'<param name="'+a+'" value="'+b+'"></param>'}var o=h.UA,F="application/x-shockwave-flash",E="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",D="flashvars",g="",w=" ",x="=",j='"',t="<",v=">",H=h.Env.host.document,B=i.fpv,A=i.fpvGTE,u="object",G=encodeURIComponent,
C={wmode:g,allowscriptaccess:g,allownetworking:g,allowfullscreen:g,play:"false",loop:g,menu:g,quality:g,scale:g,salign:g,bgcolor:g,devicefont:g,hasPriority:g,base:g,swliveconnect:g,seamlesstabbing:g};h.extend(e,s,{callSWF:function(a,b){var d=this.get("el"),c,b=b||[];try{d[a]&&(c=d[a].apply(d,b))}catch(e){c="",0!==b.length&&(c="'"+b.join("', '")+"'"),c=(new Function("swf","return swf."+a+"("+c+");"))(d)}return c},destroy:function(){this.detach();var a=this.get("swfObject");o.ie?(a.style.display="none",
function(){if(4==a.readyState){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode.removeChild(a)}else setTimeout(arguments.callee,10)}()):a.parentNode.removeChild(a)}},{ATTRS:{expressInstall:{value:h.config("base")+"swf/assets/expressInstall.swf"},src:{},version:{value:"9"},params:{value:{}},attrs:{value:{}},render:{setter:function(a){"string"==typeof a&&(a=d.get(a,this.get("document")));return a},valueFn:function(){return document.body}},elBefore:{setter:function(a){"string"==typeof a&&
(a=d.get(a,this.get("document")));return a}},document:{value:H},status:{},el:{},swfObject:{},html:{},htmlMode:{value:"default"}},fpv:B,fpvGTE:A});e.fpvGEQ=A;e.getSrc=function(a){var b=a=d.get(a),e="",c,a=[],e=d.nodeName(b);if("object"==e){(e=d.attr(b,"data"))&&a.push(b);b=b.childNodes;for(e=0;e<b.length;e++)c=b[e],1==c.nodeType&&("movie"==(d.attr(c,"name")||"").toLowerCase()?a.push(c):"embed"==d.nodeName(c)?a.push(c):"object"==d.nodeName(b[e])&&a.push(c))}else"embed"==e&&a.push(b);b=(a=a[0])&&d.nodeName(a);
return"embed"==b?d.attr(a,"src"):"object"==b?d.attr(a,"data"):"param"==b?d.attr(a,"value"):null};e.Status={TOO_LOW:"flash version is too low",NOT_INSTALLED:"flash is not installed",SUCCESS:"success"};e.HTMLMode={DEFAULT:"default",FULL:"full"};return e},{requires:["dom","json","base","swf/ua"]});
