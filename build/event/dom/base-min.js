/*
Copyright 2013, KISSY v1.40dev
MIT Licensed
build time: Aug 27 21:59
*/
KISSY.add("event/dom/base/utils",function(e,g){var a="ksEventTargetId_"+e.now(),b=e.Env.host.document;return{simpleAdd:b&&b.addEventListener?function(a,b,g,e){a.addEventListener&&a.addEventListener(b,g,!!e)}:function(a,b,g){a.attachEvent&&a.attachEvent("on"+b,g)},simpleRemove:b&&b.removeEventListener?function(a,b,g,e){a.removeEventListener&&a.removeEventListener(b,g,!!e)}:function(a,b,g){a.detachEvent&&a.detachEvent("on"+b,g)},data:function(b,e){return g.data(b,a,e)},removeData:function(b){return g.removeData(b,
a)}}},{requires:["dom"]});KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/observer",function(e,g,a){function b(a){b.superclass.constructor.apply(this,arguments)}e.extend(b,a.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var e,l,q=a.type,m;(m=this.originalType)?a.type=m:m=q;(e=g[m])&&e.handle?(e=e.handle(a,this,b))&&0<e.length&&(l=e[0]):l=this.simpleNotify(a,b);a.type=q;return l}});return b},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/object",function(e,g,a){function b(){return l}function o(){return q}function k(c){var j=c.type;k.superclass.constructor.call(this);this.originalEvent=c;var d=o;"defaultPrevented"in c?d=c.defaultPrevented?b:o:"getPreventDefault"in c?d=c.getPreventDefault()?b:o:"returnValue"in c&&(d=c.returnValue===q?b:o);this.isDefaultPrevented=d;var f=[],h,i=m.concat();e.each(n,function(d){j.match(d.reg)&&(i=i.concat(d.props),d.fix&&f.push(d.fix));return a});for(d=i.length;d;)h=i[--d],this[h]=
c[h];this.target||(this.target=c.srcElement||s);3===this.target.nodeType&&(this.target=this.target.parentNode);for(d=f.length;d;)h=f[--d],h(this,c)}var s=e.Env.host.document,l=!0,q=!1,m="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),n=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(c,j){null==c.which&&(c.which=null!=j.charCode?j.charCode:j.keyCode);c.metaKey===a&&(c.metaKey=c.ctrlKey)}},{reg:/^touch/,
props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(c,j){var d,f,m,i=j.wheelDelta,b=j.axis,n=j.wheelDeltaY,e=j.wheelDeltaX,p=j.detail;i&&(m=i/120);p&&(m=-(0==p%3?p/3:p));b!==a&&(b===c.HORIZONTAL_AXIS?(f=0,d=-1*m):b===c.VERTICAL_AXIS&&(d=0,f=m));n!==a&&(f=n/120);e!==a&&(d=-1*e/120);!d&&!f&&(f=m);d!==a&&(c.deltaX=d);f!==a&&(c.deltaY=f);m!==a&&(c.delta=m)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,
props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(c,m){var d,f,b=c.target,i=m.button;null==c.pageX&&null!=m.clientX&&(d=b.ownerDocument||s,f=d.documentElement,d=d.body,c.pageX=m.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),c.pageY=m.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0));!c.which&&i!==a&&(c.which=i&1?1:i&2?3:i&4?2:0);!c.relatedTarget&&
c.fromElement&&(c.relatedTarget=c.fromElement===b?c.toElement:c.fromElement);return c}}];e.extend(k,g.Object,{constructor:k,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=q;k.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=l;k.superclass.stopPropagation.call(this)}});return k},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(e,g,a,b,o,k,s){function l(a){e.mix(this,a);this.reset()}var q=s.Utils;e.extend(l,s.Observable,{setup:function(){var m=this.type,n=a[m]||{},c=this.currentTarget,j=b.data(c).handle;(!n.setup||!1===n.setup.call(c,m))&&b.simpleAdd(c,m,j)},constructor:l,reset:function(){l.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var b=a.target,c=a.type,j=this.currentTarget,d=this.observers,f=[],h,i,e=this.delegateCount||0,r,t;if(e&&
b.nodeType)for(;b!=j;){if(!0!==b.disabled||"click"!==c){var p={},k,o,l;r=[];for(i=0;i<e;i++)t=d[i],l=t.filter,o=l+"",k=p[o],void 0===k&&(k=p[o]=g.test(b,l)),k&&r.push(t);r.length&&f.push({currentTarget:b,currentTargetObservers:r})}b=b.parentNode||j}e<d.length&&f.push({currentTarget:j,currentTargetObservers:d.slice(e)});i=0;for(b=f.length;!a.isPropagationStopped()&&i<b;++i){c=f[i];r=c.currentTargetObservers;c=c.currentTarget;a.currentTarget=c;for(c=0;!a.isImmediatePropagationStopped()&&c<r.length;c++)j=
r[c],j=j.notify(a,this),!1!==h&&(h=j)}return h},fire:function(b,n){var b=b||{},c=""+this.type,j,d,f=a[c]||{};j=!1!==f.bubbles;var h=this.currentTarget;if(!(f.fire&&!1===f.fire.call(h,n))&&(b instanceof k||(d=b,b=new k({currentTarget:h,type:c,target:h}),e.mix(b,d)),!(f.preFire&&!1===f.preFire.call(h,b,n)))){d=h;var i=g.getWindow(d),u=i.document,f=[],r="on"+c,t=0;do f.push(d),d=d.parentNode||d.ownerDocument||d===u&&i;while(!n&&d&&j);d=f[t];do b.currentTarget=d,(j=l.getDomEventObservable(d,c))&&j.notify(b),
d[r]&&!1===d[r].call(d)&&b.preventDefault(),d=f[++t];while(!n&&d&&!b.isPropagationStopped());if(!n&&!b.isDefaultPrevented()){try{h[c]&&!e.isWindow(h)&&(l.triggeredEvent=c,h[c]())}catch(p){}l.triggeredEvent=""}}},on:function(b){var e=this.observers,c=a[this.type]||{},b=b instanceof o?b:new o(b);-1==this.findObserver(b)&&(b.filter?(e.splice(this.delegateCount,0,b),this.delegateCount++):b.last?(e.push(b),this.lastCount++):e.splice(e.length-this.lastCount,0,b),c.add&&c.add.call(this.currentTarget,b))},
detach:function(b){var e,c=a[this.type]||{},j="filter"in b,d=b.filter,f=b.context,h=b.fn,i=this.currentTarget,g=this.observers,b=b.groups;if(g.length){b&&(e=q.getGroupsRe(b));var r,t,p,k,o=g.length;if(h||j||e){f=f||i;r=b=0;for(t=[];b<o;++b)p=g[b],k=p.context||i,f!=k||h&&h!=p.fn||j&&(d&&d!=p.filter||!d&&!p.filter)||e&&!p.groups.match(e)?t[r++]=p:(p.filter&&this.delegateCount&&this.delegateCount--,p.last&&this.lastCount&&this.lastCount--,c.remove&&c.remove.call(i,p));this.observers=t}else this.reset();
this.checkMemory()}},checkMemory:function(){var g=this.type,k,c,j=a[g]||{},d=this.currentTarget,f=b.data(d);if(f&&(k=f.observables,this.hasObserver()||(c=f.handle,(!j.tearDown||!1===j.tearDown.call(d,g))&&b.simpleRemove(d,g,c),delete k[g]),e.isEmptyObject(k)))f.handle=null,b.removeData(d)}});l.triggeredEvent="";l.getDomEventObservable=function(a,e){var c=b.data(a),j;c&&(j=c.observables);return j?j[e]:null};l.getDomEventObservablesHolder=function(a,e){var c=b.data(a);!c&&e&&b.data(a,c={});return c};
return l},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/dom-event",function(e,g,a,b,o,k,s){function l(a,b){var c=o[b]||{},e;if(!a.originalType&&(e=c.typeFix))a.originalType=b,b=e;return b}function q(a,b,c){var h,i,g,c=e.merge(c),b=l(c,b);h=k.getDomEventObservablesHolder(a,1);if(!(g=h.handle))g=h.handle=function(a){var b=a.type,d=g.currentTarget;if(!(k.triggeredEvent==b||"undefined"==typeof KISSY))if(b=k.getDomEventObservable(d,b))return a.currentTarget=d,a=new s(a),b.notify(a)},g.currentTarget=a;if(!(i=h.observables))i=h.observables=
{};h=i[b];h||(h=i[b]=new k({type:b,currentTarget:a}),h.setup());h.on(c);a=null}function m(a,b,c){var c=e.merge(c),b=l(c,b),a=k.getDomEventObservablesHolder(a),h=(a||{}).observables;if(a&&h)if(b)(b=h[b])&&b.detach(c);else for(b in h)h[b].detach(c)}var n=g.Utils,c={};e.mix(c,{on:function(a,c,f,e){a=b.query(a);n.batchForType(function(a,b,c,d){for(var c=n.normalizeParam(b,c,d),f,b=c.type,d=a.length-1;0<=d;d--)f=a[d],q(f,b,c)},1,a,c,f,e);return a},detach:function(a,c,f,e){a=b.query(a);n.batchForType(function(a,
b,c,d){for(var c=n.normalizeParam(b,c,d),f,e,b=c.type,d=a.length-1;0<=d;d--)if(f=a[d],m(f,b,c),c.deep&&f.getElementsByTagName){e=f.getElementsByTagName("*");for(f=e.length-1;0<=f;f--)m(e[f],b,c)}},1,a,c,f,e);return a},delegate:function(a,b,f,e,i){return c.on(a,b,{fn:e,context:i,filter:f})},undelegate:function(a,b,f,e,i){return c.detach(a,b,{fn:e,context:i,filter:f})},fire:function(a,c,f,e){var i=void 0,f=f||{};f.synthetic=1;n.splitAndRun(c,function(c){var d,g,l;n.fillGroupsForEvent(c,f);c=f.type;
if((g=o[c])&&g.typeFix)c=g.typeFix;a=b.query(a);for(g=a.length-1;0<=g;g--)d=a[g],l=k.getDomEventObservable(d,c),!e&&!l&&(l=new k({type:c,currentTarget:d})),l&&(d=l.fire(f,e),!1!==i&&(i=d))});return i},fireHandler:function(a,b,f){return c.fire(a,b,f,1)},clone:function(b,c){var f;if(f=k.getDomEventObservablesHolder(b)){var g=a.data(b);g&&g===a.data(c)&&a.removeData(c);e.each(f.observables,function(a,b){e.each(a.observers,function(a){q(c,b,a)})})}}});return c},{requires:"event/base,./utils,dom,./special,./observable,./object".split(",")});
KISSY.add("event/dom/base/key-codes",function(e){var g=e.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return!1;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||g.webkit&&0==b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/special-events",function(e,g,a){var b=b;return e.mix(a,{mousewheel:{typeFix:e.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(a){return!a&&"checkbox"===""+this.type&&this.click&&"input"==this.nodeName.toLowerCase()?(this.click(),!1):b}},focus:{bubbles:!1,preFire:function(a,b){b||g.fire(this,"focusin")},fire:function(a){return!a&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus?(this.focus(),!1):b}},blur:{bubbles:!1,preFire:function(a,
b){b||g.fire(this,"focusout")},fire:function(a){return!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur?(this.blur(),!1):b}}})},{requires:["./dom-event","./special"]});
KISSY.add("event/dom/base/mouseenter",function(e,g,a){e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(b){a[b.name]={typeFix:b.fix,handle:function(a,b,e){var l=a.currentTarget,q=a.relatedTarget;if(!q||q!==l&&!g.contains(l,q))return[b.simpleNotify(a,e)]}}})},{requires:["dom","./special"]});
KISSY.add("event/dom/base/valuechange",function(e,g,a,b){function o(b){if(a.hasData(b,f)){var c=a.data(b,f);clearTimeout(c);a.removeData(b,f)}}function k(a){o(a.target)}function s(b){var e=b.value,f=a.data(b,d);e!==f&&(g.fireHandler(b,c,{prevVal:f,newVal:e}),a.data(b,d,e))}function l(b){a.hasData(b,f)||a.data(b,f,setTimeout(function(){s(b);a.data(b,f,setTimeout(arguments.callee,h))},h))}function q(b){var c=b.target;"focus"==b.type&&a.data(c,d,c.value);l(c)}function m(a){s(a.target)}function n(b){a.removeData(b,
d);o(b);g.detach(b,"blur",k);g.detach(b,"webkitspeechchange",m);g.detach(b,"mousedown keyup keydown focus",q)}var c="valuechange",j=a.nodeName,d="event/valuechange/history",f="event/valuechange/poll",h=50;b[c]={setup:function(){var a=j(this);if("input"==a||"textarea"==a)n(this),g.on(this,"blur",k),g.on(this,"webkitspeechchange",m),g.on(this,"mousedown keyup keydown focus",q)},tearDown:function(){n(this)}};return g},{requires:["./dom-event","dom","./special"]});
KISSY.add("event/dom/base",function(e,g,a,b,o,k){return e.merge({add:g.on,remove:g.detach,KeyCode:b,Gesture:o,Special:k,Object:a},g)},{requires:"./base/dom-event,./base/object,./base/key-codes,./base/gesture,./base/special-events,./base/mouseenter,./base/valuechange".split(",")});
