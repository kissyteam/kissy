/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 5 22:35
*/
KISSY.add("event/dom/base/key-codes",function(h){var b=h.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(i){if(i.altKey&&!i.ctrlKey||i.metaKey||i.keyCode>=a.F1&&i.keyCode<=a.F12)return!1;switch(i.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(i){if(i>=a.ZERO&&i<=a.NINE||i>=a.NUM_ZERO&&i<=a.NUM_MULTIPLY||i>=a.A&&i<=a.Z||b.webkit&&0==i)return!0;switch(i){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/utils",function(h,b){var a=h.Env.host.document;return{simpleAdd:a&&a.addEventListener?function(a,b,l,h){a.addEventListener&&a.addEventListener(b,l,!!h)}:function(a,b,l){a.attachEvent&&a.attachEvent("on"+b,l)},simpleRemove:a&&a.removeEventListener?function(a,b,l,h){a.removeEventListener&&a.removeEventListener(b,l,!!h)}:function(a,b,l){a.detachEvent&&a.detachEvent("on"+b,l)},data:function(a,h){return b.data(a,"ksEventTargetId_1.30",h)},removeData:function(a){return b.removeData(a,
"ksEventTargetId_1.30")}}},{requires:["dom"]});KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/special",function(h,b){var a=a;return{mousewheel:{typeFix:h.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(b){return!b&&"checkbox"===""+this.type&&this.click&&"input"==this.nodeName.toLowerCase()?(this.click(),!1):a}},focus:{bubbles:!1,preFire:function(a,h){h||b.fire(this,"focusin")},fire:function(b){return!b&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus?(this.focus(),!1):a}},blur:{bubbles:!1,preFire:function(a,h){h||
b.fire(this,"focusout")},fire:function(b){return!b&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur?(this.blur(),!1):a}}}},{requires:["event/base"]});
KISSY.add("event/dom/base/observer",function(h,b,a){function i(a){i.superclass.constructor.apply(this,arguments)}h.extend(i,a._Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,i){var h,m,o=a.type,d;(d=this.originalType)?a.type=d:d=o;(h=b[d])&&h.handle?(h=h.handle(a,this,i))&&0<h.length&&(m=h[0]):m=this.simpleNotify(a,i);a.type=o;return m}});return i},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/object",function(h,b,a){function i(){return m}function n(){return o}function l(c){var j=c.type;l.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===o||c.getPreventDefault&&c.getPreventDefault()?i:n;var g=null,f,q,k=d.concat();h.each(r,function(c){return j.match(c.reg)?(k=k.concat(c.props),g=c.fix,!1):a});for(f=k.length;f;)q=k[--f],this[q]=c[q];this.target||(this.target=c.srcElement||p);3===this.target.nodeType&&
(this.target=this.target.parentNode);g&&g(this,c)}var p=h.Env.host.document,m=!0,o=!1,d="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),r=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(c,j){null==c.which&&(c.which=null!=j.charCode?j.charCode:j.keyCode);c.metaKey===a&&(c.metaKey=c.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},
{reg:/^mousewheel$/,props:[],fix:function(c,j){var g,f,d,k=j.wheelDelta,b=j.axis,r=j.wheelDeltaY,h=j.wheelDeltaX,i=j.detail;k&&(d=k/120);i&&(d=-(0==i%3?i/3:i));b!==a&&(b===e.HORIZONTAL_AXIS?(f=0,g=-1*d):b===e.VERTICAL_AXIS&&(g=0,f=d));r!==a&&(f=r/120);h!==a&&(g=-1*h/120);!g&&!f&&(f=d);g!==a&&(c.deltaX=g);f!==a&&(c.deltaY=f);d!==a&&(c.delta=d)}},{reg:/^mouse|contextmenu|click|mspointer/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),
fix:function(c,d){var g,f,b=c.target,k=d.button;null==c.pageX&&null!=d.clientX&&(g=b.ownerDocument||p,f=g.documentElement,g=g.body,c.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),c.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0));!c.which&&k!==a&&(c.which=k&1?1:k&2?3:k&4?2:0);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===b?c.toElement:c.fromElement);return c}}];h.extend(l,b._Object,{constructor:l,
preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=o;l.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=m;l.superclass.stopPropagation.call(this)}});return b.DOMEventObject=l},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(h,b,a,i,n,l,p){function m(a){h.mix(this,a);this.reset()}var o=p._Utils;h.extend(m,p._ObservableEvent,{setup:function(){var d=this.type,b=a[d]||{},c=this.currentTarget,j=i.data(c).handle;(!b.setup||!1===b.setup.call(c,d))&&i.simpleAdd(c,d,j)},constructor:m,reset:function(){m.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var h=a.target,c=a.type,j=this.currentTarget,g=this.observers,f=[],i,k,t=this.delegateCount||0,
s,l;if(t&&h.nodeType)for(;h!=j;){if(!0!==h.disabled||"click"!==c){var m={},o,n,p;s=[];for(k=0;k<t;k++)l=g[k],p=l.filter,n=p+"",o=m[n],void 0===o&&(o=m[n]=b.test(h,p)),o&&s.push(l);s.length&&f.push({currentTarget:h,currentTargetObservers:s})}h=h.parentNode||j}t<g.length&&f.push({currentTarget:j,currentTargetObservers:g.slice(t)});k=0;for(h=f.length;!a.isPropagationStopped()&&k<h;++k){c=f[k];s=c.currentTargetObservers;c=c.currentTarget;a.currentTarget=c;for(c=0;!a.isImmediatePropagationStopped()&&c<
s.length;c++)j=s[c],j=j.notify(a,this),!1!==i&&(i=j)}return i},fire:function(d,i){var d=d||{},c=""+this.type,j,g,f=a[c]||{};j=!1!==f.bubbles;var q=this.currentTarget;if(!(f.fire&&!1===f.fire.call(q,i))&&(d instanceof l||(g=d,d=new l({currentTarget:q,type:c,target:q}),h.mix(d,g)),!(f.preFire&&!1===f.preFire.call(q,d,i)))){var k=q,t=b.getWindow(k.ownerDocument||k),s=t.document;g=[];f=0;do g.push(k),k=k.parentNode||k.ownerDocument||k===s&&t;while(!i&&k&&j);k=g[f];do d.currentTarget=k,(j=m.getCustomEvent(k,
c))&&j.notify(d),k=g[++f];while(!i&&k&&!d.isPropagationStopped());if(!i&&!d.isDefaultPrevented()){try{q[c]&&!h.isWindow(q)&&(m.triggeredEvent=c,q[c]())}catch(v){}m.triggeredEvent=""}}},on:function(d){var b=this.observers,c=a[this.type]||{},d=d instanceof n?d:new n(d);-1==this.findObserver(d)&&(d.filter?(b.splice(this.delegateCount,0,d),this.delegateCount++):d.last?(b.push(d),this.lastCount++):b.splice(b.length-this.lastCount,0,d),c.add&&c.add.call(this.currentTarget,d))},detach:function(d){var b,
c=a[this.type]||{},j="filter"in d,g=d.filter,f=d.context,h=d.fn,k=this.currentTarget,i=this.observers,d=d.groups;if(i.length){d&&(b=o.getGroupsRe(d));var l,m,n,p,u=i.length;if(h||j||b){f=f||k;l=d=0;for(m=[];d<u;++d)n=i[d],p=n.context||k,f!=p||h&&h!=n.fn||j&&(g&&g!=n.filter||!g&&!n.filter)||b&&!n.groups.match(b)?m[l++]=n:(n.filter&&this.delegateCount&&this.delegateCount--,n.last&&this.lastCount&&this.lastCount--,c.remove&&c.remove.call(k,n));this.observers=m}else this.reset();this.checkMemory()}},
checkMemory:function(){var d=this.type,b,c,j=a[d]||{},g=this.currentTarget,f=i.data(g);if(f&&(b=f.events,this.hasObserver()||(c=f.handle,(!j.tearDown||!1===j.tearDown.call(g,d))&&i.simpleRemove(g,d,c),delete b[d]),h.isEmptyObject(b)))f.handle=null,i.removeData(g)}});m.triggeredEvent="";m.getCustomEvent=function(a,b){var c=i.data(a),j;c&&(j=c.events);return j?j[b]:null};m.getCustomEvents=function(a,b){var c=i.data(a);!c&&b&&i.data(a,c={});return c};return m},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/api",function(h,b,a,i,n,l,p){function m(a,b){var g=i[b]||{},f;if(!a.originalType&&(f=g.typeFix))a.originalType=b,b=f;return b}function o(a,b,g){var f,d,k,g=h.merge(g),b=m(g,b);f=l.getCustomEvents(a,1);if(!(k=f.handle))k=f.handle=function(a){var c=a.type,b=k.currentTarget;if(!(l.triggeredEvent==c||"undefined"==typeof KISSY))if(c=l.getCustomEvent(b,c))return a.currentTarget=b,a=new p(a),c.notify(a)},k.currentTarget=a;if(!(d=f.events))d=f.events={};f=d[b];f||(f=d[b]=new l({type:b,
currentTarget:a}),f.setup());f.on(g);a=null}function d(a,b,g){var g=h.merge(g),b=m(g,b),a=l.getCustomEvents(a),f=(a||{}).events;if(a&&f)if(b)(b=f[b])&&b.detach(g);else for(b in f)f[b].detach(g)}var r=b._Utils;h.mix(b,{add:function(c,b,g,f){c=a.query(c);r.batchForType(function(a,b,c,f){for(var c=r.normalizeParam(b,c,f),g,b=c.type,f=a.length-1;0<=f;f--)g=a[f],o(g,b,c)},1,c,b,g,f);return c},remove:function(b,h,g,f){b=a.query(b);r.batchForType(function(a,b,c,f){for(var c=r.normalizeParam(b,c,f),g,h,b=
c.type,f=a.length-1;0<=f;f--)if(g=a[f],d(g,b,c),c.deep&&g.getElementsByTagName){h=g.getElementsByTagName("*");for(g=h.length-1;0<=g;g--)d(h[g],b,c)}},1,b,h,g,f);return b},delegate:function(a,d,g,f,h){return b.add(a,d,{fn:f,context:h,filter:g})},undelegate:function(a,d,g,f,h){return b.remove(a,d,{fn:f,context:h,filter:g})},fire:function(b,d,g,f){var h=void 0,g=g||{};g.synthetic=1;r.splitAndRun(d,function(d){var j,m,n;r.fillGroupsForEvent(d,g);d=g.type;if((m=i[d])&&m.typeFix)d=m.typeFix;b=a.query(b);
for(m=b.length-1;0<=m;m--)j=b[m],n=l.getCustomEvent(j,d),!f&&!n&&(n=new l({type:d,currentTarget:j})),n&&(j=n.fire(g,f),!1!==h&&(h=j))});return h},fireHandler:function(a,d,g){return b.fire(a,d,g,1)},_clone:function(a,b){var d;(d=l.getCustomEvents(a))&&h.each(d.events,function(a,c){h.each(a.observers,function(a){o(b,c,a)})})},_ObservableDOMEvent:l});b.on=b.add;b.detach=b.remove;return b},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});
KISSY.add("event/dom/base/mouseenter",function(h,b,a,i){h.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(b){i[b.name]={typeFix:b.fix,handle:function(b,h,i){var n=b.currentTarget,d=b.relatedTarget;if(!d||d!==n&&!a.contains(n,d))return[h.simpleNotify(b,i)]}}});return b},{requires:["./api","dom","./special"]});
KISSY.add("event/dom/base/valuechange",function(h,b,a,i){function n(b){if(a.hasData(b,f)){var c=a.data(b,f);clearTimeout(c);a.removeData(b,f)}}function l(a){n(a.target)}function p(d){var f=d.value,h=a.data(d,g);f!==h&&(b.fireHandler(d,c,{prevVal:h,newVal:f}),a.data(d,g,f))}function m(b){a.hasData(b,f)||a.data(b,f,setTimeout(function(){p(b);a.data(b,f,setTimeout(arguments.callee,q))},q))}function o(b){var c=b.target;"focus"==b.type&&a.data(c,g,c.value);m(c)}function d(a){p(a.target)}function r(c){a.removeData(c,
g);n(c);b.remove(c,"blur",l);b.remove(c,"webkitspeechchange",d);b.remove(c,"mousedown keyup keydown focus",o)}var c="valuechange",j=a.nodeName,g="event/valuechange/history",f="event/valuechange/poll",q=50;i[c]={setup:function(){var a=j(this);if("input"==a||"textarea"==a)r(this),b.on(this,"blur",l),b.on(this,"webkitspeechchange",d),b.on(this,"mousedown keyup keydown focus",o)},tearDown:function(){r(this)}};return b},{requires:["./api","dom","./special"]});
KISSY.add("event/dom/base",function(h,b,a,i,n,l){h.mix(b,{KeyCode:a,_DOMUtils:i,Gesture:n,_Special:l});return b},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/valuechange".split(",")});
