/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Mar 15 17:56
*/
KISSY.add("event/dom/base/api",function(h,f,a,b,k,m,n){function l(c,a){var g=b[a]||{};c.originalType||(c.selector?g.delegateFix&&(c.originalType=a,a=g.delegateFix):g.onFix&&(c.originalType=a,a=g.onFix));return a}function o(c,a,g){var d,e,p,g=h.merge(g),a=l(g,a);d=m.getCustomEvents(c,1);if(!(p=d.handle))p=d.handle=function(c){var a=c.type,i=p.currentTarget;if(!(m.triggeredEvent==a||"undefined"==typeof KISSY))if(a=m.getCustomEvent(i,a))return c.currentTarget=i,c=new n(c),a.notify(c)},p.currentTarget=
c;if(!(e=d.events))e=d.events={};d=e[a];d||(d=e[a]=new m({type:a,currentTarget:c}),d.setup());d.on(g);c=null}function e(c,a,e){var e=h.merge(e),a=l(e,a),c=m.getCustomEvents(c),d=(c||{}).events;if(c&&d)if(a)(a=d[a])&&a.detach(e);else for(a in d)d[a].detach(e)}var c=f._Utils;h.mix(f,{add:function(i,e,g,d){i=a.query(i);c.batchForType(function(a,i,e,d){for(var e=c.normalizeParam(i,e,d),g,i=e.type,d=a.length-1;0<=d;d--)g=a[d],o(g,i,e)},1,i,e,g,d);return i},remove:function(i,j,g,d){i=a.query(i);c.batchForType(function(a,
i,d,g){for(var d=c.normalizeParam(i,d,g),j,b,i=d.type,g=a.length-1;0<=g;g--)if(j=a[g],e(j,i,d),d.deep&&j.getElementsByTagName){b=j.getElementsByTagName("*");for(j=b.length-1;0<=j;j--)e(b[j],i,d)}},1,i,j,g,d);return i},delegate:function(a,c,e,d,b){return f.add(a,c,{fn:d,context:b,selector:e})},undelegate:function(a,c,e,d,b){return f.remove(a,c,{fn:d,context:b,selector:e})},fire:function(i,e,g,d){var b=void 0,g=g||{};g.synthetic=1;c.splitAndRun(e,function(e){g.type=e;var j,f,k,e=c.getTypedGroups(e);
(f=e[1])&&(f=c.getGroupsRe(f));e=e[0];h.mix(g,{type:e,_ks_groups:f});i=a.query(i);for(f=i.length-1;0<=f;f--)j=i[f],k=m.getCustomEvent(j,e),!d&&!k&&(k=new m({type:e,currentTarget:j})),k&&(j=k.fire(g,d),!1!==b&&(b=j))});return b},fireHandler:function(a,c,e){return f.fire(a,c,e,1)},_clone:function(a,c){var e;(e=m.getCustomEvents(a))&&h.each(e.events,function(a,e){h.each(a.observers,function(a){o(c,e,a)})})},_ObservableDOMEvent:m});f.on=f.add;f.detach=f.remove;return f},{requires:"event/base,dom,./special,./utils,./observable,./object".split(",")});
KISSY.add("event/dom/base",function(h,f,a,b,k,m){h.mix(f,{KeyCodes:a,_DOMUtils:b,Gesture:k,_Special:m});return f},{requires:"event/base,./base/key-codes,./base/utils,./base/gesture,./base/special,./base/api,./base/mouseenter,./base/mousewheel,./base/valuechange".split(",")});KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/key-codes",function(h){var f=h.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return!1;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||f.webkit&&0==b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/mouseenter",function(h,f,a,b){h.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(f){b[f.name]={onFix:f.fix,delegateFix:f.fix,handle:function(b,f,k){var h=b.currentTarget,e=b.relatedTarget;if(!e||e!==h&&!a.contains(h,e))return[f.simpleNotify(b,k)]}}});return f},{requires:["./api","dom","./special"]});
KISSY.add("event/dom/base/mousewheel",function(h,f){var a=h.UA.gecko?"DOMMouseScroll":"mousewheel";f.mousewheel={onFix:a,delegateFix:a}},{requires:["./special"]});
KISSY.add("event/dom/base/object",function(h,f,a){function b(c){this.currentTarget=this.target=this.scale=this.rotation=this.targetTouches=this.touches=this.changedTouches=this.which=this.wheelDelta=this.view=this.toElement=this.srcElement=this.shiftKey=this.screenY=this.screenX=this.relatedTarget=this.relatedNode=this.prevValue=this.pageY=this.pageX=this.offsetY=this.offsetX=this.newValue=this.metaKey=this.keyCode=this.handler=this.fromElement=this.eventPhase=this.detail=this.data=this.ctrlKey=this.clientY=
this.clientX=this.charCode=this.cancelable=this.button=this.bubbles=this.attrName=this.attrChange=this.altKey=a;b.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===o||c.getPreventDefault&&c.getPreventDefault()?function(){return l}:function(){return o};k(this);m(this)}function k(c){for(var i=c.originalEvent,b=e.length,g,d=i.currentTarget,d=9===d.nodeType?d:d.ownerDocument||n;b;)g=e[--b],c[g]=i[g];c.target||(c.target=c.srcElement||d);
3===c.target.nodeType&&(c.target=c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);c.pageX===a&&c.clientX!==a&&(i=d.documentElement,b=d.body,c.pageX=c.clientX+(i&&i.scrollLeft||b&&b.scrollLeft||0)-(i&&i.clientLeft||b&&b.clientLeft||0),c.pageY=c.clientY+(i&&i.scrollTop||b&&b.scrollTop||0)-(i&&i.clientTop||b&&b.clientTop||0));c.which===a&&(c.which=c.charCode===a?c.keyCode:c.charCode);c.metaKey===a&&(c.metaKey=c.ctrlKey);!c.which&&
c.button!==a&&(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0)}function m(c){var e,b,g,d=c.detail;c.wheelDelta&&(g=c.wheelDelta/120);c.detail&&(g=-(0==d%3?d/3:d));c.axis!==a&&(c.axis===c.HORIZONTAL_AXIS?(b=0,e=-1*g):c.axis===c.VERTICAL_AXIS&&(e=0,b=g));c.wheelDeltaY!==a&&(b=c.wheelDeltaY/120);c.wheelDeltaX!==a&&(e=-1*c.wheelDeltaX/120);!e&&!b&&(b=g);(e!==a||b!==a||g!==a)&&h.mix(c,{deltaY:b,delta:g,deltaX:e})}var n=h.Env.host.document,l=!0,o=!1,e="type,altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis,changedTouches,touches,targetTouches,rotation,scale".split(",");
h.extend(b,f._Object,{constructor:b,preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=o;b.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=l;b.superclass.stopPropagation.call(this)}});return f.DOMEventObject=b},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(h,f,a,b,k,m,n){function l(a){h.mix(this,a);this.reset()}var o=n._Utils;h.extend(l,n._ObservableEvent,{setup:function(){var e=this.type,c=a[e]||{},i=this.currentTarget,f=b.data(i).handle;(!c.setup||!1===c.setup.call(i,e))&&b.simpleAdd(i,e,f)},constructor:l,reset:function(){l.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var c=a.target,b=this.currentTarget,j=this.observers,g=[],d,k,p=this.delegateCount||0,h,m;if(p&&
!c.disabled)for(;c!=b;){h=[];for(k=0;k<p;k++)m=j[k],f.test(c,m.selector)&&h.push(m);h.length&&g.push({currentTarget:c,currentTargetObservers:h});c=c.parentNode||b}g.push({currentTarget:b,currentTargetObservers:j.slice(p)});k=0;for(c=g.length;!a.isPropagationStopped()&&k<c;++k){b=g[k];h=b.currentTargetObservers;b=b.currentTarget;a.currentTarget=b;for(b=0;!a.isImmediatePropagationStopped()&&b<h.length;b++)j=h[b],j=j.notify(a,this),!1!==d&&(d=j)}return d},fire:function(e,c){var e=e||{},b=""+this.type,
j=a[b];j&&j.onFix&&(b=j.onFix);var g,d,j=this.currentTarget,k=!0;e.type=b;e instanceof m||(d=e,e=new m({currentTarget:j,target:j}),h.mix(e,d));d=j;g=f.getWindow(d.ownerDocument||d);var p=g.document,n=[],o=0,q="on"+b;do n.push(d),d=d.parentNode||d.ownerDocument||d===p&&g;while(d);d=n[o];do{e.currentTarget=d;if(g=l.getCustomEvent(d,b))g=g.notify(e),!1!==k&&(k=g);d[q]&&!1===d[q].call(d)&&e.preventDefault();d=n[++o]}while(!c&&d&&!e.isPropagationStopped());if(!c&&!e.isDefaultPrevented()){var r;try{if(q&&
j[b]&&("focus"!==b&&"blur"!==b||0!==j.offsetWidth)&&!h.isWindow(j))(r=j[q])&&(j[q]=null),l.triggeredEvent=b,j[b]()}catch(s){}r&&(j[q]=r);l.triggeredEvent=""}return k},on:function(b){var c=this.observers,i=a[this.type]||{},b=b instanceof k?b:new k(b);-1==this.findObserver(b)&&(b.selector?(c.splice(this.delegateCount,0,b),this.delegateCount++):b.last?(c.push(b),this.lastCount++):c.splice(c.length-this.lastCount,0,b),i.add&&i.add.call(this.currentTarget,b))},detach:function(b){var c,i=a[this.type]||
{},f="selector"in b,g=b.selector,d=b.context,k=b.fn,p=this.currentTarget,h=this.observers,b=b.groups;if(h.length){b&&(c=o.getGroupsRe(b));var m,n,l,s,u=h.length;if(k||f||c){d=d||p;m=b=0;for(n=[];b<u;++b)l=h[b],s=l.context||p,d!=s||k&&k!=l.fn||f&&(g&&g!=l.selector||!g&&!l.selector)||c&&!l.groups.match(c)?n[m++]=l:(l.selector&&this.delegateCount&&this.delegateCount--,l.last&&this.lastCount&&this.lastCount--,i.remove&&i.remove.call(p,l));this.observers=n}else this.reset();this.checkMemory()}},checkMemory:function(){var e=
this.type,c,i,f=a[e]||{},g=this.currentTarget,d=b.data(g);if(d&&(c=d.events,this.hasObserver()||(i=d.handle,(!f.tearDown||!1===f.tearDown.call(g,e))&&b.simpleRemove(g,e,i),delete c[e]),h.isEmptyObject(c)))d.handle=null,b.removeData(g)}});l.triggeredEvent="";l.getCustomEvent=function(a,c){var f=b.data(a),k;f&&(k=f.events);return k?k[c]:null};l.getCustomEvents=function(a,c){var f=b.data(a);!f&&c&&b.data(a,f={});return f};return l},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/observer",function(h,f,a){function b(a){b.superclass.constructor.apply(this,arguments)}h.extend(b,a._Observer,{keys:"fn,selector,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var h,l,o=a.type;this.originalType&&(a.type=this.originalType);(h=f[a.type])&&h.handle?(h=h.handle(a,this,b))&&0<h.length&&(l=h[0]):l=this.simpleNotify(a,b);a.type=o;return l}});return b},{requires:["./special","event/base"]});KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/utils",function(h,f){var a=h.Env.host.document;return{simpleAdd:a&&a.addEventListener?function(a,f,h,n){a.addEventListener&&a.addEventListener(f,h,!!n)}:function(a,f,h){a.attachEvent&&a.attachEvent("on"+f,h)},simpleRemove:a&&a.removeEventListener?function(a,f,h,n){a.removeEventListener&&a.removeEventListener(f,h,!!n)}:function(a,f,h){a.detachEvent&&a.detachEvent("on"+f,h)},data:function(a,h){return f.data(a,"ksEventTargetId_1.30",h)},removeData:function(a){return f.removeData(a,
"ksEventTargetId_1.30")}}},{requires:["dom"]});
KISSY.add("event/dom/base/valuechange",function(h,f,a,b){function k(b){if(a.hasData(b,d)){var c=a.data(b,d);clearTimeout(c);a.removeData(b,d)}}function m(a){k(a.target)}function n(b){var c=b.value,d=a.data(b,g);c!==d&&(f.fireHandler(b,i,{prevVal:d,newVal:c}),a.data(b,g,c))}function l(b){a.hasData(b,d)||a.data(b,d,setTimeout(function(){n(b);a.data(b,d,setTimeout(arguments.callee,t))},t))}function o(b){var c=b.target;"focus"==b.type&&a.data(c,g,c.value);l(c)}function e(a){n(a.target)}function c(b){a.removeData(b,
g);k(b);f.remove(b,"blur",m);f.remove(b,"webkitspeechchange",e);f.remove(b,"mousedown keyup keydown focus",o)}var i="valuechange",j=a.nodeName,g="event/valuechange/history",d="event/valuechange/poll",t=50;b[i]={setup:function(){var a=j(this);if("input"==a||"textarea"==a)c(this),f.on(this,"blur",m),f.on(this,"webkitspeechchange",e),f.on(this,"mousedown keyup keydown focus",o)},tearDown:function(){c(this)}};return f},{requires:["./api","dom","./special"]});
