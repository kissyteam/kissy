/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 732 Jun 28 10:28
*/
KISSY.add("event",function(e,j){function k(a,b,d,l,g){if(e.isString(b))b=e.query(b);if(e.isArray(b)){e.each(b,function(h){q[a](h,d,l,g)});return true}if((d=e.trim(d))&&d.indexOf(v)>0){e.each(d.split(v),function(h){q[a](b,h,l,g)});return true}}function m(a){return f(a)?-1:a[t]}function i(a,b){if(f(a))return e.error("Text or comment node is not valid event target.");try{a[t]=b}catch(d){e.error(d)}}function c(a){try{a[t]=j;delete a[t]}catch(b){}}function f(a){return a.nodeType===3||a.nodeType===8}var p=
window,w=document,x=w.addEventListener?function(a,b,d){a.addEventListener&&a.addEventListener(b,d,false)}:function(a,b,d){a.attachEvent&&a.attachEvent("on"+b,d)},y=w.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)},t="ksEventTargetId",v=" ",z=e.now(),s={},q={EVENT_GUID:t,special:{},add:function(a,b,d,l){if(!k("add",a,b,d,l)){var g=m(a),h,n;if(!(g===-1||!b||!e.isFunction(d))){if(!g){i(a,g=z++);s[g]=
{target:a,events:{}}}n=s[g].events;h=!a.isCustomEventTarget&&q.special[b]||{};if(!n[b]){g=function(o,r){if(!o||!o.fixed){o=new e.EventObject(a,o,b);e.isPlainObject(r)&&e.mix(o,r)}h.setup&&h.setup(o);return(h.handle||q._handle)(a,o,n[b].listeners,l)};n[b]={handle:g,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(b,g);else x(a,h.fix||b,g)}n[b].listeners.push(d)}}},remove:function(a,b,d){if(!k("remove",a,b,d)){var l=m(a),g,h,n,o,r,u;if(l!==-1)if(l&&(g=s[l]))if(g.target===a){g=g.events||
{};if(h=g[b]){n=h.listeners;r=n.length;if(e.isFunction(d)&&r&&e.inArray(d,n)){u=[];for(o=0;o<r;++o)d!==n[o]&&u.push(n[o]);r=u.length}if(d===j||r===0){a.isCustomEventTarget||y(a,b,h.handle);delete g[b]}}if(b===j||e.isEmptyObject(g)){for(b in g)q.remove(a,b);delete s[l];c(a)}}}},_handle:function(a,b,d,l){var g,h=0,n=d.length;for(l=l||a;h<n;++h){g=d[h].call(l,b);if(g===false&&a.isCustomEventTarget||b.isImmediatePropagationStopped)break}return g},_getCache:function(a){return s[a]},_simpleAdd:x,_simpleRemove:y};
q.on=q.add;e.Event=q;p.attachEvent&&!p.addEventListener&&p.attachEvent("onunload",function(){var a,b;for(a in s)if(b=s[a].target)try{q.remove(b)}catch(d){}})});
KISSY.add("event-object",function(e,j){function k(c,f,p){this.currentTarget=c;this.originalEvent=f||{};if(f){this.type=f.type;this._fix()}else{this.type=p;this.target=c}this.fixed=true}var m=document,i="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");e.mix(k.prototype,
{_fix:function(){for(var c=this.originalEvent,f=i.length,p;f;){p=i[--f];this[p]=c[p]}if(!this.target)this.target=this.srcElement||m;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===j&&this.clientX!==j){c=m.documentElement;f=m.body;this.pageX=this.clientX+(c&&c.scrollLeft||f&&f.scrollLeft||0)-(c&&c.clientLeft||f&&f.clientLeft||0);this.pageY=this.clientY+
(c&&c.scrollTop||f&&f.scrollTop||0)-(c&&c.clientTop||f&&f.clientTop||0)}if(this.which===j)this.which=this.charCode!==j?this.charCode:this.keyCode;if(this.metaKey===j)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==j)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var c=this.originalEvent;if(c.preventDefault)c.preventDefault();else c.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var c=this.originalEvent;if(c.stopPropagation)c.stopPropagation();
else c.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var c=this.originalEvent;c.stopImmediatePropagation?c.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(c){c?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});e.EventObject=k});
KISSY.add("event-target",function(e,j){var k=e.Event,m=k.EVENT_GUID;e.EventTarget={isCustomEventTarget:true,fire:function(i,c){if((i=((k._getCache(this[m]||-1)||{}).events||{})[i])&&e.isFunction(i.handle))return i.handle(j,c)},on:function(i,c,f){k.add(this,i,c,f)},detach:function(i,c){k.remove(this,i,c)}}});
KISSY.add("event-mouseenter",function(e){var j=e.Event;e.UA.ie||e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(k){j.special[k.name]={fix:k.fix,setup:function(m){m.type=k.name},handle:function(m,i,c){var f=i.relatedTarget;try{for(;f&&f!==m;)f=f.parentNode;f!==m&&j._handle(m,i,c)}catch(p){}}}})});
