/*
Copyright 2011, KISSY UI Library v1.20
MIT Licensed
build time: Nov 28 12:38
*/
KISSY.add("base/attribute",function(h,i){function o(a,b){if(h.isString(b))return a[b];return b}function p(a,b,c,d,g,e,j){j=j||c;return a.fire(b+(c.charAt(0).toUpperCase()+c.substring(1))+"Change",{attrName:j,subAttrName:e,prevVal:d,newVal:g})}function l(a,b,c){var d=a[b]||{};if(c)a[b]=d;return d}function f(a){return l(a,"__attrs",true)}function m(a){return l(a,"__attrVals",true)}function q(a,b){for(var c=0,d=b.length;a!=i&&c<d;c++)a=a[b[c]];return a}function s(a,b,c,d,g){d=d||{};var e,j,k,r=b;if(b.indexOf(".")!==
-1){e=b.split(".");b=e.shift()}k=a.get(b);if(e)j=q(k,e);if(!(!e&&k===c))if(!(e&&j===c)){if(e){var n=j=h.clone(k),v=e.length-1;if(v>=0){for(var u=0;u<v;u++)n=n[e[u]];if(n!=i)n[e[u]]=c}c=j}if(!d.silent)if(false===p(a,"before",b,k,c,r))return false;c=a.__set(b,c);if(c===false)return c;if(!d.silent){c=m(a)[b];p(a,"after",b,k,c,r);g?g.push({prevVal:k,newVal:c,attrName:b,subAttrName:r}):p(a,"","*",[k],[c],[r],[b])}return a}}function t(){}t.INVALID={};var w=t.INVALID;h.augment(t,{getAttrs:function(){return f(this)},
getAttrVals:function(){var a={},b,c=f(this);for(b in c)a[b]=this.get(b);return a},addAttr:function(a,b,c){var d=f(this);b=h.clone(b);if(d[a])h.mix(d[a],b,c);else d[a]=b;return this},addAttrs:function(a,b){var c=this;h.each(a,function(d,g){c.addAttr(g,d)});b&&c.set(b);return c},hasAttr:function(a){return a&&f(this).hasOwnProperty(a)},removeAttr:function(a){if(this.hasAttr(a)){delete f(this)[a];delete m(this)[a]}return this},set:function(a,b,c){var d;if(h.isPlainObject(a)){var g=a;a=0;d=true;c=b;b=
[];for(a in g){d=s(this,a,g[a],c,b);if(d===false)break}var e=[],j=[],k=[],r=[];h.each(b,function(n){j.push(n.prevVal);k.push(n.newVal);e.push(n.attrName);r.push(n.subAttrName)});e.length&&p(this,"","*",j,k,r,e);return d}return s(this,a,b,c)},__set:function(a,b){var c,d=l(f(this),a,true),g=d.validator;d=d.setter;if(g=o(this,g))if(g.call(this,b,a)===false)return false;if(d=o(this,d))c=d.call(this,b,a);if(c===w)return false;if(c!==i)b=c;m(this)[a]=b},get:function(a){var b,c,d;if(a.indexOf(".")!==-1){b=
a.split(".");a=b.shift()}c=l(f(this),a).getter;d=a in m(this)?m(this)[a]:this.__getDefAttrVal(a);if(c=o(this,c))d=c.call(this,d,a);if(b)d=q(d,b);return d},__getDefAttrVal:function(a){var b=l(f(this),a),c;if(c=o(this,b.valueFn)){c=c.call(this);if(c!==i)b.value=c;delete b.valueFn;f(this)[a]=b}return b.value},reset:function(a,b){if(h.isString(a))return this.hasAttr(a)?this.set(a,this.__getDefAttrVal(a),b):this;b=a;var c=f(this),d={};for(a in c)d[a]=this.__getDefAttrVal(a);this.set(d,b);return this}});
if(i)t.prototype.addAttrs=i;return t});KISSY.add("base/base",function(h,i,o){function p(l){for(var f=this.constructor;f;){var m=f.ATTRS;if(m){var q=void 0;for(q in m)m.hasOwnProperty(q)&&this.addAttr(q,m[q],false)}f=f.superclass?f.superclass.constructor:null}if(l)for(var s in l)l.hasOwnProperty(s)&&this.__set(s,l[s])}h.augment(p,o.Target,i);return p},{requires:["./attribute","event"]});KISSY.add("base",function(h,i,o){i.Attribute=o;return i},{requires:["base/base","base/attribute"]});
