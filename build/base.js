modulex.add("base",["modulex-util","attribute"],function(t,n,r){var e,i=t("modulex-util"),a=t("attribute");e=function(t){function n(t,n){return function(r){return function(){var e=this;n?r!==f&&r.apply(e,arguments):e.callSuper.apply(e,arguments);var i=arguments.callee.__owner__.__extensions__||[];n&&i.reverse(),s(e,i,t,arguments),n?e.callSuper.apply(e,arguments):r!==f&&r.apply(e,arguments)}}}function r(t){var n=this,r=n.__extensions__,e=n.__hooks__,i=n.prototype;if(r.length&&e)for(var a in e)(!i.hasOwnProperty(a)||t.hasOwnProperty(a))&&(t[a]=t[a]||f);return d.call(n,t)}function e(t){var n,r=this;t.target===r&&(n=r[g+t.type.slice(5).slice(0,-6)],n.call(r,t.newVal,t))}function u(t){var n,r=t.get("plugins");l.each(r,function(t,e){"function"==typeof t&&(n=t,r[e]=new n)})}function o(t,n){var r,e,i=this,a=i.get("plugins");if(n=n||[],n=[i].concat(n),r=a.length)for(var u=0;r>u;u++)e=a[u][t],e&&e.apply(a[u],n)}function s(t,n,r,e){var i;if(i=n&&n.length)for(var a=0;i>a;a++){var u=n[a]&&(r?n[a].prototype[r]:n[a]);u&&u.apply(t,e||[])}}var l=i,c=a,p=l.ucfirst,g="_onSet",f=l.noop,v=c.extend({constructor:function(){var t=this;t.callSuper.apply(t,arguments);var n=t.get("listeners");if(n)for(var r in n)t.on(r,n[r]);t.initializer(),u(t),o.call(t,"pluginInitializer"),t.bindInternal(),t.syncInternal()},initializer:f,__getHook:n,__callPluginsMethod:o,bindInternal:function(){var t,n,r=this,i=r.getAttrs();for(t in i)n=g+p(t),r[n]&&r.on("after"+p(t)+"Change",e)},syncInternal:function(){for(var t,n=this,r=[],e=n.constructor,i=n.getAttrs();e;)r.push(e),e=e.superclass&&e.superclass.constructor;for(r.reverse(),t=0;t<r.length;t++){var a=r[t].ATTRS||{};for(var u in a)if(u in i){var o,s,l=g+p(u);(s=n[l])&&0!==i[u].sync&&void 0!==(o=n.get(u))&&s.call(n,o)}}},plug:function(t){var n=this;if("function"==typeof t){var r=t;t=new r}return t.pluginInitializer&&t.pluginInitializer(n),n.get("plugins").push(t),n},unplug:function(t){var n=[],r=this,e="string"==typeof t;return l.each(r.get("plugins"),function(i){var a,u=0;t&&(e?(a=i.get&&i.get("pluginId")||i.pluginId,a!==t&&(n.push(i),u=1)):i!==t&&(n.push(i),u=1)),u||i.pluginDestructor(r)}),r.setInternal("plugins",n),r},getPlugin:function(t){var n=null;return l.each(this.get("plugins"),function(r){var e=r.get&&r.get("pluginId")||r.pluginId;return e===t?(n=r,!1):void 0}),n},destructor:f,destroy:function(){var t=this,n=l.makeArray(arguments);t.get("destroyed")||(o.call(t,"pluginDestructor",n),t.destructor.apply(t,n),t.set("destroyed",!0),t.fire("destroy"),t.detach())}});l.mix(v,{version:"1.0.0",__hooks__:{initializer:n(),destructor:n("__destructor",!0)},ATTRS:{plugins:{valueFn:function(){return[]}},destroyed:{value:!1},listeners:{}},extend:function h(t,n,e){l.isArray(t)||(e=n,n=t,t=[]);var i=c.extend.call(this,n,e);if(i.__extensions__=t,r.call(i,{}),t.length){var a={},u={};l.each(t.concat(i),function(t){if(t){l.each(t.ATTRS,function(t,n){var r=a[n]=a[n]||{};l.mix(r,t)});var n,r=t.prototype;for(n in r)r.hasOwnProperty(n)&&(u[n]=r[n])}}),i.ATTRS=a,u.constructor=i,l.augment(i,u)}return i.extend=e&&e.extend||h,i.addMembers=r,i}});var d=v.addMembers;return t=v}(),r.exports=e});