/*
Copyright 2014, KISSY v5.0.0
MIT Licensed
build time: Jul 30 14:53
*/
KISSY.add("json",["./json/stringify","./json/parse"],function(l,h,m,g){l=h("./json/stringify");h=h("./json/parse");g.exports={stringify:l,parse:h}});
KISSY.add("json/stringify",["./quote","util"],function(l,h,m,g){function a(a){return 10>a?"0"+a:a}function n(k,j,b,i,c,e,f){var d=j[k];if(d&&"object"===typeof d)if("function"===typeof d.toJSON)d=d.toJSON(k);else if(d instanceof Date)d=isFinite(d.valueOf())?d.getUTCFullYear()+"-"+a(d.getUTCMonth()+1)+"-"+a(d.getUTCDate())+"T"+a(d.getUTCHours())+":"+a(d.getUTCMinutes())+":"+a(d.getUTCSeconds())+"Z":null;else if(d instanceof String||d instanceof Number||d instanceof Boolean)d=d.valueOf();void 0!==b&&
(d=b.call(j,k,d));switch(typeof d){case "number":return isFinite(d)?""+d:"null";case "string":return o.quote(d);case "boolean":return""+d;case "object":if(d)if(s.isArray(d)){for(var k=d,j=f,f=f+c,d=[],h=k.length,l=0;l<h;){var g=n(""+l,k,b,i,c,e,f);d[d.length]=void 0===g?"null":g;++l}d.length?c?(b=d.join("\n,"+f),b="[\n"+f+b+"\n"+j+"]"):b="["+d.join(",")+"]":b="[]"}else{for(var k=d,j=f,f=f+c,q,d=void 0!==i?i:s.keys(k),g=[],l=0,h=d.length;l<h;l++){q=d[l];var m=n(q,k,b,i,c,e,f);void 0!==m&&(q=o.quote(q),
q+=":",c&&(q+=" "),q+=m,g[g.length]=q)}g.length?c?(b=g.join(",\n"+f),b="{\n"+f+b+"\n"+j+"}"):b="{"+g.join(",")+"}":b="{}"}else b="null";return b}}var o=h("./quote"),s=h("util");g.exports=function(a,j,b){var i="",c,e;j&&("function"===typeof j?e=j:s.isArray(j)&&(c=j));"number"===typeof b?(b=Math.min(10,b),i=Array(b+1).join(" ")):"string"===typeof b&&(i=b.slice(0,10));return n("",{"":a},e,c,i,[],"")}});
KISSY.add("json/quote",["util"],function(l,h,m,g){var a={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},n={},o=/["\b\f\n\r\t\x00-\x1f]/g,s=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h("util").each(a,function(a,j){n[a]=j});n["\\/"]="/";n["\\\\"]="\\";g.exports={quote:function(k){return'"'+k.replace(o,function(j){var b;if(!(b=a[j]))b="\\u"+("0000"+j.charCodeAt(0).toString(16)).slice(-4);return b})+'"'},unQuote:function(a){return a.slice(1,a.length-1).replace(s,function(a){var b;
if(!(b=n[a]))b=String.fromCharCode(parseInt(a.slice(2),16));return b})}}});
KISSY.add("json/parse",["./parser","./quote","util"],function(l,h,m,g){function a(g,k,j){var b=g[k],i,c,e;if("object"===typeof b)if(o.isArray(b)){i=0;c=b.length;for(var f=[];i<c;)e=a(b,""+i,j),void 0!==e&&(f[f.length]=e);b=f}else{f=o.keys(b);i=0;for(c=f.length;i<c;i++){var d=f[i];e=a(b,d,j);void 0===e?delete b[d]:b[d]=e}}return j.call(g,k,b)}var n=h("./parser"),l=h("./quote"),o=h("util");n.yy={unQuote:l.unQuote};g.exports=function(g,k){var j=n.parse(""+g);return k?a({"":j},"",k):j}});
KISSY.add("json/parser",[],function(l,h,m,g){l=function(a){function g(b,a){for(var c in a)b[c]=a[c]}function l(b,a,c){if(b){var e,f,d=0,c=c||null;if("[object Array]"===Object.prototype.toString.call(b)){f=b.length;for(e=b[0];d<f&&!1!==a.call(c,e,d,b);e=b[++d]);}else for(e in b)if(!1===a.call(c,b[e],e,b))break}}var h={},k=function(b){this.rules=[];g(this,b);this.resetInput(this.input)};k.prototype={resetInput:function(b){g(this,{input:b,matched:"",stateStack:[k.STATIC.INITIAL],match:"",text:"",firstLine:1,
lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],a=[];this.mapState&&(b=this.mapState(b));l(this.rules,function(c){var e=c.state||c[3];if(e){a:{for(var f=0,d=e.length;f<d;f++)if(e[f]===b){e=!0;break a}e=!1}e&&a.push(c)}else b===k.STATIC.INITIAL&&a.push(c)});return a},pushState:function(b){this.stateStack.push(b)},popState:function(b){for(var b=b||1,a;b--;)a=this.stateStack.pop();return a},showDebugInfo:function(){var b=
k.STATIC.DEBUG_CONTEXT_LIMIT,a=this.matched,c=this.match,e=this.input,a=a.slice(0,a.length-c.length),a=(a.length>b?"...":"")+a.slice(0-b).replace(/\n/," "),c=c+e,c=c.slice(0,b)+(c.length>b?"...":"");return a+c+"\n"+Array(a.length+1).join("-")+"^"},mapSymbol:function(b){return this.symbolMap[b]},mapReverseSymbol:function(b){var a=this.symbolMap,c,e=this.reverseSymbolMap;if(!e&&a)for(c in e=this.reverseSymbolMap={},a)e[a[c]]=c;return e?e[b]:b},lex:function(){var b=this.input,i,c,e,f=this.getCurrentRules();
this.match=this.text="";if(!b)return this.mapSymbol(k.STATIC.END_TAG);for(i=0;i<f.length;i++){c=f[i];var d=c.token||c[0];e=c.action||c[2]||a;if(c=b.match(c.regexp||c[1])){if(i=c[0].match(/\n.*/g))this.lineNumber+=i.length;g(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:i?i[i.length-1].length-1:this.lastColumn+c[0].length});i=this.match=c[0];this.matches=c;this.text=i;this.matched+=i;e=e&&e.call(this);e=e===a?d:this.mapSymbol(e);this.input=b=b.slice(i.length);
return e?e:this.lex()}}}};k.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var j=new k({rules:[["b",/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],["c",/^,/,0],["d",/^:/,0],["e",/^\[/,0],["f",/^\]/,0],["g",/^\{/,0],["h",/^\}/,0],["i",/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],["j",/^true|false/,0],["k",/^null/,0],["l",/^./,0]]});h.lexer=j;j.symbolMap={$EOF:"a",STRING:"b",COMMA:"c",COLON:"d",LEFT_BRACKET:"e",RIGHT_BRACKET:"f",LEFT_BRACE:"g",
RIGHT_BRACE:"h",NUMBER:"i",BOOLEAN:"j",NULL:"k",INVALID:"l",$START:"m",json:"n",value:"o",object:"p",array:"q",elementList:"r",member:"s",memberList:"t"};h.productions=[["m",["n"]],["n",["o"],function(){return this.$1}],["o",["b"],function(){return this.yy.unQuote(this.$1)}],["o",["i"],function(){return parseFloat(this.$1)}],["o",["p"],function(){return this.$1}],["o",["q"],function(){return this.$1}],["o",["j"],function(){return"true"===this.$1}],["o",["k"],function(){return null}],["r",["o"],function(){return[this.$1]}],
["r",["r","c","o"],function(){this.$1[this.$1.length]=this.$3;return this.$1}],["q",["e","f"],function(){return[]}],["q",["e","r","f"],function(){return this.$2}],["s",["b","d","o"],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],["t",["s"],function(){var a={};a[this.$1.key]=this.$1.value;return a}],["t",["t","c","s"],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],["p",["g","h"],function(){return{}}],["p",["g","t","h"],function(){return this.$2}]];h.table={gotos:{"0":{n:7,
o:8,q:9,p:10},2:{o:12,r:13,q:9,p:10},3:{s:16,t:17},18:{o:23,q:9,p:10},20:{o:24,q:9,p:10},21:{s:25}},action:{"0":{b:[1,a,1],e:[1,a,2],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},1:{a:[2,2],f:[2,2],c:[2,2],h:[2,2]},2:{b:[1,a,1],e:[1,a,2],f:[1,a,11],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},3:{b:[1,a,14],h:[1,a,15]},4:{a:[2,3],f:[2,3],c:[2,3],h:[2,3]},5:{a:[2,6],f:[2,6],c:[2,6],h:[2,6]},6:{a:[2,7],f:[2,7],c:[2,7],h:[2,7]},7:{a:[0]},8:{a:[2,1]},9:{a:[2,5],f:[2,5],c:[2,5],h:[2,5]},10:{a:[2,4],f:[2,4],c:[2,
4],h:[2,4]},11:{a:[2,10],f:[2,10],c:[2,10],h:[2,10]},12:{f:[2,8],c:[2,8]},13:{c:[1,a,18],f:[1,a,19]},14:{d:[1,a,20]},15:{a:[2,15],f:[2,15],c:[2,15],h:[2,15]},16:{h:[2,13],c:[2,13]},17:{c:[1,a,21],h:[1,a,22]},18:{b:[1,a,1],e:[1,a,2],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},19:{a:[2,11],f:[2,11],c:[2,11],h:[2,11]},20:{b:[1,a,1],e:[1,a,2],g:[1,a,3],i:[1,a,4],j:[1,a,5],k:[1,a,6]},21:{b:[1,a,14]},22:{a:[2,16],f:[2,16],c:[2,16],h:[2,16]},23:{f:[2,9],c:[2,9]},24:{h:[2,12],c:[2,12]},25:{h:[2,14],c:[2,14]}}};
h.parse=function(b,i){var c=this.lexer,e,f,d,g=this.table,j=g.gotos,g=g.action,k=this.productions,h=[null],l=i?"in file: "+i+" ":"",p=[0];for(c.resetInput(b);;){e=p[p.length-1];f||(f=c.lex());d=f?g[e]&&g[e][f]:null;if(!d){f=[];if(g[e])for(var n in g[e])f.push(this.lexer.mapReverseSymbol(n));c=l+"syntax error at line "+c.lineNumber+":\n"+c.showDebugInfo()+"\nexpect "+f.join(", ");throw Error(c);}switch(d[0]){case 1:p.push(f);h.push(c.text);p.push(d[2]);f=null;break;case 2:var r=k[d[1]];e=r.symbol||
r[0];d=r.action||r[2];var m=(r.rhs||r[1]).length,o=0,s,r=h[h.length-m];s=a;for(this.$$=r;o<m;o++)this["$"+(m-o)]=h[h.length-1-o];d&&(s=d.call(this));r=s!==a?s:this.$$;p=p.slice(0,-2*m);h=h.slice(0,-1*m);p.push(e);h.push(r);p.push(j[p[p.length-2]][p[p.length-1]]);break;case 0:return r}}};return h}();"undefined"!==typeof g&&(g.exports=l)});
