/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable/base",function(i,g,p,s){function n(b,c){c=c||{};if(!("markupType"in c))if(c.panelCls)c.markupType=1;else if(c.panels)c.markupType=2;for(var j=this.constructor;j;){c=i.merge(j.Config,c);j=j.superclass?j.superclass.constructor:null}this.container=g.get(b);this.config=c;this.activeIndex=this.completedIndex=c.activeIndex;if(!(this.activeIndex>-1))if(typeof c.switchTo!="number")this.completedIndex=this.activeIndex=0;this._init();this._initPlugins();this.fire(r);this.activeIndex>-1||
typeof c.switchTo=="number"&&this.switchTo(c.switchTo)}var v=p.Target,r="init",f={originalEvent:{target:1}};n.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};n.Plugins=[];i.augment(n,v,{_initPlugins:function(){for(var b=this,c=b.constructor;c;){i.each(c.Plugins,function(j){j.init&&
j.init(b)});c=c.superclass?c.superclass.constructor:null}},_init:function(){var b=this.config;this._parseMarkup();b.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var b=this.container,c=this.config,j,k,h=[],q=[];switch(c.markupType){case 0:if(j=g.get("."+c.navCls,b))h=g.children(j);k=g.get("."+c.contentCls,b);q=g.children(k);break;case 1:h=g.query("."+c.triggerCls,b);q=g.query("."+c.panelCls,b);break;case 2:h=c.triggers;q=c.panels}b=q.length;this.length=b/c.steps;if(c.hasTriggers&&b>0&&
h.length===0)h=this._generateTriggersMarkup(this.length);this.triggers=i.makeArray(h);this.panels=i.makeArray(q);this.content=k||q[0].parentNode;this.nav=j||c.hasTriggers&&h[0].parentNode},_generateTriggersMarkup:function(b){var c=this.config,j=g.create("<ul>"),k,h;j.className=c.navCls;for(h=0;h<b;h++){k=g.create("<li>");if(h===this.activeIndex)k.className=c.activeTriggerCls;k.innerHTML=h+1;j.appendChild(k)}this.container.appendChild(j);return g.children(j)},_bindTriggers:function(){var b=this,c=
b.config,j=b.triggers,k,h,q=j.length;for(h=0;h<q;h++)(function(x){k=j[x];p.on(k,"click",function(){b._onFocusTrigger(x)});if(c.triggerType==="mouse"){p.on(k,"mouseenter",function(){b._onMouseEnterTrigger(x,f)});p.on(k,"mouseleave",function(){b._onMouseLeaveTrigger(x,f)})}})(h)},_onFocusTrigger:function(b){if(this._triggerIsValid(b)){this._cancelSwitchTimer();this.switchTo(b,s,f)}},_onMouseEnterTrigger:function(b){var c=this;if(c._triggerIsValid(b))c.switchTimer=i.later(function(){c.switchTo(b,s,f)},
c.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(b){return this.activeIndex!==b},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=s}},switchTo:function(b,c,j,k){var h=this,q=h.config,x=h.triggers,t=h.panels,l=h.activeIndex,o=q.steps,y=l*o,m=b*o;if(!h._triggerIsValid(b))return h;if(h.fire("beforeSwitch",{toIndex:b})===false)return h;if(q.hasTriggers)h._switchTrigger(l>-1?x[l]:null,x[b]);if(c===s)c=
b>l?"forward":"backward";h._switchView(l>-1?t.slice(y,y+o):null,t.slice(m,m+o),b,c,j,function(){k&&k.call(h,b);h.completedIndex=b});h.activeIndex=b;return h},_switchTrigger:function(b,c){var j=this.config.activeTriggerCls;b&&g.removeClass(b,j);g.addClass(c,j)},_switchView:function(b,c,j,k,h,q){b&&g.css(b,"display","none");g.css(c,"display","block");this._fireOnSwitch(j,h);q&&q.call(this)},_fireOnSwitch:function(b,c){this.fire("switch",i.mix(c||{},{currentIndex:b}))},prev:function(b){var c=this.activeIndex;
this.switchTo(c>0?c-1:this.length-1,"backward",b)},next:function(b){var c=this.activeIndex;this.switchTo(c<this.length-1?c+1:0,"forward",b)}});return n},{requires:["dom","event"]});
KISSY.add("switchable/aria",function(i,g,p,s){function n(){this.stop&&this.stop()}function v(){this.start&&this.start()}s.Plugins.push({name:"aria",init:function(f){if(f.config.aria){var b=f.container;p.on(b,"focusin",n,f);p.on(b,"focusout",v,f)}}});var r=["a","input","button","object"];return{setTabIndex:function(f,b){f.tabIndex=b;g.query("*",f).each(function(c){var j=c.nodeName.toLowerCase();if(i.inArray(j,r)){g.hasAttr(c,"oriTabIndex")||g.attr(c,"oriTabIndex",c.tabIndex);c.tabIndex=b!=-1?g.attr(c,
"oriTabIndex"):b}})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/accordion/base",function(i,g,p){function s(n,v){if(!(this instanceof s))return new s(n,v);s.superclass.constructor.apply(this,arguments);return 0}i.extend(s,p,{_switchTrigger:function(n,v){var r=this.config;r.multiple?g.toggleClass(v,r.activeTriggerCls):s.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(n){return s.superclass._triggerIsValid.call(this,n)||this.config.multiple},_switchView:function(n,v,r,f,b,c){var j=v[0];if(this.config.multiple){g.toggle(j);
this._fireOnSwitch(r,b);c.call(this)}else s.superclass._switchView.apply(this,arguments)}});s.Plugins=[];s.Config={markupType:1,triggerType:"click",multiple:false};return s},{requires:["dom","../base"]});
KISSY.add("switchable/accordion/aria",function(i,g,p){function s(d){var w;i.each(this.triggers,function(B){if(B==d||h.contains(B,d))w=B});return w}function n(d){switch(d.keyCode){case q:case x:d.ctrlKey&&!d.altKey&&!d.shiftKey&&d.halt();break;case e:d.ctrlKey&&!d.altKey&&d.halt()}}function v(d){var w=d.target,B=this.triggers,C=!d.ctrlKey&&!d.shiftKey&&!d.altKey,E=d.ctrlKey&&!d.shiftKey&&!d.altKey;switch(d.keyCode){case z:case u:if(s.call(this,w)&&C){this.switchTo(this.focusIndex);d.halt()}break;case o:case y:if(s.call(this,
w)){f.call(this);d.halt()}break;case m:case a:if(s.call(this,w)){b.call(this);d.halt()}break;case x:if(E){d.halt();b.call(this)}break;case q:if(E){d.halt();f.call(this)}break;case l:if(C){w=this.focusIndex;this.focusIndex=0;r.call(this,w,0,true);d.halt()}break;case t:if(C){w=B.length-1;B=this.focusIndex;this.focusIndex=w;r.call(this,B,w,true);d.halt()}break;case e:if(d.ctrlKey&&!d.altKey){d.halt();d.shiftKey?f.call(this):b.call(this)}}}function r(d,w,B){var C=this.triggers;if(i.isNumber(d))var E=
C[d];d=C[w];if(E){A(E,"-1");h.removeClass(E,j);E.setAttribute("aria-selected","false")}B&&d.focus();A(d,"0");h.addClass(d,j);d.setAttribute("aria-selected","true")}function f(){var d=this.triggers,w=this.focusIndex;d=this.focusIndex=w==0?d.length-1:w-1;r.call(this,w,d,true)}function b(){var d=this.focusIndex,w=this.focusIndex=d==this.triggers.length-1?0:d+1;r.call(this,d,w,true)}function c(d){var w=!!d.originalEvent.target,B=this.config.multiple,C=this.completedIndex;d=d.currentIndex;var E=this.triggers[d],
F=this.panels[d];if(C>-1){var D=this.triggers[C];C=this.panels[C];A(D,"-1");w&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}A(E,"0");w=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",w=="false"?"true":"false");E.setAttribute("aria-expanded",w=="false"?"false":"true");r.call(this,this.focusIndex,d);this.focusIndex=d}var j="ks-switchable-select",k=i.Event,h=i.DOM,q=33,x=34,t=35,l=36,o=37,y=38,m=39,a=40,e=9,u=32,z=13;i.mix(p.Config,{aria:true});
p.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var w=d.container,B=d.activeIndex;h.attr(w,"aria-multiselectable",d.config.multiple?"true":"false");h.attr(w,"role","tablist");var C=d.triggers,E=d.panels,F=0;i.each(E,function(D){if(!D.id)D.id=i.guid("ks-switchable-tab-panel")});i.each(C,function(D){if(!D.id)D.id=i.guid("ks-switchable-tab")});i.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",B==F?"true":"false");D.setAttribute("aria-selected",B==F?"true":
"false");D.setAttribute("aria-controls",E[F].id);A(D,B==F?"0":"-1");F++});F=0;i.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});d.on("switch",c,d);if(B>-1)d.focusIndex=B;k.on(w,"keydown",v,d);k.on(w,"keypress",n,d)}}});var A=g.setTabIndex},{requires:["../aria","./base"]});
KISSY.add("switchable/autoplay",function(i,g,p,s){i.mix(p.Config,{autoplay:false,interval:5,pauseOnHover:true});p.Plugins.push({name:"autoplay",init:function(n){function v(){b=i.later(function(){n.paused||n.switchTo(n.activeIndex<n.length-1?n.activeIndex+1:0,"forward")},f,true)}var r=n.config,f=r.interval*1E3,b;if(r.autoplay){if(r.pauseOnHover){g.on(n.container,"mouseenter",function(){n.stop()});g.on(n.container,"mouseleave",function(){n.start()})}v();n.stop=function(){if(b){b.cancel();b=s}n.paused=
true};n.start=function(){if(b){b.cancel();b=s}n.paused=false;v()}}}});return p},{requires:["event","./base"]});KISSY.add("switchable/autorender",function(i,g,p,s){s.autoRender=function(n,v){n="."+(n||"KS_Widget");g.query(n,v).each(function(r){var f=r.getAttribute("data-widget-type"),b;if(f&&"Switchable Tabs Slide Carousel Accordion".indexOf(f)>-1)try{if(b=r.getAttribute("data-widget-config"))b=b.replace(/'/g,'"');new i[f](r,p.parse(b))}catch(c){}})}},{requires:["dom","json","switchable/base"]});
KISSY.add("switchable/carousel/base",function(i,g,p,s,n){function v(f,b){if(!(this instanceof v))return new v(f,b);v.superclass.constructor.apply(this,arguments)}var r={originalEvent:{target:1}};v.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};v.Plugins=[];i.extend(v,s,{_init:function(){var f=this;v.superclass._init.call(f);var b=f.config,c=b.disableBtnCls,j=false;i.each(["prev","next"],function(k){var h=f[k+
"Btn"]=g.get("."+b[k+"BtnCls"],f.container);p.on(h,"click",function(q){q.preventDefault();j||g.hasClass(h,c)||f[k](r)})});if(!b.circular){f.on("beforeSwitch",function(){j=true});f.on("switch",function(k){k=k.currentIndex;k=k===0?f.prevBtn:k===f.length-1?f.nextBtn:n;g.removeClass([f.prevBtn,f.nextBtn],c);k&&g.addClass(k,c);j=false})}p.on(f.panels,"click",function(){f.fire("itemSelected",{item:this})})}});return v},{requires:["dom","event","../base"]});
KISSY.add("switchable/carousel/aria",function(i,g,p,s,n){function v(m){var a=m.currentIndex,e=this.activeIndex,u=this.panels,z=u[a*this.config.steps],A=this.triggers;a=A[a];if((m=!!m.originalEvent.target)||e==-1){i.each(A,function(d){o(d,-1)});i.each(u,function(d){o(d,-1)});a&&o(a,0);o(z,0);m&&z.focus()}}function r(m){var a;i.each(this.triggers,function(e){if(e==m||g.contains(e,m)){a=e;return false}});return a}function f(m){var a=m.target;switch(m.keyCode){case x:case q:if(a=r.call(this,a)){a=a;var e=
g.next(a),u=this.triggers;e||(e=u[0]);o(a,-1);if(e){o(e,0);e.focus()}m.halt()}break;case h:case k:if(a=r.call(this,a)){a=a;e=g.prev(a);u=this.triggers;e||(e=u[u.length-1]);o(a,-1);if(e){o(e,0);e.focus()}m.halt()}break;case l:case t:if(a=r.call(this,a)){this.switchTo(i.indexOf(a,this.triggers),undefined,y);m.halt()}}}function b(m){var a;i.each(this.panels,function(e){if(e==m||g.contains(e,m)){a=e;return false}});return a}function c(m){var a=i.indexOf(m,this.panels),e=this.config.steps,u=Math.floor(a/
e);if(u==this.activeIndex)return 1;if(a%e==0||a%e==e-1){this.switchTo(u,undefined,undefined,function(){m.focus()});return 0}return 1}function j(m){var a=m.target;switch(m.keyCode){case x:case q:if(a=b.call(this,a)){a=a;var e=g.next(a),u=this.panels;e||(e=u[0]);o(a,-1);o(e,0);c.call(this,e)&&e.focus();m.halt()}break;case h:case k:if(a=b.call(this,a)){a=a;e=g.prev(a);u=this.panels;e||(e=u[u.length-1]);o(a,-1);o(e,0);c.call(this,e)&&e.focus();m.halt()}break;case l:case t:if(a=b.call(this,a)){this.fire("itemSelected",
{item:a});m.halt()}}}var k=37,h=38,q=39,x=40,t=32,l=13,o=s.setTabIndex,y={originalEvent:{target:1}};i.mix(n.Config,{aria:true});n.Plugins.push({name:"aria",init:function(m){if(m.config.aria){var a=m.triggers,e=m.panels,u=m.content,z=m.activeIndex;if(!u.id)u.id=i.guid("ks-switchbale-content");u.setAttribute("role","listbox");var A=0;i.each(a,function(d){o(d,z==A?"0":"-1");d.setAttribute("role","button");d.setAttribute("aria-controls",u.id);A++});A=0;i.each(e,function(d){o(d,"-1");d.setAttribute("role",
"option");A++});m.on("switch",v,m);(a=m.nav)&&p.on(a,"keydown",f,m);p.on(u,"keydown",j,m);a=m.prevBtn;e=m.nextBtn;if(a){o(a,0);a.setAttribute("role","button");p.on(a,"keydown",function(d){if(d.keyCode==l||d.keyCode==t){m.prev(y);d.preventDefault()}})}if(e){o(e,0);e.setAttribute("role","button");p.on(e,"keydown",function(d){if(d.keyCode==l||d.keyCode==t){m.next(y);d.preventDefault()}})}}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/effect",function(i,g,p,s,n,v){var r;i.mix(n.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});n.Effects={none:function(f,b,c){f&&g.css(f,"display","none");g.css(b,"display","block");c&&c()},fade:function(f,b,c){f&&f.length!==1&&i.error("fade effect only supports steps == 1.");var j=this,k=j.config,h=f?f[0]:null,q=b[0];if(j.anim){j.anim.stop();g.css(j.anim.fromEl,{zIndex:1,opacity:0});g.css(j.anim.toEl,{zIndex:9})}g.css(q,"opacity",1);if(h){j.anim=(new s(h,
{opacity:0},k.duration,k.easing,function(){j.anim=v;g.css(q,"z-index",9);g.css(h,"z-index",1);c&&c()},k.nativeAnim)).run();j.anim.toEl=q;j.anim.fromEl=h}else{g.css(q,"z-index",9);c&&c()}},scroll:function(f,b,c,j){var k=this;f=k.config;b=f.effect==="scrollx";var h={};h[b?"left":"top"]=-(k.viewSize[b?0:1]*j)+"px";k.anim&&k.anim.stop();k.anim=(new s(k.content,h,f.duration,f.easing,function(){k.anim=v;c()},f.nativeAnim)).run()}};r=n.Effects;r.scrollx=r.scrolly=r.scroll;n.Plugins.push({name:"effect",init:function(f){var b=
f.config,c=b.effect,j=f.panels,k=f.content,h=b.steps,q=f.activeIndex,x=j.length;f.viewSize=[b.viewSize[0]||j[0].offsetWidth*h,b.viewSize[1]||j[0].offsetHeight*h];if(c!=="none"){i.each(j,function(y){g.css(y,"display","block")});switch(c){case "scrollx":case "scrolly":g.css(k,"position","absolute");g.css(k.parentNode,"position","relative");if(c==="scrollx"){g.css(j,"float","left");g.width(k,f.viewSize[0]*(x/h))}break;case "fade":var t=q*h,l=t+h-1,o;i.each(j,function(y,m){o=m>=t&&m<=l;g.css(y,{opacity:o?
1:0,position:"absolute",zIndex:o?9:1})})}}}});i.augment(n,{_switchView:function(f,b,c,j,k,h){var q=this,x=q.config.effect;(i.isFunction(x)?x:r[x]).call(q,f,b,function(){q._fireOnSwitch(c,k);h&&h.call(q)},c,j)}});return n},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/circular",function(i,g,p,s){function n(l,o,y,m,a){var e=this;l=e.config;o=e.length;var u=e.activeIndex,z=l.scrollType===t,A=z?c:j,d=e.viewSize[z?0:1];z=-d*m;var w={},B,C=a===x;if(B=C&&u===0&&m===o-1||a===q&&u===o-1&&m===0)z=v.call(e,e.panels,m,C,A,d);w[A]=z+h;e.anim&&e.anim.stop();e.anim=(new p(e.content,w,l.duration,l.easing,function(){B&&r.call(e,e.panels,m,C,A,d);e.anim=undefined;y()},l.nativeAnim)).run()}function v(l,o,y,m,a){var e=this.config.steps;o=this.length;var u=y?
o-1:0,z=(u+1)*e;for(e=u*e;e<z;e++){g.css(l[e],f,b);g.css(l[e],m,(y?-1:1)*a*o)}return y?a:-a*o}function r(l,o,y,m,a){var e=this.config.steps;o=this.length;var u=y?o-1:0,z=(u+1)*e;for(e=u*e;e<z;e++){g.css(l[e],f,k);g.css(l[e],m,k)}g.css(this.content,m,y?-a*(o-1):k)}var f="position",b="relative",c="left",j="top",k="",h="px",q="forward",x="backward",t="scrollx";i.mix(s.Config,{circular:false});s.Plugins.push({name:"circular",init:function(l){l=l.config;if(l.circular&&(l.effect===t||l.effect==="scrolly")){l.scrollType=
l.effect;l.effect=n}}})},{requires:["dom","anim","switchable/base","switchable/effect"]});
KISSY.add("switchable/countdown",function(i,g,p,s,n,v){i.mix(n.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});n.Plugins.push({name:"countdown",init:function(r){function f(l){b();t=(new s(h[l],x,k-1)).run()}function b(){if(j){clearTimeout(j);j=null}if(t){t.stop();t=v}}var c=r.config,j,k=c.interval,h=[],q=c.countdownFromStyle,x=c.countdownToStyle,t;if(!(!c.autoplay||!c.hasTriggers||!c.countdown)){i.each(r.triggers,function(l,o){l.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
l.innerHTML+"</div>";h[o]=l.firstChild});if(c.pauseOnHover){p.on(r.container,"mouseenter",function(){b();var l=h[r.activeIndex];if(q)t=(new s(l,q,0.2,"easeOut")).run();else g.removeAttr(l,"style")});p.on(r.container,"mouseleave",function(){b();var l=r.activeIndex;g.removeAttr(h[l],"style");j=setTimeout(function(){f(l)},200)})}r.on("beforeSwitch",function(){b();g.attr(h[r.activeIndex],"style",q||"")});r.on("switch",function(l){r.paused||f(l.currentIndex)})}}});return n},{requires:["dom","event","anim",
"switchable/base"]});
KISSY.add("switchable/lazyload",function(i,g,p){var s="beforeSwitch",n="img-src",v="area-data",r={};r[n]="data-ks-lazyload-custom";r[v]="ks-datalazyload-custom";i.mix(p.Config,{lazyDataType:v});p.Plugins.push({name:"lazyload",init:function(f){function b(q){var x=j.steps;q=q.toIndex*x;c.loadCustomLazyData(f.panels.slice(q,q+x),k);a:{var t,l;if(q=(x=k===n)?"img":k===v?"textarea":""){q=g.query(q,f.container);t=0;for(l=q.length;t<l;t++)if(x?g.attr(q[t],h):g.hasClass(q[t],h)){x=false;break a}}x=true}x&&
f.detach(s,b)}var c=i.require("datalazyload"),j=f.config,k=j.lazyDataType,h=r[k];!c||!k||!h||f.on(s,b)}});return p},{requires:["dom","switchable/base"]});KISSY.add("switchable/slide/base",function(i,g){function p(s,n){if(!(this instanceof p))return new p(s,n);p.superclass.constructor.apply(this,arguments);return 0}p.Config={autoplay:true,circular:true};p.Plugins=[];i.extend(p,g);return p},{requires:["../base"]});
KISSY.add("switchable/slide/aria",function(i,g,p,s,n){function v(t){var l=this.panels,o=this.__slideIndex;switch(t.keyCode){case j:case c:o++;if(o==l.length)o=0;this.__slideIndex=o;this.switchTo(o,k,undefined,function(){l[o].focus()});t.halt();break;case b:case f:o--;if(o==-1)o=l.length-1;this.__slideIndex=o;this.switchTo(o,h,undefined,function(){l[o].focus()});t.halt()}}function r(t){var l=this;if(i.inArray(t.target,l.panels)){if(x){clearTimeout(x);x=undefined}switch(t.keyCode){case j:case b:case f:case c:t.halt()}x=
setTimeout(function(){v.call(l,t);x=undefined},200)}}var f=37,b=38,c=39,j=40,k="forward",h="backward";i.mix(n.Config,{aria:true});var q=s.setTabIndex;n.Plugins.push({name:"aria",init:function(t){if(t.config.aria){var l=t.panels,o=0,y=t.activeIndex;i.each(t.triggers,function(a){q(a,"-1");o++});o=0;i.each(l,function(a){q(a,y==o?"0":"-1");g.attr(a,"role","option");o++});var m=t.content;g.attr(m,"role","listbox");p.on(m,"keydown",r,t);q(l[0],0);if(y>-1)t.__slideIndex=y;t.on("switch",function(a){a=a.currentIndex;
var e=t.completedIndex;t.__slideIndex=a;e!=-1&&q(l[e],-1);q(l[a],0)})}}});var x},{requires:["dom","event","../aria","./base"]});KISSY.add("switchable/tabs/base",function(i,g){function p(s,n){if(!(this instanceof p))return new p(s,n);p.superclass.constructor.call(this,s,n);return 0}i.extend(p,g);p.Config={};p.Plugins=[];return p},{requires:["../base"]});
KISSY.add("switchable/tabs/aria",function(i,g,p){function s(a){var e;i.each(this.triggers,function(u){if(u==a||b.contains(u,a))e=u});return e}function n(a){switch(a.keyCode){case c:case j:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case o:a.ctrlKey&&!a.altKey&&a.halt()}}function v(a){var e=a.target,u=this.triggers,z=!a.ctrlKey&&!a.shiftKey&&!a.altKey,A=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case q:case x:if(s.call(this,e)){this.prev(y);a.halt()}break;case t:case l:if(s.call(this,
e)){this.next(y);a.halt()}break;case j:if(A){a.halt();this.next(y)}break;case c:if(A){a.halt();this.prev(y)}break;case h:if(z){this.switchTo(0,undefined,y);a.halt()}break;case k:if(z){this.switchTo(u.length-1,undefined,y);a.halt()}break;case o:if(a.ctrlKey&&!a.altKey){a.halt();a.shiftKey?this.prev(y):this.next(y)}}}function r(a){var e=!!a.originalEvent.target,u=this.completedIndex,z=a.currentIndex;if(u!=z){a=this.triggers[u];var A=this.triggers[z];u=this.panels[u];z=this.panels[z];a&&m(a,"-1");m(A,
"0");e&&A.focus();u&&u.setAttribute("aria-hidden","true");z.setAttribute("aria-hidden","false")}}var f=i.Event,b=i.DOM,c=33,j=34,k=35,h=36,q=37,x=38,t=39,l=40,o=9,y={originalEvent:{target:1}};i.mix(p.Config,{aria:true});p.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var e=a.triggers,u=a.activeIndex,z=a.panels,A=a.container;b.attr(A,"role","tablist");var d=0;i.each(e,function(w){w.setAttribute("role","tab");m(w,u==d?"0":"-1");if(!w.id)w.id=i.guid("ks-switchable");d++});d=0;i.each(z,
function(w){var B=e[d];w.setAttribute("role","tabpanel");w.setAttribute("aria-hidden",u==d?"false":"true");w.setAttribute("aria-labelledby",B.id);d++});a.on("switch",r,a);f.on(A,"keydown",v,a);f.on(A,"keypress",n,a)}}});var m=g.setTabIndex},{requires:["../aria","./base"]});
KISSY.add("switchable",function(i,g,p,s,n,v,r,f,b,c,j,k,h,q,x,t){i.Switchable=g;p={Accordion:s,Carousel:f,Slide:q,Tabs:t};i.mix(i,p);i.mix(g,p);return g},{requires:["switchable/base","switchable/aria","switchable/accordion/base","switchable/accordion/aria","switchable/autoplay","switchable/autorender","switchable/carousel/base","switchable/carousel/aria","switchable/circular","switchable/countdown","switchable/effect","switchable/lazyload","switchable/slide/base","switchable/slide/aria","switchable/tabs/base",
"switchable/tabs/aria"]});
