/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 17 18:43
*/
KISSY.add("switchable/accordion/aria",function(d,c,f,e,k){function i(a){var b=null;d.each(this.triggers,function(h){if(h==a||c.contains(h,a))b=h});return b}function m(a){var b;d.each(this.panels,function(h){if(h==a||c.contains(h,a))b=h});return b}function j(a){var b=i.call(this,a);b||(a=m.call(this,a),b=this.triggers[d.indexOf(a,this.panels)]);return b}function o(a){switch(a.keyCode){case v:case u:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case x:a.ctrlKey&&!a.altKey&&a.halt()}}function l(g){var c=
g.target,o=this.triggers,e=!g.ctrlKey&&!g.shiftKey&&!g.altKey,l=g.ctrlKey&&!g.shiftKey&&!g.altKey;switch(g.keyCode){case y:case r:if((c=i.call(this,c))&&e)this.switchTo(d.indexOf(c,this.triggers)),g.halt();break;case s:case q:if(c=i.call(this,c))b.call(this,c),g.halt();break;case z:case p:if(c=i.call(this,c))h.call(this,c),g.halt();break;case u:l&&(g.halt(),c=j.call(this,c),h.call(this,c));break;case v:l&&(g.halt(),c=j.call(this,c),b.call(this,c));break;case n:e&&(j.call(this,c),a.call(this,0,!0),
g.halt());break;case t:e&&(j.call(this,c),a.call(this,o.length-1,!0),g.halt());break;case x:g.ctrlKey&&!g.altKey&&(g.halt(),c=j.call(this,c),g.shiftKey?b.call(this,c):h.call(this,c))}}function a(a,b){var g=this.triggers,h=g[a];d.each(g,function(a){a!==h&&(w(a,"-1"),c.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});b&&h.focus();w(h,"0");c.addClass(h,"ks-switchable-select");h.setAttribute("aria-selected","true")}function b(b){var g=this.triggers,b=d.indexOf(b,g);a.call(this,
0==b?g.length-1:b-1,!0)}function h(b){var g=this.triggers,b=d.indexOf(b,g);a.call(this,b==g.length-1?0:b+1,!0)}function g(b){var g=!(!b.originalEvent.target&&!b.originalEvent.srcElement),b=b.currentIndex,h=this.panels,c=this.triggers,j=c[b],p=h[b];this.config.multiple||(d.each(h,function(a){a!==p&&a.setAttribute("aria-hidden","true")}),d.each(c,function(a){a!==j&&a.setAttribute("aria-hidden","true")}));h=p.getAttribute("aria-hidden");p.setAttribute("aria-hidden","false"==h?"true":"false");j.setAttribute("aria-expanded",
"false"==h?"false":"true");a.call(this,b,g)}var v=33,u=34,t=35,n=36,s=37,q=38,z=39,p=40,x=9,r=32,y=13;d.mix(k.Config,{aria:!0});k.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var b=a.container,h=a.activeIndex;c.attr(b,"aria-multiselectable",a.config.multiple?"true":"false");a.nav&&c.attr(a.nav,"role","tablist");var j=a.triggers,p=a.panels,r=0;d.each(p,function(a){a.id||(a.id=d.guid("ks-accordion-tab-panel"))});d.each(j,function(a){a.id||(a.id=d.guid("ks-accordion-tab"))});d.each(j,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",h==r?"true":"false");a.setAttribute("aria-selected",h==r?"true":"false");a.setAttribute("aria-controls",p[r].id);w(a,h==r?"0":"-1");r++});r=0;d.each(p,function(a){var b=j[r];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",h==r?"false":"true");a.setAttribute("aria-labelledby",b.id);r++});a.on("switch",g,a);f.on(b,"keydown",l,a);f.on(b,"keypress",o,a)}}});var w=e.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(d,c,f){function e(c,d){if(!(this instanceof e))return new e(c,d);e.superclass.constructor.apply(this,arguments)}d.extend(e,f,{_switchTrigger:function(d,i){var f=this.config;f.multiple?c.toggleClass(i,f.activeTriggerCls):e.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(c){return this.config.multiple||e.superclass._triggerIsValid.call(this,c)},_switchView:function(d,i,f){var j=this.config,o=this._getFromToPanels().toPanels;j.multiple?
(c.toggle(o),this._fireOnSwitch(i),f&&f.call(this)):e.superclass._switchView.apply(this,arguments)}});e.Plugins=[];e.Config={markupType:1,triggerType:"click",multiple:!1};return e},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(d,c,f,e){function k(){this.stop&&this.stop()}function i(){this.start&&this.start()}e.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var d=c.container;f.on(d,"focusin",k,c);f.on(d,"focusout",i,c)}}});var m=["a","input","button","object"];return{setTabIndex:function(j,e){j.tabIndex=e;d.each(c.query("*",j),function(j){var a=j.nodeName.toLowerCase();d.inArray(a,m)&&(c.hasAttr(j,"oriTabIndex")||c.attr(j,"oriTabIndex",j.tabIndex),j.tabIndex=-1!=e?c.attr(j,
"oriTabIndex"):e)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(d,c,f,e,k){var i=d.Env.host,m=function(j){var d=c.scrollTop(),e=c.viewportHeight(),a=c.offset(j),j=c.height(j);return a.top>d&&a.top+j<d+e};d.mix(e.Config,{pauseOnScroll:!1,autoplay:!1,interval:5,pauseOnHover:!0});e.Plugins.push({name:"autoplay",init:function(c){function e(){b=d.later(function(){c.paused||c.next()},a,!0)}var l=c.config,a=1E3*l.interval,b;if(l.autoplay&&(l.pauseOnScroll&&(c.__scrollDetect=d.buffer(function(){c[m(c.container)?"start":"stop"]()},
200),f.on(i,"scroll",c.__scrollDetect)),e(),c.stop=function(){if(b){b.cancel();b=k}c.paused=true},c.start=function(){if(b){b.cancel();b=k}c.paused=false;e()},l.pauseOnHover))f.on(c.container,"mouseenter",c.stop,c),f.on(c.container,"mouseleave",c.start,c)},destroy:function(c){c.__scrollDetect&&f.remove(i,"scroll",c.__scrollDetect)}});return e},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(d,c,f,e){e.autoRender=function(k,i){d.each(c.query("."+(k||"KS_Widget"),i),function(c){var d=c.getAttribute("data-widget-type"),i;if(d&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(d))try{(i=c.getAttribute("data-widget-config"))&&(i=i.replace(/'/g,'"')),new ("Switchable"==d?e:e[d])(c,f.parse(i))}catch(l){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(d,c,f,e){function k(a,b){b=b||{};"markupType"in b||(b.panelCls?b.markupType=1:b.panels&&(b.markupType=2));for(var h=this.constructor;h;)b=d.merge(h.Config,b),h=h.superclass?h.superclass.constructor:null;this.container=c.get(a);this.config=b;this.activeIndex=b.activeIndex;var g;-1<this.activeIndex||("number"==typeof b.switchTo?g=b.switchTo:this.activeIndex=0);this._init();this._initPlugins();this.fire(o);g!==e&&this.switchTo(g)}function i(a){var b={};b.type=a.type;
b.target=a.target;return{originalEvent:b}}var m=d.makeArray,j=f.Target,o="init",l="remove";k.getDomEvent=i;k.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:e,steps:1,viewSize:[]};k.Plugins=[];d.augment(k,j,{_initPlugins:function(){for(var a=this,b=[],c=a.constructor;c;)b.push.apply(b,
c.Plugins.reverse()),c=c.superclass?c.superclass.constructor:null;b.reverse();d.each(b,function(b){b.init&&b.init(a)})},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,h,g,d=[],e=[];switch(b.markupType){case 0:(h=c.get("."+b.navCls,a))&&(d=c.children(h));g=c.get("."+b.contentCls,a);e=c.children(g);break;case 1:d=c.query("."+b.triggerCls,a);e=c.query("."+b.panelCls,a);break;case 2:d=
b.triggers,e=b.panels}this.length=Math.ceil(e.length/b.steps);this.nav=h||b.hasTriggers&&d[0]&&d[0].parentNode;if(b.hasTriggers&&(!this.nav||0==d.length))d=this._generateTriggersMarkup(this.length);this.triggers=m(d);this.panels=m(e);this.content=g||e[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,h=this.nav||c.create("<ul>"),g,d;h.className=b.navCls;for(d=0;d<a;d++)g=c.create("<li>"),d===this.activeIndex&&(g.className=b.activeTriggerCls),g.innerHTML=d+1,h.appendChild(g);this.container.appendChild(h);
this.nav=h;return c.children(h)},_bindTriggers:function(){var a=this,b=a.config,c=d.one(a.nav);d.each(a.triggers,function(b){a._initTrigger(b)});c.delegate("click",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onFocusTrigger(c,b)});"mouse"===b.triggerType&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(b){var c=a._getTriggerIndex(b.currentTarget);a._onMouseEnterTrigger(c,b)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},
_initTrigger:function(a){c.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;d.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){c.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){this._triggerIsValid(a)&&(this._cancelSwitchTimer(),this.switchTo(a,e,i(b)))},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var g=i(b);c.switchTimer=d.later(function(){c.switchTo(a,e,g)},1E3*c.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},
_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=e)},_getTriggerIndex:function(a){return d.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;a===e&&(a=this.panels.length);return Math.ceil(a/b.steps)},_afterAdd:function(a,b,c){this._resetLength();a=this._getLength(a+1)-1;1==this.config.steps&&this.activeIndex>=a&&(this.activeIndex+=
1);var g=this.activeIndex;this.activeIndex=-1;this.switchTo(g);b?this.switchTo(a,e,e,c):c()},add:function(a){var b=a.callback||d.noop,h=this.nav,g=this.content,e=a.trigger,j=a.panel,i=a.active,n=this.panels.length,a=null!=a.index?a.index:n,f=this.triggers,q=this.panels,l=this.length,p=null,p=null,a=Math.max(0,Math.min(a,n)),n=q[a]||null;q.splice(a,0,j);g.insertBefore(j,n);1==this.config.steps?(p=f[a],h.insertBefore(e,p),f.splice(a,0,e)):(p=this._getLength(),p!=l&&(c.append(e,h),f.push(e)));this._initPanel(j);
this._initTrigger(e);this._afterAdd(a,i,b);this.fire("add",{index:a,trigger:e,panel:j})},remove:function(a){function b(){k&&(c.remove(k),n.splice(f,1));if(q){c.remove(q);for(var a=0;a<o.length;a++)if(o[a]==q){g.triggers.splice(a,1);break}}g._resetLength();g.fire(l,{index:f,trigger:q,panel:k})}var h=a.callback||d.noop,g=this,j=g.config.steps,i=g.length,f,n=g.panels;f="index"in a?a.index:a.panel;var a=g._getLength(n.length-1),o=g.triggers,q=null,k=null;if(n.length&&(f=d.isNumber(f)?Math.max(0,Math.min(f,
n.length-1)):d.indexOf(f,n),q=1==j?o[f]:a!==i?o[i-1]:null,k=n[f],!1!==g.fire("beforeRemove",{index:f,panel:k,trigger:q})))if(0==a)b(),h();else{var p=g.activeIndex;1<j?p==a?g.switchTo(p-1,e,e,function(){b();h()}):(b(),g.activeIndex=-1,g.switchTo(p,e,e,function(){h()})):p==f?g.switchTo(0<p?p-1:p+1,e,e,function(){b();0==p&&(g.activeIndex=0);h()}):(p>f&&(p--,g.activeIndex=p),b(),h())}},switchTo:function(a,b,c,g){var d=this,j=d.config,f=d.activeIndex,i=d.triggers;if(!d._triggerIsValid(a)||!1===d.fire("beforeSwitch",
{fromIndex:f,toIndex:a}))return d;d.fromIndex=f;j.hasTriggers&&d._switchTrigger(i[f]||null,i[a]);b===e&&(b=a>f?"forward":"backward");d.activeIndex=a;d._switchView(b,c,function(){g&&g.call(d)});return d},_switchTrigger:function(a,b){var d=this.config.activeTriggerCls;a&&c.removeClass(a,d);c.addClass(b,d)},_getFromToPanels:function(){var a=this.fromIndex,b;b=this.config.steps;var c=this.panels,d=this.activeIndex,a=-1<a?c.slice(a*b,(a+1)*b):null;b=c.slice(d*b,(d+1)*b);return{fromPanels:a,toPanels:b}},
_switchView:function(a,b,d){var g=this,e=g._getFromToPanels(),a=e.fromPanels,e=e.toPanels;a&&c.css(a,"display","none");c.css(e,"display","block");setTimeout(function(){g._fireOnSwitch(b)},0);d&&d.call(this)},_fireOnSwitch:function(a){this.fire("switch",d.merge(a,{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,"backward",a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,"forward",a)},destroy:function(a){for(var b=
this,h=b.constructor;h;)d.each(h.Plugins,function(a){a.destroy&&a.destroy(b)}),h=h.superclass?h.superclass.constructor:null;a?f.remove(b.container):c.remove(b.container);b.nav=null;b.content=null;b.container=null;b.triggers=[];b.panels=[];b.detach()}});return k},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(d,c,f,e,k){function i(a){var b=a.currentIndex,c=this.activeIndex,g=this.panels,h=g[b*this.config.steps],e=this.triggers,b=e[b];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==c)d.each(e,function(a){n(a,-1)}),d.each(g,function(a){n(a,-1)}),b&&n(b,0),n(h,0),a&&h.focus()}function m(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function j(a){var e=a.target;switch(a.keyCode){case v:case g:if(e=
m.call(this,e)){var r=c.next(e),j=this.triggers;r||(r=j[0]);n(e,-1);r&&(n(r,0),r.focus());a.halt()}break;case h:case b:if(e=m.call(this,e))r=c.prev(e),j=this.triggers,r||(r=j[j.length-1]),n(e,-1),r&&(n(r,0),r.focus()),a.halt();break;case t:case u:if(e=m.call(this,e))this.switchTo(d.indexOf(e,this.triggers),void 0,s),a.halt()}}function o(a){var b=null;d.each(this.panels,function(d){if(d==a||c.contains(d,a))return b=d,!1});return b}function l(a,b){var c=d.indexOf(a,this.panels),g=this.config.steps,
e=Math.floor(c/g);return e==this.activeIndex?1:0==c%g||c%g==g-1?(this.switchTo(e,b,s),0):1}function a(a){var d=a.target;switch(a.keyCode){case v:case g:if(d=o.call(this,d)){var e=c.next(d),j=this.panels;e||(e=j[0]);n(d,-1);n(e,0);l.call(this,e,q)&&e.focus();a.halt()}break;case h:case b:if(d=o.call(this,d))e=c.prev(d),j=this.panels,e||(e=j[j.length-1]),n(d,-1),n(e,0),l.call(this,e,z)&&e.focus(),a.halt();break;case t:case u:if(d=o.call(this,d))this.fire("itemSelected",{item:d}),a.halt()}}var b=37,h=
38,g=39,v=40,u=32,t=13,n=e.setTabIndex,s={originalEvent:{target:1}},q="forward",z="backward";d.mix(k.Config,{aria:!1});k.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var c=b.triggers,e=b.panels,g=b.content,h=b.activeIndex;g.id||(g.id=d.guid("ks-switchbale-content"));g.setAttribute("role","listbox");var q=0;d.each(c,function(a){n(a,h==q?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",g.id);q++});q=0;d.each(e,function(a){n(a,"-1");a.setAttribute("role","option");
q++});b.on("switch",i,b);if(c=b.nav)f.on(c,"keydown",j,b);f.on(g,"keydown",a,b);c=b.prevBtn;e=b.nextBtn;c&&(n(c,0),c.setAttribute("role","button"),f.on(c,"keydown",function(a){if(a.keyCode==t||a.keyCode==u){b.prev(s);a.preventDefault()}}));e&&(n(e,0),e.setAttribute("role","button"),f.on(e,"keydown",function(a){if(a.keyCode==t||a.keyCode==u){b.next(s);a.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(d,c,f,e){function k(c,d){if(!(this instanceof k))return new k(c,d);k.superclass.constructor.apply(this,arguments)}var i="prevBtn",m="nextBtn",j={originalEvent:{target:1}};k.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};k.Plugins=[];d.extend(k,e,{_init:function(){function e(a){c.removeClass([l[i],l[m]],b);0==a&&c.addClass(l[i],b);a==l.length-1&&c.addClass(l[m],b)}var l=
this;k.superclass._init.call(l);var a=l.config,b=a.disableBtnCls;d.each(["prev","next"],function(b){var d=l[b+"Btn"]=c.get("."+a[b+"BtnCls"],l.container);f.on(d,"mousedown",function(c){c.preventDefault();c=l.activeIndex;if("prev"==b&&(0!=c||a.circular))l[b](j);if("next"==b&&(c!=l.length-1||a.circular))l[b](j)})});a.circular||(l.on("added removed",function(){e(l.activeIndex)}),l.on("switch",function(a){e(a.currentIndex)}));f.delegate(l.content,"click",".ks-switchable-panel-internal",function(a){l.fire("itemSelected",
{item:a.currentTarget})})}});return k},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(d,c,f,e){function k(b,d){var e=this,j=e.fromIndex,q=e.config,k=e.length,p=q.scrollType===v,o=p?l:a,r=e.activeIndex,y=e.viewSize[p?0:1],p=-y*r,w=e.panels,D=e.config.steps,B={},C,A=d===g;C=A&&0===j&&r===k-1||!A&&j===k-1&&0===r;e.anim&&(e.anim.stop(),"relative"==w[j*D].style.position&&m.call(e,w,j,o,y,1));C&&(p=i.call(e,w,A,o,y));B[o]=p+h;-1<j?e.anim=(new f(e.content,B,q.duration,q.easing,function(){C&&m.call(e,w,A,o,y,1);e.anim=void 0;b&&b()})).run():(c.css(e.content,
B),b&&b())}function i(a,b,d,e){var g=this.config.steps,h=this.length,f=b?h-1:0,a=a.slice(f*g,(f+1)*g);c.css(a,j,o);c.css(a,d,(b?-1:1)*e*h);return b?e:-e*h}function m(a,d,e,g,h){var f=this.config.steps,i=this.length,l=d?i-1:0,a=a.slice(l*f,(l+1)*f);c.css(a,j,b);c.css(a,e,b);h&&c.css(this.content,e,d?-g*(i-1):b)}var j="position",o="relative",l="left",a="top",b="",h="px",g="backward",v="scrollx";d.mix(e.Config,{circular:!1});e.adjustPosition=i;e.resetPosition=m;e.Plugins.push({name:"circular",init:function(a){a=
a.config;if(a.circular&&(a.effect===v||"scrolly"===a.effect))a.scrollType=a.effect,a.effect=k}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/effect",function(d,c,f,e,k,i){var m;d.mix(k.Config,{effect:"none",duration:0.5,easing:"easeNone"});k.Effects={none:function(d){var e=this._getFromToPanels(),f=e.fromPanels,e=e.toPanels;f&&c.css(f,"display","none");c.css(e,"display","block");d&&d()},fade:function(d){var f=this,l=f._getFromToPanels(),a=l.fromPanels,b=f.config,h=a?a[0]:null,g=l.toPanels[0];f.anim&&(f.anim.stop(),c.css(f.anim.fromEl,{zIndex:1,opacity:0}),c.css(f.anim.toEl,"zIndex",9));c.css(g,"opacity",1);h?(f.anim=
(new e(h,{opacity:0},b.duration,b.easing,function(){f.anim=i;c.css(g,"z-index",9);c.css(h,"z-index",1);d&&d()})).run(),f.anim.toEl=g,f.anim.fromEl=h):(c.css(g,"z-index",9),d&&d())},scroll:function(d,f,l){var a=this,f=a.fromIndex,b=a.config,h="scrollx"===b.effect,g={};g[h?"left":"top"]=-(a.viewSize[h?0:1]*a.activeIndex)+"px";a.anim&&a.anim.stop();l||-1<f?a.anim=(new e(a.content,g,b.duration,b.easing,function(){a.anim=i;d&&d()})).run():(c.css(a.content,g),d&&d())}};m=k.Effects;m.scrollx=m.scrolly=m.scroll;
k.Plugins.push({name:"effect",init:function(e){var f=e.config,i=f.effect,a=e.panels,b=e.content,h=f.steps,g=a[0],k=e.activeIndex;if("none"!==i)switch(c.css(a,"display","block"),i){case "scrollx":case "scrolly":c.css(b,"position","absolute");"static"==c.css(b.parentNode,"position")&&c.css(b.parentNode,"position","relative");"scrollx"===i&&(c.css(a,"float","left"),c.width(b,"9999px"));e.viewSize=[f.viewSize[0]||g&&g.offsetWidth*h,f.viewSize[1]||g&&g.offsetHeight*h];break;case "fade":var m=k*h,t=m+h-
1,n;d.each(a,function(a,b){n=b>=m&&b<=t;c.css(a,{opacity:n?1:0,position:"absolute",zIndex:n?9:1})})}}});d.augment(k,{_switchView:function(c,e,f){var a=this,b=a.config.effect;(d.isFunction(b)?b:m[b]).call(a,function(){a._fireOnSwitch(e);f&&f.call(a)},c)}});return k},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(d,c,f){var e="beforeSwitch",k="img",i="textarea",m={};m[k]="lazyImgAttribute";m[i]="lazyTextareaClass";d.mix(f.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:i});f.Plugins.push({name:"lazyload",init:function(f){function o(d){var m=a.steps,d=d.toIndex*m;l.loadCustomLazyData(f.panels.slice(d,d+m),b,h);a:{var u,t,n;if(d=(m=b===k)?"img":b===i?"textarea":""){d=c.query(d,f.container);u=0;for(n=d.length;u<
n;u++)if(t=d[u],m?c.attr(t,h):c.hasClass(t,h)){m=!1;break a}}m=!0}m&&f.detach(e,o)}var l=d.require("datalazyload"),a=f.config,b,h;"img-src"===a.lazyDataType&&(a.lazyDataType=k);"area-data"===a.lazyDataType&&(a.lazyDataType=i);b=a.lazyDataType;h=a[m[b]];if(l&&b&&h)f.on(e,o)}});return f},{requires:["dom","./base"]});
KISSY.add("switchable/slide/base",function(d,c){function f(c,d){if(!(this instanceof f))return new f(c,d);f.superclass.constructor.apply(this,arguments)}f.Config={autoplay:!0,circular:!0};f.Plugins=[];d.extend(f,c);return f},{requires:["../base"]});KISSY.add("switchable",function(d,c,f,e,k,i,m,j,o,l,a,b,h,g){d.mix(c,{Accordion:e,Carousel:j,Slide:h,Tabs:g,Aria:f});return c},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("switchable/tabs/aria",function(d,c,f,e,k,i){function m(a){var b=null;d.each(this.triggers,function(d){if(d==a||c.contains(d,a))b=d});return b}function j(c){switch(c.keyCode){case a:case b:c.ctrlKey&&!c.altKey&&!c.shiftKey&&c.halt();break;case t:c.ctrlKey&&!c.altKey&&c.halt()}}function o(c){var d=c.target,e=c.ctrlKey&&!c.shiftKey&&!c.altKey;switch(c.keyCode){case h:case g:m.call(this,d)&&(this.prev(s(c)),c.halt());break;case v:case u:m.call(this,d)&&(this.next(s(c)),c.halt());break;case b:e&&
(c.halt(),this.next(s(c)));break;case a:e&&(c.halt(),this.prev(s(c)));break;case t:c.ctrlKey&&!c.altKey&&(c.halt(),c.shiftKey?this.prev(s(c)):this.next(s(c)))}}function l(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),b=a.fromIndex,d=a.currentIndex;if(b!=d){var a=this.triggers[b],e=this.triggers[d],b=this.panels[b],d=this.panels[d];a&&n(a,"-1");n(e,"0");c&&e.focus();b&&b.setAttribute("aria-hidden","true");d.setAttribute("aria-hidden","false")}}var a=33,b=34,h=37,g=38,v=39,u=40,t=
9;d.mix(i.Config,{aria:!0});i.Plugins.push({name:"aria",init:function(a){function b(a){a.setAttribute("role","tab");n(a,"-1");a.id||(a.id=d.guid("ks-switchable"))}function e(a,b){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden","true");a.setAttribute("aria-labelledby",b.id)}if(a.config.aria){var g=a.triggers,h=a.activeIndex,i=a.panels,k=a.container;a.nav&&c.attr(a.nav,"role","tablist");var m=0;d.each(g,b);a.on("added",function(a){var c;b(c=a.trigger);e(a.panel,c)});m=0;d.each(i,function(a){e(a,
g[m]);m++});-1<h&&(n(g[h],"0"),i[h].setAttribute("aria-hidden","false"));a.on("switch",l,a);f.on(k,"keydown",o,a);f.on(k,"keypress",j,a)}}});var n=k.setTabIndex,s=e.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(d,c){function f(c,d){if(!(this instanceof f))return new f(c,d);f.superclass.constructor.call(this,c,d);return 0}d.extend(f,c);f.Config={};f.Plugins=[];return f},{requires:["../base"]});
KISSY.add("switchable/touch",function(d,c,f,e,k){d.mix(e.Config,{mouseAsTouch:!1});e.Plugins.push({name:"touch",init:function(i){var m=i.config,j=m.scrollType||m.effect;if("scrolly"==j||"scrollx"==j){var o=i.content,l=i.container,a,b=m.mouseAsTouch,h,g=0,v=0,u={},t={},n="left",s,q;"scrolly"==j&&(n="top");var z=function(){if("relative"!=i.panels[i.activeIndex].style.position){i.stop&&i.stop();v=1;u=c.offset(o);var a=c.offset(l);a.bottom=a.top+l.offsetHeight;a.right=a.left+l.offsetWidth;t=a}},p=function(b){if(v){var d=
-1!=b.type.indexOf("touch")?b.originalEvent.changedTouches[0]:b,f={};"scrolly"==j?(q=i.viewSize[1],s=d.pageY-h,f.top=u.top+s,d=d.pageY>=t.top&&d.pageY<=t.bottom):(q=i.viewSize[0],s=d.pageX-a,f.left=u.left+s,d=d.pageX>=t.left&&d.pageX<=t.right);if(g||3<Math.abs(s))(-1!=b.type.indexOf("touch")&&b.preventDefault(),i.anim&&(i.anim.stop(),i.anim=k),d)?(g||(g=1,m.circular&&(b=i.activeIndex,b==i.length-1?e.adjustPosition.call(i,i.panels,!1,n,q):0==b&&e.adjustPosition.call(i,i.panels,!0,n,q))),c.offset(o,
f)):x()}},x=function(){if(g){v=g=0;var a=i.activeIndex,b=i.length-1;!m.circular&&(0>s&&a==b||0<s&&0==a)?e.Effects[j].call(i,k,!0):(0>s&&a==b||0<s&&0==a||(0==a||a==b)&&e.resetPosition.call(i,i.panels,0==a,n,q),i[0>s?"next":"prev"](),i.start&&i.start())}};f.on(o,"touchstart",function(b){z();a=b.pageX;h=b.pageY});f.on(o,"touchmove",p);f.on(o,"touchend",x);b&&!("ontouchstart"in d.Env.host.document.documentElement)&&d.use("dd",function(b,c){var d=new c.Draggable({node:o});d.on("dragstart",function(){z();
a=d.startMousePos.left;h=d.startMousePos.top});d.on("drag",p);d.on("dragend",x);i.__touchDD=d})}},destroy:function(c){var d;(d=c.__touchDD)&&d.destroy()}})},{requires:["dom","event","./base"]});
