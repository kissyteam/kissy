/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 28 00:47
*/
KISSY.add("rich-base",function(e,m){function j(){var b,a;m.apply(this,arguments);a=this.get("listeners");for(b in a)this.on(b,a[b]);this.callMethodByHierarchy("initializer","constructor");this.bindInternal();this.syncInternal();this.constructPlugins();this.callPluginsMethod("initializer")}function o(b){if(b.target==this)this[k+b.type.slice(5).slice(0,-6)](b.newVal,b)}var l=e.ucfirst,k="_onSet",n=e.noop;e.extend(j,m,{collectConstructorChains:function(){for(var b=[],a=this.constructor;a;)b.push(a),
a=a.superclass&&a.superclass.constructor;return b},callMethodByHierarchy:function(b,a){for(var c=this.constructor,d=[],f,e,g,h,i;c;){i=[];if(h=c.__ks_exts)for(g=0;g<h.length;g++)if(f=h[g])"constructor"!=a&&(f=f.prototype.hasOwnProperty(a)?f.prototype[a]:null),f&&i.push(f);c.prototype.hasOwnProperty(b)&&(e=c.prototype[b])&&i.push(e);i.length&&d.push.apply(d,i.reverse());c=c.superclass&&c.superclass.constructor}for(g=d.length-1;0<=g;g--)d[g]&&d[g].call(this)},callPluginsMethod:function(b){var a=this;
e.each(a.get("plugins"),function(c){if(c[b])c[b](a)})},constructPlugins:function(){var b=this.get("plugins");e.each(b,function(a,c){e.isFunction(a)&&(b[c]=new a)})},bindInternal:function(){var b=this.getAttrs(),a,c;for(a in b)if(c=k+l(a),this[c])this.on("after"+l(a)+"Change",o)},syncInternal:function(){var b,a,c,d,f,e={},g=this.collectConstructorChains(),h;for(c=g.length-1;0<=c;c--)if(d=g[c],h=d.ATTRS)for(f in h)e[f]||(e[f]=1,d=k+l(f),(a=this[d])&&!1!==h[f].sync&&void 0!==(b=this.get(f))&&a.call(this,
b))},initializer:n,destructor:n,destroy:function(){this.callPluginsMethod("destructor");for(var b=this.constructor,a,c,d;b;){b.prototype.hasOwnProperty("destructor")&&b.prototype.destructor.apply(this);if(a=b.__ks_exts)for(d=a.length-1;0<=d;d--)(c=a[d]&&a[d].prototype.__destructor)&&c.apply(this);b=b.superclass&&b.superclass.constructor}this.fire("destroy");this.detach()},plug:function(b){e.isFunction(b)&&(b=new b);b.initializer&&b.initializer(this);this.get("plugins").push(b);return this},unplug:function(b){var a=
[],c=this,d="string"==typeof b;e.each(c.get("plugins"),function(f){var e=0,g;b&&(d?(g=f.pluginId||f.get&&f.get("pluginId"),g!=b&&(a.push(f),e=1)):f!=b&&(a.push(f),e=1));e||f.destructor(c)});c.setInternal("plugins",a);return c}},{ATTRS:{plugins:{value:[]},listeners:{value:[]}}});e.mix(j,{extend:function a(c,d,f){var j="RichBaseDerived",g,h;g=e.makeArray(arguments);if(null==c||e.isObject(c))f=d,d=c,c=[];if("string"==typeof(g=g[g.length-1]))j=g;d=d||{};d.hasOwnProperty("constructor")?h=d.constructor:
(h=function(){h.superclass.constructor.apply(this,arguments)},e.Config.debug&&eval("C=function "+j.replace(/[-.]/g,"_")+"(){ C.superclass.constructor.apply(this, arguments);}"));h.name=j;e.extend(h,this,d,f);if(c){h.__ks_exts=c;var i={},k={};e.each(c.concat(h),function(a){if(a){e.each(a.ATTRS,function(a,c){var d=i[c]=i[c]||{};e.mix(d,a)});var a=a.prototype,c;for(c in a)a.hasOwnProperty(c)&&(k[c]=a[c])}});h.ATTRS=i;e.augment(h,k)}h.extend=a;return h}});return j},{requires:["base"]});
