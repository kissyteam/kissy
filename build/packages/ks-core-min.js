/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 749 Jun 30 08:59
*/
(function(d,q,j){if(d[q]===j)d[q]={};q=d[q];var p=d.document,s=function(g,f,h,k){if(!f||!g)return g;if(h===j)h=true;var o,v,t;if(k&&(t=k.length))for(o=0;o<t;o++){v=k[o];if(v in f)if(h||!(v in g))g[v]=f[v]}else for(v in f)if(h||!(v in g))g[v]=f[v];return g},r=false,i=[],m=false;s(q,{version:"1.0.8",_init:function(){this.Env={mods:{}}},add:function(g,f){this.Env.mods[g]={name:g,fn:f};f(this);return this},ready:function(g){m||this._bindReady();r?g.call(d,this):i.push(g);return this},_bindReady:function(){var g=
this,f=p.documentElement.doScroll,h=f?"onreadystatechange":"DOMContentLoaded",k=function(){g._fireReady()};m=true;if(p.readyState==="complete")return k();if(p.addEventListener){var o=function(){p.removeEventListener(h,o,false);k()};p.addEventListener(h,o,false)}else{var v=function(){if(p.readyState==="complete"){p.detachEvent(h,v);k()}};p.attachEvent(h,v);d.attachEvent("onload",k);if(d==d.top){var t=function(){try{f("left");k()}catch(e){setTimeout(t,1)}};t()}}},_fireReady:function(){if(!r){r=true;
if(i){for(var g,f=0;g=i[f++];)g.call(d,this);i=null}}},mix:s,merge:function(){var g={},f,h=arguments.length;for(f=0;f<h;++f)s(g,arguments[f]);return g},augment:function(){var g=arguments,f=g.length-2,h=g[0],k=g[f],o=g[f+1],v=1;if(!q.isArray(o)){k=o;o=j;f++}if(!q.isBoolean(k)){k=j;f++}for(;v<f;v++)s(h.prototype,g[v].prototype||g[v],k,o);return h},extend:function(g,f,h,k){if(!f||!g)return g;var o=Object.prototype,v=f.prototype,t=function(e){function a(){}a.prototype=e;return new a}(v);g.prototype=t;
t.constructor=g;g.superclass=v;if(f!==Object&&v.constructor===o.constructor)v.constructor=f;h&&s(t,h);k&&s(g,k);return g},namespace:function(){var g=arguments.length,f=null,h,k,o;for(h=0;h<g;++h){o=(""+arguments[h]).split(".");f=this;for(k=d[o[0]]===f?1:0;k<o.length;++k)f=f[o[k]]=f[o[k]]||{}}return f},app:function(g,f){var h=d[g]||{};s(h,this,true,["_init","add","namespace"]);h._init();return s(d[g]=h,typeof f==="function"?f():f)},log:function(g,f,h){if(this.Config.debug){if(h)g=h+": "+g;if(d.console!==
j&&console.log)console[f&&console[f]?f:"log"](g)}return this},error:function(g){if(this.Config.debug)throw g;}});q._init();q.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(d,q){function j(a){var b=typeof a;return a===null||b!=="object"&&b!=="function"}var p=window,s=document,r=location,i=Array.prototype,m=i.indexOf,g=i.filter,f=String.prototype.trim,h=Object.prototype.toString,k=encodeURIComponent,o=decodeURIComponent,v=/^\s+|\s+$/g,t=/^(\w+)\[\]$/,e=/\S/;d.mix(d,{isUndefined:function(a){return a===q},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&h.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var b in a)return false;return true},isFunction:function(a){return h.call(a)==="[object Function]"},isArray:function(a){return h.call(a)==="[object Array]"},trim:f?function(a){return a==q?"":f.call(a)}:function(a){return a==q?"":a.toString().replace(v,"")},each:function(a,b,c){for(var l=a&&a.length||0,n=0;n<l;++n)b.call(c||p,a[n],n,a)},indexOf:m?function(a,
b){return m.call(b,a)}:function(a,b){for(var c=0,l=b.length;c<l;++c)if(b[c]===a)return c;return-1},inArray:function(a,b){return d.indexOf(a,b)>-1},makeArray:function(a){if(a===null||a===q)return[];if(d.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||d.isFunction(a))return[a];if(a.item&&d.UA.ie){for(var b=[],c=0,l=a.length;c<l;++c)b[c]=a[c];return b}return i.slice.call(a)},filter:g?function(a,b,c){return g.call(a,b,c)}:function(a,b,c){var l=[];d.each(a,function(n,u,w){b.call(c,
n,u,w)&&l.push(n)});return l},param:function(a){if(!d.isPlainObject(a))return"";var b=[],c,l;for(c in a){l=a[c];c=k(c);if(j(l))b.push(c,"=",k(l+""),"&");else if(d.isArray(l)&&l.length)for(var n=0,u=l.length;n<u;++n)j(l[n])&&b.push(c,"[]=",k(l[n]+""),"&")}b.pop();return b.join("")},unparam:function(a,b){if(typeof a!=="string"||(a=d.trim(a)).length===0)return{};var c={};a=a.split(b||"&");for(var l,n,u,w=0,x=a.length;w<x;++w){b=a[w].split("=");l=o(b[0]);try{n=o(b[1]||"")}catch(y){n=b[1]||""}if((u=l.match(t))&&
u[1]){c[u[1]]=c[u[1]]||[];c[u[1]].push(n)}else c[l]=n}return c},later:function(a,b,c,l,n){b=b||0;l=l||{};var u=a,w=d.makeArray(n),x;if(typeof a==="string")u=l[a];u||d.error("method undefined");a=function(){u.apply(l,w)};x=c?setInterval(a,b):setTimeout(a,b);return{id:x,interval:c,cancel:function(){this.interval?clearInterval(x):clearTimeout(x)}}},now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&e.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,c=s.createElement("script");
c.text=a;b.insertBefore(c,b.firstChild);b.removeChild(c)}}});if(r&&r.search&&r.search.indexOf("ks-debug")!==-1)d.Config.debug=true});
KISSY.add("kissy-ua",function(d){var q=navigator.userAgent,j,p={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},s=function(r){var i=0;return parseFloat(r.replace(/\./g,function(){return i++===0?".":""}))};if((j=q.match(/AppleWebKit\/([\d.]*)/))&&j[1]){p.webkit=s(j[1]);if((j=q.match(/Chrome\/([\d.]*)/))&&j[1])p.chrome=s(j[1]);else if((j=q.match(/\/([\d.]*) Safari/))&&j[1])p.safari=s(j[1]);if(/ Mobile\//.test(q))p.mobile="Apple";else if(j=q.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))p.mobile=
j[0]}else if((j=q.match(/Opera\/.* Version\/([\d.]*)/))&&j[1]){p.opera=s(j[1]);if(q.match(/Opera Mini[^;]*/))p.mobile=j[0]}else if((j=q.match(/MSIE\s([^;]*)/))&&j[1])p.ie=s(j[1]);else if(j=q.match(/Gecko/)){p.gecko=1;if((j=q.match(/rv:([\d.]*)/))&&j[1])p.gecko=s(j[1]);if((j=q.match(/Firefox\/([\d.]*)/))&&j[1])p.firefox=s(j[1])}d.UA=p});KISSY.add("dom",function(d){d.DOM={_isElementNode:function(q){return q&&q.nodeType===1}}});
KISSY.add("selector",function(d,q){function j(e,a){var b,c=[],l,n;a=p(a);if(d.isString(e)){e=d.trim(e);if(v.test(e)){if(a=s(e.slice(1)))c=[a]}else if(b=t.exec(e)){l=b[1];n=b[2];b=b[3];if(a=l?s(l):a)if(b)if(!l||e.indexOf(k)!==-1)c=i(b,n,a);else{if((a=s(l))&&h.hasClass(a,b))c=[a]}else if(n)c=r(a,n)}else if(e.indexOf(",")>-1)if(a.querySelectorAll)c=a.querySelectorAll(e);else{l=e.split(",");n=[];c=0;for(e=l.length;c<e;++c)n=n.concat(j(l[c],a));c=m(n)}else if(d.ExternalSelector)return d.ExternalSelector(e,
a);else g(e)}else if(e&&e.nodeType)c=[e];else if(e&&(e.item||d.isArray(e)))c=e;if(c.item)c=d.makeArray(c);return c}function p(e){if(e===q)e=f;else if(d.isString(e)&&v.test(e))e=s(e.slice(1));else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function s(e){return f.getElementById(e)}function r(e,a){return e.getElementsByTagName(a)}function i(e,a,b){b=e=b.getElementsByClassName(e);var c=0,l=0,n=e.length,u;if(a&&a!==o){b=[];for(a=a.toUpperCase();c<n;++c){u=e[c];if(u.tagName===a)b[l++]=u}}return b}
function m(e){var a=false;e.sort(function(c,l){c=c.sourceIndex-l.sourceIndex;if(c===0)a=true;return c});if(a)for(var b=1;b<e.length;b++)e[b]===e[b-1]&&e.splice(b--,1);return e}function g(e){d.error("Unsupported selector: "+e)}var f=document,h=d.DOM,k=" ",o="*",v=/^#[\w-]+$/,t=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var e=f.createElement("div");e.appendChild(f.createComment(""));if(e.getElementsByTagName(o).length>0)r=function(a,b){a=a.getElementsByTagName(b);if(b===o){b=[];for(var c=
0,l=0,n;n=a[c++];)if(n.nodeType===1)b[l++]=n;a=b}return a}})();f.getElementsByClassName||(i=f.querySelectorAll?function(e,a,b){return b.querySelectorAll((a?a:"")+"."+e)}:function(e,a,b){a=b.getElementsByTagName(a||o);b=[];var c=0,l=0,n=a.length,u,w;for(e=k+e+k;c<n;++c){u=a[c];if((w=u.className)&&(k+w+k).indexOf(e)>-1)b[l++]=u}return b});d.query=j;d.get=function(e,a){return j(e,a)[0]||null};d.mix(h,{query:j,get:d.get,filter:function(e,a){var b=j(e),c,l,n,u=[];if(d.isString(a)&&(c=t.exec(a))&&!c[1]){l=
c[2];n=c[3];a=function(w){return!(l&&w.tagName!==l.toUpperCase()||n&&!h.hasClass(w,n))}}if(d.isFunction(a))u=d.filter(b,a);else if(a&&d.ExternalSelector)u=d.ExternalSelector._filter(e,a);else g(a);return u},test:function(e,a){e=j(e);return h.filter(e,a).length===e.length}})});
KISSY.add("dom-class",function(d,q){function j(i,m,g,f){if(!(m=d.trim(m)))return f?false:q;i=d.query(i);var h=0,k=i.length;m=m.split(s);for(var o;h<k;h++){o=i[h];if(o.nodeType===1){o=g(o,m,m.length);if(o!==q)return o}}if(f)return false}var p=d.DOM,s=/[\.\s]\s*\.?/,r=/[\n\t]/g;d.mix(p,{hasClass:function(i,m){return j(i,m,function(g,f,h){if(g=g.className){g=" "+g+" ";for(var k=0,o=true;k<h;k++)if(g.indexOf(" "+f[k]+" ")<0){o=false;break}if(o)return true}},true)},addClass:function(i,m){j(i,m,function(g,
f,h){var k=g.className;if(k){var o=" "+k+" ";k=k;for(var v=0;v<h;v++)if(o.indexOf(" "+f[v]+" ")<0)k+=" "+f[v];g.className=d.trim(k)}else g.className=m})},removeClass:function(i,m){j(i,m,function(g,f,h){var k=g.className;if(k)if(h){k=(" "+k+" ").replace(r," ");for(var o=0;o<h;o++)k=k.replace(" "+f[o]+" "," ");g.className=d.trim(k)}else g.className=""})},replaceClass:function(i,m,g){p.removeClass(i,m);p.addClass(i,g)},toggleClass:function(i,m,g){var f=d.isBoolean(g),h;j(i,m,function(k,o,v){for(var t=
0,e;t<v;t++){e=o[t];h=f?!g:p.hasClass(k,e);p[h?"removeClass":"addClass"](k,e)}})}})});
KISSY.add("dom-attr",function(d,q){function j(t,e){return e&&e.nodeName.toUpperCase()===t.toUpperCase()}var p=d.UA,s=p.ie,r=s&&s<8,i=document.documentElement.textContent!==q?"textContent":"innerText",m=d.DOM,g=m._isElementNode,f=/href|src|style/,h=/href|src|colspan|rowspan/,k=/\r/g,o=/radio|checkbox/,v={readonly:"readOnly"};r&&d.mix(v,{"for":"htmlFor","class":"className"});d.mix(m,{attr:function(t,e,a){if(e=d.trim(e)){e=e.toLowerCase();e=v[e]||e;if(a===q){t=d.get(t);if(!g(t))return q;var b;f.test(e)||
(b=t[e]);if(b===q)b=t.getAttribute(e);if(r)if(h.test(e))b=t.getAttribute(e,2);else if(e==="style")b=t.style.cssText;return b===null?q:b}d.each(d.query(t),function(c){if(g(c))if(r&&e==="style")c.style.cssText=a;else c.setAttribute(e,""+a)})}},removeAttr:function(t,e){d.each(d.query(t),function(a){g(a)&&a.removeAttribute(e)})},val:function(t,e){if(e===q){var a=d.get(t);if(!g(a))return q;if(j("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(j("select",a)){var b=a.selectedIndex;
t=a.options;if(b<0)return null;else if(a.type==="select-one")return m.val(t[b]);a=[];for(var c=0,l=t.length;c<l;++c)t[c].selected&&a.push(m.val(t[c]));return a}if(p.webkit&&o.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(k,"")}d.each(d.query(t),function(n){if(j("select",n)){var u=d.makeArray(e),w=n.options,x;c=0;for(l=w.length;c<l;++c){x=w[c];x.selected=d.inArray(m.val(x),u)}if(!u.length)n.selectedIndex=-1}else if(g(n))n.value=e})},text:function(t,e){if(e===
q){t=d.get(t);if(g(t))return t[i]||""}else d.each(d.query(t),function(a){if(g(a))a[i]=e})}})});
KISSY.add("dom-style",function(d,q){var j=d.DOM,p=document,s=p.documentElement,r=/width|height|top|left|right|bottom|margin|padding/i,i=/-([a-z])/ig,m=function(f,h){return h.toUpperCase()},g={};d.mix(j,{_CUSTOM_STYLES:g,_getComputedStyle:function(f,h){var k="",o=f.ownerDocument;if(f.style)k=o.defaultView.getComputedStyle(f,null)[h];return k},css:function(f,h,k){if(d.isPlainObject(h))for(var o in h)j.css(f,o,h[o]);else{if(h.indexOf("-")>0)h=h.replace(i,m);h=g[h]||h;if(k===q){f=d.get(f);o="";if(f&&
f.style){o=h.get?h.get(f):f.style[h];if(o===""&&!h.get)o=j._getComputedStyle(f,h)}return o===q?"":o}else{if(k===null||k==="")k="";else if(!isNaN(new Number(k))&&r.test(h))k+="px";(h==="width"||h==="height")&&parseFloat(k)<0||d.each(d.query(f),function(v){if(v&&v.style)h.set?h.set(v,k):(v.style[h]=k)})}}},addStyleSheet:function(f,h){var k;if(h)k=d.get(h);k||(k=j.create("<style>",{id:h}));d.get("head").appendChild(k);if(k.styleSheet)k.styleSheet.cssText=f;else k.appendChild(p.createTextNode(f))}});
if(s.style.cssFloat!==q)g["float"]="cssFloat";else if(s.style.styleFloat!==q)g["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(d,q){if(d.UA.ie){var j=d.DOM,p=document,s=p.documentElement,r=j._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,m=/^-?\d/;try{if(s.style.opacity===q&&s.filters)r.opacity={get:function(f){var h=100;try{h=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(k){try{h=f.filters("alpha").opacity}catch(o){}}return h/100+""},set:function(f,h){f=f.style;f.zoom=1;f.filter="alpha(opacity="+h*100+")"}}}catch(g){d.log("IE filters ActiveX is disabled. ex = "+g)}if(!(p.defaultView||
{}).getComputedStyle&&s.currentStyle)j._getComputedStyle=function(f,h){var k=f.style;f=f.currentStyle[h];if(!i.test(f)&&m.test(f)){var o=k.left;k.left=h==="fontSize"?"1em":f||0;f=k.pixelLeft+"px";k.left=o}return f}}});
KISSY.add("dom-offset",function(d,q){function j(e){var a=0,b=0;if(e!==m.body&&e!==g&&e[t]){e=e[t]();a=e.left+s.scrollLeft();b=e.top+s.scrollTop()}return{left:a,top:b}}function p(e,a){var b=s.css(e,o);if(b==="static")b=e.style[o]=v;var c=j(e);b=b===v;var l=k(s.css(e,"left"),10),n=k(s.css(e,"top"),10);l=d.isNumber(l)?l:b?0:e.offsetLeft;n=d.isNumber(n)?n:b?0:e.offsetTop;s.css(e,{left:l+a.left-c.left,top:n+a.top-c.top})}var s=d.DOM,r=d.UA,i=window,m=document,g=m.documentElement,f=m.compatMode==="CSS1Compat",
h=Math.max,k=parseInt,o="position",v="relative",t="getBoundingClientRect";d.mix(s,{offset:function(e,a){if(!(e=d.get(e))||!e.ownerDocument)return null;if(a===q)return j(e);p(e,a)},scrollLeft:function(){return i.pageXOffset||g.scrollLeft||m.body.scrollLeft},scrollTop:function(){return i.pageYOffset||g.scrollTop||m.body.scrollTop},docHeight:function(){return h(!f?m.body.scrollHeight:g.scrollHeight,s.viewportHeight())},docWidth:function(){return h(!f?m.body.scrollWidth:g.scrollWidth,s.viewportWidth())},
viewportHeight:function(){return r.ie?f?g.clientHeight:m.body.clientHeight:i.innerHeight},viewportWidth:function(){return!f&&!r.opera?m.body.clientWidth:r.ie?g.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(d,q){function j(i,m,g,f){if(!(i=d.get(i)))return null;if(m===q)m=1;var h=null,k,o;if(d.isNumber(m)&&m>=0){if(m===0)return i;k=0;o=m;m=function(){return++k===o}}for(;i=i[g];)if(r(i)&&(!m||s.test(i,m))&&(!f||f(i))){h=i;break}return h}function p(i,m,g){var f=[];var h=i=d.get(i);if(i&&g)h=i.parentNode;if(h){g=0;for(h=h.firstChild;h;h=h.nextSibling)if(r(h)&&h!==i&&(!m||s.test(h,m)))f[g++]=h}return f}var s=d.DOM,r=s._isElementNode;d.mix(s,{parent:function(i,m){return j(i,
m,"parentNode",function(g){return g.nodeType!=11})},next:function(i,m){return j(i,m,"nextSibling")},prev:function(i,m){return j(i,m,"previousSibling")},siblings:function(i,m){return p(i,m,true)},children:function(i,m){return p(i,m)},contains:function(i,m){var g=false;if((i=d.get(i))&&(m=d.get(m)))if(i.contains)return i.contains(m);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(m)&16);else for(;!g&&(m=m.parentNode);)g=m==i;return g}})});
KISSY.add("dom-create",function(d,q){function j(b,c){if(g(b)&&c)for(var l in c)r.attr(b,l,c[l]);return b}function p(b,c){var l=null,n;if(b&&(b.push||b.item)&&b[0]){c=c||b[0].ownerDocument;l=c.createDocumentFragment();if(b.item)b=d.makeArray(b);c=0;for(n=b.length;c<n;c++)l.appendChild(b[c])}else d.log("Unable to convert "+b+" to fragment.");return l}var s=document,r=d.DOM,i=d.UA,m=i.ie,g=r._isElementNode,f=s.createElement("div"),h=/<(\w+)/,k=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;d.mix(r,{create:function(b,
c,l){if(g(b))return b;if(!(b=d.trim(b)))return null;var n=null;n=r._creators;var u,w="div",x;if(u=k.exec(b))n=(l||s).createElement(u[1]);else{if((u=h.exec(b))&&(x=u[1])&&d.isFunction(n[x=x.toLowerCase()]))w=x;b=n[w](b,l).childNodes;n=b.length===1?b[0].parentNode.removeChild(b[0]):p(b,l||s)}return j(n,c)},_creators:{div:function(b,c){c=c?c.createElement("div"):f;c.innerHTML=b;return c}},html:function(b,c){if(c===q){b=d.get(b);if(g(b))return b.innerHTML}else d.each(d.query(b),function(l){if(g(l)){l.innerHTML=
"";l.appendChild(r.create(c))}})}});var o=r._creators,v=r.create,t=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,e={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||m){for(var a in e)(function(b){o[a]=function(c,l){return v("<"+b+">"+c+"</"+b+">",null,l)}})(e[a]);if(m){o.script=function(b,c){c=c?c.createElement("div"):f;c.innerHTML="-"+b;c.removeChild(c.firstChild);return c};if(m<8)o.tbody=function(b,c){c=v("<table>"+b+"</table>",null,c);var l=
c.children.tags("tbody")[0];c.children.length>1&&l&&!t.test(b)&&l.parentNode.removeChild(l);return c}}d.mix(o,{optgroup:o.option,th:o.td,thead:o.tbody,tfoot:o.tbody,caption:o.tbody,colgroup:o.tbody})}});
KISSY.add("dom-insertion",function(d){var q=d.DOM;d.mix(q,{insertBefore:function(j,p){j=q.create(j);p=d.get(p);j&&p&&p.parentNode&&p.parentNode.insertBefore(j,p);return j},insertAfter:function(j,p){j=q.create(j);p=d.get(p);if(j&&p&&p.parentNode)p.nextSibling?p.parentNode.insertBefore(j,p.nextSibling):p.parentNode.appendChild(j);return j}})});
KISSY.add("event",function(d,q){function j(a,b,c,l,n){if(d.isString(b))b=d.query(b);if(d.isArray(b)){d.each(b,function(u){e[a](u,c,l,n)});return true}if((c=d.trim(c))&&c.indexOf(o)>0){d.each(c.split(o),function(u){e[a](b,u,l,n)});return true}}function p(a){return i(a)?-1:a[k]}function s(a,b){if(i(a))return d.error("Text or comment node is not valid event target.");try{a[k]=b}catch(c){d.error(c)}}function r(a){try{a[k]=q;delete a[k]}catch(b){}}function i(a){return a.nodeType===3||a.nodeType===8}var m=
window,g=document,f=g.addEventListener?function(a,b,c,l){a.addEventListener&&a.addEventListener(b,c,l)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},h=g.removeEventListener?function(a,b,c,l){a.removeEventListener&&a.removeEventListener(b,c,l)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},k="ksEventTargetId",o=" ",v=d.now(),t={},e={EVENT_GUID:k,special:{},add:function(a,b,c,l){if(!j("add",a,b,c,l)){var n=p(a),u,w;if(!(n===-1||!b||!d.isFunction(c))){if(!n){s(a,n=v++);t[n]={target:a,
events:{}}}w=t[n].events;u=!a.isCustomEventTarget&&e.special[b]||{};if(!w[b]){n=function(x,y){if(!x||!x.fixed){x=new d.EventObject(a,x,b);d.isPlainObject(y)&&d.mix(x,y)}u.setup&&u.setup(x);return(u.handle||e._handle)(a,x,w[b].listeners,l)};w[b]={handle:n,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(b,n);else f(a,u.fix||b,n,u.capture)}w[b].listeners.push(c)}}},remove:function(a,b,c){if(!j("remove",a,b,c)){var l=p(a),n,u,w,x,y,z;if(l!==-1)if(l&&(n=t[l]))if(n.target===a){n=n.events||
{};if(u=n[b]){w=u.listeners;y=w.length;if(d.isFunction(c)&&y&&d.inArray(c,w)){z=[];for(x=0;x<y;++x)c!==w[x]&&z.push(w[x]);y=z.length}if(c===q||y===0){a.isCustomEventTarget||h(a,b,u.handle);delete n[b]}}if(b===q||d.isEmptyObject(n)){for(b in n)e.remove(a,b);delete t[l];r(a)}}}},_handle:function(a,b,c,l){var n,u=0,w=c.length;for(l=l||a;u<w;++u){n=c[u].call(l,b);if(n===false&&a.isCustomEventTarget||b.isImmediatePropagationStopped)break}return n},_getCache:function(a){return t[a]},_simpleAdd:f,_simpleRemove:h};
e.on=e.add;d.Event=e;m.attachEvent&&!m.addEventListener&&m.attachEvent("onunload",function(){var a,b;for(a in t)if(b=t[a].target)try{e.remove(b)}catch(c){}})});
KISSY.add("event-object",function(d,q){function j(r,i,m){this.currentTarget=r;this.originalEvent=i||{};if(i){this.type=i.type;this._fix()}else{this.type=m;this.target=r}this.fixed=true}var p=document,s="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");d.mix(j.prototype,
{_fix:function(){for(var r=this.originalEvent,i=s.length,m;i;){m=s[--i];this[m]=r[m]}if(!this.target)this.target=this.srcElement||p;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===q&&this.clientX!==q){r=p.documentElement;i=p.body;this.pageX=this.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0);this.pageY=this.clientY+
(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)}if(this.which===q)this.which=this.charCode!==q?this.charCode:this.keyCode;if(this.metaKey===q)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==q)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var r=this.originalEvent;if(r.preventDefault)r.preventDefault();else r.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var r=this.originalEvent;if(r.stopPropagation)r.stopPropagation();
else r.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var r=this.originalEvent;r.stopImmediatePropagation?r.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(r){r?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});d.EventObject=j});
KISSY.add("event-target",function(d,q){var j=d.Event,p=j.EVENT_GUID;d.EventTarget={isCustomEventTarget:true,fire:function(s,r){if((s=((j._getCache(this[p]||-1)||{}).events||{})[s])&&d.isFunction(s.handle))return s.handle(q,r)},on:function(s,r,i){j.add(this,s,r,i)},detach:function(s,r){j.remove(this,s,r)}}});
KISSY.add("event-mouseenter",function(d){var q=d.Event;d.UA.ie||d.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(j){q.special[j.name]={fix:j.fix,setup:function(p){p.type=j.name},handle:function(p,s,r){var i=s.relatedTarget;try{for(;i&&i!==p;)i=i.parentNode;i!==p&&q._handle(p,s,r)}catch(m){}}}})});
KISSY.add("event-focusin",function(d){var q=d.Event;document.addEventListener&&d.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(j){q.special[j.name]={fix:j.fix,capture:true,setup:function(p){p.type=j.name}}})});
