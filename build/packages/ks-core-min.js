/*
Copyright 2010, KISSY UI Library v1.1.0
MIT Licensed
build time: Jul 22 22:55
*/
(function(b,n,j){if(b[n]===j)b[n]={};n=b[n];var l=b.document,p=function(r,g,o,w){if(!g||!r)return r;if(o===j)o=true;var x,e,f;if(w&&(f=w.length))for(x=0;x<f;x++){e=w[x];if(e in g)if(o||!(e in r))r[e]=g[e]}else for(e in g)if(o||!(e in r))r[e]=g[e];return r},q=false,h=[],m=false,u=/^#?([\w-]+)$/;p(n,{version:"1.1.0",_init:function(){this.Env={mods:{},guid:0}},add:function(r,g){this.Env.mods[r]={name:r,fn:g};g(this);return this},ready:function(r){m||this._bindReady();q?r.call(b,this):h.push(r);return this},
_bindReady:function(){var r=this,g=l.documentElement.doScroll,o=g?"onreadystatechange":"DOMContentLoaded",w=function(){r._fireReady()};m=true;if(l.readyState==="complete")return w();if(l.addEventListener){var x=function(){l.removeEventListener(o,x,false);w()};l.addEventListener(o,x,false);b.addEventListener("load",w,false)}else{var e=function(){if(l.readyState==="complete"){l.detachEvent(o,e);w()}};l.attachEvent(o,e);b.attachEvent("onload",w);if(b==b.top){var f=function(){try{g("left");w()}catch(a){setTimeout(f,
1)}};f()}}},_fireReady:function(){if(!q){q=true;if(h){for(var r,g=0;r=h[g++];)r.call(b,this);h=null}}},available:function(r,g){if((r=(r+"").match(u)[1])&&n.isFunction(g))var o=1,w=n.later(function(){if(l.getElementById(r)&&(g()||1)||++o>500)w.cancel()},40,true)},mix:p,merge:function(){var r={},g,o=arguments.length;for(g=0;g<o;++g)p(r,arguments[g]);return r},augment:function(){var r=arguments,g=r.length-2,o=r[0],w=r[g],x=r[g+1],e=1;if(!n.isArray(x)){w=x;x=j;g++}if(!n.isBoolean(w)){w=j;g++}for(;e<g;e++)p(o.prototype,
r[e].prototype||r[e],w,x);return o},extend:function(r,g,o,w){if(!g||!r)return r;var x=Object.prototype,e=g.prototype,f=function(a){function c(){}c.prototype=a;return new c}(e);r.prototype=f;f.constructor=r;r.superclass=e;if(g!==Object&&e.constructor===x.constructor)e.constructor=g;o&&p(f,o);w&&p(r,w);return r},namespace:function(){var r=arguments.length,g=null,o,w,x;for(o=0;o<r;++o){x=(""+arguments[o]).split(".");g=this;for(w=b[x[0]]===g?1:0;w<x.length;++w)g=g[x[w]]=g[x[w]]||{}}return g},app:function(r,
g){var o=b[r]||{};p(o,this,true,["_init","add","namespace"]);o._init();return p(b[r]=o,typeof g==="function"?g():g)},log:function(r,g,o){if(this.Config.debug){if(o)r=o+": "+r;if(b.console!==j&&console.log)console[g&&console[g]?g:"log"](r)}return this},error:function(r){if(this.Config.debug)throw r;},guid:function(r){var g=this.Env.guid++ +"";return r?r+g:g}});n._init();n.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,n){function j(a){var c=typeof a;return a===null||c!=="object"&&c!=="function"}var l=window,p=document,q=location,h=Array.prototype,m=h.indexOf,u=h.filter,r=String.prototype.trim,g=Object.prototype.toString,o=encodeURIComponent,w=decodeURIComponent,x=/^\s+|\s+$/g,e=/^(\w+)\[\]$/,f=/\S/;b.mix(b,{isUndefined:function(a){return a===n},isBoolean:function(a){return typeof a==="boolean"},isString:function(a){return typeof a==="string"},isNumber:function(a){return typeof a===
"number"&&isFinite(a)},isPlainObject:function(a){return a&&g.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return g.call(a)==="[object Function]"},isArray:function(a){return g.call(a)==="[object Array]"},trim:r?function(a){return a==n?"":r.call(a)}:function(a){return a==n?"":a.toString().replace(x,"")},each:function(a,c,d){for(var k=a&&a.length||0,v=0;v<k;++v)c.call(d||l,a[v],v,a)},indexOf:m?function(a,
c){return m.call(c,a)}:function(a,c){for(var d=0,k=c.length;d<k;++d)if(c[d]===a)return d;return-1},inArray:function(a,c){return b.indexOf(a,c)>-1},makeArray:function(a){if(a===null||a===n)return[];if(b.isArray(a))return a;if(typeof a.length!=="number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],d=0,k=a.length;d<k;++d)c[d]=a[d];return c}return h.slice.call(a)},filter:u?function(a,c,d){return u.call(a,c,d)}:function(a,c,d){var k=[];b.each(a,function(v,s,i){c.call(d,
v,s,i)&&k.push(v)});return k},param:function(a,c){if(!b.isPlainObject(a))return"";c=c||"&";var d=[],k,v;for(k in a){v=a[k];k=o(k);if(j(v))d.push(k,"=",o(v+""),c);else if(b.isArray(v)&&v.length)for(var s=0,i=v.length;s<i;++s)j(v[s])&&d.push(k,"[]=",o(v[s]+""),c)}d.pop();return d.join("")},unparam:function(a,c){if(typeof a!=="string"||(a=b.trim(a)).length===0)return{};var d={};a=a.split(c||"&");for(var k,v,s,i=0,t=a.length;i<t;++i){c=a[i].split("=");k=w(c[0]);try{v=w(c[1]||"")}catch(y){v=c[1]||""}if((s=
k.match(e))&&s[1]){d[s[1]]=d[s[1]]||[];d[s[1]].push(v)}else d[k]=v}return d},later:function(a,c,d,k,v){c=c||0;k=k||{};var s=a,i=b.makeArray(v),t;if(typeof a==="string")s=k[a];s||b.error("method undefined");a=function(){s.apply(k,i)};t=d?setInterval(a,c):setTimeout(a,c);return{id:t,interval:d,cancel:function(){this.interval?clearInterval(t):clearTimeout(t)}}},clone:function(a){var c=a,d,k;if(a&&((d=b.isArray(a))||b.isPlainObject(a))){c=d?[]:{};for(k in a)if(a.hasOwnProperty(k))c[k]=b.clone(a[k])}return c},
now:function(){return(new Date).getTime()},globalEval:function(a){if(a&&f.test(a)){var c=p.getElementsByTagName("head")[0]||p.documentElement,d=p.createElement("script");d.text=a;c.insertBefore(d,c.firstChild);c.removeChild(d)}}});if(q&&q.search&&q.search.indexOf("ks-debug")!==-1)b.Config.debug=true});
KISSY.add("kissy-ua",function(b){var n=navigator.userAgent,j,l={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},p=function(q){var h=0;return parseFloat(q.replace(/\./g,function(){return h++===0?".":""}))};if((j=n.match(/AppleWebKit\/([\d.]*)/))&&j[1]){l.webkit=p(j[1]);if((j=n.match(/Chrome\/([\d.]*)/))&&j[1])l.chrome=p(j[1]);else if((j=n.match(/\/([\d.]*) Safari/))&&j[1])l.safari=p(j[1]);if(/ Mobile\//.test(n))l.mobile="Apple";else if(j=n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))l.mobile=
j[0]}else if((j=n.match(/Opera\/.* Version\/([\d.]*)/))&&j[1]){l.opera=p(j[1]);if(n.match(/Opera Mini[^;]*/))l.mobile=j[0]}else if((j=n.match(/MSIE\s([^;]*)/))&&j[1])l.ie=p(j[1]);else if(j=n.match(/Gecko/)){l.gecko=1;if((j=n.match(/rv:([\d.]*)/))&&j[1])l.gecko=p(j[1]);if((j=n.match(/Firefox\/([\d.]*)/))&&j[1])l.firefox=p(j[1])}b.UA=l});
KISSY.add("dom",function(b){var n={_isSupportedNode:function(j){return n._isElementNode(j)||n._isTextNode(j)},_isElementNode:function(j){return j&&j.nodeType===1},_isTextNode:function(j){return j&&j.nodeType===3}};b.DOM=n});
KISSY.add("selector",function(b,n){function j(e,f){var a,c=[],d,k;f=l(f);if(b.isString(e)){e=b.trim(e);if(w.test(e)){if(e=p(e.slice(1)))c=[e]}else if(a=x.exec(e)){d=a[1];k=a[2];a=a[3];if(f=d?p(d):f)if(a)if(!d||e.indexOf(g)!==-1)c=h(a,k,f);else{if((e=p(d))&&r.hasClass(e,a))c=[e]}else if(k)c=q(f,k)}else if(b.ExternalSelector)return b.ExternalSelector(e,f);else m(e)}else if(e&&e.nodeType)c=[e];else if(e&&(b.isArray(e)||e.item||e.getDOMNode))c=e;if(c.item)c=b.makeArray(c);return c}function l(e){if(e===
n)e=u;else if(b.isString(e)&&w.test(e))e=p(e.slice(1));else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function p(e){return u.getElementById(e)}function q(e,f){return e.getElementsByTagName(f)}function h(e,f,a){a=e=a.getElementsByClassName(e);var c=0,d=0,k=e.length,v;if(f&&f!==o){a=[];for(f=f.toUpperCase();c<k;++c){v=e[c];if(v.tagName===f)a[d++]=v}}return a}function m(e){b.error("Unsupported selector: "+e)}var u=document,r=b.DOM,g=" ",o="*",w=/^#[\w-]+$/,x=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var e=u.createElement("div");e.appendChild(u.createComment(""));if(e.getElementsByTagName(o).length>0)q=function(f,a){f=f.getElementsByTagName(a);if(a===o){a=[];for(var c=0,d=0,k;k=f[c++];)if(k.nodeType===1)a[d++]=k;f=a}return f}})();u.getElementsByClassName||(h=u.querySelectorAll?function(e,f,a){return a.querySelectorAll((f?f:"")+"."+e)}:function(e,f,a){f=a.getElementsByTagName(f||o);a=[];var c=0,d=0,k=f.length,v,s;for(e=g+e+g;c<k;++c){v=f[c];if((s=v.className)&&(g+s+g).indexOf(e)>-1)a[d++]=
v}return a});b.query=j;b.get=function(e,f){return j(e,f)[0]||null};b.mix(r,{query:j,get:b.get,filter:function(e,f){var a=j(e),c,d,k,v=[];if(b.isString(f)&&(c=x.exec(f))&&!c[1]){d=c[2];k=c[3];f=function(s){return!(d&&s.tagName!==d.toUpperCase()||k&&!r.hasClass(s,k))}}if(b.isFunction(f))v=b.filter(a,f);else if(f&&b.ExternalSelector)v=b.ExternalSelector._filter(e,f);else m(f);return v},test:function(e,f){e=j(e);return r.filter(e,f).length===e.length}})});
KISSY.add("dom-class",function(b,n){function j(h,m,u,r){if(!(m=b.trim(m)))return r?false:n;h=b.query(h);var g=0,o=h.length;m=m.split(p);for(var w;g<o;g++){w=h[g];if(l._isElementNode(w)){w=u(w,m,m.length);if(w!==n)return w}}if(r)return false}var l=b.DOM,p=/[\.\s]\s*\.?/,q=/[\n\t]/g;b.mix(l,{hasClass:function(h,m){return j(h,m,function(u,r,g){if(u=u.className){u=" "+u+" ";for(var o=0,w=true;o<g;o++)if(u.indexOf(" "+r[o]+" ")<0){w=false;break}if(w)return true}},true)},addClass:function(h,m){j(h,m,function(u,
r,g){var o=u.className;if(o){var w=" "+o+" ";o=o;for(var x=0;x<g;x++)if(w.indexOf(" "+r[x]+" ")<0)o+=" "+r[x];u.className=b.trim(o)}else u.className=m})},removeClass:function(h,m){j(h,m,function(u,r,g){var o=u.className;if(o)if(g){o=(" "+o+" ").replace(q," ");for(var w=0,x;w<g;w++)for(x=" "+r[w]+" ";o.indexOf(x)>=0;)o=o.replace(x," ");u.className=b.trim(o)}else u.className=""})},replaceClass:function(h,m,u){l.removeClass(h,m);l.addClass(h,u)},toggleClass:function(h,m,u){var r=b.isBoolean(u),g;j(h,
m,function(o,w,x){for(var e=0,f;e<x;e++){f=w[e];g=r?!u:l.hasClass(o,f);l[g?"removeClass":"addClass"](o,f)}})}})});
KISSY.add("dom-attr",function(b,n){function j(f,a){return a&&a.nodeName.toUpperCase()===f.toUpperCase()}var l=b.UA,p=l.ie,q=p&&p<8,h=document.documentElement.textContent!==n?"textContent":"innerText",m=b.DOM,u=m._isElementNode,r=m._isTextNode,g=/href|src|style/,o=/href|src|colspan|rowspan/,w=/\r/g,x=/radio|checkbox/,e={readonly:"readOnly"};q&&b.mix(e,{"for":"htmlFor","class":"className"});b.mix(m,{attr:function(f,a,c){if(a=b.trim(a)){a=a.toLowerCase();a=e[a]||a;if(c===n){f=b.get(f);if(!u(f))return n;
var d;g.test(a)||(d=f[a]);if(d===n)d=f.getAttribute(a);if(q)if(o.test(a))d=f.getAttribute(a,2);else if(a==="style")d=f.style.cssText;return d===null?n:d}b.each(b.query(f),function(k){if(u(k))if(q&&a==="style")k.style.cssText=c;else k.setAttribute(a,""+c)})}},removeAttr:function(f,a){b.each(b.query(f),function(c){u(c)&&c.removeAttribute(a)})},val:function(f,a){if(a===n){var c=b.get(f);if(!u(c))return n;if(j("option",c))return(c.attributes.value||{}).specified?c.value:c.text;if(j("select",c)){var d=
c.selectedIndex;f=c.options;if(d<0)return null;else if(c.type==="select-one")return m.val(f[d]);c=[];for(var k=0,v=f.length;k<v;++k)f[k].selected&&c.push(m.val(f[k]));return c}if(l.webkit&&x.test(c.type))return c.getAttribute("value")===null?"on":c.value;return(c.value||"").replace(w,"")}b.each(b.query(f),function(s){if(j("select",s)){if(b.isNumber(a))a+="";var i=b.makeArray(a),t=s.options,y;k=0;for(v=t.length;k<v;++k){y=t[k];y.selected=b.inArray(m.val(y),i)}if(!i.length)s.selectedIndex=-1}else if(u(s))s.value=
a})},text:function(f,a){if(a===n){f=b.get(f);if(u(f))return f[h]||"";else if(r(f))return f.nodeValue}else b.each(b.query(f),function(c){if(u(c))c[h]=a;else if(r(c))c.nodeValue=a})}})});
KISSY.add("dom-style",function(b,n){function j(a,c){var d=b.get(a),k=c===u?d.offsetWidth:d.offsetHeight;b.each(c===u?["Left","Right"]:["Top","Bottom"],function(v){k-=parseFloat(p._getComputedStyle(d,"padding"+v))||0;k-=parseFloat(p._getComputedStyle(d,"border"+v+"Width"))||0});return k}function l(a,c,d){var k=d;if(d===r&&o.test(c)){k=0;if(p.css(a,"position")==="absolute"){d=a[c==="left"?"offsetLeft":"offsetTop"];if(q.ie===8||q.opera)d-=g(p.css(a.offsetParent,"border-"+c+"-width"))||0;k=d-(g(p.css(a,
"margin-"+c))||0)}}return k}var p=b.DOM,q=b.UA,h=document,m=h.documentElement,u="width",r="auto",g=parseInt,o=/^left|top$/,w=/width|height|top|left|right|bottom|margin|padding/i,x=/-([a-z])/ig,e=function(a,c){return c.toUpperCase()},f={};b.mix(p,{_CUSTOM_STYLES:f,_getComputedStyle:function(a,c){var d="",k=a.ownerDocument;if(a.style)d=k.defaultView.getComputedStyle(a,null)[c];return d},css:function(a,c,d){if(b.isPlainObject(c))for(var k in c)p.css(a,k,c[k]);else{if(c.indexOf("-")>0)c=c.replace(x,e);
c=f[c]||c;if(d===n){a=b.get(a);k="";if(a&&a.style){k=c.get?c.get(a):a.style[c];if(k===""&&!c.get)k=l(a,c,p._getComputedStyle(a,c))}return k===n?"":k}else{if(d===null||d==="")d="";else if(!isNaN(new Number(d))&&w.test(c))d+="px";(c===u||c==="height")&&parseFloat(d)<0||b.each(b.query(a),function(v){if(v&&v.style){c.set?c.set(v,d):(v.style[c]=d);if(d==="")v.style.cssText||v.removeAttribute("style")}})}}},width:function(a,c){if(c===n)return j(a,u);else p.css(a,u,c)},height:function(a,c){if(c===n)return j(a,
"height");else p.css(a,"height",c)},addStyleSheet:function(a,c){var d;if(c)d=b.get(c);d||(d=p.create("<style>",{id:c}));b.get("head").appendChild(d);if(d.styleSheet)d.styleSheet.cssText=a;else d.appendChild(h.createTextNode(a))}});if(m.style.cssFloat!==n)f["float"]="cssFloat";else if(m.style.styleFloat!==n)f["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,n){if(b.UA.ie){var j=b.DOM,l=document,p=l.documentElement,q=j._CUSTOM_STYLES,h=/^-?\d+(?:px)?$/i,m=/^-?\d/,u=/^width|height$/;try{if(p.style.opacity===n&&p.filters)q.opacity={get:function(g){var o=100;try{o=g.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(w){try{o=g.filters("alpha").opacity}catch(x){}}return o/100+""},set:function(g,o){g=g.style;g.zoom=1;g.filter="alpha(opacity="+o*100+")"}}}catch(r){b.log("IE filters ActiveX is disabled. ex = "+r)}if(!(l.defaultView||
{}).getComputedStyle&&p.currentStyle)j._getComputedStyle=function(g,o){var w=g.style,x=g.currentStyle[o];if(u.test(o))x=j[o](g)+"px";else if(!h.test(x)&&m.test(x)){var e=w.left,f=g.runtimeStyle.left;g.runtimeStyle.left=g.currentStyle.left;w.left=o==="fontSize"?"1em":x||0;x=w.pixelLeft+"px";w.left=e;g.runtimeStyle.left=f}return x}}});
KISSY.add("dom-offset",function(b,n){function j(s){var i=0,t=0,y=p(s[f]);if(s[v]){s=s[v]();i=s[a]+q[d](y);t=s[c]+q[k](y)}return{left:i,top:t}}function l(s,i){if(q.css(s,w)==="static")s.style[w]=x;var t=j(s),y={},z,A;for(A in i){z=o(q.css(s,A),10)||0;y[A]=z+i[A]-t[A]}q.css(s,y)}function p(s){return s&&"scrollTo"in s&&s[e]?s:s&&s.nodeType===9?s.defaultView||s.parentWindow:false}var q=b.DOM,h=window,m=document,u=q._isElementNode,r=m.compatMode==="CSS1Compat",g=Math.max,o=parseInt,w="position",x="relative",
e="document",f="ownerDocument",a="left",c="top",d="scrollLeft",k="scrollTop",v="getBoundingClientRect";b.mix(q,{offset:function(s,i){if(!(s=b.get(s))||!s[f])return null;if(i===n)return j(s);l(s,i)},scrollIntoView:function(s,i,t,y){if((s=b.get(s))&&s[f]){i=b.get(i);y=y===n?true:!!y;t=t===n?true:!!t;if(!u(i))return s.scrollIntoView(t);var z=q.offset(s),A=q.offset(i),C={left:z[a]-A[a],top:z[c]-A[c]};z=i.clientHeight;A=i.clientWidth;var B=q[d](i),D=q[k](i),F=B+A,G=D+z,H=s.offsetHeight;s=s.offsetWidth;
var E=C.left+B-(o(q.css(i,"borderLeftWidth"))||0);C=C.top+D-(o(q.css(i,"borderTopWidth"))||0);var I=E+s,J=C+H;if(H>z||C<D||t)i[k]=C;else if(J>G)i[k]=J-z;if(y)if(s>A||E<B||t)i[d]=E;else if(I>F)i[d]=I-A}}});b.each(["Left","Top"],function(s,i){var t="scroll"+s;q[t]=function(y){var z=0,A=y===n?h:p(y),C;if(A&&(C=A[e]))z=A[i?"pageYOffset":"pageXOffset"]||C.documentElement[t]||C.body[t];else if(u(y=b.get(y)))z=y[t];return z}});b.each(["Width","Height"],function(s){q["doc"+s]=function(i){i=i||m;return g(r?
i.documentElement["scroll"+s]:i.body["scroll"+s],q["viewport"+s](i))};q["viewport"+s]=function(i){var t="inner"+s;i=p(i)||h;var y=i[e];return t in i?i[t]:r?y.documentElement["client"+s]:y.body["client"+s]}})});
KISSY.add("dom-traversal",function(b,n){function j(h,m,u,r){if(!(h=b.get(h)))return null;if(m===n)m=1;var g=null,o,w;if(b.isNumber(m)&&m>=0){if(m===0)return h;o=0;w=m;m=function(){return++o===w}}for(;h=h[u];)if(q(h)&&(!m||p.test(h,m))&&(!r||r(h))){g=h;break}return g}function l(h,m,u){var r=[];var g=h=b.get(h);if(h&&u)g=h.parentNode;if(g){u=0;for(g=g.firstChild;g;g=g.nextSibling)if(q(g)&&g!==h&&(!m||p.test(g,m)))r[u++]=g}return r}var p=b.DOM,q=p._isElementNode;b.mix(p,{parent:function(h,m){return j(h,
m,"parentNode",function(u){return u.nodeType!=11})},next:function(h,m){return j(h,m,"nextSibling")},prev:function(h,m){return j(h,m,"previousSibling")},siblings:function(h,m){return l(h,m,true)},children:function(h,m){return l(h,m)},contains:function(h,m){var u=false;if((h=b.get(h))&&(m=b.get(m)))if(h.contains)return h.contains(m);else if(h.compareDocumentPosition)return!!(h.compareDocumentPosition(m)&16);else for(;!u&&(m=m.parentNode);)u=m==h;return u}})});
KISSY.add("dom-create",function(b,n){function j(i,t){if(o(i)&&t)for(var y in t)m.attr(i,y,t[y]);return i}function l(i,t){var y=null,z;if(i&&(i.push||i.item)&&i[0]){t=t||i[0].ownerDocument;y=t.createDocumentFragment();if(i.item)i=b.makeArray(i);t=0;for(z=i.length;t<z;t++)y.appendChild(i[t])}else b.log("Unable to convert "+i+" to fragment.");return y}function p(i,t,y,z){if(y){var A=b.guid("ks-tmp-");t+='<span id="'+A+'"></span>';b.available(A,function(){var C=b.get("head"),B,D,F,G,H,E;for(f.lastIndex=
0;B=f.exec(t);)if((F=(D=B[1])?D.match(a):false)&&F[2]){B=h.createElement("script");B.src=F[2];if((G=D.match(c))&&G[2])B.charset=G[2];B.async=true;C.appendChild(B)}else if((E=B[2])&&E.length>0)b.globalEval(E);(H=h.getElementById(A))&&m.remove(H);b.isFunction(z)&&z()});q(i,t)}else{q(i,t);b.isFunction(z)&&z()}}function q(i,t){t=t.replace(f,"");try{i.innerHTML=t}catch(y){for(;i.firstChild;)i.removeChild(i.firstChild);t&&i.appendChild(m.create(t))}}var h=document,m=b.DOM,u=b.UA,r=u.ie,g=m._isSupportedNode,
o=m._isElementNode,w=h.createElement("div"),x=/<(\w+)/,e=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,f=/<script([^>]*)>([\s\S]*?)<\/script>/ig,a=/\ssrc=(['"])(.*?)\1/i,c=/\scharset=(['"])(.*?)\1/i;b.mix(m,{create:function(i,t,y){if(g(i))return i;if(!(i=b.trim(i)))return null;var z=null;z=m._creators;var A,C="div",B;if(A=e.exec(i))z=(y||h).createElement(A[1]);else{if((A=x.exec(i))&&(B=A[1])&&b.isFunction(z[B=B.toLowerCase()]))C=B;i=z[C](i,y).childNodes;z=i.length===1?i[0].parentNode.removeChild(i[0]):l(i,y||h)}return j(z,
t)},_creators:{div:function(i,t){t=t?t.createElement("div"):w;t.innerHTML=i;return t}},html:function(i,t,y,z){if(t===n){i=b.get(i);if(o(i))return i.innerHTML}else b.each(b.query(i),function(A){o(A)&&p(A,t,y,z)})},remove:function(i){b.each(b.query(i),function(t){o(t)&&t.parentNode&&t.parentNode.removeChild(t)})}});if(u.gecko||r){var d=m._creators,k=m.create,v=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/;u={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};
for(var s in u)(function(i){d[s]=function(t,y){return k("<"+i+">"+t+"</"+i+">",null,y)}})(u[s]);if(r){d.script=function(i,t){t=t?t.createElement("div"):w;t.innerHTML="-"+i;t.removeChild(t.firstChild);return t};if(r<8)d.tbody=function(i,t){t=k("<table>"+i+"</table>",null,t);var y=t.children.tags("tbody")[0];t.children.length>1&&y&&!v.test(i)&&y.parentNode.removeChild(y);return t}}b.mix(d,{optgroup:d.option,th:d.td,thead:d.tbody,tfoot:d.tbody,caption:d.tbody,colgroup:d.tbody})}});
KISSY.add("dom-insertion",function(b){var n=b.DOM;b.mix(n,{insertBefore:function(j,l){j=n.create(j);l=b.get(l);j&&l&&l.parentNode&&l.parentNode.insertBefore(j,l);return j},insertAfter:function(j,l){j=n.create(j);l=b.get(l);if(j&&l&&l.parentNode)l.nextSibling?l.parentNode.insertBefore(j,l.nextSibling):l.parentNode.appendChild(j);return j}})});
KISSY.add("event",function(b,n){function j(a,c,d,k,v){if(b.isString(c))c=b.query(c);if(b.isArray(c)){b.each(c,function(s){f[a](s,d,k,v)});return true}if((d=b.trim(d))&&d.indexOf(w)>0){b.each(d.split(w),function(s){f[a](c,s,k,v)});return true}}function l(a){return h(a)?a[o]:-1}function p(a,c){if(!h(a))return b.error("Text or comment node is not valid event target.");try{a[o]=c}catch(d){b.error(d)}}function q(a){try{a[o]=n;delete a[o]}catch(c){}}function h(a){return a&&a.nodeType!==3&&a.nodeType!==
8}var m=window,u=document,r=u.addEventListener?function(a,c,d,k){a.addEventListener&&a.addEventListener(c,d,!!k)}:function(a,c,d){a.attachEvent&&a.attachEvent("on"+c,d)},g=u.removeEventListener?function(a,c,d,k){a.removeEventListener&&a.removeEventListener(c,d,!!k)}:function(a,c,d){a.detachEvent&&a.detachEvent("on"+c,d)},o="ksEventTargetId",w=" ",x=b.now(),e={},f={EVENT_GUID:o,special:{},add:function(a,c,d,k){if(!j("add",a,c,d,k)){var v=l(a),s,i;if(!(v===-1||!c||!b.isFunction(d))){if(!v){p(a,v=x++);
e[v]={target:a,events:{}}}i=e[v].events;s=!a.isCustomEventTarget&&f.special[c]||{};if(!i[c]){v=function(t,y){if(!t||!t.fixed){t=new b.EventObject(a,t,c);b.isPlainObject(y)&&b.mix(t,y)}s.setup&&s.setup(t);return(s.handle||f._handle)(a,t,i[c].listeners,k)};i[c]={handle:v,listeners:[]};if(a.isCustomEventTarget)a._addEvent&&a._addEvent(c,v);else r(a,s.fix||c,v,s.capture)}i[c].listeners.push(d)}}},remove:function(a,c,d){if(!j("remove",a,c,d)){var k=l(a),v,s,i,t,y,z;if(k!==-1)if(k&&(v=e[k]))if(v.target===
a){v=v.events||{};if(s=v[c]){i=s.listeners;y=i.length;if(b.isFunction(d)&&y&&b.inArray(d,i)){z=[];for(t=0;t<y;++t)d!==i[t]&&z.push(i[t]);y=z.length}if(d===n||y===0){if(a.isCustomEventTarget)a._addEvent&&a._removeEvent(c,s.handle);else g(a,c,s.handle);delete v[c]}}if(c===n||b.isEmptyObject(v)){for(c in v)f.remove(a,c);delete e[k];q(a)}}}},_handle:function(a,c,d,k){d=d.slice(0);var v,s=0,i=d.length;for(k=k||a;s<i;++s){v=d[s].call(k,c);if(v===false&&a.isCustomEventTarget||c.isImmediatePropagationStopped)break}return v},
_getCache:function(a){return e[a]},_simpleAdd:r,_simpleRemove:g};f.on=f.add;b.Event=f;m.attachEvent&&!m.addEventListener&&m.attachEvent("onunload",function(){var a,c;for(a in e)if(c=e[a].target)try{f.remove(c)}catch(d){}})});
KISSY.add("event-object",function(b,n){function j(q,h,m){this.currentTarget=q;this.originalEvent=h||{};if(h){this.type=h.type;this._fix()}else{this.type=m;this.target=q}this.fixed=true}var l=document,p="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(j.prototype,
{_fix:function(){for(var q=this.originalEvent,h=p.length,m;h;){m=p[--h];this[m]=q[m]}if(!this.target)this.target=this.srcElement||l;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===n&&this.clientX!==n){q=l.documentElement;h=l.body;this.pageX=this.clientX+(q&&q.scrollLeft||h&&h.scrollLeft||0)-(q&&q.clientLeft||h&&h.clientLeft||0);this.pageY=this.clientY+
(q&&q.scrollTop||h&&h.scrollTop||0)-(q&&q.clientTop||h&&h.clientTop||0)}if(this.which===n)this.which=this.charCode!==n?this.charCode:this.keyCode;if(this.metaKey===n)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==n)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var q=this.originalEvent;if(q.preventDefault)q.preventDefault();else q.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var q=this.originalEvent;if(q.stopPropagation)q.stopPropagation();
else q.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var q=this.originalEvent;q.stopImmediatePropagation?q.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(q){q?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=j});
KISSY.add("event-target",function(b,n){var j=b.Event,l=j.EVENT_GUID;b.EventTarget={isCustomEventTarget:true,fire:function(p,q){if((p=((j._getCache(this[l]||-1)||{}).events||{})[p])&&b.isFunction(p.handle))return p.handle(n,q)},on:function(p,q,h){j.add(this,p,q,h)},detach:function(p,q){j.remove(this,p,q)}}});
KISSY.add("event-mouseenter",function(b){var n=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(j){n.special[j.name]={fix:j.fix,setup:function(l){l.type=j.name},handle:function(l,p,q){var h=p.relatedTarget;try{for(;h&&h!==l;)h=h.parentNode;h!==l&&n._handle(l,p,q)}catch(m){}}}})});
KISSY.add("event-focusin",function(b){var n=b.Event;document.addEventListener&&b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(j){n.special[j.name]={fix:j.fix,capture:true,setup:function(l){l.type=j.name}}})});
KISSY.add("node",function(b){function n(l,p,q){var h;if(!(this instanceof n))return new n(l,p,q);if(!l)return null;if(j._isSupportedNode(l))h=l;else if(typeof l==="string")h=j.create(l,p,q);this[0]=h}var j=b.DOM;b.augment(n,{length:1,getDOMNode:function(){return this[0]}});b.one=function(l,p){return new n(b.get(l,p))};b.Node=n});
KISSY.add("nodelist",function(b){function n(p){if(!(this instanceof n))return new n(p);l.push.apply(this,p||[])}var j=b.DOM,l=Array.prototype;b.mix(n.prototype,{length:0,item:function(p){var q=null;if(j._isElementNode(this[p]))q=new b.Node(this[p]);return q},getDOMNodes:function(){return l.slice.call(this)},each:function(p,q){for(var h=this.length,m=0,u;m<h;++m){u=new b.Node(this[m]);p.call(q||u,u,m,this)}return this}});b.all=function(p,q){return new n(b.query(p,q,true))};b.NodeList=n});
KISSY.add("node-attach",function(b,n){function j(x,arguments,e,f){var a=[this[x?r:u]()].concat(b.makeArray(arguments));if(arguments[e]===n)return f.apply(p,a);else{f.apply(p,a);return this}}function l(x,e){b.each(x,function(f){b.each([h,m],function(a,c){a[f]=function(d){switch(e){case g:return function(){return j.call(this,c,arguments,1,d)};case o:return function(){return j.call(this,c,arguments,0,d)};case w:return function(){var k=this[c?r:u]();return(k=d.apply(p,[k].concat(b.makeArray(arguments))))?
new b[k.length?"NodeList":"Node"](k):null};default:return function(){var k=this[c?r:u]();k=d.apply(p,[k].concat(b.makeArray(arguments)));return k===n?this:k}}}(p[f])})})}var p=b.DOM,q=b.Event,h=b.Node.prototype,m=b.NodeList.prototype,u="getDOMNode",r=u+"s",g=1,o=2,w=4;b.mix(h,{one:function(x){return b.one(x,this[0])},all:function(x){return b.all(x,this[0])}});l(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);l(["attr","removeAttr"],g);l(["val","text"],o);l(["css"],g);l(["width",
"height"],o);l(["offset"],o);l(["scrollIntoView"]);l(["parent","next","prev","siblings","children"],w);l(["contains"]);l(["html"],o);l(["remove"]);b.each([h,m],function(x){b.mix(x,{append:function(e){e&&b.each(this,function(f){f.appendChild(p.create(e))});return this},appendTo:function(e){if((e=b.get(e))&&e.appendChild)b.each(this,function(f){e.appendChild(f)});return this}})});b.each([h,m],function(x){b.mix(x,b.EventTarget);x._addEvent=function(e,f){for(var a=0,c=this.length;a<c;a++)q._simpleAdd(this[a],
e,f)};x._removeEvent=function(e,f){for(var a=0,c=this.length;a<c;a++)q._simpleRemove(this[a],e,f)};delete x.fire})});
KISSY.add("ajax",function(b){var n=document,j=n.createElement("script").readyState?function(l,p){l.onreadystatechange=function(){var q=l.readyState;if(q==="loaded"||q==="complete"){l.onreadystatechange=null;p.call(this)}}}:function(l,p){l.onload=p};b.Ajax={request:function(){b.error("not implemented")},getScript:function(l,p,q){var h=b.get("head")||n.documentElement,m=n.createElement("script");m.src=l;if(q)m.charset=q;m.async=true;b.isFunction(p)&&j(m,p);h.appendChild(m)}}});
