/*
Copyright 2010, KISSY UI Library v1.1.2
MIT Licensed
build time: Aug 20 12:36
*/
(function(d,p,s){if(d[p]===s)d[p]={};p=d[p];var w=d.document,m=location,l=function(e,n,u,x){if(!n||!e)return e;if(u===s)u=true;var k,a,c;if(x&&(c=x.length))for(k=0;k<c;k++){a=x[k];if(a in n)if(u||!(a in e))e[a]=n[a]}else for(a in n)if(u||!(a in e))e[a]=n[a];return e},i=false,f=[],q=false,r=/^#?([\w-]+)$/,j=0;l(p,{version:"1.1.2",__init:function(){this.Env={mods:{},_loadQueue:{}};var e=w.getElementsByTagName("script");this.Config={debug:"",base:e[e.length-1].src.replace(/^(.*)(seed|kissy).*$/i,
"$1"),timeout:10}},ready:function(e){q||this._bindReady();i?e.call(d,this):f.push(e);return this},_bindReady:function(){var e=this,n=w.documentElement.doScroll,u=n?"onreadystatechange":"DOMContentLoaded",x=function(){e._fireReady()};q=true;if(w.readyState==="complete")return x();if(w.addEventListener){var k=function(){w.removeEventListener(u,k,false);x()};w.addEventListener(u,k,false);d.addEventListener("load",x,false)}else{var a=function(){if(w.readyState==="complete"){w.detachEvent(u,a);x()}};w.attachEvent(u,
a);d.attachEvent("onload",x);if(d==d.top){var c=function(){try{n("left");x()}catch(h){setTimeout(c,1)}};c()}}},_fireReady:function(){if(!i){i=true;if(f){for(var e,n=0;e=f[n++];)e.call(d,this);f=null}}},available:function(e,n){if((e=(e+"").match(r)[1])&&p.isFunction(n))var u=1,x=p.later(function(){if(w.getElementById(e)&&(n()||1)||++u>500)x.cancel()},40,true)},mix:l,merge:function(){var e={},n,u=arguments.length;for(n=0;n<u;++n)l(e,arguments[n]);return e},augment:function(){var e=arguments,n=e.length-
2,u=e[0],x=e[n],k=e[n+1],a=1;if(!p.isArray(k)){x=k;k=s;n++}if(!p.isBoolean(x)){x=s;n++}for(;a<n;a++)l(u.prototype,e[a].prototype||e[a],x,k);return u},extend:function(e,n,u,x){if(!n||!e)return e;var k=Object.prototype,a=n.prototype,c=function(h){function b(){}b.prototype=h;return new b}(a);e.prototype=c;c.constructor=e;e.superclass=a;if(n!==Object&&a.constructor===k.constructor)a.constructor=n;u&&l(c,u);x&&l(e,x);return e},namespace:function(){var e=arguments.length,n=null,u,x,k;for(u=0;u<e;++u){k=
(""+arguments[u]).split(".");n=this;for(x=d[k[0]]===n?1:0;x<k.length;++x)n=n[k[x]]=n[k[x]]||{}}return n},app:function(e,n){var u=p.isString(e),x=u?d[e]||{}:e;l(x,this,true,p.__APP_MEMBERS);x.__init();l(x,p.isFunction(n)?n():n);u&&(d[e]=x);return x},log:function(e,n,u){if(p.Config.debug){if(u)e=u+": "+e;if(d.console!==s&&console.log)console[n&&console[n]?n:"log"](e)}},error:function(e){if(p.Config.debug)throw e;},guid:function(e){var n=j++ +"";return e?e+n:n}});p.__init();p.__APP_MEMBERS=["__init",
"namespace"];if(m&&(m.search||"").indexOf("ks-debug")!==-1)p.Config.debug=true})(window,"KISSY");
(function(d,p,s){function w(b){var g=typeof b;return b===null||g!=="object"&&g!=="function"}function m(b){return f.slice.call(b)}var l=document,i=l.documentElement,f=Array.prototype,q=f.indexOf,r=f.lastIndexOf,j=f.filter,e=String.prototype.trim,n=Object.prototype.toString,u=encodeURIComponent,x=decodeURIComponent,k=/^\s+|\s+$/g,a=/^(\w+)\[\]$/,c=/\S/;p.mix(p,{isUndefined:function(b){return b===s},isBoolean:function(b){return typeof b==="boolean"},isString:function(b){return typeof b==="string"},isNumber:function(b){return typeof b===
"number"&&isFinite(b)},isPlainObject:function(b){return b&&n.call(b)==="[object Object]"&&!b.nodeType&&!b.setInterval},isEmptyObject:function(b){for(var g in b)return false;return true},isFunction:function(b){return n.call(b)==="[object Function]"},isArray:function(b){return n.call(b)==="[object Array]"},trim:e?function(b){return b==s?"":e.call(b)}:function(b){return b==s?"":b.toString().replace(k,"")},substitute:function(b,g,o){if(!p.isString(b)||!p.isPlainObject(g))return b;return b.replace(o||
/\\?\{([^{}]+)\}/g,function(t,v){if(t.charAt(0)==="\\")return t.slice(1);return g[v]!==s?g[v]:""})},each:function(b,g,o){var t,v=0,A=b.length,y=A===s||p.isFunction(b);o=o||d;if(y)for(t in b){if(g.call(o,b[t],t,b)===false)break}else for(t=b[0];v<A&&g.call(o,t,v,b)!==false;t=b[++v]);return b},indexOf:q?function(b,g){return q.call(g,b)}:function(b,g){for(var o=0,t=g.length;o<t;++o)if(g[o]===b)return o;return-1},lastIndexOf:r?function(b,g){return r.call(g,b)}:function(b,g){for(var o=g.length-1;o>=0;o--)if(g[o]===
b)break;return o},unique:function(b,g){g&&b.reverse();b=b.slice();for(var o=0,t,v;o<b.length;){for(v=b[o];(t=p.lastIndexOf(v,b))!==o;)b.splice(t,1);o+=1}g&&b.reverse();return b},inArray:function(b,g){return p.indexOf(b,g)>-1},makeArray:function(b){if(b===null||b===s)return[];if(p.isArray(b))return b;if(typeof b.length!=="number"||p.isString(b)||p.isFunction(b))return[b];return m(b)},filter:j?function(b,g,o){return j.call(b,g,o)}:function(b,g,o){var t=[];p.each(b,function(v,A,y){g.call(o,v,A,y)&&t.push(v)});
return t},param:function(b,g){if(!p.isPlainObject(b))return"";g=g||"&";var o=[],t,v;for(t in b){v=b[t];t=u(t);if(w(v))o.push(t,"=",u(v+""),g);else if(p.isArray(v)&&v.length)for(var A=0,y=v.length;A<y;++A)w(v[A])&&o.push(t,"[]=",u(v[A]+""),g)}o.pop();return o.join("")},unparam:function(b,g){if(typeof b!=="string"||(b=p.trim(b)).length===0)return{};var o={};b=b.split(g||"&");for(var t,v,A,y=0,z=b.length;y<z;++y){g=b[y].split("=");t=x(g[0]);try{v=x(g[1]||"")}catch(B){v=g[1]||""}if((A=t.match(a))&&A[1]){o[A[1]]=
o[A[1]]||[];o[A[1]].push(v)}else o[t]=v}return o},later:function(b,g,o,t,v){g=g||0;t=t||{};var A=b,y=p.makeArray(v),z;if(p.isString(b))A=t[b];A||p.error("method undefined");b=function(){A.apply(t,y)};z=o?setInterval(b,g):setTimeout(b,g);return{id:z,interval:o,cancel:function(){this.interval?clearInterval(z):clearTimeout(z)}}},clone:function(b){var g=b,o,t;if(b&&((o=p.isArray(b))||p.isPlainObject(b))){g=o?[]:{};for(t in b)if(b.hasOwnProperty(t))g[t]=p.clone(b[t])}return g},now:function(){return(new Date).getTime()},
globalEval:function(b){if(b&&c.test(b)){var g=l.getElementsByTagName("head")[0]||i,o=l.createElement("script");o.text=b;g.insertBefore(o,g.firstChild);g.removeChild(o)}}});try{m(i.childNodes)}catch(h){m=function(b){for(var g=[],o=b.length-1;o>=0;o--)g[o]=b[o];return g}}})(window,KISSY);
(function(d,p,s){var w=d.document,m=w.getElementsByTagName("head")[0]||w.documentElement,l=2,i=3,f=4,q=p.mix,r=w.createElement("script").readyState?function(e,n){var u=e.onreadystatechange;e.onreadystatechange=function(){var x=e.readyState;if(x==="loaded"||x==="complete"){e.onreadystatechange=null;u&&u();n.call(this)}}}:function(e,n){e.addEventListener("load",n,false)},j=/\.css(?:\?|$)/i;d={add:function(e,n,u){var x=this.Env.mods,k;u=u||{};if(p.isString(e)&&!u&&p.isPlainObject(n)){k={};k[e]=n;e=k}if(p.isPlainObject(e)){p.each(e,
function(a,c){a.name=c});q(x,e)}else{k=x[e]||{};e=u.host||k.host||e;k=x[e]||{};q(k,{name:e,status:l});if(!k.fns)k.fns=[];n&&k.fns.push(n);q(x[e]=k,u);k.attach!==false&&this.__isAttached(k.requires)&&this.__attachMod(k)}return this},use:function(e,n,u){e=e.replace(/\s+/g,"").split(",");u=u||{};var x=this,k=x.Env.mods,a=(u||0).global,c,h=e.length,b,g;a&&x.__mixMods(x,a);if(x.__isAttached(e))n&&n(x);else{for(c=0;c<h&&(b=k[e[c]]);c++)if(b.status!==f){if(u.order&&c>0){if(!b.requires)b.requires=[];b._requires=
b.requires.concat();p.inArray(e[c-1],b.requires)||b.requires.push(e[c-1])}x.__attach(b,function(){if(!g&&x.__isAttached(e)){g=true;if(b._requires)b.requires=b._requires;n&&n(x)}},a)}return x}},__attach:function(e,n,u){function x(){if(k.__isAttached(a)){e.status===l&&k.__attachMod(e);e.status===f&&n()}}for(var k=this,a=e.requires||[],c=0,h=a.length;c<h;c++)k.__attach(k.Env.mods[a[c]],x,u);k.__buildPath(e);k.__load(e,x,u)},__mixMods:function(e,n){var u=e.Env.mods,x=n.Env.mods,k,a;for(k in x){a=u[k]||
{};p.mix(a,x[k]);e.__buildPath(a,n);u[k]=a}},__attachMod:function(e){var n=this;if(e.fns){p.each(e.fns,function(u){u&&u(n)});e.fns=s}e.status=f},__isAttached:function(e){for(var n=this.Env.mods,u,x=(e=p.makeArray(e)).length-1;x>=0&&(u=n[e[x]]);x--)if(u.status!==f)return false;return true},__load:function(e,n,u){function x(){if(e.status!==i){var b;if(u&&(b=u.Env.mods[e.name]))p.mix(e,b);e.status=l;n()}k()}function k(){c[a]=l}var a=e.fullpath,c=this.Env._loadQueue,h=c[a];e.status=e.status||0;if(h===
l&&e.status<l)e.status=l;else if(h)e.status=1;if(e.status<1&&a){e.status=1;c[a]=this.getScript(a,{success:function(){KISSY.log(e.name+" onload fired.","info");x()},error:function(){e.status=i;k()},charset:e.charset})}else e.status===1&&h?r(h,x):n()},__buildPath:function(e,n){if(!e.fullpath&&e.path)e.fullpath=(n||this.Config.base)+e.path;if(e.fullpath&&this.Config.debug)e.fullpath=e.fullpath.replace(/-min/g,"")},getScript:function(e,n,u){var x=j.test(e),k=w.createElement(x?"link":"script"),a=n,c,h,
b;if(p.isPlainObject(a)){n=a.success;c=a.error;h=a.timeout;u=a.charset}if(x){k.href=e;k.rel="stylesheet"}else{k.src=e;k.async=true}if(u)k.charset=u;if(p.isFunction(n))x?n.call(k):r(k,function(){if(b){b.cancel();b=s}n.call(k)});if(p.isFunction(c))b=p.later(function(){b=s;c()},(h||this.Config.timeout)*1E3);m.insertBefore(k,m.firstChild);return k}};q(p,d);p.each(d,function(e,n){p.__APP_MEMBERS.push(n)})})(window,KISSY);
(function(d){var p={core:{path:"packages/core-min.js",charset:"utf-8"}};d.each(["sizzle","datalazyload","flash","switchable","suggest"],function(s){p[s]={path:s+"/"+s+"-pkg-min.js",requires:["core"],charset:"utf-8"}});d.add(p)})(KISSY);
KISSY.add("ua",function(d){var p=navigator.userAgent,s="",w="",m,l={webkit:0,trident:0,gecko:0,presto:0,chrome:0,safari:0,firefox:0,ie:0,opera:0},i=function(f){var q=0;return parseFloat(f.replace(/\./g,function(){return q++===0?".":""}))};if((m=p.match(/AppleWebKit\/([\d.]*)/))&&m[1]){l[s="webkit"]=i(m[1]);if((m=p.match(/Chrome\/([\d.]*)/))&&m[1])l[w="chrome"]=i(m[1]);else if((m=p.match(/\/([\d.]*) Safari/))&&m[1])l[w="safari"]=i(m[1]);if(/ Mobile\//.test(p))l.mobile="apple";else if(m=p.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))l.mobile=
m[0].toLowerCase()}else if((m=p.match(/Presto\/([\d.]*)/))&&m[1]){l[s="presto"]=i(m[1]);if((m=p.match(/Opera\/([\d.]*)/))&&m[1]){l[w="opera"]=i(m[1]);if((m=p.match(/Opera\/.* Version\/([\d.]*)/))&&m[1])l[w]=i(m[1]);if((m=p.match(/Opera Mini[^;]*/))&&m)l.mobile=m[0].toLowerCase();else if((m=p.match(/Opera Mobi[^;]*/))&&m)l.mobile=m[0]}}else if((m=p.match(/MSIE\s([^;]*)/))&&m[1]){l[s="trident"]=0.1;l[w="ie"]=i(m[1]);if((m=p.match(/Trident\/([\d.]*)/))&&m[1])l[s]=i(m[1])}else if(m=p.match(/Gecko/)){l[s=
"gecko"]=0.1;if((m=p.match(/rv:([\d.]*)/))&&m[1])l[s]=i(m[1]);if((m=p.match(/Firefox\/([\d.]*)/))&&m[1])l[w="firefox"]=i(m[1])}l.core=s;l.shell=w;l._numberify=i;d.UA=l});
KISSY.add("ua-extra",function(d){var p=d.UA,s=navigator.userAgent,w,m,l={},i=p._numberify;if(s.match(/360SE/))l[m="se360"]=3;else if(s.match(/Maxthon/)&&(w=window.external)){m="maxthon";try{l[m]=i(w.max_version)}catch(f){l[m]=0.1}}else if(w=s.match(/TencentTraveler\s([\d.]*)/))l[m="tt"]=w[1]?i(w[1]):0.1;else if(s.match(/TheWorld/))l[m="theworld"]=3;else if(w=s.match(/SE\s([\d.]*)/))l[m="sougou"]=w[1]?i(w[1]):0.1;m&&(l.shell=m);d.mix(p,l)});
KISSY.add("dom",function(d,p){function s(w,m){return w&&w.nodeType===m}d.DOM={_isElementNode:function(w){return s(w,1)},_isKSNode:function(w){return d.Node&&s(w,d.Node.TYPE)},_getWin:function(w){return w&&"scrollTo"in w&&w.document?w:s(w,9)?w.defaultView||w.parentWindow:w===p?window:false},_nodeTypeIs:s}});
KISSY.add("selector",function(d,p){function s(a,c){var h,b=[],g,o;c=w(c);if(d.isString(a)){a=d.trim(a);if(x.test(a)){if(a=m(a.slice(1),c))b=[a]}else if(h=k.exec(a)){g=h[1];o=h[2];h=h[3];if(c=g?m(g,c):c)if(h)if(!g||a.indexOf(j)!==-1)b=i(h,o,c);else{if((a=m(g,c))&&r.hasClass(a,h))b=[a]}else if(o)b=l(o,c)}else if(d.ExternalSelector)return d.ExternalSelector(a,c);else f(a)}else if(a&&(a[n]||a[u]))b=a[n]?[a[n]()]:a[u]();else if(a&&(d.isArray(a)||a.item&&!a.nodeType))b=a;else if(a)b=[a];if(b.item)b=d.makeArray(b);
b.each=function(t,v){return d.each(b,t,v)};return b}function w(a){if(a===p)a=q;else if(d.isString(a)&&x.test(a))a=m(a.slice(1),q);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function m(a,c){if(c.nodeType!==9)c=c.ownerDocument;return c.getElementById(a)}function l(a,c){return c.getElementsByTagName(a)}function i(a,c,h){h=a=h.getElementsByClassName(a);var b=0,g=0,o=a.length,t;if(c&&c!==e){h=[];for(c=c.toUpperCase();b<o;++b){t=a[b];if(t.tagName===c)h[g++]=t}}return h}function f(a){d.error("Unsupported selector: "+
a)}var q=document,r=d.DOM,j=" ",e="*",n="getDOMNode",u=n+"s",x=/^#[\w-]+$/,k=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=q.createElement("div");a.appendChild(q.createComment(""));if(a.getElementsByTagName(e).length>0)l=function(c,h){h=h.getElementsByTagName(c);if(c===e){c=[];for(var b=0,g=0,o;o=h[b++];)if(o.nodeType===1)c[g++]=o;h=c}return h}})();q.getElementsByClassName||(i=q.querySelectorAll?function(a,c,h){return h.querySelectorAll((c?c:"")+"."+a)}:function(a,c,h){c=h.getElementsByTagName(c||
e);h=[];var b=0,g=0,o=c.length,t,v;for(a=j+a+j;b<o;++b){t=c[b];if((v=t.className)&&(j+v+j).indexOf(a)>-1)h[g++]=t}return h});d.query=s;d.get=function(a,c){return s(a,c)[0]||null};d.mix(r,{query:s,get:d.get,filter:function(a,c){var h=s(a),b,g,o,t=[];if(d.isString(c)&&(b=k.exec(c))&&!b[1]){g=b[2];o=b[3];c=function(v){return!(g&&v.tagName!==g.toUpperCase()||o&&!r.hasClass(v,o))}}if(d.isFunction(c))t=d.filter(h,c);else if(c&&d.ExternalSelector)t=d.ExternalSelector._filter(a,c);else f(c);return t},test:function(a,
c){a=s(a);return r.filter(a,c).length===a.length}})});
KISSY.add("dom-class",function(d,p){function s(i,f,q,r){if(!(f=d.trim(f)))return r?false:p;i=d.query(i);var j=0,e=i.length;f=f.split(m);for(var n;j<e;j++){n=i[j];if(w._isElementNode(n)){n=q(n,f,f.length);if(n!==p)return n}}if(r)return false}var w=d.DOM,m=/[\.\s]\s*\.?/,l=/[\n\t]/g;d.mix(w,{hasClass:function(i,f){return s(i,f,function(q,r,j){if(q=q.className){q=" "+q+" ";for(var e=0,n=true;e<j;e++)if(q.indexOf(" "+r[e]+" ")<0){n=false;break}if(n)return true}},true)},addClass:function(i,f){s(i,f,function(q,
r,j){var e=q.className;if(e){var n=" "+e+" ";e=e;for(var u=0;u<j;u++)if(n.indexOf(" "+r[u]+" ")<0)e+=" "+r[u];q.className=d.trim(e)}else q.className=f})},removeClass:function(i,f){s(i,f,function(q,r,j){var e=q.className;if(e)if(j){e=(" "+e+" ").replace(l," ");for(var n=0,u;n<j;n++)for(u=" "+r[n]+" ";e.indexOf(u)>=0;)e=e.replace(u," ");q.className=d.trim(e)}else q.className=""})},replaceClass:function(i,f,q){w.removeClass(i,f);w.addClass(i,q)},toggleClass:function(i,f,q){var r=d.isBoolean(q),j;s(i,
f,function(e,n,u){for(var x=0,k;x<u;x++){k=n[x];j=r?!q:w.hasClass(e,k);w[j?"removeClass":"addClass"](e,k)}})}})});
KISSY.add("dom-attr",function(d,p){function s(k,a){return a&&a.nodeName.toUpperCase()===k.toUpperCase()}var w=d.UA,m=w.ie,l=m&&m<8,i=document.documentElement.textContent!==p?"textContent":"innerText",f=d.DOM,q=f._isElementNode,r=function(k){return f._nodeTypeIs(k,3)},j=/href|src|style/,e=/href|src|colspan|rowspan/,n=/\r/g,u=/radio|checkbox/,x={readonly:"readOnly"};l&&d.mix(x,{"for":"htmlFor","class":"className"});d.mix(f,{attr:function(k,a,c){if(d.isPlainObject(a))for(var h in a)f.attr(k,h,a[h]);
else if(a=d.trim(a)){a=a.toLowerCase();a=x[a]||a;if(c===p){k=d.get(k);if(!q(k))return p;var b;j.test(a)||(b=k[a]);if(b===p)b=k.getAttribute(a);if(l)if(e.test(a))b=k.getAttribute(a,2);else if(a==="style")b=k.style.cssText;return b===null?p:b}d.each(d.query(k),function(g){if(q(g))if(a==="style")g.style.cssText=c;else{if(a==="checked")g[a]=!!c;g.setAttribute(a,""+c)}})}},removeAttr:function(k,a){d.each(d.query(k),function(c){if(q(c)){f.attr(c,a,"");c.removeAttribute(a)}})},val:function(k,a){if(a===p){var c=
d.get(k);if(!q(c))return p;if(s("option",c))return(c.attributes.value||{}).specified?c.value:c.text;if(s("select",c)){var h=c.selectedIndex;k=c.options;if(h<0)return null;else if(c.type==="select-one")return f.val(k[h]);c=[];for(var b=0,g=k.length;b<g;++b)k[b].selected&&c.push(f.val(k[b]));return c}if(w.webkit&&u.test(c.type))return c.getAttribute("value")===null?"on":c.value;return(c.value||"").replace(n,"")}d.each(d.query(k),function(o){if(s("select",o)){if(d.isNumber(a))a+="";var t=d.makeArray(a),
v=o.options,A;b=0;for(g=v.length;b<g;++b){A=v[b];A.selected=d.inArray(f.val(A),t)}if(!t.length)o.selectedIndex=-1}else if(q(o))o.value=a})},text:function(k,a){if(a===p){k=d.get(k);if(q(k))return k[i]||"";else if(r(k))return k.nodeValue}else d.each(d.query(k),function(c){if(q(c))c[i]=a;else if(r(c))c.nodeValue=a})}})});
KISSY.add("dom-style",function(d,p){function s(a,c){var h=d.get(a),b=c===q?h.offsetWidth:h.offsetHeight;d.each(c===q?["Left","Right"]:["Top","Bottom"],function(g){b-=parseFloat(m._getComputedStyle(h,"padding"+g))||0;b-=parseFloat(m._getComputedStyle(h,"border"+g+"Width"))||0});return b}function w(a,c,h){var b=h;if(h===r&&e.test(c)){b=0;if(m.css(a,"position")==="absolute"){h=a[c==="left"?"offsetLeft":"offsetTop"];if(l.ie===8||l.opera)h-=j(m.css(a.offsetParent,"border-"+c+"-width"))||0;b=h-(j(m.css(a,
"margin-"+c))||0)}}return b}var m=d.DOM,l=d.UA,i=document,f=i.documentElement,q="width",r="auto",j=parseInt,e=/^left|top$/,n=/width|height|top|left|right|bottom|margin|padding/i,u=/-([a-z])/ig,x=function(a,c){return c.toUpperCase()},k={};d.mix(m,{_CUSTOM_STYLES:k,_getComputedStyle:function(a,c){var h="",b=a.ownerDocument;if(a.style)h=b.defaultView.getComputedStyle(a,null)[c];return h},css:function(a,c,h){if(d.isPlainObject(c))for(var b in c)m.css(a,b,c[b]);else{if(c.indexOf("-")>0)c=c.replace(u,x);
c=k[c]||c;if(h===p){a=d.get(a);b="";if(a&&a.style){b=c.get?c.get(a):a.style[c];if(b===""&&!c.get)b=w(a,c,m._getComputedStyle(a,c))}return b===p?"":b}else{if(h===null||h==="")h="";else if(!isNaN(new Number(h))&&n.test(c))h+="px";(c===q||c==="height")&&parseFloat(h)<0||d.each(d.query(a),function(g){if(g&&g.style){c.set?c.set(g,h):(g.style[c]=h);if(h==="")g.style.cssText||g.removeAttribute("style")}})}}},width:function(a,c){if(c===p)return s(a,q);else m.css(a,q,c)},height:function(a,c){if(c===p)return s(a,
"height");else m.css(a,"height",c)},addStyleSheet:function(a,c){var h;if(c)h=d.get(c);h||(h=m.create("<style>",{id:c}));d.get("head").appendChild(h);if(h.styleSheet)h.styleSheet.cssText=a;else h.appendChild(i.createTextNode(a))}});if(f.style.cssFloat!==p)k["float"]="cssFloat";else if(f.style.styleFloat!==p)k["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(d,p){if(d.UA.ie){var s=d.DOM;d=document;var w=d.documentElement,m=s._CUSTOM_STYLES,l=/^-?\d+(?:px)?$/i,i=/^-?\d/,f=/^width|height$/;try{if(w.style.opacity===p&&w.filters)m.opacity={get:function(r){var j=100;try{j=r.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{j=r.filters("alpha").opacity}catch(n){}}return j/100+""},set:function(r,j){r=r.style;r.zoom=1;r.filter="alpha(opacity="+j*100+")"}}}catch(q){}if(!(d.defaultView||{}).getComputedStyle&&w.currentStyle)s._getComputedStyle=
function(r,j){var e=r.style,n=r.currentStyle[j];if(f.test(j))n=s[j](r)+"px";else if(!l.test(n)&&i.test(n)){var u=e.left,x=r.runtimeStyle.left;r.runtimeStyle.left=r.currentStyle.left;e.left=j==="fontSize"?"1em":n||0;n=e.pixelLeft+"px";e.left=u;r.runtimeStyle.left=x}return n}}});
KISSY.add("dom-offset",function(d,p){function s(t){var v=0,A=0,y=j(t[a]);if(t[o]){t=t[o]();v=t[c];A=t[h];if(l.mobile!=="apple"){v+=m[b](y);A+=m[g](y)}}return{left:v,top:A}}function w(t,v){if(m.css(t,x)==="static")t.style[x]=k;var A=s(t),y={},z,B;for(B in v){z=u(m.css(t,B),10)||0;y[B]=z+v[B]-A[B]}m.css(t,y)}var m=d.DOM,l=d.UA,i=window,f=document,q=m._isElementNode,r=m._nodeTypeIs,j=m._getWin,e=f.compatMode==="CSS1Compat",n=Math.max,u=parseInt,x="position",k="relative",a="ownerDocument",c="left",h=
"top",b="scrollLeft",g="scrollTop",o="getBoundingClientRect";d.mix(m,{offset:function(t,v){if(!(t=d.get(t))||!t[a])return null;if(v===p)return s(t);w(t,v)},scrollIntoView:function(t,v,A,y){if((t=d.get(t))&&t[a]){y=y===p?true:!!y;A=A===p?true:!!A;if(!v||v===i)return t.scrollIntoView(A);v=d.get(v);if(r(v,9))v=j(v);var z=v&&"scrollTo"in v&&v.document,B=m.offset(t),C=z?{left:m.scrollLeft(v),top:m.scrollTop(v)}:m.offset(v),D={left:B[c]-C[c],top:B[h]-C[h]};B=z?m.viewportHeight(v):v.clientHeight;C=z?m.viewportWidth(v):
v.clientWidth;var E=m[b](v),F=m[g](v),G=E+C,M=F+B,I=t.offsetHeight;t=t.offsetWidth;var H=D.left+E-(u(m.css(v,"borderLeftWidth"))||0);D=D.top+F-(u(m.css(v,"borderTopWidth"))||0);var N=H+t,J=D+I,K,L;if(I>B||D<F||A)K=D;else if(J>M)K=J-B;if(y)if(t>C||H<E||A)L=H;else if(N>G)L=N-C;if(z){if(K!==p||L!==p)v.scrollTo(L,K)}else{if(K!==p)v[g]=K;if(L!==p)v[b]=L}}}});d.each(["Left","Top"],function(t,v){var A="scroll"+t;m[A]=function(y){var z=0,B=j(y),C;if(B&&(C=B.document))z=B[v?"pageYOffset":"pageXOffset"]||C.documentElement[A]||
C.body[A];else if(q(y=d.get(y)))z=y[A];return z}});d.each(["Width","Height"],function(t){m["doc"+t]=function(v){v=v||f;return n(e?v.documentElement["scroll"+t]:v.body["scroll"+t],m["viewport"+t](v))};m["viewport"+t]=function(v){var A="inner"+t;v=j(v);var y=v.document;return A in v?v[A]:e?y.documentElement["client"+t]:y.body["client"+t]}})});
KISSY.add("dom-traversal",function(d,p){function s(i,f,q,r){if(!(i=d.get(i)))return null;if(f===p)f=1;var j=null,e,n;if(d.isNumber(f)&&f>=0){if(f===0)return i;e=0;n=f;f=function(){return++e===n}}for(;i=i[q];)if(l(i)&&(!f||m.test(i,f))&&(!r||r(i))){j=i;break}return j}function w(i,f,q){var r=[];var j=i=d.get(i);if(i&&q)j=i.parentNode;if(j){q=0;for(j=j.firstChild;j;j=j.nextSibling)if(l(j)&&j!==i&&(!f||m.test(j,f)))r[q++]=j}return r}var m=d.DOM,l=m._isElementNode;d.mix(m,{parent:function(i,f){return s(i,
f,"parentNode",function(q){return q.nodeType!=11})},next:function(i,f){return s(i,f,"nextSibling")},prev:function(i,f){return s(i,f,"previousSibling")},siblings:function(i,f){return w(i,f,true)},children:function(i,f){return w(i,f)},contains:function(i,f){var q=false;if((i=d.get(i))&&(f=d.get(f)))if(i.contains)return i.contains(f);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(f)&16);else for(;!q&&(f=f.parentNode);)q=f==i;return q}})});
KISSY.add("dom-create",function(d,p){function s(y,z){n(y)&&d.isPlainObject(z)&&q.attr(y,z);return y}function w(y,z){var B=null,C;if(y&&(y.push||y.item)&&y[0]){z=z||y[0].ownerDocument;B=z.createDocumentFragment();if(y.item)y=d.makeArray(y);z=0;for(C=y.length;z<C;z++)B.appendChild(y[z])}return B}function m(y){var z=y.cloneNode(true);if(r.ie<8)z.innerHTML=y.innerHTML;return z}function l(y,z,B,C){if(B){var D=d.guid("ks-tmp-"),E=new RegExp(a);z+='<span id="'+D+'"></span>';d.available(D,function(){var F=
d.get("head"),G,M,I,H,N,J;for(E.lastIndex=0;G=E.exec(z);)if((I=(M=G[1])?M.match(h):false)&&I[2]){G=f.createElement("script");G.src=I[2];if((H=M.match(b))&&H[2])G.charset=H[2];G.async=true;F.appendChild(G)}else if((J=G[2])&&J.length>0)d.globalEval(J);(N=f.getElementById(D))&&q.remove(N);d.isFunction(C)&&C()});i(y,z)}else{i(y,z);d.isFunction(C)&&C()}}function i(y,z){z=(z+"").replace(a,"");try{y.innerHTML=z}catch(B){for(;y.firstChild;)y.removeChild(y.firstChild);z&&y.appendChild(q.create(z))}}var f=
document,q=d.DOM,r=d.UA,j=r.ie,e=q._nodeTypeIs,n=q._isElementNode,u=q._isKSNode,x=f.createElement("div"),k=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,c=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/\ssrc=(['"])(.*?)\1/i,b=/\scharset=(['"])(.*?)\1/i;d.mix(q,{create:function(y,z,B){if(e(y,1)||e(y,3))return m(y);if(u(y))return m(y[0]);if(!(y=d.trim(y)))return null;var C=null;C=q._creators;var D,E="div",F;if(D=c.exec(y))C=(B||f).createElement(D[1]);else{if((D=k.exec(y))&&(F=D[1])&&d.isFunction(C[F=F.toLowerCase()]))E=
F;y=C[E](y,B).childNodes;C=y.length===1?y[0].parentNode.removeChild(y[0]):w(y,B||f)}return s(C,z)},_creators:{div:function(y,z){z=z?z.createElement("div"):x;z.innerHTML=y;return z}},html:function(y,z,B,C){if(z===p){y=d.get(y);if(n(y))return y.innerHTML}else d.each(d.query(y),function(D){n(D)&&l(D,z,B,C)})},remove:function(y){d.each(d.query(y),function(z){n(z)&&z.parentNode&&z.parentNode.removeChild(z)})}});if(r.gecko||j){var g=q._creators,o=q.create,t=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
v={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var A in v)(function(y){g[A]=function(z,B){return o("<"+y+">"+z+"</"+y+">",null,B)}})(v[A]);if(j){g.script=function(y,z){z=z?z.createElement("div"):x;z.innerHTML="-"+y;z.removeChild(z.firstChild);return z};if(j<8)g.tbody=function(y,z){z=o("<table>"+y+"</table>",null,z);var B=z.children.tags("tbody")[0];z.children.length>1&&B&&!t.test(y)&&B.parentNode.removeChild(B);return z}}d.mix(g,{optgroup:g.option,th:g.td,
thead:g.tbody,tfoot:g.tbody,caption:g.tbody,colgroup:g.tbody})}});KISSY.add("dom-insertion",function(d){d.mix(d.DOM,{insertBefore:function(p,s){if((p=d.get(p))&&(s=d.get(s))&&s.parentNode)s.parentNode.insertBefore(p,s);return p},insertAfter:function(p,s){if((p=d.get(p))&&(s=d.get(s))&&s.parentNode)s.nextSibling?s.parentNode.insertBefore(p,s.nextSibling):s.parentNode.appendChild(p);return p}})});
KISSY.add("event",function(d,p){function s(k,a,c,h,b){if(d.isString(a))a=d.query(a);if(d.isArray(a)){d.each(a,function(g){x[k](g,c,h,b)});return true}if((c=d.trim(c))&&c.indexOf(e)>0){d.each(c.split(e),function(g){x[k](a,g,h,b)});return true}}function w(k){return i(k)?k[j]:-1}function m(k,a){if(!i(k))return d.error("Text or comment node is not valid event target.");try{k[j]=a}catch(c){d.error(c)}}function l(k){try{k[j]=p;delete k[j]}catch(a){}}function i(k){return k&&k.nodeType!==3&&k.nodeType!==
8}var f=document,q=f.addEventListener?function(k,a,c,h){k.addEventListener&&k.addEventListener(a,c,!!h)}:function(k,a,c){k.attachEvent&&k.attachEvent("on"+a,c)},r=f.removeEventListener?function(k,a,c,h){k.removeEventListener&&k.removeEventListener(a,c,!!h)}:function(k,a,c){k.detachEvent&&k.detachEvent("on"+a,c)},j="ksEventTargetId",e=" ",n=d.now(),u={},x={EVENT_GUID:j,special:{},add:function(k,a,c,h){if(!s("add",k,a,c,h)){var b=w(k),g,o,t,v,A;if(!(b===-1||!a||!d.isFunction(c))){if(!b){m(k,b=n++);
u[b]={target:k,events:{}}}o=u[b].events;if(!o[a]){g=((b=!k.isCustomEventTarget)||k._supportSpecialEvent)&&x.special[a]||{};t=function(y,z){if(!y||!y.fixed){y=new d.EventObject(k,y,a);d.isPlainObject(z)&&d.mix(y,z)}g.setup&&g.setup(y);return(g.handle||x._handle)(k,y,o[a].listeners)};o[a]={handle:t,listeners:[]};v=g.fix||a;A=g.capture;if(b)q(k,v,t,A);else k._addEvent&&k._addEvent(v,t,A)}o[a].listeners.push({fn:c,scope:h||k})}}},remove:function(k,a,c,h){if(!s("remove",k,a,c,h)){var b=w(k),g,o,t,v,A,
y,z;if(b!==-1)if(b&&(g=u[b]))if(g.target===k){h=h||k;g=g.events||{};if(o=g[a]){t=o.listeners;y=t.length;if(d.isFunction(c)&&y){A=v=0;for(z=[];v<y;++v)if(c!==t[v].fn||h!==t[v].scope)z[A++]=t[v];o.listeners=z;y=z.length}if(c===p||y===0){if(k.isCustomEventTarget)k._addEvent&&k._removeEvent(a,o.handle);else r(k,a,o.handle);delete g[a]}}if(a===p||d.isEmptyObject(g)){for(a in g)x.remove(k,a);delete u[b];l(k)}}}},_handle:function(k,a,c){c=c.slice(0);for(var h,b=0,g=c.length;b<g;++b){h=c[b];h=h.fn.call(h.scope||
k,a);if(h===false&&k.isCustomEventTarget||a.isImmediatePropagationStopped)break}return h},_getCache:function(k){return u[k]},_simpleAdd:q,_simpleRemove:r};x.on=x.add;d.Event=x});
KISSY.add("event-object",function(d,p){function s(l,i,f){this.currentTarget=l;this.originalEvent=i||{};if(i){this.type=i.type;this._fix()}else{this.type=f;this.target=l}this.currentTarget=l;this.fixed=true}var w=document,m="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");d.augment(s,
{_fix:function(){var l=this.originalEvent,i=m.length,f,q=this.currentTarget;for(q=q.nodeType===9?q:q.ownerDocument||w;i;){f=m[--i];this[f]=l[f]}if(!this.target)this.target=this.srcElement||w;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===p&&this.clientX!==p){l=q.documentElement;i=q.body;this.pageX=this.clientX+(l&&l.scrollLeft||i&&i.scrollLeft||
0)-(l&&l.clientLeft||i&&i.clientLeft||0);this.pageY=this.clientY+(l&&l.scrollTop||i&&i.scrollTop||0)-(l&&l.clientTop||i&&i.clientTop||0)}if(this.which===p)this.which=this.charCode!==p?this.charCode:this.keyCode;if(this.metaKey===p)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==p)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var l=this.originalEvent;if(l.preventDefault)l.preventDefault();else l.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var l=
this.originalEvent;if(l.stopPropagation)l.stopPropagation();else l.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var l=this.originalEvent;l.stopImmediatePropagation?l.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(l){l?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});d.EventObject=s});
KISSY.add("event-target",function(d,p){var s=d.Event,w=s.EVENT_GUID;d.EventTarget={isCustomEventTarget:true,fire:function(m,l){if((m=((s._getCache(this[w]||-1)||{}).events||{})[m])&&d.isFunction(m.handle))return m.handle(p,l);return this},on:function(m,l,i){s.add(this,m,l,i);return this},detach:function(m,l,i){s.remove(this,m,l,i);return this}}});
KISSY.add("event-mouseenter",function(d){var p=d.Event;d.UA.ie||d.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(s){p.special[s.name]={fix:s.fix,setup:function(w){w.type=s.name},handle:function(w,m,l){var i=m.relatedTarget;try{for(;i&&i!==w;)i=i.parentNode;i!==w&&p._handle(w,m,l)}catch(f){}}}})});
KISSY.add("event-focusin",function(d){var p=d.Event;document.addEventListener&&d.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(s){p.special[s.name]={fix:s.fix,capture:true,setup:function(w){w.type=s.name}}})});
KISSY.add("node",function(d){function p(m,l,i){var f;if(!(this instanceof p))return new p(m,l,i);if(m){if(w(m,1)||w(m,3))f=m;else if(d.isString(m))f=s.create(m,l,i);this[0]=f}else this.length=0}var s=d.DOM,w=s._nodeTypeIs;p.TYPE="-ks-Node";d.augment(p,{length:1,getDOMNode:function(){return this[0]},nodeType:p.TYPE});d.one=function(m,l){return(m=d.get(m,l))?new p(m):null};d.Node=p});
KISSY.add("nodelist",function(d){function p(m){if(!(this instanceof p))return new p(m);w.push.apply(this,m||[])}var s=d.DOM,w=Array.prototype;d.mix(p.prototype,{length:0,item:function(m){var l=null;if(s._isElementNode(this[m]))l=new d.Node(this[m]);return l},getDOMNodes:function(){return w.slice.call(this)},each:function(m,l){var i=this.length,f=0,q;for(q=new d.Node(this[0]);f<i&&m.call(l||q,q,f,this)!==false;q=new d.Node(this[++f]));return this}});d.all=function(m,l){return new p(d.query(m,l,true))};
d.NodeList=p});
KISSY.add("node-attach",function(d,p){function s(u,arguments,x,k){var a=[this[u?r:q]()].concat(d.makeArray(arguments));if(arguments[x]===p)return k.apply(m,a);else{k.apply(m,a);return this}}function w(u,x){d.each(u,function(k){d.each([i,f],function(a,c){a[k]=function(h){switch(x){case j:return function(){return s.call(this,c,arguments,1,h)};case e:return function(){return s.call(this,c,arguments,0,h)};case n:return function(){var b=this[c?r:q]();return(b=h.apply(m,[b].concat(d.makeArray(arguments))))?new (d[d.isArray(b)?
"NodeList":"Node"])(b):null};default:return function(){var b=this[c?r:q]();b=h.apply(m,[b].concat(d.makeArray(arguments)));return b===p?this:b}}}(m[k])})})}var m=d.DOM,l=d.Event,i=d.Node.prototype,f=d.NodeList.prototype,q="getDOMNode",r=q+"s",j=1,e=2,n=4;d.mix(i,{one:function(u){return d.one(u,this[0])},all:function(u){return d.all(u,this[0])}});w(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);w(["attr","removeAttr"],j);w(["val","text"],e);w(["css"],j);w(["width","height"],e);
w(["offset"],e);w(["scrollIntoView"]);w(["parent","next","prev","siblings","children"],n);w(["contains"]);w(["html"],e);w(["remove"]);d.each(["insertBefore","insertAfter"],function(u){i[u]=function(x){m[u].call(m,this[0],x);return this}});d.each([i,f],function(u){d.mix(u,{append:function(x){x&&d.each(this,function(k){k.appendChild(m.create(x))});return this},appendTo:function(x){if((x=d.get(x))&&x.appendChild)d.each(this,function(k){x.appendChild(k)});return this}})});d.each([i,f],function(u){d.mix(u,
d.EventTarget,{_supportSpecialEvent:true});u._addEvent=function(x,k,a){for(var c=0,h=this.length;c<h;c++)l._simpleAdd(this[c],x,k,a)};u._removeEvent=function(x,k,a){for(var c=0,h=this.length;c<h;c++)l._simpleRemove(this[c],x,k,a)};delete u.fire})});
KISSY.add("cookie",function(d){function p(l){return d.isString(l)&&l!==""}var s=document,w=encodeURIComponent,m=decodeURIComponent;d.Cookie={get:function(l){var i;if(p(l))if(l=s.cookie.match("(?:^| )"+l+"(?:(?:=([^;]*))|;|$)"))i=l[1]?m(l[1]):"";return i},set:function(l,i,f,q,r,j){i=w(i);var e=f;if(typeof e==="number"){e=new Date;e.setTime(e.getTime()+f*864E5)}if(e instanceof Date)i+="; expires="+e.toUTCString();if(p(q))i+="; domain="+q;if(p(r))i+="; path="+r;if(j)i+="; secure";s.cookie=l+"="+i},remove:function(l,
i,f,q){this.set(l,"",0,i,f,q)}}});
KISSY.add("json",function(d){function p(j){return j<10?"0"+j:j}function s(j){l.lastIndex=0;return l.test(j)?'"'+j.replace(l,function(e){var n=q[e];return typeof n==="string"?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+j+'"'}function w(j,e){var n,u,x=i,k,a=e[j];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(j);if(typeof r==="function")a=r.call(e,j,a);switch(typeof a){case "string":return s(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";i+=f;k=[];if(Object.prototype.toString.apply(a)==="[object Array]"){u=a.length;for(j=0;j<u;j+=1)k[j]=w(j,a)||"null";e=k.length===0?"[]":i?"[\n"+i+k.join(",\n"+i)+"\n"+x+"]":"["+k.join(",")+"]";i=x;return e}if(r&&typeof r==="object"){u=r.length;for(j=0;j<u;j+=1){n=r[j];if(typeof n==="string")if(e=w(n,a))k.push(s(n)+(i?": ":":")+e)}}else for(n in a)if(Object.hasOwnProperty.call(a,n))if(e=w(n,a))k.push(s(n)+(i?": ":":")+e);e=k.length===0?"{}":i?"{\n"+i+k.join(",\n"+i)+
"\n"+x+"}":"{"+k.join(",")+"}";i=x;return e}}d=d.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+p(this.getUTCMonth()+1)+"-"+p(this.getUTCDate())+"T"+p(this.getUTCHours())+":"+p(this.getUTCMinutes())+":"+p(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,f,q={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;if(typeof d.stringify!=="function")d.stringify=function(j,e,n){var u;f=i="";if(typeof n==="number")for(u=0;u<n;u+=1)f+=" ";else if(typeof n==="string")f=n;if((r=e)&&typeof e!=="function"&&(typeof e!=="object"||typeof e.length!=="number"))throw new Error("JSON.stringify");return w("",
{"":j})};if(typeof d.parse!=="function")d.parse=function(j,e){function n(u,x){var k,a,c=u[x];if(c&&typeof c==="object")for(k in c)if(Object.hasOwnProperty.call(c,k)){a=n(c,k);if(a!==undefined)c[k]=a;else delete c[k]}return e.call(u,x,c)}j=String(j);m.lastIndex=0;if(m.test(j))j=j.replace(m,function(u){return"\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(j.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+j+")");return typeof e==="function"?n({"":j},""):j}throw new SyntaxError("JSON.parse");}});
KISSY.add("anim-easing",function(d){var p=Math,s=p.PI,w=p.pow,m=p.sin,l=1.70158,i={easeNone:function(f){return f},easeIn:function(f){return f*f},easeOut:function(f){return(2-f)*f},easeBoth:function(f){return(f*=2)<1?0.5*f*f:0.5*(1- --f*(f-2))},easeInStrong:function(f){return f*f*f*f},easeOutStrong:function(f){return 1- --f*f*f*f},easeBothStrong:function(f){return(f*=2)<1?0.5*f*f*f*f:0.5*(2-(f-=2)*f*f*f)},elasticIn:function(f){if(f===0||f===1)return f;return-(w(2,10*(f-=1))*m((f-0.075)*2*s/0.3))},
elasticOut:function(f){if(f===0||f===1)return f;return w(2,-10*f)*m((f-0.075)*2*s/0.3)+1},elasticBoth:function(f){if(f===0||(f*=2)===2)return f;if(f<1)return-0.5*w(2,10*(f-=1))*m((f-0.1125)*2*s/0.45);return w(2,-10*(f-=1))*m((f-0.1125)*2*s/0.45)*0.5+1},backIn:function(f){if(f===1)f-=0.0010;return f*f*((l+1)*f-l)},backOut:function(f){return(f-=1)*f*((l+1)*f+l)+1},backBoth:function(f){if((f*=2)<1)return 0.5*f*f*(((l*=1.525)+1)*f-l);return 0.5*((f-=2)*f*(((l*=1.525)+1)*f+l)+2)},bounceIn:function(f){return 1-
i.bounceOut(1-f)},bounceOut:function(f){return f<1/2.75?7.5625*f*f:f<2/2.75?7.5625*(f-=1.5/2.75)*f+0.75:f<2.5/2.75?7.5625*(f-=2.25/2.75)*f+0.9375:7.5625*(f-=2.625/2.75)*f+0.984375},bounceBoth:function(f){if(f<0.5)return i.bounceIn(f*2)*0.5;return i.bounceOut(f*2-1)*0.5+0.5}};d.Easing=i});
KISSY.add("anim",function(d,p){function s(k,a,c,h,b){if(k=d.get(k)){if(!(this instanceof s))return new s(k,a,c,h,b);var g=d.isPlainObject(c);a=a;this.domEl=k;if(d.isPlainObject(a))a=d.param(a,";").replace(/=/g,":");this.props=w(a);this.targetStyle=a;if(g)k=d.merge(x,c);else{k=d.clone(x);c&&(k.duration=j(c,10)||1);d.isString(h)&&(h=r[h]);d.isFunction(h)&&(k.easing=h);d.isFunction(b)&&(k.complete=b)}this.config=k;d.isFunction(b)&&this.on(u,b)}}function w(k){var a={},c=n.length,h;e.innerHTML='<div style="'+
k+'"></div>';for(k=e.firstChild.style;c--;)if(h=k[n[c]])a[n[c]]=m(h);return a}function m(k){var a=j(k);k=(k+"").replace(/^[-\d\.]+/,"");return isNaN(a)?{v:k,u:"",f:i}:{v:a,u:k,f:l}}function l(k,a,c){return(k+(a-k)*c).toFixed(3)}function i(k,a,c){for(var h=2,b,g,o=[],t=[];b=3,g=arguments[h-1],h--;)if(f(g,0,4)==="rgb(")for(g=g.match(/\d+/g);b--;)o.push(~~g[b]);else if(f(g,0)==="#"){if(g.length===4)g="#"+f(g,1)+f(g,1)+f(g,2)+f(g,2)+f(g,3)+f(g,3);for(;b--;)o.push(parseInt(f(g,1+b*2,2),16))}else return a;
for(;b--;){h=~~(o[b+3]+(o[b]-o[b+3])*c);t.push(h<0?0:h>255?255:h)}return"rgb("+t.join(",")+")"}function f(k,a,c){return k.substr(a,c||1)}var q=d.DOM,r=d.Easing,j=parseFloat,e=q.create("<div>"),n="backgroundColor borderBottomColor borderBottomWidth borderBottomStyle borderLeftColor borderLeftWidth borderLeftStyle borderRightColor borderRightWidth borderRightStyle borderSpacing borderTopColor borderTopWidth borderTopStyle bottom color font fontFamily fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" "),
u="complete",x={duration:1,easing:r.easeNone};d.augment(s,d.EventTarget,{run:function(){var k=this,a=k.config,c=k.domEl,h=a.duration*1E3,b=a.easing,g=d.now(),o=g+h,t=k.props,v={},A;for(A in t)v[A]=m(q.css(c,A));if(k.fire("start")!==false){k.stop();k.timer=d.later(a=function(){var y=d.now(),z=y>o?1:(y-g)/h,B,C,D;for(A in t){B=v[A];C=t[A];if(C.v==0)C.u=B.u;if(B.u!==C.u)B.v=0;q.css(c,A,C.f(B.v,C.v,b(z))+C.u)}if(k.fire("step")===false||(D=y>o)){k.stop();D&&k.fire(u)}},13,true);a();return k}},stop:function(k){var a=
this.domEl,c=this.targetStyle;if(this.timer){this.timer.cancel();this.timer=p}if(k){d.UA.ie&&c.indexOf("opacity")>-1&&q.css(a,"opacity",this.props.opacity.v);a.style.cssText+=";"+c;this.fire(u)}return this}});d.Anim=s});KISSY.add("anim-node-plugin",function(d,p){var s=d.Anim;d.each([d.Node.prototype,d.NodeList.prototype],function(w){w.animate=function(){var m=d.makeArray(arguments);d.each(this,function(l){s.apply(p,[l].concat(m)).run()});return this}})});KISSY.add("core");
(function(){function d(a,c,h,b,g,o){g=0;for(var t=b.length;g<t;g++){var v=b[g];if(v){v=v[a];for(var A=false;v;){if(v.sizcache===h){A=b[v.sizset];break}if(v.nodeType===1&&!o){v.sizcache=h;v.sizset=g}if(v.nodeName.toLowerCase()===c){A=v;break}v=v[a]}b[g]=A}}}function p(a,c,h,b,g,o){g=0;for(var t=b.length;g<t;g++){var v=b[g];if(v){v=v[a];for(var A=false;v;){if(v.sizcache===h){A=b[v.sizset];break}if(v.nodeType===1){if(!o){v.sizcache=h;v.sizset=g}if(typeof c!=="string"){if(v===c){A=true;break}}else if(f.filter(c,
[v]).length>0){A=v;break}}v=v[a]}b[g]=A}}}var s=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,w=0,m=Object.prototype.toString,l=false,i=true;[0,0].sort(function(){i=false;return 0});var f=function(a,c,h,b){h=h||[];var g=c=c||document;if(c.nodeType!==1&&c.nodeType!==9)return[];if(!a||typeof a!=="string")return h;var o=[],t,v,A,y,z=true,B=f.isXML(c),C=a,D;do{s.exec("");if(t=s.exec(C)){C=t[3];o.push(t[1]);if(t[2]){y=
t[3];break}}}while(t);if(o.length>1&&r.exec(a))if(o.length===2&&q.relative[o[0]])v=k(o[0]+o[1],c);else for(v=q.relative[o[0]]?[c]:f(o.shift(),c);o.length;){a=o.shift();if(q.relative[a])a+=o.shift();v=k(a,v)}else{if(!b&&o.length>1&&c.nodeType===9&&!B&&q.match.ID.test(o[0])&&!q.match.ID.test(o[o.length-1])){t=f.find(o.shift(),c,B);c=t.expr?f.filter(t.expr,t.set)[0]:t.set[0]}if(c){t=b?{expr:o.pop(),set:n(b)}:f.find(o.pop(),o.length===1&&(o[0]==="~"||o[0]==="+")&&c.parentNode?c.parentNode:c,B);v=t.expr?
f.filter(t.expr,t.set):t.set;if(o.length>0)A=n(v);else z=false;for(;o.length;){t=D=o.pop();if(q.relative[D])t=o.pop();else D="";if(t==null)t=c;q.relative[D](A,t,B)}}else A=[]}A||(A=v);A||f.error(D||a);if(m.call(A)==="[object Array]")if(z)if(c&&c.nodeType===1)for(a=0;A[a]!=null;a++){if(A[a]&&(A[a]===true||A[a].nodeType===1&&f.contains(c,A[a])))h.push(v[a])}else for(a=0;A[a]!=null;a++)A[a]&&A[a].nodeType===1&&h.push(v[a]);else h.push.apply(h,A);else n(A,h);if(y){f(y,g,h,b);f.uniqueSort(h)}return h};
f.uniqueSort=function(a){if(x){l=i;a.sort(x);if(l)for(var c=1;c<a.length;c++)a[c]===a[c-1]&&a.splice(c--,1)}return a};f.matches=function(a,c){return f(a,null,null,c)};f.find=function(a,c,h){var b;if(!a)return[];for(var g=0,o=q.order.length;g<o;g++){var t=q.order[g],v;if(v=q.leftMatch[t].exec(a)){var A=v[1];v.splice(1,1);if(A.substr(A.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");b=q.find[t](v,c,h);if(b!=null){a=a.replace(q.match[t],"");break}}}}b||(b=c.getElementsByTagName("*"));return{set:b,
expr:a}};f.filter=function(a,c,h,b){for(var g=a,o=[],t=c,v,A,y=c&&c[0]&&f.isXML(c[0]);a&&c.length;){for(var z in q.filter)if((v=q.leftMatch[z].exec(a))!=null&&v[2]){var B=q.filter[z],C,D;D=v[1];A=false;v.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(t===o)o=[];if(q.preFilter[z])if(v=q.preFilter[z](v,t,h,o,b,y)){if(v===true)continue}else A=C=true;if(v)for(var E=0;(D=t[E])!=null;E++)if(D){C=B(D,v,E,t);var F=b^!!C;if(h&&C!=null)if(F)A=true;else t[E]=false;else if(F){o.push(D);A=true}}if(C!==undefined){h||
(t=o);a=a.replace(q.match[z],"");if(!A)return[];break}}}if(a===g)if(A==null)f.error(a);else break;g=a}return t};f.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var q=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var h=typeof c==="string",b=h&&!/\W/.test(c);h=h&&!b;if(b)c=c.toLowerCase();b=0;for(var g=a.length,o;b<g;b++)if(o=a[b]){for(;(o=o.previousSibling)&&o.nodeType!==1;);a[b]=h||o&&o.nodeName.toLowerCase()===
c?o||false:o===c}h&&f.filter(c,a,true)},">":function(a,c){var h=typeof c==="string",b,g=0,o=a.length;if(h&&!/\W/.test(c))for(c=c.toLowerCase();g<o;g++){if(b=a[g]){h=b.parentNode;a[g]=h.nodeName.toLowerCase()===c?h:false}}else{for(;g<o;g++)if(b=a[g])a[g]=h?b.parentNode:b.parentNode===c;h&&f.filter(c,a,true)}},"":function(a,c,h){var b=w++,g=p,o;if(typeof c==="string"&&!/\W/.test(c)){o=c=c.toLowerCase();g=d}g("parentNode",c,b,a,o,h)},"~":function(a,c,h){var b=w++,g=p,o;if(typeof c==="string"&&!/\W/.test(c)){o=
c=c.toLowerCase();g=d}g("previousSibling",c,b,a,o,h)}},find:{ID:function(a,c,h){if(typeof c.getElementById!=="undefined"&&!h)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if(typeof c.getElementsByName!=="undefined"){var h=[];c=c.getElementsByName(a[1]);for(var b=0,g=c.length;b<g;b++)c[b].getAttribute("name")===a[1]&&h.push(c[b]);return h.length===0?null:h}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,h,b,g,o){a=" "+a[1].replace(/\\/g,"")+" ";
if(o)return a;o=0;for(var t;(t=c[o])!=null;o++)if(t)if(g^(t.className&&(" "+t.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))h||b.push(t);else if(h)c[o]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}a[0]=w++;return a},ATTR:function(a,c,h,b,g,o){c=
a[1].replace(/\\/g,"");if(!o&&q.attrMap[c])a[1]=q.attrMap[c];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,c,h,b,g){if(a[1]==="not")if((s.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=f(a[3],null,null,c);else{a=f.filter(a[3],c,h,true^g);h||b.push.apply(b,a);return false}else if(q.match.POS.test(a[0])||q.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,h){return!!f(h[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return c===0},last:function(a,c,h,b){return c===b.length-1},even:function(a,c){return c%2===0},odd:function(a,c){return c%2===1},lt:function(a,c,h){return c<h[3]-0},gt:function(a,c,h){return c>h[3]-0},nth:function(a,c,h){return h[3]-
0===c},eq:function(a,c,h){return h[3]-0===c}},filter:{PSEUDO:function(a,c,h,b){var g=c[1],o=q.filters[g];if(o)return o(a,h,c,b);else if(g==="contains")return(a.textContent||a.innerText||f.getText([a])||"").indexOf(c[3])>=0;else if(g==="not"){c=c[3];h=0;for(b=c.length;h<b;h++)if(c[h]===a)return false;return true}else f.error("Syntax error, unrecognized expression: "+g)},CHILD:function(a,c){var h=c[1],b=a;switch(h){case "only":case "first":for(;b=b.previousSibling;)if(b.nodeType===1)return false;if(h===
"first")return true;b=a;case "last":for(;b=b.nextSibling;)if(b.nodeType===1)return false;return true;case "nth":h=c[2];var g=c[3];if(h===1&&g===0)return true;c=c[0];var o=a.parentNode;if(o&&(o.sizcache!==c||!a.nodeIndex)){var t=0;for(b=o.firstChild;b;b=b.nextSibling)if(b.nodeType===1)b.nodeIndex=++t;o.sizcache=c}a=a.nodeIndex-g;return h===0?a===0:a%h===0&&a/h>=0}},ID:function(a,c){return a.nodeType===1&&a.getAttribute("id")===c},TAG:function(a,c){return c==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
c},CLASS:function(a,c){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)>-1},ATTR:function(a,c){var h=c[1];a=q.attrHandle[h]?q.attrHandle[h](a):a[h]!=null?a[h]:a.getAttribute(h);h=a+"";var b=c[2];c=c[4];return a==null?b==="!=":b==="="?h===c:b==="*="?h.indexOf(c)>=0:b==="~="?(" "+h+" ").indexOf(c)>=0:!c?h&&a!==false:b==="!="?h!==c:b==="^="?h.indexOf(c)===0:b==="$="?h.substr(h.length-c.length)===c:b==="|="?h===c||h.substr(0,c.length+1)===c+"-":false},POS:function(a,c,h,b){var g=q.setFilters[c[2]];
if(g)return g(a,h,c,b)}}},r=q.match.POS,j=function(a,c){return"\\"+(c-0+1)};for(var e in q.match){q.match[e]=new RegExp(q.match[e].source+/(?![^\[]*\])(?![^\(]*\))/.source);q.leftMatch[e]=new RegExp(/(^(?:.|\r|\n)*?)/.source+q.match[e].source.replace(/\\(\d+)/g,j))}var n=function(a,c){a=Array.prototype.slice.call(a,0);if(c){c.push.apply(c,a);return c}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(u){n=function(a,c){c=c||[];var h=0;if(m.call(a)==="[object Array]")Array.prototype.push.apply(c,
a);else if(typeof a.length==="number")for(var b=a.length;h<b;h++)c.push(a[h]);else for(;a[h];h++)c.push(a[h]);return c}}var x;if(document.documentElement.compareDocumentPosition)x=function(a,c){if(!a.compareDocumentPosition||!c.compareDocumentPosition){if(a==c)l=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(c)&4?-1:a===c?0:1;if(a===0)l=true;return a};else if("sourceIndex"in document.documentElement)x=function(a,c){if(!a.sourceIndex||!c.sourceIndex){if(a==c)l=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-c.sourceIndex;if(a===0)l=true;return a};else if(document.createRange)x=function(a,c){if(!a.ownerDocument||!c.ownerDocument){if(a==c)l=true;return a.ownerDocument?-1:1}var h=a.ownerDocument.createRange(),b=c.ownerDocument.createRange();h.setStart(a,0);h.setEnd(a,0);b.setStart(c,0);b.setEnd(c,0);a=h.compareBoundaryPoints(Range.START_TO_END,b);if(a===0)l=true;return a};f.getText=function(a){for(var c="",h,b=0;a[b];b++){h=a[b];if(h.nodeType===3||h.nodeType===4)c+=h.nodeValue;else if(h.nodeType!==
8)c+=f.getText(h.childNodes)}return c};(function(){var a=document.createElement("div"),c="script"+(new Date).getTime();a.innerHTML="<a name='"+c+"'/>";var h=document.documentElement;h.insertBefore(a,h.firstChild);if(document.getElementById(c)){q.find.ID=function(b,g,o){if(typeof g.getElementById!=="undefined"&&!o)return(g=g.getElementById(b[1]))?g.id===b[1]||typeof g.getAttributeNode!=="undefined"&&g.getAttributeNode("id").nodeValue===b[1]?[g]:undefined:[]};q.filter.ID=function(b,g){var o=typeof b.getAttributeNode!==
"undefined"&&b.getAttributeNode("id");return b.nodeType===1&&o&&o.nodeValue===g}}h.removeChild(a);h=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)q.find.TAG=function(c,h){h=h.getElementsByTagName(c[1]);if(c[1]==="*"){c=[];for(var b=0;h[b];b++)h[b].nodeType===1&&c.push(h[b]);h=c}return h};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")q.attrHandle.href=function(c){return c.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=f,c=document.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!(c.querySelectorAll&&c.querySelectorAll(".TEST").length===0)){f=function(b,g,o,t){g=g||document;if(!t&&g.nodeType===9&&!f.isXML(g))try{return n(g.querySelectorAll(b),o)}catch(v){}return a(b,g,o,t)};for(var h in a)f[h]=a[h];c=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){q.order.splice(1,0,"CLASS");q.find.CLASS=function(c,h,b){if(typeof h.getElementsByClassName!=="undefined"&&!b)return h.getElementsByClassName(c[1])};a=null}}})();f.contains=document.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&16)}:function(a,c){return a!==c&&(a.contains?a.contains(c):true)};f.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var k=function(a,c){var h=[],b="",g;for(c=c.nodeType?[c]:c;g=q.match.PSEUDO.exec(a);){b+=g[0];a=a.replace(q.match.PSEUDO,"")}a=q.relative[a]?a+"*":a;g=0;for(var o=c.length;g<o;g++)f(a,c[g],h);return f.filter(b,h)};KISSY.add("sizzle",function(a){a.ExternalSelector=f;a.ExternalSelector._filter=function(c,h){return f.matches(h,a.query(c))}},{requires:["core"]})})();
KISSY.add("datalazyload",function(d,p){function s(j,e){if(!(this instanceof s))return new s(j,e);if(e===p){e=j;j=[i]}d.isArray(j)||(j=[d.get(j)||i]);this.containers=j;this.config=d.merge(r,e);this.callbacks={els:[],fns:[]};this._init()}var w=d.DOM,m=d.Event,l=window,i=document,f="scroll",q="resize",r={mod:"manual",diff:"default",placeholder:"none"};d.augment(s,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_filterItems:function(){var j=
this.containers,e,n,u,x=[],k=[];e=0;for(n=j.length;e<n;++e){u=d.query("img",j[e]);x=x.concat(d.filter(u,this._filterImg,this));u=d.query("textarea",j[e]);k=k.concat(d.filter(u,this._filterArea,this))}this.images=x;this.areaes=k},_filterImg:function(j){var e=j.getAttribute("data-ks-lazyload"),n=this.threshold,u=this.config.placeholder;if(this.config.mod==="manual"){if(e){if(u!=="none")j.src=u;return true}}else if(w.offset(j).top>n&&!e){w.attr(j,"data-ks-lazyload",j.src);if(u!=="none")j.src=u;else j.removeAttribute("src");
return true}},_filterArea:function(j){return w.hasClass(j,"ks-datalazyload")},_initLoadEvent:function(){function j(){n||(n=d.later(function(){e();n=null},100))}function e(){u._loadItems();if(u._getItemsLength()===0){m.remove(l,f,j);m.remove(l,q,j)}}var n,u=this;m.on(l,f,j);m.on(l,q,function(){u.threshold=u._getThreshold();j()});u._getItemsLength()&&d.ready(function(){e()})},_loadItems:function(){this._loadImgs();this._loadAreas();this._fireCallbacks()},_loadImgs:function(){this.images=d.filter(this.images,
this._loadImg,this)},_loadImg:function(j){var e=this.threshold+w.scrollTop();if(w.offset(j).top<=e)this._loadImgSrc(j);else return true},_loadImgSrc:function(j,e){e=e||"data-ks-lazyload";var n=j.getAttribute(e);if(n&&j.src!=n){j.src=n;j.removeAttribute(e)}},_loadAreas:function(){this.areaes=d.filter(this.areaes,this._loadArea,this)},_loadArea:function(j){var e=w.css(j,"display")==="none";if(w.offset(e?j.parentNode:j).top<=this.threshold+w.scrollTop())this._loadAreaData(j.parentNode,j);else return true},
_loadAreaData:function(j,e){e.style.display="none";e.className="";var n=w.create("<div>");j.insertBefore(n,e);w.html(n,e.value,true)},_fireCallbacks:function(){var j=this.callbacks,e=j.els,n=j.fns,u=this.threshold+w.scrollTop(),x,k,a,c=[],h=[];for(x=0;(k=e[x])&&(a=n[x++]);)if(w.offset(k).top<=u)a.call(k);else{c.push(k);h.push(a)}j.els=c;j.fns=h},addCallback:function(j,e){var n=this.callbacks;if((j=d.get(j))&&d.isFunction(e)){n.els.push(j);n.fns.push(e)}},_getThreshold:function(){var j=this.config.diff,
e=w.viewportHeight();return j==="default"?2*e:e+j},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(j,e){var n=this,u,x;d.isArray(j)||(j=[d.get(j)]);d.each(j,function(k){switch(e){case "img-src":x=k.nodeName==="IMG"?[k]:d.query("img",k);d.each(x,function(a){n._loadImgSrc(a,"data-ks-lazyload-custom")});break;default:(u=d.get("textarea",k))&&w.hasClass(u,"ks-datalazyload-custom")&&n._loadAreaData(k,u)}})}});d.mix(s,s.prototype,
true,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);d.DataLazyload=s},{requires:["core"]});KISSY.add("flash",function(d){d.Flash={swfs:{},length:0}},{requires:["core"]});
KISSY.add("flash-ua",function(d){function p(){var r;if(navigator.plugins&&navigator.mimeTypes.length)r=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{r=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(j){}if(r)return s(r)}function s(r){return r.match(/(\d)+/g)}function w(r){var j=d.isString(r)?s(r):r;r=r;if(d.isArray(j))r=parseFloat(j[0]+"."+m(j[1],3)+m(j[2],5));return r||0}function m(r,j){for(var e=(r+"").length;e++<j;)r="0"+
r;return r}var l=d.UA,i,f,q=true;l.fpv=function(r){if(r||q){q=false;i=p();f=w(i)}return i};l.fpvGEQ=function(r,j){q&&l.fpv(j);return!!f&&f>=w(r)}},{host:"flash"});
KISSY.add("flash-embed",function(d){function p(r,j,e){var n=w.create("<param>");w.attr(n,{name:j,value:e});r.appendChild(n)}var s=d.UA,w=d.DOM,m=d.Flash,l=/object|embed/i,i=encodeURIComponent,f={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",base:"",swliveconnect:"",seamlesstabbing:""},q={params:{},attrs:{width:215,height:138},version:9};d.mix(m,{fpv:s.fpv,fpvGEQ:s.fpvGEQ,add:function(r,j,e){var n,
u;j=m._normalize(j);j=d.merge(q,j);j.attrs=d.merge(q.attrs,j.attrs);if(r=d.get(r)){if(!r.id)r.id=d.guid("ks-flash-");u=j.attrs.id=r.id;if(s.fpv()){if(!s.fpvGEQ(j.version)){this._callback(e,0,u,r);if(!((n=j.xi)&&d.isString(n)))return;j.src=n}if(l.test(r.nodeName))this._register(r,j,e);else j.src?this._embed(r,j,e):this._callback(e,-3,u,r)}else this._callback(e,-1,u,r)}else this._callback(e,-2)},get:function(r){return m.swfs[r]},remove:function(r){if(r=m.get("#"+r)){w.remove(r);delete m.swfs[r.id];
m.length-=1}},contains:function(r){var j=m.swfs,e,n=false;if(d.isString(r))n=r in j;else for(e in j)if(j[e]===r){n=true;break}return n},_register:function(r,j,e){j=j.attrs.id;if(s.gecko||s.opera)r=d.query("object",r)[0]||r;m._addSWF(j,r);m._callback(e,1,j,r)},_embed:function(r,j,e){var n=m._createSWF(j.src,j.attrs,j.params);if(s.ie)r.outerHTML=n.outerHTML;else r.parentNode.replaceChild(n,r);r=d.get("#"+r.id);m._register(r,j,e)},_callback:function(r,j,e,n){j&&d.isFunction(r)&&r({status:j,id:e,swf:n})},
_addSWF:function(r,j){if(r&&j){m.swfs[r]=j;m.length+=1}},_createSWF:function(r,j,e){var n=w.create("<object>"),u;w.attr(n,j);if(s.ie){w.attr(n,"classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");p(n,"movie",r)}else w.attr(n,{type:"application/x-shockwave-flash",data:r,name:j.id});for(u in e)u in f&&p(n,u,e[u]);e.flashvars&&p(n,"flashvars",m.toFlashVars(e.flashvars));return n},_normalize:function(r){var j,e,n,u=r;if(d.isPlainObject(r)){u={};for(n in r){j=n.toLowerCase();e=r[n];if(j!=="flashvars")e=
m._normalize(e);u[j]=e}}return u},toFlashVars:function(r){if(!d.isPlainObject(r))return"";var j,e,n=[];for(j in r){e=r[j];if(d.isString(e))e=i(e);else{e=d.JSON.stringify(e);if(!e)continue;e=e.replace(/:"([^"]+)/g,function(u,x){return':"'+i(x)})}n.push(j+"="+e)}return n.join("&").replace(/\"/g,"'")}})},{host:"flash"});
KISSY.add("switchable",function(d,p){function s(l,i){i=i||{};if(!("markupType"in i))if(i.panelCls)i.markupType=1;else if(i.panels)i.markupType=2;i=d.merge(s.Config,i);this.container=d.get(l);this.config=i;this.activeIndex=i.activeIndex;this._init()}var w=d.DOM,m=d.Event;s.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,
activeTriggerCls:"ks-active",steps:1,viewSize:[]};s.Plugins=[];d.augment(s,d.EventTarget,{_init:function(){var l=this,i=l.config;if(l.fire("beforeInit")!==false){l._parseMarkup();i.hasTriggers&&l._bindTriggers();d.each(s.Plugins,function(f){f.init&&f.init(l)});l.fire("init")}},_parseMarkup:function(){var l=this.container,i=this.config,f,q=[],r=[];switch(i.markupType){case 0:if(f=d.get("."+i.navCls,l))q=w.children(f);f=d.get("."+i.contentCls,l);r=w.children(f);break;case 1:q=d.query("."+i.triggerCls,
l);r=d.query("."+i.panelCls,l);break;case 2:q=i.triggers;r=i.panels;break}l=r.length;this.length=l/i.steps;if(i.hasTriggers&&l>0&&q.length===0)q=this._generateTriggersMarkup(this.length);this.triggers=d.makeArray(q);this.panels=d.makeArray(r);this.content=f||r[0].parentNode},_generateTriggersMarkup:function(l){var i=this.config,f=w.create("<ul>"),q,r;f.className=i.navCls;for(r=0;r<l;r++){q=w.create("<li>");if(r===this.activeIndex)q.className=i.activeTriggerCls;q.innerHTML=r+1;f.appendChild(q)}this.container.appendChild(f);
return w.children(f)},_bindTriggers:function(){var l=this,i=l.config,f=l.triggers,q,r,j=f.length;for(r=0;r<j;r++)(function(e){q=f[e];m.on(q,"click focus",function(){l._onFocusTrigger(e)});if(i.triggerType==="mouse"){m.on(q,"mouseenter",function(){l._onMouseEnterTrigger(e)});m.on(q,"mouseleave",function(){l._onMouseLeaveTrigger(e)})}})(r)},_onFocusTrigger:function(l){if(this._triggerIsValid()){this._cancelSwitchTimer();this.switchTo(l)}},_onMouseEnterTrigger:function(l){var i=this;if(i._triggerIsValid())i.switchTimer=
d.later(function(){i.switchTo(l)},i.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(l){return this.activeIndex!==l},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=p}},switchTo:function(l,i){var f=this.config,q=this.triggers,r=this.panels,j=this.activeIndex,e=f.steps,n=j*e,u=l*e;if(!this._triggerIsValid())return this;if(this.fire("beforeSwitch",{toIndex:l})===false)return this;if(f.hasTriggers)this._switchTrigger(j>
-1?q[j]:null,q[l]);if(i===p)i=l>j?"forward":"backward";this._switchView(r.slice(n,n+e),r.slice(u,u+e),l,i);this.activeIndex=l;return this},_switchTrigger:function(l,i){var f=this.config.activeTriggerCls;l&&w.removeClass(l,f);w.addClass(i,f)},_switchView:function(l,i,f){w.css(l,"display","none");w.css(i,"display","block");this._fireOnSwitch(f)},_fireOnSwitch:function(l){this.fire("switch",{currentIndex:l})},prev:function(){var l=this.activeIndex;this.switchTo(l>0?l-1:this.length-1,"backward")},next:function(){var l=
this.activeIndex;this.switchTo(l<this.length-1?l+1:0,"forward")}});d.Switchable=s},{requires:["core"]});
KISSY.add("autoplay",function(d,p){var s=d.Event,w=d.Switchable;d.mix(w.Config,{autoplay:false,interval:5,pauseOnHover:true});w.Plugins.push({name:"autoplay",init:function(m){function l(){q=d.later(function(){m.paused||m.switchTo(m.activeIndex<m.length-1?m.activeIndex+1:0,"forward")},f,true)}var i=m.config,f=i.interval*1E3,q;if(i.autoplay){if(i.pauseOnHover){s.on(m.container,"mouseenter",function(){if(q){q.cancel();q=p}m.paused=true});s.on(m.container,"mouseleave",function(){m.paused=false;l()})}l()}}})},
{host:"switchable"});
KISSY.add("effect",function(d,p){var s=d.DOM,w=d.Anim,m=d.Switchable,l;d.mix(m.Config,{effect:"none",duration:0.5,easing:"easeNone"});m.Effects={none:function(i,f,q){s.css(i,"display","none");s.css(f,"display","block");q()},fade:function(i,f,q){i.length!==1&&d.error("fade effect only supports steps == 1.");var r=this,j=r.config,e=i[0],n=f[0];r.anim&&r.anim.stop(true);s.css(n,"opacity",1);r.anim=(new w(e,{opacity:0},j.duration,j.easing,function(){r.anim=p;s.css(n,"z-index",9);s.css(e,"z-index",1);
q()})).run()},scroll:function(i,f,q,r){var j=this;i=j.config;f=i.effect==="scrollx";var e={};e[f?"left":"top"]=-(j.viewSize[f?0:1]*r)+"px";j.anim&&j.anim.stop();j.anim=(new w(j.content,e,i.duration,i.easing,function(){j.anim=p;q()})).run()}};l=m.Effects;l.scrollx=l.scrolly=l.scroll;m.Plugins.push({name:"effect",init:function(i){var f=i.config,q=f.effect,r=i.panels,j=i.content,e=f.steps,n=i.activeIndex,u=r.length;i.viewSize=[f.viewSize[0]||r[0].offsetWidth*e,f.viewSize[1]||r[0].offsetHeight*e];if(q!==
"none"){d.each(r,function(c){s.css(c,"display","block")});switch(q){case "scrollx":case "scrolly":s.css(j,"position","absolute");s.css(j.parentNode,"position","relative");if(q==="scrollx"){s.css(r,"float","left");s.width(j,i.viewSize[0]*(u/e))}break;case "fade":var x=n*e,k=x+e-1,a;d.each(r,function(c,h){a=h>=x&&h<=k;s.css(c,{opacity:a?1:0,position:"absolute",zIndex:a?9:1})});break}}}});d.augment(m,{_switchView:function(i,f,q,r){var j=this,e=j.config.effect;(d.isFunction(e)?e:l[e]).call(j,i,f,function(){j._fireOnSwitch(q)},
q,r)}})},{host:"switchable"});
KISSY.add("circular",function(d,p){function s(a,c,h,b,g){var o=this;a=o.config;c=o.length;var t=o.activeIndex,v=a.scrollType===x,A=v?q:r,y=o.viewSize[v?0:1];v=-y*b;var z={},B,C=g===u;if(B=C&&t===0&&b===c-1||g===n&&t===c-1&&b===0)v=w.call(o,o.panels,b,C,A,y);z[A]=v+e;o.anim&&o.anim.stop();o.anim=(new d.Anim(o.content,z,a.duration,a.easing,function(){B&&m.call(o,o.panels,b,C,A,y);o.anim=p;h()})).run()}function w(a,c,h,b,g){var o=this.config.steps;c=this.length;var t=h?c-1:0,v=(t+1)*o;for(o=t*o;o<v;o++){l.css(a[o],
i,f);l.css(a[o],b,(h?-1:1)*g*c)}return h?g:-g*c}function m(a,c,h,b,g){var o=this.config.steps;c=this.length;var t=h?c-1:0,v=(t+1)*o;for(o=t*o;o<v;o++){l.css(a[o],i,j);l.css(a[o],b,j)}l.css(this.content,b,h?-g*(c-1):j)}var l=d.DOM,i="position",f="relative",q="left",r="top",j="",e="px",n="forward",u="backward",x="scrollx",k=d.Switchable;d.mix(k.Config,{circular:false});k.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===x||a.effect==="scrolly")){a.scrollType=a.effect;
a.effect=s}}})},{host:"switchable"});
KISSY.add("lazyload",function(d){var p=d.DOM,s="beforeSwitch",w="img-src",m="area-data",l={},i=d.Switchable;l[w]="data-ks-lazyload-custom";l[m]="ks-datalazyload-custom";d.mix(i.Config,{lazyDataType:m});i.Plugins.push({name:"lazyload",init:function(f){function q(x){var k=e.steps;x=x.toIndex*k;j.loadCustomLazyData(f.panels.slice(x,x+k),n);r()&&f.detach(s,q)}function r(){var x,k,a,c=n===w;if(x=c?"img":n===m?"textarea":""){x=d.query(x,f.container);k=0;for(a=x.length;k<a;k++)if(c?p.attr(x[k],u):p.hasClass(x[k],
u))return false}return true}var j=d.DataLazyload,e=f.config,n=e.lazyDataType,u=l[n];!j||!n||!u||f.on(s,q)}})},{host:"switchable"});KISSY.add("autorender",function(d){d.Switchable.autoRender=function(p,s){p="."+(p||"KS_Widget");d.query(p,s).each(function(w){var m=w.getAttribute("data-widget-type"),l;if(m&&"Switchable Tabs Slide Carousel Accordion".indexOf(m)>-1)try{if(l=w.getAttribute("data-widget-config"))l=l.replace(/'/g,'"');new d[m](w,d.JSON.parse(l))}catch(i){}})}},{host:"switchable"});
KISSY.add("tabs",function(d){function p(s,w){if(!(this instanceof p))return new p(s,w);p.superclass.constructor.call(this,s,w)}d.extend(p,d.Switchable);d.Tabs=p},{host:"switchable"});KISSY.add("slide",function(d){function p(w,m){if(!(this instanceof p))return new p(w,m);p.superclass.constructor.call(this,w,d.merge(s,m))}var s={autoplay:true,circular:true};d.extend(p,d.Switchable);d.Slide=p},{host:"switchable"});
KISSY.add("carousel",function(d,p){function s(j,e){var n=this;if(!(n instanceof s))return new s(j,e);n.on("init",function(){w(n)});s.superclass.constructor.call(n,j,d.merge(r,e))}function w(j){var e=j.config,n=e.disableBtnCls;d.each(["prev","next"],function(u){var x=j[u+"Btn"]=d.get(i+e[u+"BtnCls"],j.container);l.on(x,"click",function(k){k.preventDefault();m.hasClass(x,n)||j[u]()})});e.circular||j.on("switch",function(u){u=u.currentIndex;u=u===0?j[f]:u===j.length-1?j[q]:p;m.removeClass([j[f],j[q]],
n);u&&m.addClass(u,n)});l.on(j.panels,"click focus",function(){j.fire("itemSelected",{item:this})})}var m=d.DOM,l=d.Event,i=".",f="prevBtn",q="nextBtn",r={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};d.extend(s,d.Switchable);d.Carousel=s},{host:"switchable"});
KISSY.add("accordion",function(d){function p(m,l){if(!(this instanceof p))return new p(m,l);p.superclass.constructor.call(this,m,d.merge(w,l))}var s=d.DOM,w={markupType:1,triggerType:"click",multiple:false};d.extend(p,d.Switchable);d.Accordion=p;d.augment(p,{_triggerIsValid:function(m){return this.activeIndex!==m||this.config.multiple},_switchView:function(m,l,i){var f=this.config,q=l[0];if(f.multiple){s.toggleClass(this.triggers[i],f.activeTriggerCls);s.css(q,"display",q.style.display=="none"?"block":
"none");this._fireOnSwitch(i)}else p.superclass._switchView.call(this,m,l,i)}})},{host:"switchable"});
KISSY.add("suggest",function(d,p){function s(b,g,o){if(!(this instanceof s))return new s(b,g,o);this.textInput=d.get(b);g+=g.indexOf("?")===-1?"?":"&";this.dataSource=g+"code=utf-8&callback="+u;this.config=d.merge(h,o);this.queryParams=this.query=x;this._dataCache={};this._init()}function w(b){b.style.visibility=x}function m(b){b.style.visibility=k}function l(b,g){if(g.nodeType===1){i.html(b,x);b.appendChild(g)}else i.html(b,g)}var i=d.DOM,f=d.Event,q=window,r=document,j,e=d.get("head"),n=d.UA.ie,
u="g_ks_suggest_callback",x="",k="hidden",a=parseInt,c=/^(input|button|a)$/i,h={containerCls:x,resultFormat:"%result%",closeBtnText:"\u5173\u95ed",shim:n===6,submitOnSelect:true};d.augment(s,d.EventTarget,{_init:function(){j=r.body;this._initTextInput();this._initContainer();this.config.shim&&this._initShim();this._initStyle();this._initEvent()},_initTextInput:function(){var b=this,g=b.textInput,o=false,t=0;i.attr(g,"autocomplete","off");b.config.autoFocus&&g.focus();f.on(g,"keydown",function(v){v=
v.keyCode;if(v===27){b.hide();g.value=b.query}else if(v>32&&v<41)if(g.value){if(v===40||v===38)if(t++===0){b._isRunning&&b.stop();o=true;b._selectItem(v===40)}else if(t==3)t=0}else g.blur();else if(v===13){g.blur();if(o)if(g.value==b._getSelectedItemKey())if(b.fire("itemSelect")===false)return;b._submitForm()}else{b._isRunning||b.start();o=false}});f.on(g,"keyup",function(){t=0});f.on(g,"blur",function(){b.stop();d.later(function(){b._focusing||b.hide()},0)})},_initContainer:function(){var b=i.create("<div>",
{"class":"ks-suggest-container "+this.config.containerCls,style:"position:absolute;visibility:hidden"}),g=i.create("<div>",{"class":"ks-suggest-content"}),o=i.create("<div>",{"class":"ks-suggest-footer"});b.appendChild(g);b.appendChild(o);j.insertBefore(b,j.firstChild);this.container=b;this.content=g;this.footer=o;this._initContainerEvent()},_setContainerRegion:function(){var b=this.textInput,g=i.offset(b),o=this.container;i.offset(o,{left:g.left,top:g.top+b.offsetHeight-1});i.width(o,this.config.containerWidth||
b.offsetWidth-2)},_initContainerEvent:function(){var b=this,g=b.textInput,o=b.container,t=b.content,v=b.footer,A,y;f.on(t,"mousemove",function(z){z=z.target;if(z.nodeName!=="LI")z=i.parent(z,"li");if(i.contains(t,z))if(z!==b.selectedItem){b._removeSelectedItem();b._setSelectedItem(z)}});f.on(t,"mousedown",function(z){z=z.target;if(z.nodeName!=="LI")z=i.parent(z,"li");A=z});f.on(o,"mousedown",function(z){if(!c.test(z.target.nodeName)){g.onbeforedeactivate=function(){q.event.returnValue=false;g.onbeforedeactivate=
null};z.preventDefault()}});f.on(t,"mouseup",function(z){var B=z.target;if(!(z.which>2)){if(B.nodeName!=="LI")B=i.parent(B,"li");if(B==A)if(i.contains(t,B)){b._updateInputFromSelectItem(B);if(b.fire("itemSelect")!==false){g.blur();b._submitForm()}}}});f.on(v,"focusin",function(){b._focusing=true;b._removeSelectedItem();y=false});f.on(v,"focusout",function(){b._focusing=false;d.later(function(){if(y)b.hide();else b._focusing||b.textInput.focus()},0)});f.on(b.container,"mouseleave",function(){y=true});
f.on(v,"click",function(z){i.hasClass(z.target,"ks-suggest-closebtn")&&b.hide()})},_submitForm:function(){if(this.config.submitOnSelect){var b=this.textInput.form;if(b)if(this.fire("beforeSubmit",{form:b})!==false){if(r.createEvent){var g=r.createEvent("MouseEvents");g.initEvent("submit",true,false);b.dispatchEvent(g)}else r.createEventObject&&b.fireEvent("onsubmit");b.submit()}}},_initShim:function(){var b=i.create("<iframe>",{src:"about:blank","class":"ks-suggest-shim",style:"position:absolute;visibility:hidden;border:none"});
this.container.shim=b;j.insertBefore(b,j.firstChild)},_setShimRegion:function(){var b=this.container,g=b.style,o=b.shim;o&&i.css(o,{left:a(g.left)-2,top:g.top,width:a(g.width)+2,height:i.height(b)-2})},_initStyle:function(){d.get("#ks-suggest-style")||i.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container .ks-selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container .ks-selected span{color:#FFF;cursor:default}.ks-suggest-footer{padding:0 5px 5px}.ks-suggest-closebtn{float:right}.ks-suggest-container li,.ks-suggest-footer{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initEvent:function(){var b=this;f.on(q,"resize",function(){b._setContainerRegion();b._setShimRegion()})},start:function(){var b=this;if(b.fire("beforeStart")!==false){s.focusInstance=b;b._timer=d.later(function(){b._updateContent();b._timer=d.later(arguments.callee,200)},200);b._isRunning=true}},stop:function(){s.focusInstance=p;this._timer&&this._timer.cancel();this._isRunning=false},show:function(){if(!this.isVisible()){var b=this.container,g=b.shim;this._setContainerRegion();
w(b);if(g){this._setShimRegion();w(g)}}},hide:function(){if(this.isVisible()){var b=this.container,g=b.shim;g&&m(g);m(b)}},isVisible:function(){return this.container.style.visibility!=k},_updateContent:function(){var b=this.textInput;if(b.value!=this.query){b=this.query=b.value;if(d.trim(b))if(this._dataCache[b]!==p){this._fillContainer(this._dataCache[b]);this._displayContainer()}else this._requestData();else{this._fillContainer();this.hide()}}},_requestData:function(){var b=this,g;if(!n)b.dataScript=
p;if(!b.dataScript){g=r.createElement("script");g.charset="utf-8";g.async=true;e.insertBefore(g,e.firstChild);b.dataScript=g;if(!n){var o=d.now();b._latestScriptTime=o;i.attr(g,"data-time",o);f.on(g,"load",function(){b._scriptDataIsOut=i.attr(g,"data-time")!=b._latestScriptTime})}}b.queryParams="q="+encodeURIComponent(b.query);if(b.fire("beforeDataRequest")!==false)b.dataScript.src=b.dataSource+"&"+b.queryParams},_handleResponse:function(b){var g=x,o,t,v,A;if(!this._scriptDataIsOut){this.returnedData=
b;if(this.fire("dataReturn",{data:b})!==false){b=this._formatData(this.returnedData);if((o=b.length)>0){t=i.create("<ol>");for(g=0;g<o;++g){v=b[g];v=this._formatItem(A=v.key,v.result);i.attr(v,"key",A);i.addClass(v,g%2?"ks-even":"ks-odd");t.appendChild(v)}g=t}this._fillContainer(g);if(this.fire("beforeShow")!==false){this._dataCache[this.query]=i.html(this.content);this._displayContainer()}}}},_formatData:function(b){var g=[],o,t,v,A=0;if(!b)return g;if(d.isArray(b.result))b=b.result;if(!(o=b.length))return g;
for(v=0;v<o;++v){t=b[v];if(d.isString(t))g[A++]={key:t};else if(d.isArray(t)&&t.length>1)g[A++]={key:t[0],result:t[1]}}return g},_formatItem:function(b,g){var o=i.create("<li>"),t=i.create("<span>",{"class":"ks-suggest-key"});i.html(t,b);o.appendChild(t);if(g){b=this.config.resultFormat.replace("%result%",g);if(d.trim(b)){g=i.create("<span>",{"class":"ks-suggest-result"});i.html(g,b);o.appendChild(g)}}return o},_fillContainer:function(b,g){this._fillContent(b||x);this._fillFooter(g||x)},_fillContent:function(b){l(this.content,
b);this.selectedItem=p},_fillFooter:function(b){var g=this.config,o=this.footer;l(o,b);if(g.closeBtn){b=i.create("<a>",{"class":"ks-suggest-closebtn",href:"javascript: void(0)",target:"_self"});i.html(b,g.closeBtnText);o.appendChild(b)}this.fire("updateFooter",{footer:o,query:this.query});i.css(o,"display",i.text(o)?x:"none")},_displayContainer:function(){d.trim(i.text(this.container))?this.show():this.hide()},_selectItem:function(b){var g=d.query("li",this.container);if(g.length!==0)if(this.isVisible()){if(this.selectedItem){b=
i[b?"next":"prev"](this.selectedItem);if(!b)this.textInput.value=this.query}else b=g[b?0:g.length-1];this._removeSelectedItem();if(b){this._setSelectedItem(b);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){i.removeClass(this.selectedItem,"ks-selected");this.selectedItem=p},_setSelectedItem:function(b){i.addClass(b,"ks-selected");this.selectedItem=b;this.textInput.focus()},_getSelectedItemKey:function(){if(!this.selectedItem)return x;return i.attr(this.selectedItem,
"key")},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)||this.query}});q[u]=function(b){s.focusInstance&&d.later(function(){s.focusInstance._handleResponse(b)},0)};s.version=1.1;d.Suggest=s},{requires:["core"]});
