/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 669 May 22 23:47
*/
(function(b,r,q){if(b[r]===q)b[r]={};r=b[r];var l=b.document,o=function(h,n,m,a){if(!n||!h)return h;if(m===q)m=true;var e,i,t;if(a&&(t=a.length))for(e=0;e<t;e++){i=a[e];if(i in n)if(m||!(i in h))h[i]=n[i]}else for(i in n)if(m||!(i in h))h[i]=n[i];return h},s=false,p=[],g=false;o(r,{version:"1.0.5",_init:function(){this.Env={mods:{}}},add:function(h,n){this.Env.mods[h]={name:h,fn:n};n(this);return this},ready:function(h){g||this._bindReady();s?h.call(b,this):p.push(h);return this},_bindReady:function(){var h=
this,n=l.documentElement.doScroll,m=n?"onreadystatechange":"DOMContentLoaded";g=true;if(l.readyState==="complete")return h._fireReady();if(l.addEventListener){var a=function(){l.removeEventListener(m,a,false);h._fireReady()};l.addEventListener(m,a,false)}else{if(b!=b.top){var e=function(){if(l.readyState==="complete"){l.detachEvent(m,e);h._fireReady()}};l.attachEvent(m,e)}else{var i=function(){try{n("left");h._fireReady()}catch(t){setTimeout(i,1)}};i()}b.attachEvent("onload",function(){h._fireReady()})}},
_fireReady:function(){if(!s){s=true;if(p){for(var h,n=0;h=p[n++];)h.call(b,this);p=null}}},mix:o,merge:function(){var h={},n,m=arguments.length;for(n=0;n<m;++n)o(h,arguments[n]);return h},augment:function(h,n,m,a){o(h.prototype,n.prototype||n,m,a);return h},extend:function(h,n,m,a){if(!n||!h)return h;var e=Object.prototype,i=n.prototype,t=function(d){function f(){}f.prototype=d;return new f}(i);h.prototype=t;t.constructor=h;h.superclass=i;if(n!==Object&&i.constructor===e.constructor)i.constructor=
n;m&&o(t,m);a&&o(h,a);return h},namespace:function(){var h=arguments.length,n=null,m,a,e;for(m=0;m<h;++m){e=(""+arguments[m]).split(".");n=this;for(a=b[e[0]]===n?1:0;a<e.length;++a)n=n[e[a]]=n[e[a]]||{}}return n},app:function(h,n){var m=b[h]||{};o(m,this,true,["_init","add","namespace"]);m._init();return o(b[h]=m,typeof n==="function"?n():n)},log:function(h,n,m){if(this.Config.debug){if(m)h=m+": "+h;if(b.console!==q&&console.log)console[n&&console[n]?n:"log"](h)}return this},error:function(h){if(this.Config.debug)throw h;
}});r._init();r.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,r){function q(d){var f=typeof d;return d===null||f!=="object"&&f!=="function"}var l=window,o=document,s=location,p=Array.prototype,g=p.indexOf,h=p.filter,n=Object.prototype.toString,m=encodeURIComponent,a=decodeURIComponent,e=/^\s+|\s+$/g,i=/^(\w+)\[\]$/,t=/\S/;b.mix(b,{isBoolean:function(d){return typeof d==="boolean"},isString:function(d){return typeof d==="string"},isNumber:function(d){return typeof d==="number"&&isFinite(d)},isPlainObject:function(d){return d&&
n.call(d)==="[object Object]"&&!d.nodeType&&!d.setInterval},isEmptyObject:function(d){for(var f in d)return false;return true},isFunction:function(d){return typeof d==="function"},isArray:function(d){return n.call(d)==="[object Array]"},trim:String.prototype.trim?function(d){return(d||"").trim()}:function(d){return(d||"").replace(e,"")},each:function(d,f,j){for(var c=d&&d.length||0,k=0;k<c;++k)f.call(j||l,d[k],k,d)},indexOf:g?function(d,f){return g.call(f,d)}:function(d,f){for(var j=0,c=f.length;j<
c;++j)if(f[j]===d)return j;return-1},inArray:function(d,f){return b.indexOf(d,f)!==-1},makeArray:function(d){if(d===null||d===r)return[];if(b.isArray(d))return d;if(typeof d.length!=="number"||typeof d==="string"||b.isFunction(d))return[d];if(d.item&&b.UA.ie){for(var f=[],j=0,c=d.length;j<c;++j)f[j]=d[j];return f}return p.slice.call(d)},filter:h?function(d,f,j){return h.call(d,f,j)}:function(d,f,j){var c=[];b.each(d,function(k,u,v){f.call(j,k,u,v)&&c.push(k)});return c},param:function(d){if(!b.isPlainObject(d))return"";
var f=[],j,c;for(j in d){c=d[j];j=m(j);if(q(c))f.push(j,"=",m(c+""),"&");else if(b.isArray(c)&&c.length)for(var k=0,u=c.length;k<u;++k)q(c[k])&&f.push(j,"[]=",m(c[k]+""),"&")}f.pop();return f.join("")},unparam:function(d,f){if(typeof d!=="string"||(d=b.trim(d)).length===0)return{};var j={};d=d.split(f||"&");for(var c,k,u=0,v=d.length;u<v;++u){c=d[u].split("=");f=a(c[0]);c=a(c[1]||"");if((k=f.match(i))&&k[1]){j[k[1]]=j[k[1]]||[];j[k[1]].push(c)}else j[f]=c}return j},later:function(d,f,j,c,k){f=f||
0;c=c||{};var u=d,v=b.makeArray(k),w;if(typeof d==="string")u=c[d];u||b.error("method undefined");d=function(){u.apply(c,v)};w=j?setInterval(d,f):setTimeout(d,f);return{id:w,interval:j,cancel:function(){this.interval?clearInterval(w):clearTimeout(w)}}},now:function(){return(new Date).getTime()},globalEval:function(d){if(d&&t.test(d)){var f=o.getElementsByTagName("head")[0]||o.documentElement,j=o.createElement("script");j.text=d;f.insertBefore(j,f.firstChild);f.removeChild(j)}}});if(s&&s.search&&s.search.indexOf("ks-debug")!==
-1)b.Config.debug=true});
KISSY.add("kissy-ua",function(b){var r=navigator.userAgent,q,l={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},o=function(s){var p=0;return parseFloat(s.replace(/\./g,function(){return p++===0?".":""}))};if((q=r.match(/AppleWebKit\/([\d.]*)/))&&q[1]){l.webkit=o(q[1]);if((q=r.match(/Chrome\/([\d.]*)/))&&q[1])l.chrome=o(q[1]);else if((q=r.match(/\/([\d.]*) Safari/))&&q[1])l.safari=o(q[1]);if(/ Mobile\//.test(r))l.mobile="Apple";else if(q=r.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))l.mobile=q[0]}else if((q=
r.match(/Opera\/.* Version\/([\d.]*)/))&&q[1]){l.opera=o(q[1]);if(r.match(/Opera Mini[^;]*/))l.mobile=q[0]}else if((q=r.match(/MSIE\s([^;]*)/))&&q[1])l.ie=o(q[1]);else if(q=r.match(/Gecko/)){l.gecko=1;if((q=r.match(/rv:([\d.]*)/))&&q[1])l.gecko=o(q[1]);if((q=r.match(/Firefox\/([\d.]*)/))&&q[1])l.firefox=o(q[1])}b.UA=l});
KISSY.add("selector",function(b,r){function q(d,f,j){var c,k=[],u,v;if(typeof d===m){d=b.trim(d);if(i.test(d)){if(f=o(d.slice(1)))k=[f]}else if(c=t.exec(d)){u=c[1];v=c[2];c=c[3];if(f=u?o(u):l(f))if(c){if(!u||d.indexOf(a)!==-1)k=p(c,v,f)}else if(v)k=s(f,v)}else if(d.indexOf(",")>-1)if(n.querySelectorAll)k=n.querySelectorAll(d);else{u=d.split(",");v=[];k=0;for(d=u.length;k<d;++k)v=v.concat(q(u[k],f));k=g(v)}}else if(d&&d.nodeType)k=[d];else if(d&&d.item)k=d;if(k.item)k=b.makeArray(k);j||h(k);return k}
function l(d){if(d===r)d=n;else if(typeof d===m&&i.test(d))d=o(d.slice(1));else if(d&&d.nodeType!==1&&d.nodeType!==9)d=null;return d}function o(d){return n.getElementById(d)}function s(d,f){return d.getElementsByTagName(f)}function p(d,f,j){j=d=j.getElementsByClassName(d);var c=0,k=0,u=d.length,v;if(f&&f!==e){j=[];for(f=f.toUpperCase();c<u;++c){v=d[c];if(v.tagName===f)j[k++]=v}}return j}function g(d){var f=false;d.sort(function(c,k){c=c.sourceIndex-k.sourceIndex;if(c===0)f=true;return c});if(f)for(var j=
1;j<d.length;j++)d[j]===d[j-1]&&d.splice(j--,1);return d}function h(d){d.each=function(f,j){b.each(d,f,j)}}var n=document,m="string",a=" ",e="*",i=/^#[\w-]+$/,t=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var d=n.createElement("div");d.appendChild(n.createComment(""));if(d.getElementsByTagName(e).length>0)s=function(f,j){f=f.getElementsByTagName(j);if(j===e){j=[];for(var c=0,k=0,u;u=f[c++];)if(u.nodeType===1)j[k++]=u;f=j}return f}})();n.getElementsByClassName||(p=n.querySelectorAll?
function(d,f,j){return j.querySelectorAll((f?f:"")+"."+d)}:function(d,f,j){f=j.getElementsByTagName(f||e);j=[];var c=0,k=0,u=f.length,v,w;for(d=a+d+a;c<u;++c){v=f[c];if((w=v.className)&&(a+w+a).indexOf(d)>-1)j[k++]=v}return j});b.query=q;b.get=function(d,f){return q(d,f,true)[0]||null}});
KISSY.add("dom-base",function(b,r){function q(c,k){return k&&k.nodeName.toUpperCase()===c.toUpperCase()}function l(c,k){for(var u=[],v=0;c;c=c.nextSibling)if(c.nodeType===1&&c!==k)u[v++]=c;return u}function o(c,k,u){k=k||0;for(var v=0;c;c=c[u])if(c.nodeType===1&&v++===k)break;return c}function s(c,k){var u=null,v;if(c&&(c.push||c.item)&&c[0]){k=k||c[0].ownerDocument;u=k.createDocumentFragment();if(c.item)c=b.makeArray(c);k=0;for(v=c.length;k<v;++k)u.appendChild(c[k])}else b.error("unable to convert "+
c+" to fragment");return u}var p=document,g=p.documentElement.textContent!==r?"textContent":"innerText",h=b.UA,n=h.ie,m=n&&n<8,a={readonly:"readOnly"},e=/href|src|style/,i=/href|src|colspan|rowspan/,t=/\r/g,d=/radio|checkbox/,f=p.createElement("DIV"),j=/^[a-z]+$/i;m&&b.mix(a,{"for":"htmlFor","class":"className"});b.DOM={query:b.query,get:b.get,attr:function(c,k,u){if(!c||c.nodeType!==1)return r;var v;k=k.toLowerCase();k=a[k]||k;if(u===r){if(e.test(k)){if(k==="style")v=c.style.cssText}else v=c[k];
if(v===r)v=c.getAttribute(k);if(m&&i.test(k))v=c.getAttribute(k,2);return v===null?r:v}if(k==="style")c.style.cssText=u;else c.setAttribute(k,""+u)},removeAttr:function(c,k){c&&c.nodeType===1&&c.removeAttribute(k)},val:function(c,k){if(!c||c.nodeType!==1)return r;if(k===r){if(q("option",c))return(c.attributes.value||{}).specified?c.value:c.text;if(q("select",c)){k=c.selectedIndex;var u=c.options;if(k<0)return null;else if(c.type==="select-one")return b.DOM.val(u[k]);c=[];k=0;for(var v=u.length;k<
v;++k)u[k].selected&&c.push(b.DOM.val(u[k]));return c}if(h.webkit&&d.test(c.type))return c.getAttribute("value")===null?"on":c.value;return(c.value||"").replace(t,"")}if(q("select",c)){u=b.makeArray(k);var w=c.options,x;k=0;for(v=w.length;k<v;++k){x=w[k];x.selected=b.inArray(b.DOM.val(x),u)}if(!u.length)c.selectedIndex=-1}else c.value=k},css:function(c,k,u){if(u===r)return c.style[k];b.each(b.makeArray(c),function(v){v.style[k]=u})},text:function(c,k){if(k===r)return(c||{})[g]||"";if(c)c[g]=k},html:function(c,
k){if(k===r)return c.innerHTML;c.innerHTML=k},children:function(c){if(c.children)return b.makeArray(c.children);return l(c.firstChild)},siblings:function(c){return l(c.parentNode.firstChild,c)},next:function(c){return o(c,1,"nextSibling")},prev:function(c){return o(c,1,"previousSibling")},parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},create:function(c,k){if(typeof c==="string")c=b.trim(c);if(j.test(c))return(k||p).createElement(c);var u=null;u=k?k.createElement("DIV"):f;u.innerHTML=
c;c=u.childNodes;return u=c.length===1?c[0].parentNode.removeChild(c[0]):s(c,k||p)},addStyleSheet:function(c,k){var u=p.getElementsByTagName("head")[0],v=p.createElement("style");k&&(v.id=k);u.appendChild(v);if(v.styleSheet)v.styleSheet.cssText=c;else v.appendChild(p.createTextNode(c))}}});
KISSY.add("dom-class",function(b,r){function q(g,h,n){if(b.isArray(g)){b.each(g,function(){h.apply(n,Array.prototype.slice.call(arguments,3))});return true}}var l=b.DOM;b.mix(l,{hasClass:function(g,h){if(!h||!g||!g.className)return false;return(" "+g.className+" ").indexOf(" "+h+" ")>-1},addClass:function(g,h){if(!q(g,s,l,h))if(h&&g)o(g,h)||(g.className+=" "+h)},removeClass:function(g,h){if(!q(g,p,l,h))if(o(g,h)){g.className=(" "+g.className+" ").replace(" "+h+" "," ");o(g,h)&&p(g,h)}},replaceClass:function(g,
h,n){p(g,h);s(g,n)},toggleClass:function(g,h,n){q(g,l.toggleClass,l,h,n)||((n!==r?n:!o(g,h))?s(g,h):p(g,h))}});var o=l.hasClass,s=l.addClass,p=l.removeClass});
KISSY.add("event",function(b,r){function q(f,j,c,k){if(b.isString(j))j=b.query(j);if(b.isArray(j)){b.each(j,function(u){d[f](u,c,k)});return true}if((c=b.trim(c))&&c.indexOf(e)>0){b.each(c.split(e),function(u){d[f](j,u,k)});return true}}function l(f){var j=-1;if(f.nodeType===3||f.nodeType===8)return j;return j=f.nodeType?p.attr(f,a):f.isCustomEventTarget?f.eventTargetId:f[a]}function o(f,j){if(f.nodeType===3||f.nodeType===8)return b.error("Text or comment node is not valid event target.");if(f.nodeType)p.attr(f,
a,j);else if(f.isCustomEventTarget)f.eventTargetId=j;else try{f[a]=j}catch(c){b.error(c)}}function s(f){if(f.nodeType)p.removeAttr(f,a);else if(f.isCustomEventTarget)f.eventTargetId=r;else f[a]=r}var p=b.DOM,g=window,h=document,n=h.addEventListener?function(f,j,c){f.addEventListener&&f.addEventListener(j,c,false)}:function(f,j,c){f.attachEvent&&f.attachEvent("on"+j,c)},m=h.removeEventListener?function(f,j,c){f.removeEventListener&&f.removeEventListener(j,c,false)}:function(f,j,c){f.detachEvent&&f.detachEvent("on"+
j,c)},a="data-ks-event-guid",e=" ",i=b.now(),t={},d={special:{},add:function(f,j,c){if(!q("add",f,j,c)){var k=l(f),u,v;if(!(k===-1||!j||!b.isFunction(c))){if(!k){o(f,k=i++);t[k]={target:f,events:{}}}v=t[k].events;u=!f.isCustomEventTarget&&d.special[j]||{};if(!v[j]){k=function(w,x){if(!w||!w.fixed){w=new b.EventObject(f,w,j);b.isPlainObject(x)&&b.mix(w,x)}u.setup&&u.setup(w);return(u.handle||d._handle)(f,w,v[j].listeners)};v[j]={handle:k,listeners:[]};if(f.isCustomEventTarget)f._addEvent&&f._addEvent(j,
k);else n(f,u.fix||j,k)}v[j].listeners.push(c)}}},remove:function(f,j,c){if(!q("remove",f,j,c)){var k=l(f),u,v,w,x,y,z;if(k!==-1)if(k&&(u=t[k]))if(u.target===f){u=u.events||{};if(v=u[j]){w=v.listeners;y=w.length;if(b.isFunction(c)&&y&&b.inArray(c,w)){z=[];for(x=0;x<y;++x)c!==w[x]&&z.push(w[x]);y=z.length}if(c===r||y===0){f.isCustomEventTarget||m(f,j,v.handle);delete t[k].type}}if(j===r||b.isEmptyObject(u)){for(j in u)d.remove(f,j);delete t[k];s(f)}}}},_handle:function(f,j,c){for(var k,u=0,v=c.length;u<
v;++u){k=c[u].call(f,j);if(j.isImmediatePropagationStopped)break;k===false&&j.halt()}return k},_getCache:function(f){return t[f]},_simpleAdd:n,_simpleRemove:m};d.on=d.add;b.Event=d;g.attachEvent&&!g.addEventListener&&g.attachEvent("onunload",function(){var f,j;for(f in t)if(j=t[f].target)try{d.remove(j)}catch(c){}})});
KISSY.add("event-object",function(b,r){function q(s,p,g){this.currentTarget=s;this.originalEvent=p||{};if(p){this.type=p.type;this._fix()}else{this.type=g;this.target=s}this.fixed=true}var l=document,o="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
b.mix(q.prototype,{_fix:function(){for(var s=this.originalEvent,p=o.length,g;p;){g=o[--p];this[g]=s[g]}if(!this.target)this.target=this.srcElement||l;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===r&&this.clientX!==r){s=l.documentElement;p=l.body;this.pageX=this.clientX+(s&&s.scrollLeft||p&&p.scrollLeft||0)-(s&&s.clientLeft||p&&p.clientLeft||0);
this.pageY=this.clientY+(s&&s.scrollTop||p&&p.scrollTop||0)-(s&&s.clientTop||p&&p.clientTop||0)}if(this.which===r)this.which=this.charCode!==r?this.charCode:this.keyCode;if(this.metaKey===r)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==r)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var s=this.originalEvent;if(s.preventDefault)s.preventDefault();else s.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var s=this.originalEvent;
if(s.stopPropagation)s.stopPropagation();else s.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var s=this.originalEvent;s.stopImmediatePropagation?s.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(s){s?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=q});
KISSY.add("event-target",function(b,r){var q=b.Event;b.EventTarget={eventTargetId:r,isCustomEventTarget:true,fire:function(l,o){if((l=((q._getCache(this.eventTargetId||-1)||{}).events||{})[l])&&b.isFunction(l.handle))return l.handle(r,o)},on:function(l,o){q.add(this,l,o)},detach:function(l,o){q.remove(this,l,o)}}});
KISSY.add("event-mouseenter",function(b){var r=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(q){r.special[q.name]={fix:q.fix,setup:function(l){l.type=q.name},handle:function(l,o,s){var p=o.relatedTarget;try{for(;p&&p!==l;)p=p.parentNode;p!==l&&r._handle(l,o,s)}catch(g){}}}})});
KISSY.add("node",function(b){function r(o,s,p){var g;if(!(this instanceof r))return new r(o,s,p);if(!o)return null;if(o.nodeType)g=o;else if(typeof o==="string")g=q.create(o,p);s&&b.error("not implemented");this[0]=g}var q=b.DOM,l=r.prototype;b.each(["attr","removeAttr","css"],function(o){l[o]=function(s,p){var g=this[0];if(p===undefined)return q[o](g,s);else{q[o](g,s,p);return this}}});b.each(["val","text","html"],function(o){l[o]=function(s){var p=this[0];if(s===undefined)return q[o](p);else{q[o](p,
s);return this}}});b.each(["children","siblings","next","prev","parent"],function(o){l[o]=function(){var s=q[o](this[0]);return s?new b[s.length?"NodeList":"Node"](s):null}});b.each(["hasClass","addClass","removeClass","replaceClass","toggleClass"],function(o){l[o]=function(){var s=q[o].apply(q,[this[0]].concat(b.makeArray(arguments)));return typeof s==="boolean"?s:this}});b.mix(l,b.EventTarget);l._addEvent=function(o,s){b.Event._simpleAdd(this[0],o,s)};delete l.fire;b.mix(l,{one:function(o){return b.one(o,
this[0])},all:function(o){return b.all(o,this[0])},appendTo:function(o){if((o=b.get(o))&&o.appendChild)o.appendChild(this[0]);return this}});b.one=function(o,s){return new r(b.get(o,s))};b.Node=r});
KISSY.add("nodelist",function(b){function r(l){if(!(this instanceof r))return new r(l);q.apply(this,l||[])}var q=Array.prototype.push;b.mix(r.prototype,{length:0,each:function(l,o){for(var s=this.length,p=0,g;p<s;++p){g=new b.Node(this[p]);l.call(o||g,g,p,this)}return this}});b.all=function(l,o){return new r(b.query(l,o,true))};b.NodeList=r});
KISSY.add("cookie",function(b){function r(s){return typeof s==="string"&&s!==""}var q=document,l=encodeURIComponent,o=decodeURIComponent;b.Cookie={get:function(s){var p;if(r(s))if(s=q.cookie.match("(?:^| )"+s+"(?:(?:=([^;]*))|;|$)"))p=s[1]?o(s[1]):"";return p},set:function(s,p,g,h,n,m){p=l(p);var a=g;if(typeof a==="number"){a=new Date;a.setTime(a.getTime()+g*864E5)}if(a instanceof Date)p+="; expires="+a.toUTCString();if(r(h))p+="; domain="+h;if(r(n))p+="; path="+n;if(m)p+="; secure";q.cookie=s+"="+
p},remove:function(s){this.set(s,"",0)}}});
KISSY.add("json",function(b){function r(m){return m<10?"0"+m:m}function q(m){s.lastIndex=0;return s.test(m)?'"'+m.replace(s,function(a){var e=h[a];return typeof e==="string"?e:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+m+'"'}function l(m,a){var e,i,t=p,d,f=a[m];if(f&&typeof f==="object"&&typeof f.toJSON==="function")f=f.toJSON(m);if(typeof n==="function")f=n.call(a,m,f);switch(typeof f){case "string":return q(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";p+=g;d=[];if(Object.prototype.toString.apply(f)==="[object Array]"){i=f.length;for(m=0;m<i;m+=1)d[m]=l(m,f)||"null";a=d.length===0?"[]":p?"[\n"+p+d.join(",\n"+p)+"\n"+t+"]":"["+d.join(",")+"]";p=t;return a}if(n&&typeof n==="object"){i=n.length;for(m=0;m<i;m+=1){e=n[m];if(typeof e==="string")if(a=l(e,f))d.push(q(e)+(p?": ":":")+a)}}else for(e in f)if(Object.hasOwnProperty.call(f,e))if(a=l(e,f))d.push(q(e)+(p?": ":":")+a);a=d.length===0?"{}":p?"{\n"+p+d.join(",\n"+p)+
"\n"+t+"}":"{"+d.join(",")+"}";p=t;return a}}b=b.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var o=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p,g,h={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof b.stringify!=="function")b.stringify=function(m,a,e){var i;g=p="";if(typeof e==="number")for(i=0;i<e;i+=1)g+=" ";else if(typeof e==="string")g=e;if((n=a)&&typeof a!=="function"&&(typeof a!=="object"||typeof a.length!=="number"))throw new Error("JSON.stringify");return l("",{"":m})};
if(typeof b.parse!=="function")b.parse=function(m,a){function e(i,t){var d,f,j=i[t];if(j&&typeof j==="object")for(d in j)if(Object.hasOwnProperty.call(j,d)){f=e(j,d);if(f!==undefined)j[d]=f;else delete j[d]}return a.call(i,t,j)}m=String(m);o.lastIndex=0;if(o.test(m))m=m.replace(o,function(i){return"\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(m.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){m=eval("("+m+")");return typeof a==="function"?e({"":m},""):m}throw new SyntaxError("JSON.parse");}});
KISSY.add("ajax",function(b){var r=document,q=b.UA;b.Ajax={request:function(){b.error("not implemented")},getScript:function(l,o,s){var p=r.getElementsByTagName("head")[0]||r.documentElement,g=r.createElement("script");g.src=l;if(s)g.charset=s;g.async=true;if(b.isFunction(o))if(q.ie)g.onreadystatechange=function(){var h=g.readyState;if(h==="loaded"||h==="complete"){g.onreadystatechange=null;o()}};else g.onload=o;p.appendChild(g)}}});
KISSY.add("swf-ua",function(b){function r(p){var g=p[0]+".";switch(p[2].toString().length){case 1:g+="00";break;case 2:g+="0";break}return g+p[2]}b=b.UA;var q=0,l;if(b.ie){try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");l.AllowScriptAccess="always"}catch(o){if(l!==null)q=6}if(q===0)try{q=r((new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","))}catch(s){}}else if(l=navigator.mimeTypes["application/x-shockwave-flash"])if(l=l.enabledPlugin)q=
r(l.description.replace(/\s[rd]/g,".").replace(/[a-z\s]+/ig,"").split("."));b.flash=parseFloat(q)});
KISSY.add("swf",function(b){function r(m,a,e){var i="ks-swf-"+l++,t=parseFloat(e.version)||o;t=q.flash>=t;var d=q.flash>=8&&e.useExpressInstall&&!t,f=d?g:a;a="YUISwfId="+i+"&YUIBridgeCallback="+h;var j="<object ";this.id=i;r.instances[i]=this;if((m=b.get(m))&&(t||d)&&f){j+='id="'+i+'" ';j+=q.ie?'classid="'+s+'" ':'type="'+p+'" data="'+f+'" ';j+='width="100%" height="100%">';if(q.ie)j+='<param name="movie" value="'+f+'"/>';for(var c in e.fixedAttributes)if(n.hasOwnProperty(c))j+='<param name="'+c+
'" value="'+e.fixedAttributes[c]+'"/>';for(var k in e.flashVars){c=e.flashVars[k];if(typeof c==="string")a+="&"+k+"="+encodeURIComponent(c)}j+='<param name="flashVars" value="'+a+'"/>';j+="</object>";m.innerHTML=j;this.swf=b.get("#"+i)}}var q=b.UA,l=b.now(),o=10.22,s="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",p="application/x-shockwave-flash",g="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+l,h="KISSY.SWF.eventHandler",n={align:"",allowNetworking:"",allowScriptAccess:"",
base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};r.instances=(b.SWF||{}).instances||{};r.eventHandler=function(m,a){r.instances[m]._eventHandler(a)};b.augment(r,b.EventTarget);b.augment(r,{_eventHandler:function(m){var a=m.type;if(a==="log")b.log(m.message);else a&&this.fire(a,m)},callSWF:function(m,a){if(this.swf[m])return this.swf[m].apply(this.swf,a||[])}});b.SWF=r});
KISSY.add("swfstore",function(b,r){function q(g,h,n,m){var a="other",e=o.get(s),i=this;n=(n!==r?n:true)+"";m=(m!==r?m:true)+"";if(l.ie)a="ie";else if(l.gecko)a="gecko";else if(l.webkit)a="webkit";else if(l.opera)a="opera";if(!e||e==="null")o.set(s,e=Math.round(Math.random()*Math.PI*1E5));n={version:9.115,useExpressInstall:false,fixedAttributes:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale"},flashVars:{allowedDomain:p.location.hostname,shareData:n,browser:e,useCompression:m}};h||
(h=(new b.Node('<div style="height:0;width:0;overflow:hidden"></div>')).appendTo(p.body)[0]);i.embeddedSWF=new b.SWF(h,g||"swfstore.swf",n);i.embeddedSWF._eventHandler=function(t){b.SWF.prototype._eventHandler.call(i,t)}}var l=b.UA,o=b.Cookie,s="swfstore",p=document;b.augment(q,b.EventTarget);b.augment(q,{setItem:function(g,h){h=typeof h==="string"?h.replace(/\\/g,"\\\\"):b.JSON.stringify(h)+"";if(g=b.trim(g+""))try{return this.embeddedSWF.callSWF("setItem",[g,h])}catch(n){this.fire("error",{message:n})}},
getItem:function(g){return this.embeddedSWF.callSWF("getValueOf",[g])}});b.each(["getValueAt","getNameAt","getValueOf","getItems","getLength","removeItem","removeItemAt","clear","calculateCurrentSize","hasAdequateDimensions","setSize","getModificationDate","displaySettings"],function(g){q.prototype[g]=function(){try{return this.embeddedSWF.callSWF(g,b.makeArray(arguments))}catch(h){this.fire("error",{message:h})}}});b.SWFStore=q});
KISSY.add("datalazyload",function(b,r){function q(a,e){if(!(this instanceof q))return new q(a,e);if(e===r){e=a;a=[g]}b.isArray(a)||(a=[b.get(a)||g]);this.containers=a;this.config=b.merge(n,e||{});this.callbacks={els:[],fns:[]};this._init()}var l=b.DOM,o=b.Event,s=YAHOO.util.Dom,p=window,g=document,h={AUTO:"auto",MANUAL:"manual"},n={mod:h.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"},m=q.prototype;b.mix(m,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function a(){i||(i=setTimeout(function(){e();i=null},100))}function e(){t._loadItems();if(t._getItemsLength()===0){o.remove(p,"scroll",a);o.remove(p,"resize",a)}}var i,t=this;o.on(p,"scroll",a);o.on(p,"resize",function(){t.threshold=t._getThreshold();a()});t._getItemsLength()&&b.ready(function(){e()})},_filterItems:function(){var a=this.containers,e=this.threshold,i=this.config.placeholder,t=this.config.mod===
h.MANUAL,d,f,j,c,k,u,v,w=[],x=[];d=0;for(f=a.length;d<f;++d){j=b.query("img",a[d]);c=0;for(k=j.length;c<k;++c){u=j[c];v=u.getAttribute("data-lazyload-src");if(t){if(v){u.src=i;w.push(u)}}else if(s.getY(u)>e&&!v){u.setAttribute("data-lazyload-src",u.src);u.src=i;w.push(u)}}j=b.query("textarea",a[d]);c=0;for(k=j.length;c<k;++c){u=j[c];l.hasClass(u,"ks-datalazyload")&&x.push(u)}}this.images=w;this.areaes=x},_loadItems:function(){this._loadImgs();this._loadAreaes();this._fireCallbacks()},_loadImgs:function(){var a=
this.images,e=this.threshold+s.getDocumentScrollTop(),i,t,d=[];for(i=0;t=a[i++];)s.getY(t)<=e?this._loadImgSrc(t):d.push(t);this.images=d},_loadImgSrc:function(a,e){e=e||"data-lazyload-src";var i=a.getAttribute(e);if(i&&a.src!=i){a.src=i;a.removeAttribute(e)}},_loadAreaes:function(){var a=this.areaes,e=this.threshold+s.getDocumentScrollTop(),i,t,d,f=[];for(i=0;t=a[i++];){d=t;if(s.getY(d)===r)d=t.parentNode;s.getY(d)<=e?this._loadDataFromArea(t.parentNode,t):f.push(t)}this.areaes=f},_loadDataFromArea:function(a,
e){var i=l.create(e.value);e.style.display="none";e.className="";a.insertBefore(i,e);b.UA.gecko||b.query("script",a).each(function(t){b.globalEval(t.text)})},_fireCallbacks:function(){var a=this.callbacks,e=a.els,i=a.fns,t=this.threshold+s.getDocumentScrollTop(),d,f,j,c=[],k=[];for(d=0;(f=e[d])&&(j=i[d++]);)if(s.getY(f)<=t)j.call(f);else{c.push(f);k.push(j)}a.els=c;a.fns=k},addCallback:function(a,e){if((a=b.get(a))&&typeof e==="function"){this.callbacks.els.push(a);this.callbacks.fns.push(e)}},_getThreshold:function(){var a=
this.config.diff,e=s.getViewportHeight();return a==="default"?2*e:e+a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,e,i){var t=this,d,f;b.isArray(a)||(a=[b.get(a)]);b.each(a,function(j){switch(e){case "textarea-data":if((d=b.get("textarea",j))&&l.hasClass(d,i||"ks-datalazyload-custom"))t._loadDataFromArea(j,d);break;default:f=j.nodeName==="IMG"?[j]:b.query("img",j);j=0;for(var c=f.length;j<c;j++)t._loadImgSrc(f[j],
i||"data-lazyload-src-custom")}})}});b.mix(q,m,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);b.DataLazyload=q});
KISSY.add("suggest",function(b,r){function q(a,e,i){if(!(this instanceof q))return new q(a,e,i);this.textInput=b.get(a);this.dataSource=e;this.JSONDataSource=b.isPlainObject(e)?e:null;this.returnedData=null;this.config=b.merge(m,i||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var l=YAHOO.util.Dom,
o=b.DOM,s=b.Event,p=window,g=document,h=g.getElementsByTagName("head")[0],n=YAHOO.env.ua.ie,m={containerCls:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:n===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};b.mix(q.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var a=this;a.textInput.setAttribute("autocomplete",
"off");s.on(a.textInput,"blur",function(){a.stop();a.hide()});a.config.autoFocus&&a.textInput.focus();var e=0;s.on(a.textInput,"keydown",function(i){i=i.keyCode;switch(i){case 27:a.hide();a.textInput.value=a.query;a.query.length===0&&a.textInput.blur();break;case 13:a.textInput.blur();a._onKeyboardSelecting&&a.textInput.value==a._getSelectedItemKey()&&a.fire("itemSelect");a._submitForm();break;case 40:case 38:if(e++==0){a._isRunning&&a.stop();a._onKeyboardSelecting=true;a.selectItem(i===40)}else if(e==
3)e=0;break}if(i!=40&&i!=38){a._isRunning||a.start();a._onKeyboardSelecting=false}});s.on(a.textInput,"keyup",function(){e=0})},_initContainer:function(){var a=g.createElement("div"),e=this.config.containerCls;a.className="ks-suggest-container";if(e)a.className+=" "+e;a.style.position="absolute";a.style.visibility="hidden";this.container=a;this._setContainerRegion();this._initContainerEvent();g.body.insertBefore(a,g.body.firstChild)},_setContainerRegion:function(){var a=l.getRegion(this.textInput),
e=a.left,i=a.right-e-2;i=i>0?i:0;if(g.documentMode===7&&(n===7||n===8))e-=2;else b.UA.gecko&&e++;this.container.style.left=e+"px";this.container.style.top=a.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?i+"px":this.config.containerWidth},_initContainerEvent:function(){var a=this;s.on(a.container,"mousemove",function(i){i=i.target;if(i.nodeName!="LI")i=l.getAncestorByTagName(i,"li");if(l.isAncestor(a.container,i))if(i!=a.selectedItem){a._removeSelectedItem();a._setSelectedItem(i)}});
var e=null;s.on(a.container,"mousedown",function(i){e=i.target;a.textInput.onbeforedeactivate=function(){p.event.returnValue=false;a.textInput.onbeforedeactivate=null};return false});s.on(a.container,"mouseup",function(i){if(a._isInContainer([i.pageX,i.pageY])){i=i.target;if(i==e)if(i.className=="ks-suggest-close-btn")a.hide();else{if(i.nodeName!="LI")i=l.getAncestorByTagName(i,"li");if(l.isAncestor(a.container,i)){a._updateInputFromSelectItem(i);a.fire("itemSelect");a.textInput.blur();a._submitForm()}}}})},
_submitForm:function(){if(this.config.submitFormOnClickSelect){var a=this.textInput.form;if(a){if(g.createEvent){var e=g.createEvent("MouseEvents");e.initEvent("submit",true,false);a.dispatchEvent(e)}else g.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_isInContainer:function(a){var e=l.getRegion(this.container);return a[0]>=e.left&&a[0]<=e.right&&a[1]>=e.top&&a[1]<=e.bottom},_initShim:function(){var a=g.createElement("iframe");a.src="about:blank";a.className="ks-suggest-shim";a.style.position=
"absolute";a.style.visibility="hidden";a.style.border="none";this.container.shim=a;this._setShimRegion();g.body.insertBefore(a,g.body.firstChild)},_setShimRegion:function(){var a=this.container,e=a.shim;if(e){e.style.left=parseInt(a.style.left)-2+"px";e.style.top=a.style.top;e.style.width=parseInt(a.style.width)+2+"px"}},_initStyle:function(){b.get("#ks-suggest-style")||o.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var a=this,e;s.on(p,"resize",function(){e&&clearTimeout(e);e=setTimeout(function(){a._setContainerRegion();a._setShimRegion()},50)})},start:function(){var a=this;q.focusInstance=a;a._timer=setTimeout(function(){a.updateContent();a._timer=setTimeout(arguments.callee,a.config.timerDelay)},a.config.timerDelay);a._isRunning=true},stop:function(){q.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var a=
this.container,e=a.shim;a.style.visibility="";if(e){if(!e.style.height){a=l.getRegion(a);e.style.height=a.bottom-a.top-2+"px"}e.style.visibility=""}}},hide:function(){if(this.isVisible()){var a=this.container,e=a.shim;if(e)e.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var a=this.query;if(b.trim(a).length)if(this._dataCache[a]!==r){this.returnedData=
"using cache";this._fillContainer(this._dataCache[a]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[a]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var a=this;if(!n)a.dataScript=null;if(!a.dataScript){var e=g.createElement("script");e.charset="utf-8";h.insertBefore(e,h.firstChild);a.dataScript=e;if(!n){var i=(new Date).getTime();a._latestScriptTime=
i;e.setAttribute("time",i);s.on(e,"load",function(){a._scriptDataIsOut=e.getAttribute("time")!=a._latestScriptTime})}}a.queryParams="q="+encodeURIComponent(a.query)+"&code=utf-8&callback=g_ks_suggest_callback";a.fire("dataRequest");a.dataScript.src=a.dataSource+"?"+a.queryParams},handleResponse:function(a){if(!this._scriptDataIsOut){this.returnedData=a;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var e="";a=this.returnedData.length;if(a>0){e=g.createElement("ol");for(var i=
0;i<a;++i){var t=this.returnedData[i],d=this.formatItem(t.key,t.result);d.setAttribute("key",t.key);o.addClass(d,i%2?"even":"odd");e.appendChild(d)}e=e}this._fillContainer(e);a>0&&this.appendBottom();b.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(a){var e=[];if(!a)return e;if(b.isArray(a.result))a=a.result;var i=a.length;if(!i)return e;for(var t,d=0;d<i;++d){t=a[d];e[d]=typeof t==="string"?{key:t}:
b.isArray(t)&&t.length>=2?{key:t[0],result:t[1]}:t}return e},formatItem:function(a,e){var i=g.createElement("li"),t=g.createElement("span");t.className="ks-suggest-key";t.appendChild(g.createTextNode(a));i.appendChild(t);if(e!==r){a=this.config.resultFormat.replace("%result%",e);if(b.trim(a)){e=g.createElement("span");e.className="ks-suggest-result";e.appendChild(g.createTextNode(a));i.appendChild(e)}}return i},appendBottom:function(){var a=g.createElement("div");a.className="ks-suggest-bottom";if(this.config.showCloseBtn){var e=
g.createElement("a");e.href="javascript: void(0)";e.setAttribute("target","_self");e.className="ks-suggest-close-btn";e.appendChild(g.createTextNode(this.config.closeBtnText));a.appendChild(e)}b.trim(a.innerHTML)&&this.container.appendChild(a)},_fillContainer:function(a){if(a.nodeType==1){this.container.innerHTML="";this.container.appendChild(a)}else this.container.innerHTML=a;this.selectedItem=null},_displayContainer:function(){b.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(a){var e=
this.container.getElementsByTagName("li");if(e.length!=0)if(this.isVisible()){if(this.selectedItem){a=l[a?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=e[a?0:e.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){o.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(a){o.addClass(a,"selected");this.selectedItem=
a},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});b.mix(q.prototype,b.EventTarget);p.g_ks_suggest_callback=function(a){q.focusInstance&&setTimeout(function(){q.focusInstance.handleResponse(a)},0)};b.Suggest=q});
KISSY.add("switchable",function(b,r){function q(g,h){h=h||{};if(!("markupType"in h))if(h.panelCls)h.markupType=1;else if(h.panels)h.markupType=2;h=b.merge(q.Config,h);this.container=b.get(g);this.config=h;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===r)this.activeIndex=h.activeIndex;this._init()}var l=b.DOM,o=b.Event,s=document,p=q.prototype;q.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",
triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};q.Plugins=[];b.mix(p,{_init:function(){var g=this,h=g.config;g.panels.length===0&&g._parseMarkup();h.hasTriggers&&g._bindTriggers();b.each(q.Plugins,function(n){n.init&&n.init(g)})},_parseMarkup:function(){var g=this.container,h=this.config,n=h.hasTriggers,m,a=[],e=[];switch(h.markupType){case 0:if(m=b.get("."+h.navCls,g))a=l.children(m);m=b.get("."+h.contentCls,g);e=l.children(m);
break;case 1:a=b.query("."+h.triggerCls,g);e=b.query("."+h.panelCls,g);break;case 2:a=h.triggers;e=h.panels;break}g=e.length;this.length=g/h.steps;if(n&&g>0&&a.length===0)a=this._generateTriggersMarkup(this.length);this.triggers=b.makeArray(a);this.panels=b.makeArray(e);this.content=m||e[0].parentNode},_generateTriggersMarkup:function(g){var h=this.config,n=s.createElement("UL"),m,a;n.className=h.navCls;for(a=0;a<g;a++){m=s.createElement("LI");if(a===this.activeIndex)m.className=h.activeTriggerCls;
m.innerHTML=a+1;n.appendChild(m)}this.container.appendChild(n);return l.children(n)},_bindTriggers:function(){var g=this,h=g.config,n=g.triggers,m,a,e=n.length;for(a=0;a<e;a++)(function(i){m=n[i];o.on(m,"click focus",function(){g._onFocusTrigger(i)});if(h.triggerType==="mouse"){o.on(m,"mouseenter",function(){g._onMouseEnterTrigger(i)});o.on(m,"mouseleave",function(){g._onMouseLeaveTrigger(i)})}})(a)},_onFocusTrigger:function(g){if(this.activeIndex!==g){this.switchTimer&&this.switchTimer.cancel();
this.switchTo(g)}},_onMouseEnterTrigger:function(g){var h=this;if(h.activeIndex!==g)h.switchTimer=b.later(function(){h.switchTo(g)},h.config.delay*1E3)},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(g,h){var n=this.config,m=this.triggers,a=this.panels,e=this.activeIndex,i=n.steps,t=e*i,d=g*i;if(g===e)return this;if(this.fire("beforeSwitch",{toIndex:g})===false)return this;if(n.hasTriggers)this._switchTrigger(e>-1?m[e]:null,m[g]);if(h===r)h=g>e?"forward":
"forward";this._switchView(a.slice(t,t+i),a.slice(d,d+i),g,h);this.activeIndex=g;return this},_switchTrigger:function(g,h){var n=this.config.activeTriggerCls;g&&l.removeClass(g,n);l.addClass(h,n)},_switchView:function(g,h){l.css(g,"display","none");l.css(h,"display","block");this.fire("switch")},prev:function(){var g=this.activeIndex;this.switchTo(g>0?g-1:this.length-1,"backward")},next:function(){var g=this.activeIndex;this.switchTo(g<this.length-1?g+1:0,"forward")}});b.mix(p,b.EventTarget);b.Switchable=
q});
KISSY.add("switchable-autoplay",function(b){var r=b.Event,q=b.Switchable;b.mix(q.Config,{autoplay:false,interval:5,pauseOnHover:true});q.Plugins.push({name:"autoplay",init:function(l){var o=l.config;if(o.autoplay){if(o.pauseOnHover){r.on(l.container,"mouseenter",function(){l.paused=true});r.on(l.container,"mouseleave",function(){setTimeout(function(){l.paused=false},o.interval*1E3)})}l.autoplayTimer=b.later(function(){l.paused||l.switchTo(l.activeIndex<l.length-1?l.activeIndex+1:0)},o.interval*1E3,
true)}}})});
KISSY.add("switchable-effect",function(b){var r=YAHOO.util,q=b.DOM,l=r.Dom,o=b.Switchable,s;b.mix(o.Config,{effect:"none",duration:0.5,easing:r.Easing.easeNone});o.Effects={none:function(p,g,h){q.css(p,"display","none");q.css(g,"display","block");h()},fade:function(p,g,h){p.length!==1&&b.error("fade effect only supports steps == 1.");var n=this,m=n.config,a=p[0],e=g[0];n.anim&&n.anim.stop();l.setStyle(e,"opacity",1);n.anim=new r.Anim(a,{opacity:{to:0}},m.duration,m.easing);n.anim.onComplete.subscribe(function(){n.anim=null;
l.setStyle(e,"z-index",9);l.setStyle(a,"z-index",1);h()});n.anim.animate()},scroll:function(p,g,h,n){var m=this;p=m.config;g=p.effect==="scrollx";var a={};a[g?"left":"top"]={to:-(m.viewSize[g?0:1]*n)};m.anim&&m.anim.stop();m.anim=new r.Anim(m.content,a,p.duration,p.easing);m.anim.onComplete.subscribe(function(){m.anim=null;h()});m.anim.animate()}};s=o.Effects;s.scrollx=s.scrolly=s.scroll;o.Plugins.push({name:"effect",init:function(p){var g=p.config,h=g.effect,n=p.panels,m=g.steps,a=p.activeIndex*
m,e=a+m-1,i=n.length;p.viewSize=[g.viewSize[0]||n[0].offsetWidth*m,g.viewSize[0]||n[0].offsetHeight*m];if(h!=="none"){for(g=0;g<i;g++)n[g].style.display="block";switch(h){case "scrollx":case "scrolly":p.content.style.position="absolute";p.content.parentNode.style.position="relative";if(h==="scrollx"){l.setStyle(n,"float","left");p.content.style.width=p.viewSize[0]*(i/m)+"px"}break;case "fade":for(g=0;g<i;g++){l.setStyle(n[g],"opacity",g>=a&&g<=e?1:0);n[g].style.position="absolute";n[g].style.zIndex=
g>=a&&g<=e?9:1}break}}}});b.mix(o.prototype,{_switchView:function(p,g,h,n){var m=this,a=m.config.effect;(b.isFunction(a)?a:s[a]).call(m,p,g,function(){m.fire("switch")},h,n)}})});
KISSY.add("switchable-circular",function(b){function r(i,t,d,f,j){var c=this;i=c.config;t=c.length;var k=c.activeIndex,u=i.scrollType===a,v=u?s:p,w=c.viewSize[u?0:1];u=-w*f;var x={},y,z=j===m;if(y=z&&k===0&&f===t-1||j===n&&k===t-1&&f===0)u=q.call(c,c.panels,f,z,v,w);x[v]={to:u};c.anim&&c.anim.stop();c.anim=new YAHOO.util.Anim(c.content,x,i.duration,i.easing);c.anim.onComplete.subscribe(function(){y&&l.call(c,c.panels,f,z,v,w);c.anim=null;d()});c.anim.animate()}function q(i,t,d,f,j){var c=this.config.steps;
t=this.length;var k=d?t-1:0,u=(k+1)*c;for(c=k*c;c<u;c++){i[c].style.position=o;i[c].style[f]=(d?"-":h)+j*t+g}return d?j:-j*t}function l(i,t,d,f,j){var c=this.config.steps;t=this.length;var k=d?t-1:0,u=(k+1)*c;for(c=k*c;c<u;c++){i[c].style.position=h;i[c].style[f]=h}this.content.style[f]=d?-j*(t-1)+g:h}var o="relative",s="left",p="top",g="px",h="",n="forward",m="backward",a="scrollx",e=b.Switchable;b.mix(e.Config,{circular:false});e.Plugins.push({name:"circular",init:function(i){i=i.config;if(i.circular&&
(i.effect===a||i.effect==="scrolly")){i.scrollType=i.effect;i.effect=r}}})});
KISSY.add("switchable-lazyload",function(b){var r=b.DOM,q="beforeSwitch",l="img-src",o="textarea-data",s={},p=b.Switchable,g=b.DataLazyload;s[l]="data-lazyload-src-custom";s[o]="ks-datalazyload-custom";b.mix(p.Config,{lazyDataType:"",lazyDataFlag:""});p.Plugins.push({name:"autoplay",init:function(h){function n(t){var d=a.steps;t=t.toIndex*d;g.loadCustomLazyData(h.panels.slice(t,t+d),e,i);m()&&h.detach(q,n)}function m(){var t,d,f;if(e===l){t=b.query("img",h.container);d=0;for(f=t.length;d<f;d++)if(r.attr(t[d],
i))return false}else if(e===o){t=b.query("textarea",h.container);d=0;for(f=t.length;d<f;d++)if(r.hasClass(t[d],i))return false}return true}var a=h.config,e=a.lazyDataType,i=a.lazyDataFlag||s[e];!g||!e||!i||h.on(q,n)}})});KISSY.add("tabs",function(b){function r(q,l){if(!(this instanceof r))return new r(q,l);r.superclass.constructor.call(this,q,l)}b.extend(r,b.Switchable);b.Tabs=r});
KISSY.add("slide",function(b){function r(l,o){if(!(this instanceof r))return new r(l,o);o=b.merge(q,o||{});r.superclass.constructor.call(this,l,o)}var q={autoplay:true,circular:true};b.extend(r,b.Switchable);b.Slide=r});KISSY.add("carousel",function(b){function r(l,o){if(!(this instanceof r))return new r(l,o);o=b.merge(q,o||{});r.superclass.constructor.call(this,l,o)}var q={circular:true};b.extend(r,b.Switchable);b.Carousel=r});
