/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 543 Apr 9 08:13
*/
(function(b,m,p){if(b[m]===p)b[m]={};m=b[m];var k=b.document,q=function(g,n,l,a){if(!n||!g)return g;if(l===p)l=true;var c,e,o;if(a&&(o=a.length))for(c=0;c<o;c++){e=a[c];if(e in n)if(l||!(e in g))g[e]=n[e]}else for(e in n)if(l||!(e in g))g[e]=n[e];return g},r=false,j=[],d=false;q(m,{version:"1.0.5",_init:function(){this.Env={mods:{}};this.Config={debug:true}},add:function(g,n){this.Env.mods[g]={name:g,fn:n};n(this);return this},ready:function(g){d||this._bindReady();r?g.call(b,this):j.push(g);return this},
_bindReady:function(){var g=this,n=k.documentElement.doScroll,l=n?"onreadystatechange":"DOMContentLoaded";d=true;if(k.attachEvent){if(b!=b.top){var a=function(){if(k.readyState==="complete"){k.detachEvent(l,a);g._fireReady()}};k.attachEvent(l,a)}else{var c=function(){try{n("left");g._fireReady()}catch(o){setTimeout(c,1)}};c()}b.attachEvent("onload",function(){g._fireReady()})}else{var e=function(){k.removeEventListener(l,e,false);g._fireReady()};k.addEventListener(l,e,false)}},_fireReady:function(){if(!r){r=
true;if(j){for(var g,n=0;g=j[n++];)g.call(b,this);j=null}}},mix:q,merge:function(){var g=arguments,n={},l,a=g.length;for(l=0;l<a;++l)q(n,g[l]);return n},extend:function(g,n,l,a){if(!n||!g)return g;var c=Object.prototype,e=n.prototype,o=function(i){function h(){}h.prototype=i;return new h}(e);g.prototype=o;o.constructor=g;g.superclass=e;if(n!==Object&&e.constructor===c.constructor)e.constructor=n;l&&q(o,l);a&&q(g,a);return g},augment:function(g,n,l,a){return q(g.prototype,m.isFunction(n)?n.prototype:
n,l,a)},weave:function(g,n,l,a){var c=[l[a],g];n==="before"&&c.reverse();l[a]=function(){for(var e=0,o;e<2;++e)o=c[e].apply(this,arguments);return o};return this},app:function(g){var n=b[g]||{};q(n,this,true,["_init","add","namespace"]);n._init();return b[g]=n},namespace:function(){var g=arguments,n=g.length,l=null,a,c,e;for(a=0;a<n;++a){e=(""+g[a]).split(".");l=this;for(c=b[e[0]]===l?1:0;c<e.length;++c)l=l[e[c]]=l[e[c]]||{}}return l},log:function(g,n,l){if(this.Config.debug){l&&(g=l+": "+g);if(b.console!==
p&&console.log)console[n&&console[n]?n:"log"](g)}return this},error:function(g){throw g;},now:function(){return(new Date).getTime()}});m._init()})(window,"KISSY");
KISSY.add("lang",function(b,m){function p(a){var c=typeof a;return a===null|(c!=="object"&&c!=="function")}var k=document,q=Array.prototype,r=q.forEach,j=q.indexOf,d=q.slice,g=/^\s+|\s+$/g,n=/^(\w+)\[\]$/,l=Object.prototype.toString;b.mix(b,{each:r?function(a,c,e){r.call(a,c,e);return this}:function(a,c,e){var o=a&&a.length||0,i;for(i=0;i<o;++i)c.call(e||this,a[i],i,a);return this},trim:String.prototype.trim?function(a){return(a||"").trim()}:function(a){return(a||"").replace(g,"")},isPlainObject:function(a){return a&&
l.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return l.call(a)==="[object Function]"},isArray:function(a){return l.call(a)==="[object Array]"},indexOf:j?function(a,c){return j.call(c,a)}:function(a,c){for(var e=0,o=c.length;e<o;++e)if(c[e]===a)return e;return-1},inArray:function(a,c){return b.indexOf(a,c)!==-1},makeArray:function(a){if(a===null||a===m)return[];if(b.isArray(a))return a;if(typeof a.length!==
"number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],e=0,o=a.length;e<o;++e)c[e]=a[e];return c}return d.call(a)},param:function(a){if(typeof a!=="object")return"";var c=[],e,o;for(e in a){o=a[e];if(p(o))c.push(e,"=",o+"","&");else if(b.isArray(o)&&o.length)for(var i=0,h=o.length;i<h;++i)p(o[i])&&c.push(e+"[]=",o[i]+"","&")}c.pop();return encodeURI(c.join(""))},unparam:function(a,c){if(typeof a!=="string"||(a=decodeURI(b.trim(a))).length===0)return{};var e={};a=
a.split(c||"&");for(var o,i,h=0,t=a.length;h<t;++h){o=a[h].split("=");c=o[0];o=o[1]||"";if((i=c.match(n))&&i[1]){e[i[1]]=e[i[1]]||[];e[i[1]].push(o)}else e[c]=o}return e},later:function(a,c,e,o,i){c=c||0;o=o||{};var h=a,t=b.makeArray(i),f;if(typeof a==="string")h=o[a];h||b.error("method undefined");a=function(){h.apply(o,t)};f=e?setInterval(a,c):setTimeout(a,c);return{id:f,interval:e,cancel:function(){this.interval?clearInterval(f):clearTimeout(f)}}},globalEval:function(a){if(a=b.trim(a)){var c=k.getElementsByTagName("head")[0]||
k.documentElement,e=k.createElement("script");if(b.UA.ie)e.text=a;else e.appendChild(k.createTextNode(a));c.insertBefore(e,c.firstChild);c.removeChild(e)}}})});
KISSY.add("ua",function(b){var m=navigator.userAgent,p,k={ie:0,gecko:0,firefox:0,opera:0,webkit:0,safari:0,chrome:0,mobile:""},q=function(r){var j=0;return parseFloat(r.replace(/\./g,function(){return j++===0?".":""}))};if((p=m.match(/AppleWebKit\/([\d.]*)/))&&p[1]){k.webkit=q(p[1]);if((p=m.match(/Chrome\/([\d.]*)/))&&p[1])k.chrome=q(p[1]);else if((p=m.match(/\/([\d.]*) Safari/))&&p[1])k.safari=q(p[1]);if(/ Mobile\//.test(m))k.mobile="Apple";else if(p=m.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))k.mobile=
p[0]}else if((p=m.match(/Opera\/.* Version\/([\d.]*)/))&&p[1]){k.opera=q(p[1]);if(m.match(/Opera Mini[^;]*/))k.mobile=p[0]}else if((p=m.match(/MSIE\s([^;]*)/))&&p[1])k.ie=q(p[1]);else if(p=m.match(/Gecko/)){k.gecko=1;if((p=m.match(/rv:([\d.]*)/))&&p[1])k.gecko=q(p[1]);if((p=m.match(/Firefox\/([\d.]*)/))&&p[1])k.firefox=q(p[1])}b.UA=k});
KISSY.add("selector",function(b,m){function p(i,h,t){var f,s=[],u,v;if(typeof i===l){i=b.trim(i);if(e.test(i)){if(h=q(i.slice(1)))s=[h]}else if(f=o.exec(i)){u=f[1];v=f[2];f=f[3];if(h=u?q(u):k(h))if(f){if(!u||i.indexOf(a)!==-1)s=j(f,v,h)}else if(v)s=r(h,v)}else if(i.indexOf(",")>-1)if(n.querySelectorAll)s=n.querySelectorAll(i);else{u=i.split(",");v=[];s=0;for(i=u.length;s<i;++s)v=v.concat(p(u[s],h));s=d(v)}}else if(i&&i.nodeType)s=[i];else if(i&&i.item)s=i;if(s.item)s=b.makeArray(s);t||g(s);return s}
function k(i){if(i===m)i=n;else if(typeof i===l&&e.test(i))i=q(i.slice(1));else if(i&&i.nodeType!==1&&i.nodeType!==9)i=null;return i}function q(i){return n.getElementById(i)}function r(i,h){return i.getElementsByTagName(h)}function j(i,h,t){t=i=t.getElementsByClassName(i);var f=0,s=0,u=i.length,v;if(h&&h!==c){t=[];for(h=h.toUpperCase();f<u;++f){v=i[f];if(v.tagName===h)t[s++]=v}}return t}function d(i){var h=false;i.sort(function(f,s){f=f.sourceIndex-s.sourceIndex;if(f===0)h=true;return f});if(h)for(var t=
1;t<i.length;t++)i[t]===i[t-1]&&i.splice(t--,1);return i}function g(i){i.each=function(h,t){b.each(i,h,t)}}var n=document,l="string",a=" ",c="*",e=/^#[\w-]+$/,o=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var i=n.createElement("div");i.appendChild(n.createComment(""));if(i.getElementsByTagName(c).length>0)r=function(h,t){h=h.getElementsByTagName(t);if(t===c){t=[];for(var f=0,s=0,u;u=h[f++];)if(u.nodeType===1)t[s++]=u;h=t}return h}})();n.getElementsByClassName||(j=n.querySelectorAll?
function(i,h,t){return t.querySelectorAll((h?h:"")+"."+i)}:function(i,h,t){h=t.getElementsByTagName(h||c);t=[];var f=0,s=0,u=h.length,v,w;for(i=a+i+a;f<u;++f){v=h[f];if((w=v.className)&&(a+w+a).indexOf(i)>-1)t[s++]=v}return t});b.query=p;b.get=function(i,h){return p(i,h,true)[0]||null}});
KISSY.add("dom-base",function(b,m){function p(f,s){return s&&s.nodeName.toUpperCase()===f.toUpperCase()}function k(f,s){for(var u=[],v=0;f;f=f.nextSibling)if(f.nodeType===1&&f!==s)u[v++]=f;return u}function q(f,s,u){s=s||0;for(var v=0;f;f=f[u])if(f.nodeType===1&&v++===s)break;return f}function r(f,s){var u=null,v;if(f&&(f.push||f.item)&&f[0]){s=s||f[0].ownerDocument;u=s.createDocumentFragment();if(f.item)f=b.makeArray(f);s=0;for(v=f.length;s<v;++s)u.appendChild(f[s])}else b.error("unable to convert "+
f+" to fragment");return u}var j=document,d=j.documentElement.textContent!==m?"textContent":"innerText",g=b.UA,n=g.ie,l=n&&n<8,a={readonly:"readOnly"},c=/href|src|style/,e=/href|src|colspan|rowspan/,o=/\r/g,i=/radio|checkbox/,h=j.createElement("DIV"),t=/^[a-z]+$/i;l&&b.mix(a,{"for":"htmlFor","class":"className"});b.DOM={query:b.query,get:b.get,attr:function(f,s,u){if(!f||f.nodeType!==1)return m;var v;s=s.toLowerCase();s=a[s]||s;if(u===m){if(c.test(s)){if(s==="style")v=f.style.cssText}else v=f[s];
if(v===m)v=f.getAttribute(s);if(l&&e.test(s))v=f.getAttribute(s,2);return v===null?m:v}if(s==="style")f.style.cssText=u;else f.setAttribute(s,""+u)},removeAttr:function(f,s){f&&f.nodeType===1&&f.removeAttribute(s)},val:function(f,s){if(!f||f.nodeType!==1)return m;if(s===m){if(p("option",f))return(f.attributes.value||{}).specified?f.value:f.text;if(p("select",f)){s=f.selectedIndex;var u=f.options;if(s<0)return null;else if(f.type==="select-one")return b.DOM.val(u[s]);f=[];s=0;for(var v=u.length;s<
v;++s)u[s].selected&&f.push(b.DOM.val(u[s]));return f}if(g.webkit&&i.test(f.type))return f.getAttribute("value")===null?"on":f.value;return(f.value||"").replace(o,"")}if(p("select",f)){u=b.makeArray(s);var w=f.options,x;s=0;for(v=w.length;s<v;++s){x=w[s];x.selected=b.inArray(b.DOM.val(x),u)}if(!u.length)f.selectedIndex=-1}else f.value=s},css:function(f,s,u){if(u===m)return f.style[s];b.each(b.makeArray(f),function(v){v.style[s]=u})},text:function(f,s){if(s===m)return(f||{})[d]||"";if(f)f[d]=s},html:function(f,
s){if(s===m)return f.innerHTML;f.innerHTML=s},children:function(f){if(f.children)return b.makeArray(f.children);return k(f.firstChild)},siblings:function(f){return k(f.parentNode.firstChild,f)},next:function(f){return q(f,1,"nextSibling")},prev:function(f){return q(f,1,"previousSibling")},parent:function(f){return(f=f.parentNode)&&f.nodeType!==11?f:null},create:function(f,s){if(typeof f==="string")f=b.trim(f);if(t.test(f))return(s||j).createElement(f);var u=null;u=s?s.createElement("DIV"):h;u.innerHTML=
f;f=u.childNodes;return u=f.length===1?f[0].parentNode.removeChild(f[0]):r(f,s||j)}}});
KISSY.add("dom-class",function(b,m){function p(d,g,n){if(b.isArray(d)){b.each(d,function(){g.apply(n,Array.prototype.slice.call(arguments,3))});return true}}var k=b.DOM;b.mix(k,{hasClass:function(d,g){if(!g||!d||!d.className)return false;return(" "+d.className+" ").indexOf(" "+g+" ")>-1},addClass:function(d,g){if(!p(d,r,k,g))if(g&&d)q(d,g)||(d.className+=" "+g)},removeClass:function(d,g){if(!p(d,j,k,g))if(q(d,g)){d.className=(" "+d.className+" ").replace(" "+g+" "," ");q(d,g)&&j(d,g)}},replaceClass:function(d,
g,n){j(d,g);r(d,n)},toggleClass:function(d,g,n){p(d,k.toggleClass,k,g,n)||((n!==m?n:!q(d,g))?r(d,g):j(d,g))}});var q=k.hasClass,r=k.addClass,j=k.removeClass});
KISSY.add("event",function(b,m){function p(h,t,f,s){if(b.isArray(t)){b.each(t,function(u){i[h](u,f,s)});return true}if((f=b.trim(f))&&f.indexOf(c)>0){b.each(f.split(c),function(u){i[h](t,u,s)});return true}}function k(h){var t=-1;if(h.nodeType===3||h.nodeType===8)return t;return t=h.nodeType?j.attr(h,a):h.isCustomEventTarget?h.eventTargetId:h[a]}function q(h,t){if(h.nodeType)j.attr(h,a,t);else if(h.isCustomEventTarget)h.eventTargetId=t;else try{h[a]=t}catch(f){b.error(f)}}function r(h){if(h.nodeType)j.removeAttr(h,
a);else if(h.isCustomEventTarget)h.eventTargetId=m;else h[a]=m}var j=b.DOM,d=window,g=document,n=g.addEventListener?function(h,t,f){h.addEventListener&&h.addEventListener(t,f,false)}:function(h,t,f){h.attachEvent&&h.attachEvent("on"+t,f)},l=g.removeEventListener?function(h,t,f){h.removeEventListener&&h.removeEventListener(t,f,false)}:function(h,t,f){h.detachEvent&&h.detachEvent("on"+t,f)},a="data-ks-event-guid",c=" ",e=b.now(),o={},i={special:{},add:function(h,t,f){if(!p("add",h,t,f)){var s=k(h),
u,v;if(!(s===-1||!t||!b.isFunction(f))){if(!s){q(h,s=e++);o[s]={target:h,events:{}}}v=o[s].events;u=!h.isCustomEventTarget&&i.special[t]||{};if(!v[t]){s=function(w,x){if(!w||!w.fixed){w=new b.EventObject(h,w,t);b.isPlainObject(x)&&b.mix(w,x)}u.setup&&u.setup(w);return(u.handle||i._handle)(h,w,v[t].listeners)};v[t]={handle:s,listeners:[]};if(h.isCustomEventTarget)h._addEvent&&h._addEvent(t,s);else n(h,u.fix||t,s)}v[t].listeners.push(f)}}},remove:function(h,t,f){if(!p("remove",h,t,f)){var s=k(h),u,
v,w,x,y,z;if(s!==-1)if(s&&(u=o[s]))if(u.target===h){u=u.events||{};if(v=u[t]){w=v.listeners;y=w.length;if(b.isFunction(f)&&y&&b.inArray(f,w)){z=[];for(x=0;x<y;++x)f!==w[x]&&z.push(w[x]);y=z.length}if(f===m||y===0){h.isCustomEventTarget||l(h,t,v.handle);delete o[s].type}}if(t===m||b.isEmptyObject(u)){for(t in u)i.remove(h,t);delete o[s];r(h)}}}},_handle:function(h,t,f){for(var s,u=0,v=f.length;u<v;++u){s=f[u].call(h,t);if(t.isImmediatePropagationStopped)break;s===false&&t.halt()}return s},_getCache:function(h){return o[h]},
_simpleAdd:n,_simpleRemove:l};i.on=i.add;b.Event=i;d.attachEvent&&!d.addEventListener&&d.attachEvent("onunload",function(){var h,t;for(h in o)if(t=o[h].target)try{i.remove(t)}catch(f){}})});
KISSY.add("event-object",function(b,m){function p(r,j,d){this.currentTarget=r;this.originalEvent=j||{};if(j){this.type=j.type;this._fix()}else{this.type=d;this.target=r}this.fixed=true}var k=document,q="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(p.prototype,
{_fix:function(){for(var r=this.originalEvent,j=q.length,d;j;){d=q[--j];this[d]=r[d]}if(!this.target)this.target=this.srcElement||k;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===m&&this.clientX!==m){r=k.documentElement;j=k.body;this.pageX=this.clientX+(r&&r.scrollLeft||j&&j.scrollLeft||0)-(r&&r.clientLeft||j&&j.clientLeft||0);this.pageY=this.clientY+
(r&&r.scrollTop||j&&j.scrollTop||0)-(r&&r.clientTop||j&&j.clientTop||0)}if(this.which===m)this.which=this.charCode!==m?this.charCode:this.keyCode;if(this.metaKey===m)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==m)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var r=this.originalEvent;if(r.preventDefault)r.preventDefault();else r.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var r=this.originalEvent;if(r.stopPropagation)r.stopPropagation();
else r.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var r=this.originalEvent;r.stopImmediatePropagation?r.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(r){r?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=p});
KISSY.add("event-target",function(b,m){var p=b.Event;b.EventTarget={eventTargetId:m,isCustomEventTarget:true,fire:function(k,q){(k=((p._getCache(this.eventTargetId||-1)||{}).events||{})[k])&&b.isFunction(k.handle)&&k.handle(m,q)},on:function(k,q){p.add(this,k,q)},detach:function(k,q){p.remove(this,k,q)}}});
KISSY.add("event-mouseenter",function(b){var m=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(p){m.special[p.name]={fix:p.fix,setup:function(k){k.type=p.name},handle:function(k,q,r){var j=q.relatedTarget;try{for(;j&&j!==k;)j=j.parentNode;j!==k&&m._handle(k,q,r)}catch(d){}}}})});
KISSY.add("node",function(b){function m(q,r,j){var d;if(!(this instanceof m))return new m(q,r,j);if(!q)return null;if(q.nodeType)d=q;else if(typeof q==="string")d=p.create(q,j);r&&b.error("not implemented");this[0]=d}var p=b.DOM,k=m.prototype;b.each(["attr","removeAttr","css"],function(q){k[q]=function(r,j){var d=this[0];if(j===undefined)return p[q](d,r);else{p[q](d,r,j);return this}}});b.each(["val","text","html"],function(q){k[q]=function(r){var j=this[0];if(r===undefined)return p[q](j);else{p[q](j,
r);return this}}});b.each(["children","siblings","next","prev","parent"],function(q){k[q]=function(){var r=p[q](this[0]);return r?new b[r.length?"NodeList":"Node"](r):null}});b.each(["hasClass","addClass","removeClass","replaceClass","toggleClass"],function(q){k[q]=function(){var r=p[q].apply(p,[this[0]].concat(b.makeArray(arguments)));return typeof r==="boolean"?r:this}});b.mix(k,b.EventTarget);k._addEvent=function(q,r){b.Event._simpleAdd(this[0],q,r)};delete k.fire;b.mix(k,{one:function(q){return b.one(q,
this[0])},all:function(q){return b.all(q,this[0])}});b.one=function(q,r){return new m(b.get(q,r))};b.Node=m});KISSY.add("nodelist",function(b){function m(k){if(!(this instanceof m))return new m(k);p.apply(this,k||[])}var p=Array.prototype.push;b.mix(m.prototype,{length:0,each:function(k,q){for(var r=this.length,j=0,d;j<r;++j){d=new b.Node(this[j]);k.call(q||d,d,j,this)}return this}});b.all=function(k,q){return new m(b.query(k,q,true))};b.NodeList=m});
KISSY.add("cookie",function(b){function m(r){return typeof r==="string"&&r!==""}var p=document,k=encodeURIComponent,q=decodeURIComponent;b.Cookie={get:function(r){var j;if(m(r))if(r=p.cookie.match("(?:^| )"+r+"(?:(?:=([^;]*))|;|$)"))j=r[1]?q(r[1]):"";return j},set:function(r,j,d,g,n,l){j=k(j);var a=d;if(typeof a==="number"){a=new Date;a.setTime(a.getTime()+d*864E5)}if(a instanceof Date)j+="; expires="+a.toUTCString();if(m(g))j+="; domain="+g;if(m(n))j+="; path="+n;if(l)j+="; secure";p.cookie=r+"="+
j},remove:function(r){this.set(r,"",0)}}});
KISSY.add("json",function(b){function m(l){return l<10?"0"+l:l}function p(l){r.lastIndex=0;return r.test(l)?'"'+l.replace(r,function(a){var c=g[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+l+'"'}function k(l,a){var c,e,o=j,i,h=a[l];if(h&&typeof h==="object"&&typeof h.toJSON==="function")h=h.toJSON(l);if(typeof n==="function")h=n.call(a,l,h);switch(typeof h){case "string":return p(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);
case "object":if(!h)return"null";j+=d;i=[];if(Object.prototype.toString.apply(h)==="[object Array]"){e=h.length;for(l=0;l<e;l+=1)i[l]=k(l,h)||"null";a=i.length===0?"[]":j?"[\n"+j+i.join(",\n"+j)+"\n"+o+"]":"["+i.join(",")+"]";j=o;return a}if(n&&typeof n==="object"){e=n.length;for(l=0;l<e;l+=1){c=n[l];if(typeof c==="string")if(a=k(c,h))i.push(p(c)+(j?": ":":")+a)}}else for(c in h)if(Object.hasOwnProperty.call(h,c))if(a=k(c,h))i.push(p(c)+(j?": ":":")+a);a=i.length===0?"{}":j?"{\n"+j+i.join(",\n"+j)+
"\n"+o+"}":"{"+i.join(",")+"}";j=o;return a}}b=b.JSON=window.JSON;if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+m(this.getUTCMonth()+1)+"-"+m(this.getUTCDate())+"T"+m(this.getUTCHours())+":"+m(this.getUTCMinutes())+":"+m(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,d,g={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof b.stringify!=="function")b.stringify=function(l,a,c){var e;d=j="";if(typeof c==="number")for(e=0;e<c;e+=1)d+=" ";else if(typeof c==="string")d=c;if((n=a)&&typeof a!=="function"&&(typeof a!=="object"||typeof a.length!=="number"))throw new Error("JSON.stringify");return k("",{"":l})};
if(typeof b.parse!=="function")b.parse=function(l,a){function c(e,o){var i,h,t=e[o];if(t&&typeof t==="object")for(i in t)if(Object.hasOwnProperty.call(t,i)){h=c(t,i);if(h!==undefined)t[i]=h;else delete t[i]}return a.call(e,o,t)}l=String(l);q.lastIndex=0;if(q.test(l))l=l.replace(q,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){l=eval("("+l+")");return typeof a==="function"?c({"":l},""):l}throw new SyntaxError("JSON.parse");}});
KISSY.add("ajax",function(b){var m=document,p=b.UA;b.Ajax={request:function(){b.error("not implemented")},getScript:function(k,q,r){var j=m.getElementsByTagName("head")[0]||m.documentElement,d=m.createElement("script");d.src=k;if(r)d.charset=r;d.async=true;if(b.isFunction(q))if(p.ie)d.onreadystatechange=function(){var g=d.readyState;if(g==="loaded"||g==="complete"){d.onreadystatechange=null;q()}};else d.onload=q;j.appendChild(d)}}});
KISSY.add("swf-ua",function(b){function m(j){var d=j[0]+".";switch(j[2].toString().length){case 1:d+="00";break;case 2:d+="0";break}return d+j[2]}b=b.UA;var p=0,k;if(b.ie){try{k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");k.AllowScriptAccess="always"}catch(q){if(k!==null)p=6}if(p===0)try{p=m((new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","))}catch(r){}}else if(k=navigator.mimeTypes["application/x-shockwave-flash"])if(k=k.enabledPlugin)p=
m(k.description.replace(/\s[rd]/g,".").replace(/[a-z\s]+/ig,"").split("."));b.flash=parseFloat(p)});
KISSY.add("swf",function(b){function m(l,a,c){var e="ks-swf-"+k++,o=parseFloat(c.version)||q;o=p.flash>=o;var i=p.flash>=8&&c.useExpressInstall&&!o,h=i?d:a;a="YUISwfId="+e+"&YUIBridgeCallback="+g;var t="<object ";this.id=e;m.instances[e]=this;if((l=b.get(l))&&(o||i)&&h){t+='id="'+e+'" ';t+=p.ie?'classid="'+r+'" ':'type="'+j+'" data="'+h+'" ';t+='width="100%" height="100%">';if(p.ie)t+='<param name="movie" value="'+h+'"/>';for(var f in c.fixedAttributes)if(n.hasOwnProperty(f))t+='<param name="'+f+
'" value="'+c.fixedAttributes[f]+'"/>';for(var s in c.flashVars){f=c.flashVars[s];if(typeof f==="string")a+="&"+s+"="+encodeURIComponent(f)}t+='<param name="flashVars" value="'+a+'"/>';t+="</object>";l.innerHTML=t;this.swf=b.get("#"+e)}}var p=b.UA,k=b.now(),q=10.22,r="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",j="application/x-shockwave-flash",d="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+k,g="KISSY.SWF.eventHandler",n={align:"",allowNetworking:"",allowScriptAccess:"",
base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};m.instances=(b.SWF||{}).instances||{};m.eventHandler=function(l,a){m.instances[l]._eventHandler(a)};b.augment(m,b.EventTarget);b.augment(m,{_eventHandler:function(l){var a=l.type;if(a==="log")b.log(l.message);else a&&this.fire(a,l)},callSWF:function(l,a){if(this.swf[l])return this.swf[l].apply(this.swf,a||[])}});b.SWF=m});
KISSY.add("swfstore",function(b,m){function p(d,g,n,l){var a="other",c=q.get(r),e=this;n=(n!==m?n:true)+"";l=(l!==m?l:true)+"";if(k.ie)a="ie";else if(k.gecko)a="gecko";else if(k.webkit)a="webkit";else if(k.opera)a="opera";if(!c||c==="null")q.set(r,c=Math.round(Math.random()*Math.PI*1E5));e.embeddedSWF=new b.SWF(d,g||"swfstore.swf",{version:9.115,useExpressInstall:false,fixedAttributes:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale"},flashVars:{allowedDomain:j.location.hostname,shareData:n,
browser:c,useCompression:l}});e.embeddedSWF._eventHandler=function(o){b.SWF.prototype._eventHandler.call(e,o)}}var k=b.UA,q=b.Cookie,r="swfstore",j=document;b.augment(p,b.EventTarget);b.augment(p,{setItem:function(d,g){g=typeof g==="string"?g.replace(/\\/g,"\\\\"):b.JSON.stringify(g)+"";if(d=b.trim(d+""))try{return this.embeddedSWF.callSWF("setItem",[d,g])}catch(n){this.fire("error",{message:n})}}});b.each(["getValueAt","getNameAt","getTypeAt","getValueOf","getTypeOf","getItems","getLength","removeItem",
"removeItemAt","clear","getShareData","setShareData","getUseCompression","setUseCompression","calculateCurrentSize","hasAdequateDimensions","setSize","getModificationDate","displaySettings"],function(d){p.prototype[d]=function(){try{return this.embeddedSWF.callSWF(d,b.makeArray(arguments))}catch(g){this.fire("error",{message:g})}}});b.SWFStore=p});
KISSY.add("datalazyload",function(b,m){function p(a,c){if(!(this instanceof p))return new p(a,c);if(c===m){c=a;a=[d]}b.isArray(a)||(a=[b.get(a)||d]);this.containers=a;this.config=b.merge(n,c||{});this.callbacks={els:[],fns:[]};this._init()}var k=b.DOM,q=b.Event,r=YAHOO.util.Dom,j=window,d=document,g={AUTO:"auto",MANUAL:"manual"},n={mod:g.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"},l=p.prototype;b.mix(l,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function a(){e||(e=setTimeout(function(){c();e=null},100))}function c(){o._loadItems();if(o._getItemsLength()===0){q.remove(j,"scroll",a);q.remove(j,"resize",a)}}var e,o=this;q.on(j,"scroll",a);q.on(j,"resize",function(){o.threshold=o._getThreshold();a()});o._getItemsLength()&&b.ready(function(){c()})},_filterItems:function(){var a=this.containers,c=this.threshold,e=this.config.placeholder,o=this.config.mod===
g.MANUAL,i,h,t,f,s,u,v,w=[],x=[];i=0;for(h=a.length;i<h;++i){t=b.query("img",a[i]);f=0;for(s=t.length;f<s;++f){u=t[f];v=u.getAttribute("data-lazyload-src");if(o){if(v){u.src=e;w.push(u)}}else if(r.getY(u)>c&&!v){u.setAttribute("data-lazyload-src",u.src);u.src=e;w.push(u)}}t=b.query("textarea",a[i]);f=0;for(s=t.length;f<s;++f){u=t[f];k.hasClass(u,"ks-datalazyload")&&x.push(u)}}this.images=w;this.areaes=x},_loadItems:function(){this._loadImgs();this._loadAreaes();this._fireCallbacks()},_loadImgs:function(){var a=
this.images,c=this.threshold+r.getDocumentScrollTop(),e,o,i=[];for(e=0;o=a[e++];)r.getY(o)<=c?this._loadImgSrc(o):i.push(o);this.images=i},_loadImgSrc:function(a,c){c=c||"data-lazyload-src";var e=a.getAttribute(c);if(e&&a.src!=e){a.src=e;a.removeAttribute(c)}},_loadAreaes:function(){var a=this.areaes,c=this.threshold+r.getDocumentScrollTop(),e,o,i,h=[];for(e=0;o=a[e++];){i=o;if(r.getY(i)===m)i=o.parentNode;r.getY(i)<=c?this._loadDataFromArea(o.parentNode,o):h.push(o)}this.areaes=h},_loadDataFromArea:function(a,
c){var e=k.create(c.value);c.style.display="none";c.className="";a.insertBefore(e,c);b.UA.gecko||b.query("script",e).each(function(o){b.globalEval(o.text)})},_fireCallbacks:function(){var a=this.callbacks,c=a.els,e=a.fns,o=this.threshold+r.getDocumentScrollTop(),i,h,t,f=[],s=[];for(i=0;(h=c[i])&&(t=e[i++]);)if(r.getY(h)<=o)t.call(h);else{f.push(h);s.push(t)}a.els=f;a.fns=s},addCallback:function(a,c){if((a=b.get(a))&&typeof c==="function"){this.callbacks.els.push(a);this.callbacks.fns.push(c)}},_getThreshold:function(){var a=
this.config.diff,c=r.getViewportHeight();return a==="default"?2*c:c+a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,c,e){var o=this,i,h;b.isArray(a)||(a=[b.get(a)]);b.each(a,function(t){switch(c){case "textarea-data":if((i=b.get("textarea",t))&&k.hasClass(i,e||"ks-datalazyload-custom"))o._loadDataFromArea(t,i);break;default:h=t.nodeName==="IMG"?[t]:b.query("img",t);t=0;for(var f=h.length;t<f;t++)o._loadImgSrc(h[t],
e||"data-lazyload-src-custom")}})}});b.mix(p,l,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);b.DataLazyload=p});
KISSY.add("suggest",function(b,m){function p(a,c,e){if(!(this instanceof p))return new p(a,c,e);this.textInput=b.get(a);this.dataSource=c;this.JSONDataSource=b.isPlainObject(c)?c:null;this.returnedData=null;this.config=b.merge(l,e||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var k=YAHOO.util.Dom,
q=b.DOM,r=b.Event,j=window,d=document,g=d.getElementsByTagName("head")[0],n=YAHOO.env.ua.ie,l={containerCls:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:n===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};b.mix(p.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var a=this;a.textInput.setAttribute("autocomplete",
"off");r.on(a.textInput,"blur",function(){a.stop();a.hide()});a.config.autoFocus&&a.textInput.focus();var c=0;r.on(a.textInput,"keydown",function(e){e=e.keyCode;switch(e){case 27:a.hide();a.textInput.value=a.query;a.query.length===0&&a.textInput.blur();break;case 13:a.textInput.blur();a._onKeyboardSelecting&&a.textInput.value==a._getSelectedItemKey()&&a.fire("itemSelect");a._submitForm();break;case 40:case 38:if(c++==0){a._isRunning&&a.stop();a._onKeyboardSelecting=true;a.selectItem(e===40)}else if(c==
3)c=0;break}if(e!=40&&e!=38){a._isRunning||a.start();a._onKeyboardSelecting=false}});r.on(a.textInput,"keyup",function(){c=0})},_initContainer:function(){var a=d.createElement("div"),c=this.config.containerCls;a.className="ks-suggest-container";if(c)a.className+=" "+c;a.style.position="absolute";a.style.visibility="hidden";this.container=a;this._setContainerRegion();this._initContainerEvent();d.body.insertBefore(a,d.body.firstChild)},_setContainerRegion:function(){var a=k.getRegion(this.textInput),
c=a.left,e=a.right-c-2;e=e>0?e:0;if(d.documentMode===7&&(n===7||n===8))c-=2;else b.UA.gecko&&c++;this.container.style.left=c+"px";this.container.style.top=a.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?e+"px":this.config.containerWidth},_initContainerEvent:function(){var a=this;r.on(a.container,"mousemove",function(e){e=e.target;if(e.nodeName!="LI")e=k.getAncestorByTagName(e,"li");if(k.isAncestor(a.container,e))if(e!=a.selectedItem){a._removeSelectedItem();a._setSelectedItem(e)}});
var c=null;a.container.onmousedown=function(e){c=e.target;a.textInput.onbeforedeactivate=function(){j.event.returnValue=false;a.textInput.onbeforedeactivate=null};return false};r.on(a.container,"mouseup",function(e){if(a._isInContainer([e.pageX,e.pageY])){e=e.target;if(e==c)if(e.className=="ks-suggest-close-btn")a.hide();else{if(e.nodeName!="LI")e=k.getAncestorByTagName(e,"li");if(k.isAncestor(a.container,e)){a._updateInputFromSelectItem(e);a.fire("itemSelect");a.textInput.blur();a._submitForm()}}}})},
_submitForm:function(){if(this.config.submitFormOnClickSelect){var a=this.textInput.form;if(a){if(d.createEvent){var c=d.createEvent("MouseEvents");c.initEvent("submit",true,false);a.dispatchEvent(c)}else d.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_isInContainer:function(a){var c=k.getRegion(this.container);return a[0]>=c.left&&a[0]<=c.right&&a[1]>=c.top&&a[1]<=c.bottom},_initShim:function(){var a=d.createElement("iframe");a.src="about:blank";a.className="ks-suggest-shim";a.style.position=
"absolute";a.style.visibility="hidden";a.style.border="none";this.container.shim=a;this._setShimRegion();d.body.insertBefore(a,d.body.firstChild)},_setShimRegion:function(){var a=this.container,c=a.shim;if(c){c.style.left=parseInt(a.style.left)-2+"px";c.style.top=a.style.top;c.style.width=parseInt(a.style.width)+2+"px"}},_initStyle:function(){var a=b.get("#ks-suggest-style");if(!a){a=d.createElement("style");a.id="ks-suggest-style";g.appendChild(a);if(a.styleSheet)a.styleSheet.cssText=".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}";
else a.appendChild(d.createTextNode(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}"))}},
_initResizeEvent:function(){var a=this,c;r.on(j,"resize",function(){c&&clearTimeout(c);c=setTimeout(function(){a._setContainerRegion();a._setShimRegion()},50)})},start:function(){var a=this;p.focusInstance=a;a._timer=setTimeout(function(){a.updateContent();a._timer=setTimeout(arguments.callee,a.config.timerDelay)},a.config.timerDelay);a._isRunning=true},stop:function(){p.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var a=this.container,
c=a.shim;a.style.visibility="";if(c){if(!c.style.height){a=k.getRegion(a);c.style.height=a.bottom-a.top-2+"px"}c.style.visibility=""}}},hide:function(){if(this.isVisible()){var a=this.container,c=a.shim;if(c)c.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var a=this.query;if(b.trim(a).length)if(this._dataCache[a]!==m){this.returnedData=
"using cache";this._fillContainer(this._dataCache[a]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[a]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var a=this;if(!n)a.dataScript=null;if(!a.dataScript){var c=d.createElement("script");c.charset="utf-8";g.insertBefore(c,g.firstChild);a.dataScript=c;if(!n){var e=(new Date).getTime();a._latestScriptTime=
e;c.setAttribute("time",e);r.on(c,"load",function(){a._scriptDataIsOut=c.getAttribute("time")!=a._latestScriptTime})}}a.queryParams="q="+encodeURIComponent(a.query)+"&code=utf-8&callback=g_ks_suggest_callback";a.fire("dataRequest");a.dataScript.src=a.dataSource+"?"+a.queryParams},handleResponse:function(a){if(!this._scriptDataIsOut){this.returnedData=a;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var c="";a=this.returnedData.length;if(a>0){c=d.createElement("ol");for(var e=
0;e<a;++e){var o=this.returnedData[e],i=this.formatItem(o.key,o.result);i.setAttribute("key",o.key);q.addClass(i,e%2?"even":"odd");c.appendChild(i)}c=c}this._fillContainer(c);a>0&&this.appendBottom();b.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(a){var c=[];if(!a)return c;if(b.isArray(a.result))a=a.result;var e=a.length;if(!e)return c;for(var o,i=0;i<e;++i){o=a[i];c[i]=typeof o==="string"?{key:o}:
b.isArray(o)&&o.length>=2?{key:o[0],result:o[1]}:o}return c},formatItem:function(a,c){var e=d.createElement("li"),o=d.createElement("span");o.className="ks-suggest-key";o.appendChild(d.createTextNode(a));e.appendChild(o);if(c!==m){a=this.config.resultFormat.replace("%result%",c);if(b.trim(a)){c=d.createElement("span");c.className="ks-suggest-result";c.appendChild(d.createTextNode(a));e.appendChild(c)}}return e},appendBottom:function(){var a=d.createElement("div");a.className="ks-suggest-bottom";if(this.config.showCloseBtn){var c=
d.createElement("a");c.href="javascript: void(0)";c.setAttribute("target","_self");c.className="ks-suggest-close-btn";c.appendChild(d.createTextNode(this.config.closeBtnText));a.appendChild(c)}b.trim(a.innerHTML)&&this.container.appendChild(a)},_fillContainer:function(a){if(a.nodeType==1){this.container.innerHTML="";this.container.appendChild(a)}else this.container.innerHTML=a;this.selectedItem=null},_displayContainer:function(){b.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(a){var c=
this.container.getElementsByTagName("li");if(c.length!=0)if(this.isVisible()){if(this.selectedItem){a=k[a?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=c[a?0:c.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){q.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(a){q.addClass(a,"selected");this.selectedItem=
a},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});b.mix(p.prototype,b.EventTarget);j.g_ks_suggest_callback=function(a){p.focusInstance&&setTimeout(function(){p.focusInstance.handleResponse(a)},0)};b.Suggest=p});
KISSY.add("switchable",function(b,m){function p(d,g){g=g||{};if(!("markupType"in g))if(g.panelCls)g.markupType=1;else if(g.panels)g.markupType=2;g=b.merge(p.Config,g);this.container=b.get(d);this.config=g;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===m)this.activeIndex=g.activeIndex;this._init()}var k=b.DOM,q=b.Event,r=document,j=p.prototype;p.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",
triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};p.Plugins=[];b.mix(j,{_init:function(){var d=this,g=d.config;d.panels.length===0&&d._parseMarkup();g.hasTriggers&&d._bindTriggers();b.each(p.Plugins,function(n){n.init&&n.init(d)})},_parseMarkup:function(){var d=this.container,g=this.config,n=g.hasTriggers,l,a=[],c=[];switch(g.markupType){case 0:if(l=b.get("."+g.navCls,d))a=k.children(l);l=b.get("."+g.contentCls,d);c=k.children(l);
break;case 1:a=b.query("."+g.triggerCls,d);c=b.query("."+g.panelCls,d);break;case 2:a=g.triggers;c=g.panels;break}d=c.length;this.length=d/g.steps;if(n&&d>0&&a.length===0)a=this._generateTriggersMarkup(this.length);this.triggers=b.makeArray(a);this.panels=b.makeArray(c);this.content=l||c[0].parentNode},_generateTriggersMarkup:function(d){var g=this.config,n=r.createElement("UL"),l,a;n.className=g.navCls;for(a=0;a<d;a++){l=r.createElement("LI");if(a===this.activeIndex)l.className=g.activeTriggerCls;
l.innerHTML=a+1;n.appendChild(l)}this.container.appendChild(n);return k.children(n)},_bindTriggers:function(){var d=this,g=d.config,n=d.triggers,l,a,c=n.length;for(a=0;a<c;a++)(function(e){l=n[e];q.on(l,"click focus",function(){d._onFocusTrigger(e)});if(g.triggerType==="mouse"){q.on(l,"mouseenter",function(){d._onMouseEnterTrigger(e)});q.on(l,"mouseleave",function(){d._onMouseLeaveTrigger(e)})}})(a)},_onFocusTrigger:function(d){if(this.activeIndex!==d){this.switchTimer&&this.switchTimer.cancel();
this.switchTo(d)}},_onMouseEnterTrigger:function(d){var g=this;if(g.activeIndex!==d)g.switchTimer=b.later(function(){g.switchTo(d)},g.config.delay*1E3)},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(d,g){var n=this.config,l=this.triggers,a=this.panels,c=this.activeIndex,e=n.steps,o=c*e,i=d*e;if(d===c)return this;if(this.fire("beforeSwitch",{toIndex:d})===false)return this;if(n.hasTriggers)this._switchTrigger(c>-1?l[c]:null,l[d]);if(g===m)g=d>c?"forward":
"forward";this._switchView(a.slice(o,o+e),a.slice(i,i+e),d,g);this.activeIndex=d;return this},_switchTrigger:function(d,g){var n=this.config.activeTriggerCls;d&&k.removeClass(d,n);k.addClass(g,n)},_switchView:function(d,g){k.css(d,"display","none");k.css(g,"display","block");this.fire("switch")},prev:function(){var d=this.activeIndex;this.switchTo(d>0?d-1:this.length-1,"backward")},next:function(){var d=this.activeIndex;this.switchTo(d<this.length-1?d+1:0,"forward")}});b.mix(j,b.EventTarget);b.Switchable=
p});
KISSY.add("switchable-autoplay",function(b){var m=b.Event,p=b.Switchable;b.mix(p.Config,{autoplay:false,interval:5,pauseOnHover:true});p.Plugins.push({name:"autoplay",init:function(k){var q=k.config;if(q.autoplay){if(q.pauseOnHover){m.on(k.container,"mouseenter",function(){k.paused=true});m.on(k.container,"mouseleave",function(){setTimeout(function(){k.paused=false},q.interval*1E3)})}k.autoplayTimer=b.later(function(){k.paused||k.switchTo(k.activeIndex<k.length-1?k.activeIndex+1:0)},q.interval*1E3,
true)}}})});
KISSY.add("switchable-effect",function(b){var m=YAHOO.util,p=b.DOM,k=m.Dom,q=b.Switchable,r;b.mix(q.Config,{effect:"none",duration:0.5,easing:m.Easing.easeNone});q.Effects={none:function(j,d,g){p.css(j,"display","none");p.css(d,"display","block");g()},fade:function(j,d,g){j.length!==1&&b.error("fade effect only supports steps == 1.");var n=this,l=n.config,a=j[0],c=d[0];n.anim&&n.anim.stop();k.setStyle(c,"opacity",1);n.anim=new m.Anim(a,{opacity:{to:0}},l.duration,l.easing);n.anim.onComplete.subscribe(function(){n.anim=null;
k.setStyle(c,"z-index",9);k.setStyle(a,"z-index",1);g()});n.anim.animate()},scroll:function(j,d,g,n){var l=this;j=l.config;d=j.effect==="scrollx";var a={};a[d?"left":"top"]={to:-(l.viewSize[d?0:1]*n)};l.anim&&l.anim.stop();l.anim=new m.Anim(l.content,a,j.duration,j.easing);l.anim.onComplete.subscribe(function(){l.anim=null;g()});l.anim.animate()}};r=q.Effects;r.scrollx=r.scrolly=r.scroll;q.Plugins.push({name:"effect",init:function(j){var d=j.config,g=d.effect,n=j.panels,l=d.steps,a=j.activeIndex*
l,c=a+l-1,e=n.length;j.viewSize=[d.viewSize[0]||n[0].offsetWidth*l,d.viewSize[0]||n[0].offsetHeight*l];if(g!=="none"){for(d=0;d<e;d++)n[d].style.display="block";switch(g){case "scrollx":case "scrolly":j.content.style.position="absolute";j.content.parentNode.style.position="relative";if(g==="scrollx"){k.setStyle(n,"float","left");j.content.style.width=j.viewSize[0]*(e/l)+"px"}break;case "fade":for(d=0;d<e;d++){k.setStyle(n[d],"opacity",d>=a&&d<=c?1:0);n[d].style.position="absolute";n[d].style.zIndex=
d>=a&&d<=c?9:1}break}}}});b.mix(q.prototype,{_switchView:function(j,d,g,n){var l=this,a=l.config.effect;(b.isFunction(a)?a:r[a]).call(l,j,d,function(){l.fire("switch")},g,n)}})});
KISSY.add("switchable-circular",function(b){function m(e,o,i,h,t){var f=this;e=f.config;o=f.length;var s=f.activeIndex,u=e.scrollType===a,v=u?r:j,w=f.viewSize[u?0:1];u=-w*h;var x={},y,z=t===l;if(y=z&&s===0&&h===o-1||t===n&&s===o-1&&h===0)u=p.call(f,f.panels,h,z,v,w);x[v]={to:u};f.anim&&f.anim.stop();f.anim=new YAHOO.util.Anim(f.content,x,e.duration,e.easing);f.anim.onComplete.subscribe(function(){y&&k.call(f,f.panels,h,z,v,w);f.anim=null;i()});f.anim.animate()}function p(e,o,i,h,t){var f=this.config.steps;
o=this.length;var s=i?o-1:0,u=(s+1)*f;for(f=s*f;f<u;f++){e[f].style.position=q;e[f].style[h]=(i?"-":g)+t*o+d}return i?t:-t*o}function k(e,o,i,h,t){var f=this.config.steps;o=this.length;var s=i?o-1:0,u=(s+1)*f;for(f=s*f;f<u;f++){e[f].style.position=g;e[f].style[h]=g}this.content.style[h]=i?-t*(o-1)+d:g}var q="relative",r="left",j="top",d="px",g="",n="forward",l="backward",a="scrollx",c=b.Switchable;b.mix(c.Config,{circular:false});c.Plugins.push({name:"circular",init:function(e){e=e.config;if(e.circular&&
(e.effect===a||e.effect==="scrolly")){e.scrollType=e.effect;e.effect=m}}})});
KISSY.add("switchable-lazyload",function(b){var m=b.DOM,p="beforeSwitch",k="img-src",q="textarea-data",r={},j=b.Switchable,d=b.DataLazyload;r[k]="data-lazyload-src-custom";r[q]="ks-datalazyload-custom";b.mix(j.Config,{lazyDataType:"",lazyDataFlag:""});j.Plugins.push({name:"autoplay",init:function(g){function n(o){var i=a.steps;o=o.toIndex*i;d.loadCustomLazyData(g.panels.slice(o,o+i),c,e);l()&&g.detach(p,n)}function l(){var o,i,h;if(c===k){o=b.query("img",g.container);i=0;for(h=o.length;i<h;i++)if(m.attr(o[i],
e))return false}else if(c===q){o=b.query("textarea",g.container);i=0;for(h=o.length;i<h;i++)if(m.hasClass(o[i],e))return false}return true}var a=g.config,c=a.lazyDataType,e=a.lazyDataFlag||r[c];!d||!c||!e||g.on(p,n)}})});KISSY.add("tabs",function(b){function m(p,k){if(!(this instanceof m))return new m(p,k);m.superclass.constructor.call(this,p,k)}b.extend(m,b.Switchable);b.Tabs=m});
KISSY.add("slide",function(b){function m(k,q){if(!(this instanceof m))return new m(k,q);q=b.merge(p,q||{});m.superclass.constructor.call(this,k,q)}var p={autoplay:true,circular:true};b.extend(m,b.Switchable);b.Slide=m});KISSY.add("carousel",function(b){function m(k,q){if(!(this instanceof m))return new m(k,q);q=b.merge(p,q||{});m.superclass.constructor.call(this,k,q)}var p={circular:true};b.extend(m,b.Switchable);b.Carousel=m});
KISSY.add("coversflow",function(b){function m(j,d){if(!(this instanceof m))return new m(j,d);d=b.merge(r,d||{});m.superclass.constructor.call(this,j,d);this._initFlow()}var p=YAHOO.util.Dom,k=b.DOM,q=b.Event,r={flowLength:4,aspectRatio:1.964,step:150,width:500,height:350,offset:0,animSpeed:50,autoSwitchToMiddle:true,hasTriggers:false,circular:true};b.extend(m,b.Switchable);b.augment(m,{_initFlow:function(){var j=this,d=j.config;j.busy=false;j.curFrame=0;j.targetFrame=0;j.zIndex=j.length;j.region=
p.getRegion(j.container);j.maxFocus=d.flowLength*d.step;j.maxHeight=j.region.height+Math.round(j.region.height/d.aspectRatio);j.middleLine=j.region.width/2;j.on("beforeSwitch",function(g){g=g.toIndex;j.perIndex=g;j.targetFrame=-g*j.config.step;return!j.busy});d.autoSwitchToMiddle?j.switchTo(Math.floor(j.length/2)):j._frame(0)},_switchView:function(){var j=this.config;if(this.targetFrame<this.curFrame-1||this.targetFrame>this.curFrame+1){this._frame(this.curFrame+(this.targetFrame-this.curFrame)/3);
this._timer=b.later(this._switchView,j.animSpeed,false,this);this.busy=true}else{this.fire("finished");this.busy=false}},_frame:function(j){var d=this.config,g=this.panels,n=this.region,l=this.middleLine-d.offset,a;this.curFrame=j;for(var c=0,e=g.length;c<e;c++){g=this.panels[c];a=c*-d.step;if(a+this.maxFocus<this.targetFrame||a-this.maxFocus>this.targetFrame)k.css(g,"visibility","hidden");else{a=Math.sqrt(1E4+j*j)+100;var o=j/a*l+l,i=d.width/d.height*90/a*l,h=0;if(i>this.maxHeight)i=this.maxHeight;
h=d.width/d.height*i;k.css(g,"left",o-72/a*l+"px");if(i&&h){k.css(g,"height",i+"px");k.css(g,"width",h+"px");k.css(g,"top",n.height/2-i/2+"px")}k.css(g,"zIndex",this.zIndex*100-Math.ceil(a));k.css(g,"visibility","visible");this._bindPanel(g,c)}this.fire("tween",{panel:g,index:c});j+=d.step}},_bindPanel:function(j,d){var g=this;q.remove(j);g.perIndex===d?q.add(j,"click",function(){return g.fire("onCurrent",{panel:j,index:d})}):q.add(j,"click",function(n){n.preventDefault();g.switchTo(d)})}});b.CoversFlow=
m});
