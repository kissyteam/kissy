/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 654 May 12 17:27
*/
(function(b,s,r){if(b[s]===r)b[s]={};s=b[s];var j=b.document,o=function(i,n,m,a){if(!n||!i)return i;if(m===r)m=true;var e,c,k;if(a&&(k=a.length))for(e=0;e<k;e++){c=a[e];if(c in n)if(m||!(c in i))i[c]=n[c]}else for(c in n)if(m||!(c in i))i[c]=n[c];return i},t=false,p=[],f=false;o(s,{version:"1.0.5",_init:function(){this.Env={mods:{}}},add:function(i,n){this.Env.mods[i]={name:i,fn:n};n(this);return this},ready:function(i){f||this._bindReady();t?i.call(b,this):p.push(i);return this},_bindReady:function(){var i=
this,n=j.documentElement.doScroll,m=n?"onreadystatechange":"DOMContentLoaded";f=true;if(j.readyState==="complete")return i._fireReady();if(j.addEventListener){var a=function(){j.removeEventListener(m,a,false);i._fireReady()};j.addEventListener(m,a,false)}else{if(b!=b.top){var e=function(){if(j.readyState==="complete"){j.detachEvent(m,e);i._fireReady()}};j.attachEvent(m,e)}else{var c=function(){try{n("left");i._fireReady()}catch(k){setTimeout(c,1)}};c()}b.attachEvent("onload",function(){i._fireReady()})}},
_fireReady:function(){if(!t){t=true;if(p){for(var i,n=0;i=p[n++];)i.call(b,this);p=null}}},mix:o,merge:function(){var i={},n,m=arguments.length;for(n=0;n<m;++n)o(i,arguments[n]);return i},augment:function(i,n,m,a){o(i.prototype,n.prototype||n,m,a);return i},extend:function(i,n,m,a){if(!n||!i)return i;var e=Object.prototype,c=n.prototype,k=function(h){function g(){}g.prototype=h;return new g}(c);i.prototype=k;k.constructor=i;i.superclass=c;if(n!==Object&&c.constructor===e.constructor)c.constructor=
n;m&&o(k,m);a&&o(i,a);return i},namespace:function(){var i=arguments.length,n=null,m,a,e;for(m=0;m<i;++m){e=(""+arguments[m]).split(".");n=this;for(a=b[e[0]]===n?1:0;a<e.length;++a)n=n[e[a]]=n[e[a]]||{}}return n},app:function(i,n){var m=b[i]||{};o(m,this,true,["_init","add","namespace"]);m._init();return o(b[i]=m,typeof n==="function"?n():n)},log:function(i,n,m){if(this.Config.debug){if(m)i=m+": "+i;if(b.console!==r&&console.log)console[n&&console[n]?n:"log"](i)}return this},error:function(i){if(this.Config.debug)throw i;
}});s._init();s.Config={debug:""}})(window,"KISSY");
KISSY.add("kissy-lang",function(b,s){function r(c){var k=typeof c;return c===null||k!=="object"&&k!=="function"}var j=window,o=document,t=location,p=Array.prototype,f=p.indexOf,i=p.filter,n=Object.prototype.toString,m=/^\s+|\s+$/g,a=/^(\w+)\[\]$/,e=/\S/;b.mix(b,{isBoolean:function(c){return typeof c==="boolean"},isString:function(c){return typeof c==="string"},isNumber:function(c){return typeof c==="number"&&isFinite(c)},isPlainObject:function(c){return c&&n.call(c)==="[object Object]"&&!c.nodeType&&
!c.setInterval},isEmptyObject:function(c){for(var k in c)return false;return true},isFunction:function(c){return typeof c==="function"},isArray:function(c){return n.call(c)==="[object Array]"},trim:String.prototype.trim?function(c){return(c||"").trim()}:function(c){return(c||"").replace(m,"")},each:function(c,k,h){for(var g=c&&c.length||0,l=0;l<g;++l)k.call(h||j,c[l],l,c)},indexOf:f?function(c,k){return f.call(k,c)}:function(c,k){for(var h=0,g=k.length;h<g;++h)if(k[h]===c)return h;return-1},inArray:function(c,
k){return b.indexOf(c,k)!==-1},makeArray:function(c){if(c===null||c===s)return[];if(b.isArray(c))return c;if(typeof c.length!=="number"||typeof c==="string"||b.isFunction(c))return[c];if(c.item&&b.UA.ie){for(var k=[],h=0,g=c.length;h<g;++h)k[h]=c[h];return k}return p.slice.call(c)},filter:i?function(c,k,h){return i.call(c,k,h)}:function(c,k,h){var g=[];b.each(c,function(l,d,q){k.call(h,l,d,q)&&g.push(l)});return g},param:function(c){if(!b.isPlainObject(c))return"";var k=[],h,g;for(h in c){g=c[h];
if(r(g))k.push(h,"=",g+"","&");else if(b.isArray(g)&&g.length)for(var l=0,d=g.length;l<d;++l)r(g[l])&&k.push(h+"[]=",g[l]+"","&")}k.pop();return encodeURI(k.join(""))},unparam:function(c,k){if(typeof c!=="string"||(c=decodeURI(b.trim(c))).length===0)return{};var h={};c=c.split(k||"&");for(var g,l,d=0,q=c.length;d<q;++d){g=c[d].split("=");k=g[0];g=g[1]||"";if((l=k.match(a))&&l[1]){h[l[1]]=h[l[1]]||[];h[l[1]].push(g)}else h[k]=g}return h},later:function(c,k,h,g,l){k=k||0;g=g||{};var d=c,q=b.makeArray(l),
u;if(typeof c==="string")d=g[c];d||b.error("method undefined");c=function(){d.apply(g,q)};u=h?setInterval(c,k):setTimeout(c,k);return{id:u,interval:h,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},now:function(){return(new Date).getTime()},globalEval:function(c){if(c&&e.test(c)){var k=o.getElementsByTagName("head")[0]||o.documentElement,h=o.createElement("script");h.text=c;k.insertBefore(h,k.firstChild);k.removeChild(h)}}});if(t&&t.search&&t.search.indexOf("ks-debug")!==-1)b.Config.debug=
true});
KISSY.add("kissy-ua",function(b){var s=navigator.userAgent,r,j={webkit:0,chrome:0,safari:0,gecko:0,firefox:0,ie:0,opera:0,mobile:""},o=function(t){var p=0;return parseFloat(t.replace(/\./g,function(){return p++===0?".":""}))};if((r=s.match(/AppleWebKit\/([\d.]*)/))&&r[1]){j.webkit=o(r[1]);if((r=s.match(/Chrome\/([\d.]*)/))&&r[1])j.chrome=o(r[1]);else if((r=s.match(/\/([\d.]*) Safari/))&&r[1])j.safari=o(r[1]);if(/ Mobile\//.test(s))j.mobile="Apple";else if(r=s.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))j.mobile=r[0]}else if((r=
s.match(/Opera\/.* Version\/([\d.]*)/))&&r[1]){j.opera=o(r[1]);if(s.match(/Opera Mini[^;]*/))j.mobile=r[0]}else if((r=s.match(/MSIE\s([^;]*)/))&&r[1])j.ie=o(r[1]);else if(r=s.match(/Gecko/)){j.gecko=1;if((r=s.match(/rv:([\d.]*)/))&&r[1])j.gecko=o(r[1]);if((r=s.match(/Firefox\/([\d.]*)/))&&r[1])j.firefox=o(r[1])}b.UA=j});
KISSY.add("selector",function(b,s){function r(h,g,l){var d,q=[],u,v;if(typeof h===m){h=b.trim(h);if(c.test(h)){if(g=o(h.slice(1)))q=[g]}else if(d=k.exec(h)){u=d[1];v=d[2];d=d[3];if(g=u?o(u):j(g))if(d){if(!u||h.indexOf(a)!==-1)q=p(d,v,g)}else if(v)q=t(g,v)}else if(h.indexOf(",")>-1)if(n.querySelectorAll)q=n.querySelectorAll(h);else{u=h.split(",");v=[];q=0;for(h=u.length;q<h;++q)v=v.concat(r(u[q],g));q=f(v)}}else if(h&&h.nodeType)q=[h];else if(h&&h.item)q=h;if(q.item)q=b.makeArray(q);l||i(q);return q}
function j(h){if(h===s)h=n;else if(typeof h===m&&c.test(h))h=o(h.slice(1));else if(h&&h.nodeType!==1&&h.nodeType!==9)h=null;return h}function o(h){return n.getElementById(h)}function t(h,g){return h.getElementsByTagName(g)}function p(h,g,l){l=h=l.getElementsByClassName(h);var d=0,q=0,u=h.length,v;if(g&&g!==e){l=[];for(g=g.toUpperCase();d<u;++d){v=h[d];if(v.tagName===g)l[q++]=v}}return l}function f(h){var g=false;h.sort(function(d,q){d=d.sourceIndex-q.sourceIndex;if(d===0)g=true;return d});if(g)for(var l=
1;l<h.length;l++)h[l]===h[l-1]&&h.splice(l--,1);return h}function i(h){h.each=function(g,l){b.each(h,g,l)}}var n=document,m="string",a=" ",e="*",c=/^#[\w-]+$/,k=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var h=n.createElement("div");h.appendChild(n.createComment(""));if(h.getElementsByTagName(e).length>0)t=function(g,l){g=g.getElementsByTagName(l);if(l===e){l=[];for(var d=0,q=0,u;u=g[d++];)if(u.nodeType===1)l[q++]=u;g=l}return g}})();n.getElementsByClassName||(p=n.querySelectorAll?
function(h,g,l){return l.querySelectorAll((g?g:"")+"."+h)}:function(h,g,l){g=l.getElementsByTagName(g||e);l=[];var d=0,q=0,u=g.length,v,w;for(h=a+h+a;d<u;++d){v=g[d];if((w=v.className)&&(a+w+a).indexOf(h)>-1)l[q++]=v}return l});b.query=r;b.get=function(h,g){return r(h,g,true)[0]||null}});
KISSY.add("dom-base",function(b,s){function r(d,q){return q&&q.nodeName.toUpperCase()===d.toUpperCase()}function j(d,q){for(var u=[],v=0;d;d=d.nextSibling)if(d.nodeType===1&&d!==q)u[v++]=d;return u}function o(d,q,u){q=q||0;for(var v=0;d;d=d[u])if(d.nodeType===1&&v++===q)break;return d}function t(d,q){var u=null,v;if(d&&(d.push||d.item)&&d[0]){q=q||d[0].ownerDocument;u=q.createDocumentFragment();if(d.item)d=b.makeArray(d);q=0;for(v=d.length;q<v;++q)u.appendChild(d[q])}else b.error("unable to convert "+
d+" to fragment");return u}var p=document,f=p.documentElement.textContent!==s?"textContent":"innerText",i=b.UA,n=i.ie,m=n&&n<8,a={readonly:"readOnly"},e=/href|src|style/,c=/href|src|colspan|rowspan/,k=/\r/g,h=/radio|checkbox/,g=p.createElement("DIV"),l=/^[a-z]+$/i;m&&b.mix(a,{"for":"htmlFor","class":"className"});b.DOM={query:b.query,get:b.get,attr:function(d,q,u){if(!d||d.nodeType!==1)return s;var v;q=q.toLowerCase();q=a[q]||q;if(u===s){if(e.test(q)){if(q==="style")v=d.style.cssText}else v=d[q];
if(v===s)v=d.getAttribute(q);if(m&&c.test(q))v=d.getAttribute(q,2);return v===null?s:v}if(q==="style")d.style.cssText=u;else d.setAttribute(q,""+u)},removeAttr:function(d,q){d&&d.nodeType===1&&d.removeAttribute(q)},val:function(d,q){if(!d||d.nodeType!==1)return s;if(q===s){if(r("option",d))return(d.attributes.value||{}).specified?d.value:d.text;if(r("select",d)){q=d.selectedIndex;var u=d.options;if(q<0)return null;else if(d.type==="select-one")return b.DOM.val(u[q]);d=[];q=0;for(var v=u.length;q<
v;++q)u[q].selected&&d.push(b.DOM.val(u[q]));return d}if(i.webkit&&h.test(d.type))return d.getAttribute("value")===null?"on":d.value;return(d.value||"").replace(k,"")}if(r("select",d)){u=b.makeArray(q);var w=d.options,x;q=0;for(v=w.length;q<v;++q){x=w[q];x.selected=b.inArray(b.DOM.val(x),u)}if(!u.length)d.selectedIndex=-1}else d.value=q},css:function(d,q,u){if(u===s)return d.style[q];b.each(b.makeArray(d),function(v){v.style[q]=u})},text:function(d,q){if(q===s)return(d||{})[f]||"";if(d)d[f]=q},html:function(d,
q){if(q===s)return d.innerHTML;d.innerHTML=q},children:function(d){if(d.children)return b.makeArray(d.children);return j(d.firstChild)},siblings:function(d){return j(d.parentNode.firstChild,d)},next:function(d){return o(d,1,"nextSibling")},prev:function(d){return o(d,1,"previousSibling")},parent:function(d){return(d=d.parentNode)&&d.nodeType!==11?d:null},create:function(d,q){if(typeof d==="string")d=b.trim(d);if(l.test(d))return(q||p).createElement(d);var u=null;u=q?q.createElement("DIV"):g;u.innerHTML=
d;d=u.childNodes;return u=d.length===1?d[0].parentNode.removeChild(d[0]):t(d,q||p)},addStyleSheet:function(d,q){var u=p.getElementsByTagName("head")[0],v=p.createElement("style");q&&(v.id=q);u.appendChild(v);if(v.styleSheet)v.styleSheet.cssText=d;else v.appendChild(p.createTextNode(d))}}});
KISSY.add("dom-class",function(b,s){function r(f,i,n){if(b.isArray(f)){b.each(f,function(){i.apply(n,Array.prototype.slice.call(arguments,3))});return true}}var j=b.DOM;b.mix(j,{hasClass:function(f,i){if(!i||!f||!f.className)return false;return(" "+f.className+" ").indexOf(" "+i+" ")>-1},addClass:function(f,i){if(!r(f,t,j,i))if(i&&f)o(f,i)||(f.className+=" "+i)},removeClass:function(f,i){if(!r(f,p,j,i))if(o(f,i)){f.className=(" "+f.className+" ").replace(" "+i+" "," ");o(f,i)&&p(f,i)}},replaceClass:function(f,
i,n){p(f,i);t(f,n)},toggleClass:function(f,i,n){r(f,j.toggleClass,j,i,n)||((n!==s?n:!o(f,i))?t(f,i):p(f,i))}});var o=j.hasClass,t=j.addClass,p=j.removeClass});
KISSY.add("event",function(b,s){function r(g,l,d,q){if(b.isString(l))l=b.query(l);if(b.isArray(l)){b.each(l,function(u){h[g](u,d,q)});return true}if((d=b.trim(d))&&d.indexOf(e)>0){b.each(d.split(e),function(u){h[g](l,u,q)});return true}}function j(g){var l=-1;if(g.nodeType===3||g.nodeType===8)return l;return l=g.nodeType?p.attr(g,a):g.isCustomEventTarget?g.eventTargetId:g[a]}function o(g,l){if(g.nodeType===3||g.nodeType===8)return b.error("Text or comment node is not valid event target.");if(g.nodeType)p.attr(g,
a,l);else if(g.isCustomEventTarget)g.eventTargetId=l;else try{g[a]=l}catch(d){b.error(d)}}function t(g){if(g.nodeType)p.removeAttr(g,a);else if(g.isCustomEventTarget)g.eventTargetId=s;else g[a]=s}var p=b.DOM,f=window,i=document,n=i.addEventListener?function(g,l,d){g.addEventListener&&g.addEventListener(l,d,false)}:function(g,l,d){g.attachEvent&&g.attachEvent("on"+l,d)},m=i.removeEventListener?function(g,l,d){g.removeEventListener&&g.removeEventListener(l,d,false)}:function(g,l,d){g.detachEvent&&g.detachEvent("on"+
l,d)},a="data-ks-event-guid",e=" ",c=b.now(),k={},h={special:{},add:function(g,l,d){if(!r("add",g,l,d)){var q=j(g),u,v;if(!(q===-1||!l||!b.isFunction(d))){if(!q){o(g,q=c++);k[q]={target:g,events:{}}}v=k[q].events;u=!g.isCustomEventTarget&&h.special[l]||{};if(!v[l]){q=function(w,x){if(!w||!w.fixed){w=new b.EventObject(g,w,l);b.isPlainObject(x)&&b.mix(w,x)}u.setup&&u.setup(w);return(u.handle||h._handle)(g,w,v[l].listeners)};v[l]={handle:q,listeners:[]};if(g.isCustomEventTarget)g._addEvent&&g._addEvent(l,
q);else n(g,u.fix||l,q)}v[l].listeners.push(d)}}},remove:function(g,l,d){if(!r("remove",g,l,d)){var q=j(g),u,v,w,x,y,z;if(q!==-1)if(q&&(u=k[q]))if(u.target===g){u=u.events||{};if(v=u[l]){w=v.listeners;y=w.length;if(b.isFunction(d)&&y&&b.inArray(d,w)){z=[];for(x=0;x<y;++x)d!==w[x]&&z.push(w[x]);y=z.length}if(d===s||y===0){g.isCustomEventTarget||m(g,l,v.handle);delete k[q].type}}if(l===s||b.isEmptyObject(u)){for(l in u)h.remove(g,l);delete k[q];t(g)}}}},_handle:function(g,l,d){for(var q,u=0,v=d.length;u<
v;++u){q=d[u].call(g,l);if(l.isImmediatePropagationStopped)break;q===false&&l.halt()}return q},_getCache:function(g){return k[g]},_simpleAdd:n,_simpleRemove:m};h.on=h.add;b.Event=h;f.attachEvent&&!f.addEventListener&&f.attachEvent("onunload",function(){var g,l;for(g in k)if(l=k[g].target)try{h.remove(l)}catch(d){}})});
KISSY.add("event-object",function(b,s){function r(t,p,f){this.currentTarget=t;this.originalEvent=p||{};if(p){this.type=p.type;this._fix()}else{this.type=f;this.target=t}this.fixed=true}var j=document,o="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
b.mix(r.prototype,{_fix:function(){for(var t=this.originalEvent,p=o.length,f;p;){f=o[--p];this[f]=t[f]}if(!this.target)this.target=this.srcElement||j;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===s&&this.clientX!==s){t=j.documentElement;p=j.body;this.pageX=this.clientX+(t&&t.scrollLeft||p&&p.scrollLeft||0)-(t&&t.clientLeft||p&&p.clientLeft||0);
this.pageY=this.clientY+(t&&t.scrollTop||p&&p.scrollTop||0)-(t&&t.clientTop||p&&p.clientTop||0)}if(this.which===s)this.which=this.charCode!==s?this.charCode:this.keyCode;if(this.metaKey===s)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==s)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var t=this.originalEvent;if(t.preventDefault)t.preventDefault();else t.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var t=this.originalEvent;
if(t.stopPropagation)t.stopPropagation();else t.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var t=this.originalEvent;t.stopImmediatePropagation?t.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(t){t?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=r});
KISSY.add("event-target",function(b,s){var r=b.Event;b.EventTarget={eventTargetId:s,isCustomEventTarget:true,fire:function(j,o){if((j=((r._getCache(this.eventTargetId||-1)||{}).events||{})[j])&&b.isFunction(j.handle))return j.handle(s,o)},on:function(j,o){r.add(this,j,o)},detach:function(j,o){r.remove(this,j,o)}}});
KISSY.add("event-mouseenter",function(b){var s=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(r){s.special[r.name]={fix:r.fix,setup:function(j){j.type=r.name},handle:function(j,o,t){var p=o.relatedTarget;try{for(;p&&p!==j;)p=p.parentNode;p!==j&&s._handle(j,o,t)}catch(f){}}}})});
KISSY.add("node",function(b){function s(o,t,p){var f;if(!(this instanceof s))return new s(o,t,p);if(!o)return null;if(o.nodeType)f=o;else if(typeof o==="string")f=r.create(o,p);t&&b.error("not implemented");this[0]=f}var r=b.DOM,j=s.prototype;b.each(["attr","removeAttr","css"],function(o){j[o]=function(t,p){var f=this[0];if(p===undefined)return r[o](f,t);else{r[o](f,t,p);return this}}});b.each(["val","text","html"],function(o){j[o]=function(t){var p=this[0];if(t===undefined)return r[o](p);else{r[o](p,
t);return this}}});b.each(["children","siblings","next","prev","parent"],function(o){j[o]=function(){var t=r[o](this[0]);return t?new b[t.length?"NodeList":"Node"](t):null}});b.each(["hasClass","addClass","removeClass","replaceClass","toggleClass"],function(o){j[o]=function(){var t=r[o].apply(r,[this[0]].concat(b.makeArray(arguments)));return typeof t==="boolean"?t:this}});b.mix(j,b.EventTarget);j._addEvent=function(o,t){b.Event._simpleAdd(this[0],o,t)};delete j.fire;b.mix(j,{one:function(o){return b.one(o,
this[0])},all:function(o){return b.all(o,this[0])},appendTo:function(o){if((o=b.get(o))&&o.appendChild)o.appendChild(this[0]);return this}});b.one=function(o,t){return new s(b.get(o,t))};b.Node=s});
KISSY.add("nodelist",function(b){function s(j){if(!(this instanceof s))return new s(j);r.apply(this,j||[])}var r=Array.prototype.push;b.mix(s.prototype,{length:0,each:function(j,o){for(var t=this.length,p=0,f;p<t;++p){f=new b.Node(this[p]);j.call(o||f,f,p,this)}return this}});b.all=function(j,o){return new s(b.query(j,o,true))};b.NodeList=s});
KISSY.add("cookie",function(b){function s(t){return typeof t==="string"&&t!==""}var r=document,j=encodeURIComponent,o=decodeURIComponent;b.Cookie={get:function(t){var p;if(s(t))if(t=r.cookie.match("(?:^| )"+t+"(?:(?:=([^;]*))|;|$)"))p=t[1]?o(t[1]):"";return p},set:function(t,p,f,i,n,m){p=j(p);var a=f;if(typeof a==="number"){a=new Date;a.setTime(a.getTime()+f*864E5)}if(a instanceof Date)p+="; expires="+a.toUTCString();if(s(i))p+="; domain="+i;if(s(n))p+="; path="+n;if(m)p+="; secure";r.cookie=t+"="+
p},remove:function(t){this.set(t,"",0)}}});
KISSY.add("json",function(b){function s(m){return m<10?"0"+m:m}function r(m){t.lastIndex=0;return t.test(m)?'"'+m.replace(t,function(a){var e=i[a];return typeof e==="string"?e:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+m+'"'}function j(m,a){var e,c,k=p,h,g=a[m];if(g&&typeof g==="object"&&typeof g.toJSON==="function")g=g.toJSON(m);if(typeof n==="function")g=n.call(a,m,g);switch(typeof g){case "string":return r(g);case "number":return isFinite(g)?String(g):"null";case "boolean":case "null":return String(g);
case "object":if(!g)return"null";p+=f;h=[];if(Object.prototype.toString.apply(g)==="[object Array]"){c=g.length;for(m=0;m<c;m+=1)h[m]=j(m,g)||"null";a=h.length===0?"[]":p?"[\n"+p+h.join(",\n"+p)+"\n"+k+"]":"["+h.join(",")+"]";p=k;return a}if(n&&typeof n==="object"){c=n.length;for(m=0;m<c;m+=1){e=n[m];if(typeof e==="string")if(a=j(e,g))h.push(r(e)+(p?": ":":")+a)}}else for(e in g)if(Object.hasOwnProperty.call(g,e))if(a=j(e,g))h.push(r(e)+(p?": ":":")+a);a=h.length===0?"{}":p?"{\n"+p+h.join(",\n"+p)+
"\n"+k+"}":"{"+h.join(",")+"}";p=k;return a}}b=b.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var o=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p,f,i={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof b.stringify!=="function")b.stringify=function(m,a,e){var c;f=p="";if(typeof e==="number")for(c=0;c<e;c+=1)f+=" ";else if(typeof e==="string")f=e;if((n=a)&&typeof a!=="function"&&(typeof a!=="object"||typeof a.length!=="number"))throw new Error("JSON.stringify");return j("",{"":m})};
if(typeof b.parse!=="function")b.parse=function(m,a){function e(c,k){var h,g,l=c[k];if(l&&typeof l==="object")for(h in l)if(Object.hasOwnProperty.call(l,h)){g=e(l,h);if(g!==undefined)l[h]=g;else delete l[h]}return a.call(c,k,l)}m=String(m);o.lastIndex=0;if(o.test(m))m=m.replace(o,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(m.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){m=eval("("+m+")");return typeof a==="function"?e({"":m},""):m}throw new SyntaxError("JSON.parse");}});
KISSY.add("ajax",function(b){var s=document,r=b.UA;b.Ajax={request:function(){b.error("not implemented")},getScript:function(j,o,t){var p=s.getElementsByTagName("head")[0]||s.documentElement,f=s.createElement("script");f.src=j;if(t)f.charset=t;f.async=true;if(b.isFunction(o))if(r.ie)f.onreadystatechange=function(){var i=f.readyState;if(i==="loaded"||i==="complete"){f.onreadystatechange=null;o()}};else f.onload=o;p.appendChild(f)}}});
KISSY.add("swf-ua",function(b){function s(p){var f=p[0]+".";switch(p[2].toString().length){case 1:f+="00";break;case 2:f+="0";break}return f+p[2]}b=b.UA;var r=0,j;if(b.ie){try{j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");j.AllowScriptAccess="always"}catch(o){if(j!==null)r=6}if(r===0)try{r=s((new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","))}catch(t){}}else if(j=navigator.mimeTypes["application/x-shockwave-flash"])if(j=j.enabledPlugin)r=
s(j.description.replace(/\s[rd]/g,".").replace(/[a-z\s]+/ig,"").split("."));b.flash=parseFloat(r)});
KISSY.add("swf",function(b){function s(m,a,e){var c="ks-swf-"+j++,k=parseFloat(e.version)||o;k=r.flash>=k;var h=r.flash>=8&&e.useExpressInstall&&!k,g=h?f:a;a="YUISwfId="+c+"&YUIBridgeCallback="+i;var l="<object ";this.id=c;s.instances[c]=this;if((m=b.get(m))&&(k||h)&&g){l+='id="'+c+'" ';l+=r.ie?'classid="'+t+'" ':'type="'+p+'" data="'+g+'" ';l+='width="100%" height="100%">';if(r.ie)l+='<param name="movie" value="'+g+'"/>';for(var d in e.fixedAttributes)if(n.hasOwnProperty(d))l+='<param name="'+d+
'" value="'+e.fixedAttributes[d]+'"/>';for(var q in e.flashVars){d=e.flashVars[q];if(typeof d==="string")a+="&"+q+"="+encodeURIComponent(d)}l+='<param name="flashVars" value="'+a+'"/>';l+="</object>";m.innerHTML=l;this.swf=b.get("#"+c)}}var r=b.UA,j=b.now(),o=10.22,t="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",p="application/x-shockwave-flash",f="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+j,i="KISSY.SWF.eventHandler",n={align:"",allowNetworking:"",allowScriptAccess:"",
base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};s.instances=(b.SWF||{}).instances||{};s.eventHandler=function(m,a){s.instances[m]._eventHandler(a)};b.augment(s,b.EventTarget);b.augment(s,{_eventHandler:function(m){var a=m.type;if(a==="log")b.log(m.message);else a&&this.fire(a,m)},callSWF:function(m,a){if(this.swf[m])return this.swf[m].apply(this.swf,a||[])}});b.SWF=s});
KISSY.add("swfstore",function(b,s){function r(f,i,n,m){var a="other",e=o.get(t),c=this;n=(n!==s?n:true)+"";m=(m!==s?m:true)+"";if(j.ie)a="ie";else if(j.gecko)a="gecko";else if(j.webkit)a="webkit";else if(j.opera)a="opera";if(!e||e==="null")o.set(t,e=Math.round(Math.random()*Math.PI*1E5));n={version:9.115,useExpressInstall:false,fixedAttributes:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale"},flashVars:{allowedDomain:p.location.hostname,shareData:n,browser:e,useCompression:m}};i||
(i=(new b.Node('<div style="height:0;width:0;overflow:hidden"></div>')).appendTo(p.body)[0]);c.embeddedSWF=new b.SWF(i,f||"swfstore.swf",n);c.embeddedSWF._eventHandler=function(k){b.SWF.prototype._eventHandler.call(c,k)}}var j=b.UA,o=b.Cookie,t="swfstore",p=document;b.augment(r,b.EventTarget);b.augment(r,{setItem:function(f,i){i=typeof i==="string"?i.replace(/\\/g,"\\\\"):b.JSON.stringify(i)+"";if(f=b.trim(f+""))try{return this.embeddedSWF.callSWF("setItem",[f,i])}catch(n){this.fire("error",{message:n})}},
getItem:function(f){return this.embeddedSWF.callSWF("getValueOf",[f])}});b.each(["getValueAt","getNameAt","getValueOf","getItems","getLength","removeItem","removeItemAt","clear","calculateCurrentSize","hasAdequateDimensions","setSize","getModificationDate","displaySettings"],function(f){r.prototype[f]=function(){try{return this.embeddedSWF.callSWF(f,b.makeArray(arguments))}catch(i){this.fire("error",{message:i})}}});b.SWFStore=r});
KISSY.add("datalazyload",function(b,s){function r(a,e){if(!(this instanceof r))return new r(a,e);if(e===s){e=a;a=[f]}b.isArray(a)||(a=[b.get(a)||f]);this.containers=a;this.config=b.merge(n,e||{});this.callbacks={els:[],fns:[]};this._init()}var j=b.DOM,o=b.Event,t=YAHOO.util.Dom,p=window,f=document,i={AUTO:"auto",MANUAL:"manual"},n={mod:i.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"},m=r.prototype;b.mix(m,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function a(){c||(c=setTimeout(function(){e();c=null},100))}function e(){k._loadItems();if(k._getItemsLength()===0){o.remove(p,"scroll",a);o.remove(p,"resize",a)}}var c,k=this;o.on(p,"scroll",a);o.on(p,"resize",function(){k.threshold=k._getThreshold();a()});k._getItemsLength()&&b.ready(function(){e()})},_filterItems:function(){var a=this.containers,e=this.threshold,c=this.config.placeholder,k=this.config.mod===
i.MANUAL,h,g,l,d,q,u,v,w=[],x=[];h=0;for(g=a.length;h<g;++h){l=b.query("img",a[h]);d=0;for(q=l.length;d<q;++d){u=l[d];v=u.getAttribute("data-lazyload-src");if(k){if(v){u.src=c;w.push(u)}}else if(t.getY(u)>e&&!v){u.setAttribute("data-lazyload-src",u.src);u.src=c;w.push(u)}}l=b.query("textarea",a[h]);d=0;for(q=l.length;d<q;++d){u=l[d];j.hasClass(u,"ks-datalazyload")&&x.push(u)}}this.images=w;this.areaes=x},_loadItems:function(){this._loadImgs();this._loadAreaes();this._fireCallbacks()},_loadImgs:function(){var a=
this.images,e=this.threshold+t.getDocumentScrollTop(),c,k,h=[];for(c=0;k=a[c++];)t.getY(k)<=e?this._loadImgSrc(k):h.push(k);this.images=h},_loadImgSrc:function(a,e){e=e||"data-lazyload-src";var c=a.getAttribute(e);if(c&&a.src!=c){a.src=c;a.removeAttribute(e)}},_loadAreaes:function(){var a=this.areaes,e=this.threshold+t.getDocumentScrollTop(),c,k,h,g=[];for(c=0;k=a[c++];){h=k;if(t.getY(h)===s)h=k.parentNode;t.getY(h)<=e?this._loadDataFromArea(k.parentNode,k):g.push(k)}this.areaes=g},_loadDataFromArea:function(a,
e){var c=j.create(e.value);e.style.display="none";e.className="";a.insertBefore(c,e);b.UA.gecko||b.query("script",a).each(function(k){b.globalEval(k.text)})},_fireCallbacks:function(){var a=this.callbacks,e=a.els,c=a.fns,k=this.threshold+t.getDocumentScrollTop(),h,g,l,d=[],q=[];for(h=0;(g=e[h])&&(l=c[h++]);)if(t.getY(g)<=k)l.call(g);else{d.push(g);q.push(l)}a.els=d;a.fns=q},addCallback:function(a,e){if((a=b.get(a))&&typeof e==="function"){this.callbacks.els.push(a);this.callbacks.fns.push(e)}},_getThreshold:function(){var a=
this.config.diff,e=t.getViewportHeight();return a==="default"?2*e:e+a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,e,c){var k=this,h,g;b.isArray(a)||(a=[b.get(a)]);b.each(a,function(l){switch(e){case "textarea-data":if((h=b.get("textarea",l))&&j.hasClass(h,c||"ks-datalazyload-custom"))k._loadDataFromArea(l,h);break;default:g=l.nodeName==="IMG"?[l]:b.query("img",l);l=0;for(var d=g.length;l<d;l++)k._loadImgSrc(g[l],
c||"data-lazyload-src-custom")}})}});b.mix(r,m,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);b.DataLazyload=r});
KISSY.add("suggest",function(b,s){function r(a,e,c){if(!(this instanceof r))return new r(a,e,c);this.textInput=b.get(a);this.dataSource=e;this.JSONDataSource=b.isPlainObject(e)?e:null;this.returnedData=null;this.config=b.merge(m,c||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var j=YAHOO.util.Dom,
o=b.DOM,t=b.Event,p=window,f=document,i=f.getElementsByTagName("head")[0],n=YAHOO.env.ua.ie,m={containerCls:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:n===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};b.mix(r.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var a=this;a.textInput.setAttribute("autocomplete",
"off");t.on(a.textInput,"blur",function(){a.stop();a.hide()});a.config.autoFocus&&a.textInput.focus();var e=0;t.on(a.textInput,"keydown",function(c){c=c.keyCode;switch(c){case 27:a.hide();a.textInput.value=a.query;a.query.length===0&&a.textInput.blur();break;case 13:a.textInput.blur();a._onKeyboardSelecting&&a.textInput.value==a._getSelectedItemKey()&&a.fire("itemSelect");a._submitForm();break;case 40:case 38:if(e++==0){a._isRunning&&a.stop();a._onKeyboardSelecting=true;a.selectItem(c===40)}else if(e==
3)e=0;break}if(c!=40&&c!=38){a._isRunning||a.start();a._onKeyboardSelecting=false}});t.on(a.textInput,"keyup",function(){e=0})},_initContainer:function(){var a=f.createElement("div"),e=this.config.containerCls;a.className="ks-suggest-container";if(e)a.className+=" "+e;a.style.position="absolute";a.style.visibility="hidden";this.container=a;this._setContainerRegion();this._initContainerEvent();f.body.insertBefore(a,f.body.firstChild)},_setContainerRegion:function(){var a=j.getRegion(this.textInput),
e=a.left,c=a.right-e-2;c=c>0?c:0;if(f.documentMode===7&&(n===7||n===8))e-=2;else b.UA.gecko&&e++;this.container.style.left=e+"px";this.container.style.top=a.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?c+"px":this.config.containerWidth},_initContainerEvent:function(){var a=this;t.on(a.container,"mousemove",function(c){c=c.target;if(c.nodeName!="LI")c=j.getAncestorByTagName(c,"li");if(j.isAncestor(a.container,c))if(c!=a.selectedItem){a._removeSelectedItem();a._setSelectedItem(c)}});
var e=null;t.on(a.container,"mousedown",function(c){e=c.target;a.textInput.onbeforedeactivate=function(){p.event.returnValue=false;a.textInput.onbeforedeactivate=null};return false});t.on(a.container,"mouseup",function(c){if(a._isInContainer([c.pageX,c.pageY])){c=c.target;if(c==e)if(c.className=="ks-suggest-close-btn")a.hide();else{if(c.nodeName!="LI")c=j.getAncestorByTagName(c,"li");if(j.isAncestor(a.container,c)){a._updateInputFromSelectItem(c);a.fire("itemSelect");a.textInput.blur();a._submitForm()}}}})},
_submitForm:function(){if(this.config.submitFormOnClickSelect){var a=this.textInput.form;if(a){if(f.createEvent){var e=f.createEvent("MouseEvents");e.initEvent("submit",true,false);a.dispatchEvent(e)}else f.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_isInContainer:function(a){var e=j.getRegion(this.container);return a[0]>=e.left&&a[0]<=e.right&&a[1]>=e.top&&a[1]<=e.bottom},_initShim:function(){var a=f.createElement("iframe");a.src="about:blank";a.className="ks-suggest-shim";a.style.position=
"absolute";a.style.visibility="hidden";a.style.border="none";this.container.shim=a;this._setShimRegion();f.body.insertBefore(a,f.body.firstChild)},_setShimRegion:function(){var a=this.container,e=a.shim;if(e){e.style.left=parseInt(a.style.left)-2+"px";e.style.top=a.style.top;e.style.width=parseInt(a.style.width)+2+"px"}},_initStyle:function(){b.get("#ks-suggest-style")||o.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var a=this,e;t.on(p,"resize",function(){e&&clearTimeout(e);e=setTimeout(function(){a._setContainerRegion();a._setShimRegion()},50)})},start:function(){var a=this;r.focusInstance=a;a._timer=setTimeout(function(){a.updateContent();a._timer=setTimeout(arguments.callee,a.config.timerDelay)},a.config.timerDelay);a._isRunning=true},stop:function(){r.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var a=
this.container,e=a.shim;a.style.visibility="";if(e){if(!e.style.height){a=j.getRegion(a);e.style.height=a.bottom-a.top-2+"px"}e.style.visibility=""}}},hide:function(){if(this.isVisible()){var a=this.container,e=a.shim;if(e)e.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var a=this.query;if(b.trim(a).length)if(this._dataCache[a]!==s){this.returnedData=
"using cache";this._fillContainer(this._dataCache[a]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[a]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var a=this;if(!n)a.dataScript=null;if(!a.dataScript){var e=f.createElement("script");e.charset="utf-8";i.insertBefore(e,i.firstChild);a.dataScript=e;if(!n){var c=(new Date).getTime();a._latestScriptTime=
c;e.setAttribute("time",c);t.on(e,"load",function(){a._scriptDataIsOut=e.getAttribute("time")!=a._latestScriptTime})}}a.queryParams="q="+encodeURIComponent(a.query)+"&code=utf-8&callback=g_ks_suggest_callback";a.fire("dataRequest");a.dataScript.src=a.dataSource+"?"+a.queryParams},handleResponse:function(a){if(!this._scriptDataIsOut){this.returnedData=a;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var e="";a=this.returnedData.length;if(a>0){e=f.createElement("ol");for(var c=
0;c<a;++c){var k=this.returnedData[c],h=this.formatItem(k.key,k.result);h.setAttribute("key",k.key);o.addClass(h,c%2?"even":"odd");e.appendChild(h)}e=e}this._fillContainer(e);a>0&&this.appendBottom();b.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(a){var e=[];if(!a)return e;if(b.isArray(a.result))a=a.result;var c=a.length;if(!c)return e;for(var k,h=0;h<c;++h){k=a[h];e[h]=typeof k==="string"?{key:k}:
b.isArray(k)&&k.length>=2?{key:k[0],result:k[1]}:k}return e},formatItem:function(a,e){var c=f.createElement("li"),k=f.createElement("span");k.className="ks-suggest-key";k.appendChild(f.createTextNode(a));c.appendChild(k);if(e!==s){a=this.config.resultFormat.replace("%result%",e);if(b.trim(a)){e=f.createElement("span");e.className="ks-suggest-result";e.appendChild(f.createTextNode(a));c.appendChild(e)}}return c},appendBottom:function(){var a=f.createElement("div");a.className="ks-suggest-bottom";if(this.config.showCloseBtn){var e=
f.createElement("a");e.href="javascript: void(0)";e.setAttribute("target","_self");e.className="ks-suggest-close-btn";e.appendChild(f.createTextNode(this.config.closeBtnText));a.appendChild(e)}b.trim(a.innerHTML)&&this.container.appendChild(a)},_fillContainer:function(a){if(a.nodeType==1){this.container.innerHTML="";this.container.appendChild(a)}else this.container.innerHTML=a;this.selectedItem=null},_displayContainer:function(){b.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(a){var e=
this.container.getElementsByTagName("li");if(e.length!=0)if(this.isVisible()){if(this.selectedItem){a=j[a?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=e[a?0:e.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){o.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(a){o.addClass(a,"selected");this.selectedItem=
a},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});b.mix(r.prototype,b.EventTarget);p.g_ks_suggest_callback=function(a){r.focusInstance&&setTimeout(function(){r.focusInstance.handleResponse(a)},0)};b.Suggest=r});
KISSY.add("switchable",function(b,s){function r(f,i){i=i||{};if(!("markupType"in i))if(i.panelCls)i.markupType=1;else if(i.panels)i.markupType=2;i=b.merge(r.Config,i);this.container=b.get(f);this.config=i;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===s)this.activeIndex=i.activeIndex;this._init()}var j=b.DOM,o=b.Event,t=document,p=r.prototype;r.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",
triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};r.Plugins=[];b.mix(p,{_init:function(){var f=this,i=f.config;f.panels.length===0&&f._parseMarkup();i.hasTriggers&&f._bindTriggers();b.each(r.Plugins,function(n){n.init&&n.init(f)})},_parseMarkup:function(){var f=this.container,i=this.config,n=i.hasTriggers,m,a=[],e=[];switch(i.markupType){case 0:if(m=b.get("."+i.navCls,f))a=j.children(m);m=b.get("."+i.contentCls,f);e=j.children(m);
break;case 1:a=b.query("."+i.triggerCls,f);e=b.query("."+i.panelCls,f);break;case 2:a=i.triggers;e=i.panels;break}f=e.length;this.length=f/i.steps;if(n&&f>0&&a.length===0)a=this._generateTriggersMarkup(this.length);this.triggers=b.makeArray(a);this.panels=b.makeArray(e);this.content=m||e[0].parentNode},_generateTriggersMarkup:function(f){var i=this.config,n=t.createElement("UL"),m,a;n.className=i.navCls;for(a=0;a<f;a++){m=t.createElement("LI");if(a===this.activeIndex)m.className=i.activeTriggerCls;
m.innerHTML=a+1;n.appendChild(m)}this.container.appendChild(n);return j.children(n)},_bindTriggers:function(){var f=this,i=f.config,n=f.triggers,m,a,e=n.length;for(a=0;a<e;a++)(function(c){m=n[c];o.on(m,"click focus",function(){f._onFocusTrigger(c)});if(i.triggerType==="mouse"){o.on(m,"mouseenter",function(){f._onMouseEnterTrigger(c)});o.on(m,"mouseleave",function(){f._onMouseLeaveTrigger(c)})}})(a)},_onFocusTrigger:function(f){if(this.activeIndex!==f){this.switchTimer&&this.switchTimer.cancel();
this.switchTo(f)}},_onMouseEnterTrigger:function(f){var i=this;if(i.activeIndex!==f)i.switchTimer=b.later(function(){i.switchTo(f)},i.config.delay*1E3)},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(f,i){var n=this.config,m=this.triggers,a=this.panels,e=this.activeIndex,c=n.steps,k=e*c,h=f*c;if(f===e)return this;if(this.fire("beforeSwitch",{toIndex:f})===false)return this;if(n.hasTriggers)this._switchTrigger(e>-1?m[e]:null,m[f]);if(i===s)i=f>e?"forward":
"forward";this._switchView(a.slice(k,k+c),a.slice(h,h+c),f,i);this.activeIndex=f;return this},_switchTrigger:function(f,i){var n=this.config.activeTriggerCls;f&&j.removeClass(f,n);j.addClass(i,n)},_switchView:function(f,i){j.css(f,"display","none");j.css(i,"display","block");this.fire("switch")},prev:function(){var f=this.activeIndex;this.switchTo(f>0?f-1:this.length-1,"backward")},next:function(){var f=this.activeIndex;this.switchTo(f<this.length-1?f+1:0,"forward")}});b.mix(p,b.EventTarget);b.Switchable=
r});
KISSY.add("switchable-autoplay",function(b){var s=b.Event,r=b.Switchable;b.mix(r.Config,{autoplay:false,interval:5,pauseOnHover:true});r.Plugins.push({name:"autoplay",init:function(j){var o=j.config;if(o.autoplay){if(o.pauseOnHover){s.on(j.container,"mouseenter",function(){j.paused=true});s.on(j.container,"mouseleave",function(){setTimeout(function(){j.paused=false},o.interval*1E3)})}j.autoplayTimer=b.later(function(){j.paused||j.switchTo(j.activeIndex<j.length-1?j.activeIndex+1:0)},o.interval*1E3,
true)}}})});
KISSY.add("switchable-effect",function(b){var s=YAHOO.util,r=b.DOM,j=s.Dom,o=b.Switchable,t;b.mix(o.Config,{effect:"none",duration:0.5,easing:s.Easing.easeNone});o.Effects={none:function(p,f,i){r.css(p,"display","none");r.css(f,"display","block");i()},fade:function(p,f,i){p.length!==1&&b.error("fade effect only supports steps == 1.");var n=this,m=n.config,a=p[0],e=f[0];n.anim&&n.anim.stop();j.setStyle(e,"opacity",1);n.anim=new s.Anim(a,{opacity:{to:0}},m.duration,m.easing);n.anim.onComplete.subscribe(function(){n.anim=null;
j.setStyle(e,"z-index",9);j.setStyle(a,"z-index",1);i()});n.anim.animate()},scroll:function(p,f,i,n){var m=this;p=m.config;f=p.effect==="scrollx";var a={};a[f?"left":"top"]={to:-(m.viewSize[f?0:1]*n)};m.anim&&m.anim.stop();m.anim=new s.Anim(m.content,a,p.duration,p.easing);m.anim.onComplete.subscribe(function(){m.anim=null;i()});m.anim.animate()}};t=o.Effects;t.scrollx=t.scrolly=t.scroll;o.Plugins.push({name:"effect",init:function(p){var f=p.config,i=f.effect,n=p.panels,m=f.steps,a=p.activeIndex*
m,e=a+m-1,c=n.length;p.viewSize=[f.viewSize[0]||n[0].offsetWidth*m,f.viewSize[0]||n[0].offsetHeight*m];if(i!=="none"){for(f=0;f<c;f++)n[f].style.display="block";switch(i){case "scrollx":case "scrolly":p.content.style.position="absolute";p.content.parentNode.style.position="relative";if(i==="scrollx"){j.setStyle(n,"float","left");p.content.style.width=p.viewSize[0]*(c/m)+"px"}break;case "fade":for(f=0;f<c;f++){j.setStyle(n[f],"opacity",f>=a&&f<=e?1:0);n[f].style.position="absolute";n[f].style.zIndex=
f>=a&&f<=e?9:1}break}}}});b.mix(o.prototype,{_switchView:function(p,f,i,n){var m=this,a=m.config.effect;(b.isFunction(a)?a:t[a]).call(m,p,f,function(){m.fire("switch")},i,n)}})});
KISSY.add("switchable-circular",function(b){function s(c,k,h,g,l){var d=this;c=d.config;k=d.length;var q=d.activeIndex,u=c.scrollType===a,v=u?t:p,w=d.viewSize[u?0:1];u=-w*g;var x={},y,z=l===m;if(y=z&&q===0&&g===k-1||l===n&&q===k-1&&g===0)u=r.call(d,d.panels,g,z,v,w);x[v]={to:u};d.anim&&d.anim.stop();d.anim=new YAHOO.util.Anim(d.content,x,c.duration,c.easing);d.anim.onComplete.subscribe(function(){y&&j.call(d,d.panels,g,z,v,w);d.anim=null;h()});d.anim.animate()}function r(c,k,h,g,l){var d=this.config.steps;
k=this.length;var q=h?k-1:0,u=(q+1)*d;for(d=q*d;d<u;d++){c[d].style.position=o;c[d].style[g]=(h?"-":i)+l*k+f}return h?l:-l*k}function j(c,k,h,g,l){var d=this.config.steps;k=this.length;var q=h?k-1:0,u=(q+1)*d;for(d=q*d;d<u;d++){c[d].style.position=i;c[d].style[g]=i}this.content.style[g]=h?-l*(k-1)+f:i}var o="relative",t="left",p="top",f="px",i="",n="forward",m="backward",a="scrollx",e=b.Switchable;b.mix(e.Config,{circular:false});e.Plugins.push({name:"circular",init:function(c){c=c.config;if(c.circular&&
(c.effect===a||c.effect==="scrolly")){c.scrollType=c.effect;c.effect=s}}})});
KISSY.add("switchable-lazyload",function(b){var s=b.DOM,r="beforeSwitch",j="img-src",o="textarea-data",t={},p=b.Switchable,f=b.DataLazyload;t[j]="data-lazyload-src-custom";t[o]="ks-datalazyload-custom";b.mix(p.Config,{lazyDataType:"",lazyDataFlag:""});p.Plugins.push({name:"autoplay",init:function(i){function n(k){var h=a.steps;k=k.toIndex*h;f.loadCustomLazyData(i.panels.slice(k,k+h),e,c);m()&&i.detach(r,n)}function m(){var k,h,g;if(e===j){k=b.query("img",i.container);h=0;for(g=k.length;h<g;h++)if(s.attr(k[h],
c))return false}else if(e===o){k=b.query("textarea",i.container);h=0;for(g=k.length;h<g;h++)if(s.hasClass(k[h],c))return false}return true}var a=i.config,e=a.lazyDataType,c=a.lazyDataFlag||t[e];!f||!e||!c||i.on(r,n)}})});KISSY.add("tabs",function(b){function s(r,j){if(!(this instanceof s))return new s(r,j);s.superclass.constructor.call(this,r,j)}b.extend(s,b.Switchable);b.Tabs=s});
KISSY.add("slide",function(b){function s(j,o){if(!(this instanceof s))return new s(j,o);o=b.merge(r,o||{});s.superclass.constructor.call(this,j,o)}var r={autoplay:true,circular:true};b.extend(s,b.Switchable);b.Slide=s});KISSY.add("carousel",function(b){function s(j,o){if(!(this instanceof s))return new s(j,o);o=b.merge(r,o||{});s.superclass.constructor.call(this,j,o)}var r={circular:true};b.extend(s,b.Switchable);b.Carousel=s});
