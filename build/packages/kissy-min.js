/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 520 Apr 2 22:21
*/
(function(j,p,l){if(j[p]===l)j[p]={};p=j[p];var r=j.document,h=function(c,b,m,g){if(!b||!c)return c;if(m===l)m=true;var a,d,f;if(g&&(f=g.length))for(a=0;a<f;a++){d=g[a];if(d in b)if(m||!(d in c))c[d]=b[d]}else for(d in b)if(m||!(d in c))c[d]=b[d];return c},k=false,o=[],q=false;h(p,{version:"1.0.5",_init:function(){this.Env={mods:{}};this.Config={debug:true}},add:function(c,b){this.Env.mods[c]={name:c,fn:b};b(this);return this},ready:function(c){q||this._bindReady();k?c.call(j,this):o.push(c);return this},
_bindReady:function(){var c=this,b=r.documentElement.doScroll,m=b?"onreadystatechange":"DOMContentLoaded";q=true;if(r.attachEvent){if(j!=j.top){var g=function(){if(r.readyState==="complete"){r.detachEvent(m,g);c._fireReady()}};r.attachEvent(m,g)}else{var a=function(){try{b("left");c._fireReady()}catch(f){setTimeout(a,1)}};a()}j.attachEvent("onload",function(){c._fireReady()})}else{var d=function(){r.removeEventListener(m,d,false);c._fireReady()};r.addEventListener(m,d,false)}},_fireReady:function(){if(!k){k=
true;if(o){for(var c,b=0;c=o[b++];)c.call(j,this);o=null}}},mix:h,merge:function(){var c=arguments,b={},m,g=c.length;for(m=0;m<g;++m)h(b,c[m]);return b},extend:function(c,b,m,g){if(!b||!c)return c;var a=Object.prototype,d=b.prototype,f=function(i){function e(){}e.prototype=i;return new e}(d);c.prototype=f;f.constructor=c;c.superclass=d;if(b!==Object&&d.constructor===a.constructor)d.constructor=b;m&&h(f,m);g&&h(c,g);return c},augment:function(c,b,m,g){return h(c.prototype,b.prototype,m,g)},weave:function(c,
b,m,g){var a=[m[g],c];b==="before"&&a.reverse();m[g]=function(){for(var d=0,f;d<2;++d)f=a[d].apply(this,arguments);return f};return this},app:function(c){var b=j[c]||{};h(b,this,true,["_init","add","namespace"]);b._init();return j[c]=b},namespace:function(){var c=arguments,b=c.length,m=null,g,a,d;for(g=0;g<b;++g){d=(""+c[g]).split(".");m=this;for(a=j[d[0]]===m?1:0;a<d.length;++a)m=m[d[a]]=m[d[a]]||{}}return m},log:function(c,b,m){if(this.Config.debug){m&&(c=m+": "+c);if(j.console!==l&&console.log)console[b&&
console[b]?b:"log"](c)}return this},error:function(c){throw c;}});p._init()})(window,"KISSY");
KISSY.add("lang",function(j){function p(b){var m=typeof b;return b===null|(m!=="object"&&m!=="function")}var l=Array.prototype,r=l.forEach,h=l.indexOf,k=l.slice,o=/^\s+|\s+$/g,q=/^(\w+)\[\]$/,c=Object.prototype.toString;j.mix(j,{each:r?function(b,m,g){r.call(b,m,g);return this}:function(b,m,g){var a=b&&b.length||0,d;for(d=0;d<a;++d)m.call(g||this,b[d],d,b);return this},trim:String.prototype.trim?function(b){return(b||"").trim()}:function(b){return(b||"").replace(o,"")},isFunction:function(b){return c.call(b)===
"[object Function]"},isArray:function(b){return c.call(b)==="[object Array]"},inArray:h?function(b,m){return h.call(m,b)!==-1}:function(b,m){for(var g=0,a=m.length;g<a;++g)if(m[g]===b)return true;return false},makeArray:function(b){if(b===null)return[];if(j.isArray(b))return b;if(typeof b.length!=="number"||typeof b==="string"||j.isFunction(b))return[b];if(b.item&&j.UA.ie){for(var m=[],g=0,a=b.length;g<a;++g)m[g]=b[g];return m}return k.call(b)},param:function(b){if(typeof b!=="object")return"";var m=
[],g,a;for(g in b){a=b[g];if(p(a))m.push(g,"=",a+"","&");else if(j.isArray(a)&&a.length)for(var d=0,f=a.length;d<f;++d)p(a[d])&&m.push(g+"[]=",a[d]+"","&")}m.pop();return encodeURI(m.join(""))},unparam:function(b,m){if(typeof b!=="string"||(b=decodeURI(j.trim(b))).length===0)return{};var g={};b=b.split(m||"&");for(var a,d,f=0,i=b.length;f<i;++f){a=b[f].split("=");m=a[0];a=a[1]||"";if((d=m.match(q))&&d[1]){g[d[1]]=g[d[1]]||[];g[d[1]].push(a)}else g[m]=a}return g}})});
KISSY.add("ua",function(j){var p=navigator.userAgent,l,r={ie:0,gecko:0,firefox:0,opera:0,webkit:0,safari:0,chrome:0,mobile:""},h=function(k){var o=0;return parseFloat(k.replace(/\./g,function(){return o++===0?".":""}))};if((l=p.match(/AppleWebKit\/([\d.]*)/))&&l[1]){r.webkit=h(l[1]);if((l=p.match(/Chrome\/([\d.]*)/))&&l[1])r.chrome=h(l[1]);else if((l=p.match(/\/([\d.]*) Safari/))&&l[1])r.safari=h(l[1]);if(/ Mobile\//.test(p))r.mobile="Apple";else if(l=p.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))r.mobile=
l[0]}else if((l=p.match(/Opera\/.* Version\/([\d.]*)/))&&l[1]){r.opera=h(l[1]);if(p.match(/Opera Mini[^;]*/))r.mobile=l[0]}else if((l=p.match(/MSIE\s([^;]*)/))&&l[1])r.ie=h(l[1]);else if(l=p.match(/Gecko/)){r.gecko=1;if((l=p.match(/rv:([\d.]*)/))&&l[1])r.gecko=h(l[1]);if((l=p.match(/Firefox\/([\d.]*)/))&&l[1])r.firefox=h(l[1])}j.UA=r});
KISSY.add("json",function(j){var p=window.JSON;j.JSON={parse:function(l){if(typeof l!=="string"||!l)return null;l=j.trim(l);if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return(p||{}).parse?p.parse(l):(new Function("return "+l))();else jQuery.error("Invalid JSON: "+l)}}});
KISSY.add("cookie",function(j){function p(k){return typeof k==="string"&&k!==""}var l=document,r=encodeURIComponent,h=decodeURIComponent;j.Cookie={get:function(k){var o;if(p(k))if(k=l.cookie.match("(?:^| )"+k+"(?:(?:=([^;]*))|;|$)"))o=k[1]?h(k[1]):"";return o},set:function(k,o,q,c,b,m){o=r(o);var g=q;if(typeof g==="number"){g=new Date;g.setTime(g.getTime()+q*864E5)}if(g instanceof Date)o+="; expires="+g.toUTCString();if(p(c))o+="; domain="+c;if(p(b))o+="; path="+b;if(m)o+="; secure";l.cookie=k+"="+
o},remove:function(k){this.set(k,"",0)}}});
KISSY.add("selector",function(j,p){function l(i,e,n){var t,s=[],u,v;if(typeof i===m){i=j.trim(i);if(d.test(i)){if(e=h(i.slice(1)))s=[e]}else if(t=f.exec(i)){u=t[1];v=t[2];t=t[3];if(e=u?h(u):r(e))if(t){if(!u||i.indexOf(g)!==-1)s=o(t,v,e)}else if(v)s=k(e,v)}else if(i.indexOf(",")>-1)if(b.querySelectorAll)s=b.querySelectorAll(i);else{u=i.split(",");v=[];s=0;for(i=u.length;s<i;++s)v=v.concat(l(u[s],e));s=q(v)}}else if(i&&i.nodeType)s=[i];else if(i&&i.item)s=i;if(s.item)s=j.makeArray(s);n||c(s);return s}
function r(i){if(i===p)i=b;else if(typeof i===m&&d.test(i))i=h(i.slice(1));else if(i&&i.nodeType!==1&&i.nodeType!==9)i=null;return i}function h(i){return b.getElementById(i)}function k(i,e){return i.getElementsByTagName(e)}function o(i,e,n){n=i=n.getElementsByClassName(i);var t=0,s=0,u=i.length,v;if(e&&e!==a){n=[];for(e=e.toUpperCase();t<u;++t){v=i[t];if(v.tagName===e)n[s++]=v}}return n}function q(i){var e=false;i.sort(function(t,s){t=t.sourceIndex-s.sourceIndex;if(t===0)e=true;return t});if(e)for(var n=
1;n<i.length;n++)i[n]===i[n-1]&&i.splice(n--,1);return i}function c(i){i.each=function(e,n){j.each(i,e,n)}}var b=document,m="string",g=" ",a="*",d=/^#[\w-]+$/,f=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var i=b.createElement("div");i.appendChild(b.createComment(""));if(i.getElementsByTagName(a).length>0)k=function(e,n){e=e.getElementsByTagName(n);if(n===a){n=[];for(var t=0,s=0,u;u=e[t++];)if(u.nodeType===1)n[s++]=u;e=n}return e}})();b.getElementsByClassName||(o=b.querySelectorAll?
function(i,e,n){return n.querySelectorAll((e?e:"")+"."+i)}:function(i,e,n){e=n.getElementsByTagName(e||a);n=[];var t=0,s=0,u=e.length,v,w;for(i=g+i+g;t<u;++t){v=e[t];if((w=v.className)&&(g+w+g).indexOf(i)>-1)n[s++]=v}return n});j.query=l;j.get=function(i,e){return l(i,e,true)[0]||null}});
KISSY.add("dom-base",function(j,p){function l(e,n){return n&&n.nodeName.toUpperCase()===e.toUpperCase()}function r(e,n){var t=null,s;if(e&&(e.push||e.item)&&e[0]){n=n||e[0].ownerDocument;t=n.createDocumentFragment();if(e.item)e=j.makeArray(e);n=0;for(s=e.length;n<s;++n)t.appendChild(e[n])}else j.error("unable to convert "+e+" to fragment");return t}var h=document,k=h.documentElement.textContent!==p?"textContent":"innerText",o=j.UA,q=o.ie,c=q&&q<8,b={readonly:"readOnly"},m=/href|src|style/,g=/href|src|colspan|rowspan/,
a=/\r/g,d=/radio|checkbox/,f=h.createElement("DIV"),i=/^[a-z]+$/i;c&&j.mix(b,{"for":"htmlFor","class":"className"});j.DOM={query:j.query,get:j.get,attr:function(e,n,t){if(!e||e.nodeType!==1)return p;var s;n=n.toLowerCase();n=b[n]||n;if(t===p){if(m.test(n)){if(n==="style")s=e.style.cssText}else s=e[n];if(s===p)s=e.getAttribute(n);if(c&&g.test(n))s=e.getAttribute(n,2);return s===null?p:s}if(n==="style")e.style.cssText=t;else e.setAttribute(n,""+t)},removeAttr:function(e,n){e&&e.nodeType===1&&e.removeAttribute(n)},
val:function(e,n){if(!e||e.nodeType!==1)return p;if(n===p){if(l("option",e))return(e.attributes.value||{}).specified?e.value:e.text;if(l("select",e)){n=e.selectedIndex;var t=e.options;if(n<0)return null;else if(e.type==="select-one")return j.DOM.val(t[n]);e=[];n=0;for(var s=t.length;n<s;++n)t[n].selected&&e.push(j.DOM.val(t[n]));return e}if(o.webkit&&d.test(e.type))return e.getAttribute("value")===null?"on":e.value;return(e.value||"").replace(a,"")}if(l("select",e)){t=j.makeArray(n);var u=e.options,
v;n=0;for(s=u.length;n<s;++n){v=u[n];v.selected=j.inArray(j.DOM.val(v),t)}if(!t.length)e.selectedIndex=-1}else e.value=n},css:function(){j.error("not implemented")},text:function(e,n){if(n===p)return(e||{})[k]||"";if(e)e[k]=n},html:function(){j.error("not implemented")},create:function(e,n){if(typeof e==="string")e=j.trim(e);if(i.test(e))return(n||h).createElement(e);var t=null;t=n?n.createElement("DIV"):f;t.innerHTML=e;e=t.childNodes;return t=e.length===1?e[0].parentNode.removeChild(e[0]):r(e,n||
h)}}});KISSY.add("dom-class",function(j,p){j.mix(j.DOM,{hasClass:function(k,o){if(!o||!k.className)return false;return(" "+k.className+" ").indexOf(" "+o+" ")>-1},addClass:function(k,o){if(o)l(k,o)||(k.className+=" "+o)},removeClass:function(k,o){if(l(k,o)){k.className=(" "+k.className+" ").replace(" "+o+" "," ");l(k,o)&&h(k,o)}},replaceClass:function(k,o,q){h(k,o);r(k,q)},toggleClass:function(k,o,q){(q!==p?q:!l(k,o))?r(k,o):h(k,o)}});var l=j.DOM.hasClass,r=j.DOM.addClass,h=j.DOM.removeClass});
KISSY.add("node",function(j){function p(h,k,o){var q;if(!(this instanceof p))return new p(h,k,o);if(!h)return null;if(h.nodeType)q=h;else if(typeof h==="string")q=l.create(h,o);k&&j.error("not implemented");this[0]=q}var l=j.DOM,r=p.prototype;j.each(["attr","removeAttr"],function(h){r[h]=function(k,o){var q=this[0];if(o===undefined)return l[h](q,k);else{l[h](q,k,o);return this}}});j.each(["val","text"],function(h){r[h]=function(k){var o=this[0];if(k===undefined)return l[h](o);else{l[h](o,k);return this}}});
j.each(["hasClass","addClass","removeClass","replaceClass","toggleClass"],function(h){r[h]=function(){var k=l[h].apply(l,[this[0]].concat(j.makeArray(arguments)));return typeof k==="boolean"?k:this}});j.mix(r,{one:function(h){return j.one(h,this[0])},all:function(h){return j.all(h,this[0])}});j.one=function(h,k){return new p(j.get(h,k))};j.Node=p});
KISSY.add("nodelist",function(j){function p(r){if(!(this instanceof p))return new p(r);l.apply(this,r||[])}var l=Array.prototype.push;j.mix(p.prototype,{length:0,each:function(r,h){for(var k=this.length,o=0,q;o<k;++o){q=new j.Node(this[o]);r.call(h||q,q,o,this)}return this}});j.all=function(r,h){return new p(j.query(r,h,true))};j.NodeList=p});
KISSY.add("datalazyload",function(j,p){function l(g,a){if(!(this instanceof l))return new l(g,a);if(a===p){a=g;g=[c]}o.isArray(g)||(g=[h.get(g)||c]);this.containers=g;this.config=j.merge(m,a||{});this.callbacks={els:[],fns:[]};this._init()}var r=YAHOO.util,h=r.Dom,k=r.Event,o=YAHOO.lang,q=window,c=document,b={AUTO:"auto",MANUAL:"manual"},m={mod:b.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"};j.mix(l.prototype,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function g(){d||(d=setTimeout(function(){a();d=null},100))}function a(){f._loadItems();if(f._getItemsLength()===0){k.removeListener(q,"scroll",g);k.removeListener(q,"resize",g)}}var d,f=this;k.on(q,"scroll",g);k.on(q,"resize",function(){f.threshold=f._getThreshold();g()});f._getItemsLength()&&k.onDOMReady(function(){a()})},_filterItems:function(){var g=this.containers,a=this.threshold,d=this.config.placeholder,
f=this.config.mod===b.MANUAL,i,e,n,t,s,u,v,w=[],x=[];i=0;for(e=g.length;i<e;++i){n=g[i].getElementsByTagName("img");t=0;for(s=n.length;t<s;++t){u=n[t];v=u.getAttribute("data-lazyload-src");if(f){if(v){u.src=d;w.push(u)}}else if(h.getY(u)>a&&!v){u.setAttribute("data-lazyload-src",u.src);u.src=d;w.push(u)}}n=g[i].getElementsByTagName("textarea");t=0;for(s=n.length;t<s;++t){u=n[t];h.hasClass(u,"ks-datalazyload")&&x.push(u)}}this.images=w;this.areaes=x},_loadItems:function(){this._loadImgs();this._loadAreaes();
this._fireCallbacks()},_loadImgs:function(){var g=this.images,a=this.threshold+h.getDocumentScrollTop(),d,f,i=[];for(d=0;f=g[d++];)h.getY(f)<=a?this._loadImgSrc(f):i.push(f);this.images=i},_loadImgSrc:function(g,a){a=a||"data-lazyload-src";var d=g.getAttribute(a);if(d&&g.src!=d){g.src=d;g.removeAttribute(a)}},_loadAreaes:function(){var g=this.areaes,a=this.threshold+h.getDocumentScrollTop(),d,f,i,e=[];for(d=0;f=g[d++];){i=f.parentNode;h.getY(i)<=a?this._loadDataFromArea(i,f):e.push(f)}this.areaes=
e},_loadDataFromArea:function(g,a){var d=document.createElement("DIV");d.innerHTML=a.value;a.style.display="none";a.className="";g.appendChild(d)},_fireCallbacks:function(){var g=this.callbacks,a=g.els,d=g.fns,f=this.threshold+h.getDocumentScrollTop(),i,e,n,t=[],s=[];for(i=0;(e=a[i])&&(n=d[i++]);)if(h.getY(e)<=f)n.call(e);else{t.push(e);s.push(n)}g.els=t;g.fns=s},addCallback:function(g,a){if((g=h.get(g))&&typeof a==="function"){this.callbacks.els.push(g);this.callbacks.fns.push(a)}},_getThreshold:function(){var g=
this.config.diff,a=h.getViewportHeight();return g==="default"?2*a:a+g},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(g,a,d){var f=this,i,e;o.isArray(g)||(g=[h.get(g)]);j.each(g,function(n){switch(a){case "textarea-data":if((i=n.getElementsByTagName("textarea")[0])&&h.hasClass(i,d||"ks-datalazyload-custom"))f._loadDataFromArea(n,i);break;default:e=n.nodeName==="IMG"?[n]:n.getElementsByTagName("img");n=0;for(var t=e.length;n<
t;n++)f._loadImgSrc(e[n],d||"data-lazyload-src-custom")}})}});j.mix(l,l.prototype,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);j.DataLazyload=l});
KISSY.add("suggest",function(j,p){function l(a,d,f){if(!(this instanceof l))return new l(a,d,f);this.textInput=h.get(a);this.dataSource=d;this.JSONDataSource=o.isObject(d)?d:null;this.returnedData=null;this.config=o.merge(g,f||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var r=YAHOO.util,h=r.Dom,
k=r.Event,o=YAHOO.lang,q=window,c=document,b=c.getElementsByTagName("head")[0],m=YAHOO.env.ua.ie,g={containerClass:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:m===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};j.mix(l.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this.createEvent("beforeDataRequest");this.createEvent("onDataReturn");this.createEvent("beforeShow");
this.createEvent("onItemSelect");this._initResizeEvent()},_initTextInput:function(){var a=this;a.textInput.setAttribute("autocomplete","off");k.on(a.textInput,"blur",function(){a.stop();a.hide()});a.config.autoFocus&&a.textInput.focus();var d=0;k.on(a.textInput,"keydown",function(f){f=f.keyCode;switch(f){case 27:a.hide();a.textInput.value=a.query;break;case 13:a.textInput.blur();a._onKeyboardSelecting&&a.textInput.value==a._getSelectedItemKey()&&a.fireEvent("onItemSelect",a.textInput.value);a._submitForm();
break;case 40:case 38:if(d++==0){a._isRunning&&a.stop();a._onKeyboardSelecting=true;a.selectItem(f==40)}else if(d==3)d=0;break}if(f!=40&&f!=38){a._isRunning||a.start();a._onKeyboardSelecting=false}});k.on(a.textInput,"keyup",function(){d=0})},_initContainer:function(){var a=c.createElement("div"),d=this.config.containerClass;a.className="suggest-container";if(d)a.className+=" "+d;a.style.position="absolute";a.style.visibility="hidden";this.container=a;this._setContainerRegion();this._initContainerEvent();
c.body.insertBefore(a,c.body.firstChild)},_setContainerRegion:function(){var a=h.getRegion(this.textInput),d=a.left,f=a.right-d-2;f=f>0?f:0;if(c.documentMode===7&&(m===7||m===8))d-=2;else YAHOO.env.ua.gecko&&d++;this.container.style.left=d+"px";this.container.style.top=a.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?f+"px":this.config.containerWidth},_initContainerEvent:function(){var a=this;k.on(a.container,"mousemove",function(f){f=k.getTarget(f);if(f.nodeName!="LI")f=
h.getAncestorByTagName(f,"li");if(h.isAncestor(a.container,f))if(f!=a.selectedItem){a._removeSelectedItem();a._setSelectedItem(f)}});var d=null;a.container.onmousedown=function(f){f=f||q.event;d=f.target||f.srcElement;a.textInput.onbeforedeactivate=function(){q.event.returnValue=false;a.textInput.onbeforedeactivate=null};return false};k.on(a.container,"mouseup",function(f){if(a._isInContainer(k.getXY(f))){f=k.getTarget(f);if(f==d)if(f.className=="suggest-close-btn")a.hide();else{if(f.nodeName!="LI")f=
h.getAncestorByTagName(f,"li");if(h.isAncestor(a.container,f)){a._updateInputFromSelectItem(f);a.fireEvent("onItemSelect",a.textInput.value);a.textInput.blur();a._submitForm()}}}})},_submitForm:function(){if(this.config.submitFormOnClickSelect){var a=this.textInput.form;if(a){if(c.createEvent){var d=c.createEvent("MouseEvents");d.initEvent("submit",true,false);a.dispatchEvent(d)}else c.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_isInContainer:function(a){var d=h.getRegion(this.container);
return a[0]>=d.left&&a[0]<=d.right&&a[1]>=d.top&&a[1]<=d.bottom},_initShim:function(){var a=c.createElement("iframe");a.src="about:blank";a.className="suggest-shim";a.style.position="absolute";a.style.visibility="hidden";a.style.border="none";this.container.shim=a;this._setShimRegion();c.body.insertBefore(a,c.body.firstChild)},_setShimRegion:function(){var a=this.container,d=a.shim;if(d){d.style.left=parseInt(a.style.left)-2+"px";d.style.top=a.style.top;d.style.width=parseInt(a.style.width)+2+"px"}},
_initStyle:function(){var a=h.get("suggest-style");if(!a){a=c.createElement("style");a.id="suggest-style";b.appendChild(a);if(a.styleSheet)a.styleSheet.cssText=".suggest-container{background:white;border:1px solid #999;z-index:99999}.suggest-shim{z-index:99998}.suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.suggest-container li.selected{background-color:#39F;cursor:default}.suggest-key{float:left;text-align:left;padding-left:5px}.suggest-result{float:right;text-align:right;padding-right:5px;color:green}.suggest-container li.selected span{color:#FFF;cursor:default}.suggest-bottom{padding:0 5px 5px}.suggest-close-btn{float:right}.suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}";
else a.appendChild(c.createTextNode(".suggest-container{background:white;border:1px solid #999;z-index:99999}.suggest-shim{z-index:99998}.suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.suggest-container li.selected{background-color:#39F;cursor:default}.suggest-key{float:left;text-align:left;padding-left:5px}.suggest-result{float:right;text-align:right;padding-right:5px;color:green}.suggest-container li.selected span{color:#FFF;cursor:default}.suggest-bottom{padding:0 5px 5px}.suggest-close-btn{float:right}.suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}"))}},
_initResizeEvent:function(){var a=this,d;k.on(q,"resize",function(){d&&clearTimeout(d);d=setTimeout(function(){a._setContainerRegion();a._setShimRegion()},50)})},start:function(){var a=this;l.focusInstance=a;a._timer=setTimeout(function(){a.updateContent();a._timer=setTimeout(arguments.callee,a.config.timerDelay)},a.config.timerDelay);a._isRunning=true},stop:function(){l.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var a=this.container,
d=a.shim;a.style.visibility="";if(d){if(!d.style.height){a=h.getRegion(a);d.style.height=a.bottom-a.top-2+"px"}d.style.visibility=""}}},hide:function(){if(this.isVisible()){var a=this.container,d=a.shim;if(d)d.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var a=this.query;if(o.trim(a).length)if(this._dataCache[a]!==p){this.returnedData=
"using cache";this._fillContainer(this._dataCache[a]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[a]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var a=this;if(!m)a.dataScript=null;if(!a.dataScript){var d=c.createElement("script");d.type="text/javascript";d.charset="utf-8";b.insertBefore(d,b.firstChild);a.dataScript=d;if(!m){var f=(new Date).getTime();
a._latestScriptTime=f;d.setAttribute("time",f);k.on(d,"load",function(){a._scriptDataIsOut=d.getAttribute("time")!=a._latestScriptTime})}}a.queryParams="q="+encodeURIComponent(a.query)+"&code=utf-8&callback=g_ks_suggest_callback";a.fireEvent("beforeDataRequest",a.query);a.dataScript.src=a.dataSource+"?"+a.queryParams},handleResponse:function(a){if(!this._scriptDataIsOut){this.returnedData=a;this.fireEvent("onDataReturn",a);this.returnedData=this.formatData(this.returnedData);var d="";a=this.returnedData.length;
if(a>0){d=c.createElement("ol");for(var f=0;f<a;++f){var i=this.returnedData[f],e=this.formatItem(i.key,i.result);e.setAttribute("key",i.key);d.appendChild(e)}d=d}this._fillContainer(d);a>0&&this.appendBottom();o.trim(this.container.innerHTML)&&this.fireEvent("beforeShow",this.container);this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(a){var d=[];if(!a)return d;if(o.isArray(a.result))a=a.result;var f=a.length;if(!f)return d;for(var i,e=0;e<f;++e){i=
a[e];d[e]=o.isString(i)?{key:i}:o.isArray(i)&&i.length>=2?{key:i[0],result:i[1]}:i}return d},formatItem:function(a,d){var f=c.createElement("li"),i=c.createElement("span");i.className="suggest-key";i.appendChild(c.createTextNode(a));f.appendChild(i);if(d!==p){a=this.config.resultFormat.replace("%result%",d);if(o.trim(a)){d=c.createElement("span");d.className="suggest-result";d.appendChild(c.createTextNode(a));f.appendChild(d)}}return f},appendBottom:function(){var a=c.createElement("div");a.className=
"suggest-bottom";if(this.config.showCloseBtn){var d=c.createElement("a");d.href="javascript: void(0)";d.setAttribute("target","_self");d.className="suggest-close-btn";d.appendChild(c.createTextNode(this.config.closeBtnText));a.appendChild(d)}o.trim(a.innerHTML)&&this.container.appendChild(a)},_fillContainer:function(a){if(a.nodeType==1){this.container.innerHTML="";this.container.appendChild(a)}else this.container.innerHTML=a;this.selectedItem=null},_displayContainer:function(){j.trim(this.container.innerHTML)?
this.show():this.hide()},selectItem:function(a){var d=this.container.getElementsByTagName("li");if(d.length!=0)if(this.isVisible()){if(this.selectedItem){a=h[a?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=d[a?0:d.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){h.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(a){h.addClass(a,
"selected");this.selectedItem=a},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});j.augment(l,r.EventProvider);q.g_ks_suggest_callback=function(a){l.focusInstance&&setTimeout(function(){l.focusInstance.handleResponse(a)},0)};j.Suggest=l});
KISSY.add("switchable",function(j,p){function l(c,b){b=b||{};if(!("mackupType"in b))if(b.panelCls)b.mackupType=1;else if(b.panels)b.mackupType=2;b=j.merge(l.Config,b);this.container=j.get(c);this.config=b;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===p)this.activeIndex=b.activeIndex;this._init()}var r=YAHOO.util,h=r.Dom,k=r.Event,o=YAHOO.lang,q=document;l.Config={mackupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",
panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};l.Plugins=[];j.mix(l.prototype,{_init:function(){var c=this,b=c.config;c.panels.length===0&&c._parseMackup();c.createEvent("beforeSwitch");c.createEvent("onSwitch");b.hasTriggers&&c._bindTriggers();j.each(l.Plugins,function(m){m.init&&m.init(c)})},_parseMackup:function(){var c=this.container,b=this.config,m=b.hasTriggers,g,a=[],d=[];switch(b.mackupType){case 0:if(g=
j.get("."+b.navCls,c))a=h.getChildren(g);g=j.get("."+b.contentCls,c);d=h.getChildren(g);break;case 1:a=j.query("."+b.triggerCls,c);d=j.query("."+b.panelCls,c);break;case 2:a=b.triggers;d=b.panels;break}c=d.length;this.length=c/b.steps;if(m&&c>0&&a.length===0)a=this._generateTriggersMackup(this.length);if(m){b=0;for(m=a.length;b<m;b++)this.triggers.push(a[b])}for(b=0;b<c;b++)this.panels.push(d[b]);this.content=g||d[0].parentNode},_generateTriggersMackup:function(c){var b=this.config,m=q.createElement("UL"),
g,a;m.className=b.navCls;for(a=0;a<c;a++){g=q.createElement("LI");if(a===this.activeIndex)g.className=b.activeTriggerCls;g.innerHTML=a+1;m.appendChild(g)}this.container.appendChild(m);return h.getChildren(m)},_bindTriggers:function(){var c=this,b=c.config,m=c.triggers,g,a,d=m.length;for(a=0;a<d;a++)(function(f){g=m[f];k.on(g,"click",function(){c._onFocusTrigger(f)});k.on(g,"focus",function(){c._onFocusTrigger(f)});if(b.triggerType==="mouse"){k.on(g,"mouseenter",function(){c._onMouseEnterTrigger(f)});
k.on(g,"mouseleave",function(){c._onMouseLeaveTrigger(f)})}})(a)},_onFocusTrigger:function(c){if(this.activeIndex!==c){this.switchTimer&&this.switchTimer.cancel();this.switchTo(c)}},_onMouseEnterTrigger:function(c){var b=this;if(b.activeIndex!==c)b.switchTimer=o.later(b.config.delay*1E3,b,function(){b.switchTo(c)})},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(c,b){var m=this.config,g=this.triggers,a=this.panels,d=this.activeIndex,f=m.steps,i=d*f,
e=c*f;if(c===d)return this;if(!this.fireEvent("beforeSwitch",c))return this;if(m.hasTriggers)this._switchTrigger(d>-1?g[d]:null,g[c]);if(b===p)b=c>d?"forward":"forward";this._switchView(a.slice(i,i+f),a.slice(e,e+f),c,b);this.activeIndex=c;return this},_switchTrigger:function(c,b){var m=this.config.activeTriggerCls;c&&h.removeClass(c,m);h.addClass(b,m)},_switchView:function(c,b,m){h.setStyle(c,"display","none");h.setStyle(b,"display","block");this.fireEvent("onSwitch",m)},prev:function(){var c=this.activeIndex;
this.switchTo(c>0?c-1:this.length-1,"backward")},next:function(){var c=this.activeIndex;this.switchTo(c<this.length-1?c+1:0,"forward")}});j.augment(l,r.EventProvider);j.Switchable=l});
KISSY.add("switchable-autoplay",function(j){var p=YAHOO.util.Event,l=YAHOO.lang,r=j.Switchable;j.mix(r.Config,{autoplay:false,interval:5,pauseOnHover:true});r.Plugins.push({name:"autoplay",init:function(h){var k=h.config;if(k.autoplay){if(k.pauseOnHover){p.on(h.container,"mouseenter",function(){h.paused=true});p.on(h.container,"mouseleave",function(){setTimeout(function(){h.paused=false},k.interval*1E3)})}h.autoplayTimer=l.later(k.interval*1E3,h,function(){h.paused||h.switchTo(h.activeIndex<h.length-
1?h.activeIndex+1:0)},null,true)}}})});
KISSY.add("switchable-effect",function(j){var p=YAHOO.util,l=p.Dom,r=j.Switchable,h;j.mix(r.Config,{effect:"none",duration:0.5,easing:p.Easing.easeNone});r.Effects={none:function(k,o,q){l.setStyle(k,"display","none");l.setStyle(o,"display","block");q()},fade:function(k,o,q){if(k.length!==1)throw new Error("fade effect only supports steps == 1.");var c=this,b=c.config,m=k[0],g=o[0];c.anim&&c.anim.stop();l.setStyle(g,"opacity",1);c.anim=new p.Anim(m,{opacity:{to:0}},b.duration,b.easing);c.anim.onComplete.subscribe(function(){c.anim=
null;l.setStyle(g,"z-index",9);l.setStyle(m,"z-index",1);q()});c.anim.animate()},scroll:function(k,o,q,c){var b=this;k=b.config;o=k.effect==="scrollx";var m={};m[o?"left":"top"]={to:-(b.viewSize[o?0:1]*c)};b.anim&&b.anim.stop();b.anim=new p.Anim(b.content,m,k.duration,k.easing);b.anim.onComplete.subscribe(function(){b.anim=null;q()});b.anim.animate()}};h=r.Effects;h.scrollx=h.scrolly=h.scroll;r.Plugins.push({name:"effect",init:function(k){var o=k.config,q=o.effect,c=k.panels,b=o.steps,m=k.activeIndex*
b,g=m+b-1,a=c.length;k.viewSize=[o.viewSize[0]||c[0].offsetWidth*b,o.viewSize[0]||c[0].offsetHeight*b];if(q!=="none"){for(o=0;o<a;o++)c[o].style.display="block";switch(q){case "scrollx":case "scrolly":k.content.style.position="absolute";k.content.parentNode.style.position="relative";if(q==="scrollx"){l.setStyle(c,"float","left");k.content.style.width=k.viewSize[0]*(a/b)+"px"}break;case "fade":for(o=0;o<a;o++){l.setStyle(c[o],"opacity",o>=m&&o<=g?1:0);c[o].style.position="absolute";c[o].style.zIndex=
o>=m&&o<=g?9:1}break}}}});j.mix(r.prototype,{_switchView:function(k,o,q,c){var b=this,m=b.config.effect;(typeof m==="function"?m:h[m]).call(b,k,o,function(){b.fireEvent("onSwitch",q)},q,c)}})});
KISSY.add("switchable-circular",function(j){function p(f,i,e,n,t){var s=this;f=s.config;i=s.length;var u=s.activeIndex,v=f.scrollType===a,w=v?o:q,x=s.viewSize[v?0:1];v=-x*n;var z={},A,y=t===g;if(A=y&&u===0&&n===i-1||t===m&&u===i-1&&n===0)v=l.call(s,s.panels,n,y,w,x);z[w]={to:v};s.anim&&s.anim.stop();s.anim=new h.Anim(s.content,z,f.duration,f.easing);s.anim.onComplete.subscribe(function(){A&&r.call(s,s.panels,n,y,w,x);s.anim=null;e()});s.anim.animate()}function l(f,i,e,n,t){var s=this.config.steps;
i=this.length;var u=e?i-1:0,v=(u+1)*s;for(s=u*s;s<v;s++){f[s].style.position=k;f[s].style[n]=(e?"-":b)+t*i+c}return e?t:-t*i}function r(f,i,e,n,t){var s=this.config.steps;i=this.length;var u=e?i-1:0,v=(u+1)*s;for(s=u*s;s<v;s++){f[s].style.position=b;f[s].style[n]=b}this.content.style[n]=e?-t*(i-1)+c:b}var h=YAHOO.util,k="relative",o="left",q="top",c="px",b="",m="forward",g="backward",a="scrollx",d=j.Switchable;j.mix(d.Config,{circular:false});d.Plugins.push({name:"circular",init:function(f){f=f.config;
if(f.circular&&(f.effect===a||f.effect==="scrolly")){f.scrollType=f.effect;f.effect=p}}})});
KISSY.add("switchable-lazyload",function(j){var p=YAHOO.util.Dom,l="beforeSwitch",r="img-src",h="textarea-data",k={},o=j.Switchable,q=j.DataLazyload;k[r]="data-lazyload-src-custom";k[h]="ks-datalazyload-custom";j.mix(o.Config,{lazyDataType:"",lazyDataFlag:""});o.Plugins.push({name:"autoplay",init:function(c){function b(f){var i=g.steps;f=f*i;q.loadCustomLazyData(c.panels.slice(f,f+i),a,d);m()&&c.unsubscribe(l,b)}function m(){var f,i,e;if(a===r){f=c.container.getElementsByTagName("img");i=0;for(e=
f.length;i<e;i++)if(f[i].getAttribute(d))return false}else if(a===h){f=c.container.getElementsByTagName("textarea");i=0;for(e=f.length;i<e;i++)if(p.hasClass(f[i],d))return false}return true}var g=c.config,a=g.lazyDataType,d=g.lazyDataFlag||k[a];!q||!a||!d||c.subscribe(l,b)}})});KISSY.add("tabs",function(j){function p(l,r){if(!(this instanceof p))return new p(l,r);p.superclass.constructor.call(this,l,r)}j.extend(p,j.Switchable);j.Tabs=p});
KISSY.add("slide",function(j){function p(r,h){if(!(this instanceof p))return new p(r,h);h=j.merge(l,h||{});p.superclass.constructor.call(this,r,h)}var l={autoplay:true,circular:true};j.extend(p,j.Switchable);j.Slide=p});KISSY.add("carousel",function(j){function p(r,h){if(!(this instanceof p))return new p(r,h);h=j.merge(l,h||{});p.superclass.constructor.call(this,r,h)}var l={circular:true};j.extend(p,j.Switchable);j.Carousel=p});
KISSY.add("megamenu",function(j){function p(q,c){if(!(this instanceof p))return new p(q,c);c=j.merge(o,c||{});p.superclass.constructor.call(this,q,c);this._initView();this.config.showCloseBtn&&this._initCloseBtn()}var l=YAHOO.util,r=l.Dom,h=l.Event,k=YAHOO.lang,o={hideDelay:0.5,viewCls:"ks-megamenu-view",closeBtnCls:"ks-megamenu-closebtn",showCloseBtn:true,activeIndex:-1};j.extend(p,j.Switchable);j.mix(p.prototype,{_onFocusTrigger:function(q){if(this.activeIndex!==q){this.switchTimer&&this.switchTimer.cancel();
this.hideTimer&&this.hideTimer.cancel();this.switchTo(q)}},_onMouseEnterTrigger:function(q){var c=this;c.hideTimer&&c.hideTimer.cancel();c.switchTimer=k.later(c.config.delay*1E3,c,function(){c.switchTo(q)})},_onMouseLeaveTrigger:function(){var q=this;q.switchTimer&&q.switchTimer.cancel();q.hideTimer=k.later(q.config.hideDelay*1E3,q,function(){q.hide()})},_initView:function(){var q=this,c=q.config,b=r.getElementsByClassName(c.viewCls,"*",q.container)[0];if(!b){b=document.createElement("DIV");b.className=
c.viewCls;q.container.appendChild(b)}h.on(b,"mouseenter",function(){q.hideTimer&&q.hideTimer.cancel()});h.on(b,"mouseleave",function(){q.hideTimer=k.later(c.hideDelay*1E3,q,"hide")});q.viewContent=b;q.view=b},_initCloseBtn:function(){var q=this,c,b=q.view;b.innerHTML="<span class='{hook_cls}'></span>".replace("{hook_cls}",q.config.closeBtnCls);h.on(b.firstChild,"click",function(){q.hide()});c=document.createElement("div");b.appendChild(c);q.viewContent=c},_switchView:function(q,c,b){this.view.style.display=
"block";this.viewContent.innerHTML=c[0].innerHTML;this.fireEvent("onSwitch",b)},hide:function(){r.removeClass(this.triggers[this.activeIndex],this.config.activeTriggerCls);this.view.style.display="none";this.activeIndex=-1}});j.MegaMenu=p});
