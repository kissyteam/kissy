/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 551 Apr 11 12:05
*/
(function(b,n,o){if(b[n]===o)b[n]={};n=b[n];var k=b.document,m=function(g,p,l,a){if(!p||!g)return g;if(l===o)l=true;var c,f,q;if(a&&(q=a.length))for(c=0;c<q;c++){f=a[c];if(f in p)if(l||!(f in g))g[f]=p[f]}else for(f in p)if(l||!(f in g))g[f]=p[f];return g},s=false,h=[],d=false;m(n,{version:"1.0.5",_init:function(){this.Env={mods:{}}},add:function(g,p){this.Env.mods[g]={name:g,fn:p};p(this);return this},ready:function(g){d||this._bindReady();s?g.call(b,this):h.push(g);return this},_bindReady:function(){var g=
this,p=k.documentElement.doScroll,l=p?"onreadystatechange":"DOMContentLoaded";d=true;if(k.attachEvent){if(b!=b.top){var a=function(){if(k.readyState==="complete"){k.detachEvent(l,a);g._fireReady()}};k.attachEvent(l,a)}else{var c=function(){try{p("left");g._fireReady()}catch(q){setTimeout(c,1)}};c()}b.attachEvent("onload",function(){g._fireReady()})}else{var f=function(){k.removeEventListener(l,f,false);g._fireReady()};k.addEventListener(l,f,false)}},_fireReady:function(){if(!s){s=true;if(h){for(var g,
p=0;g=h[p++];)g.call(b,this);h=null}}},mix:m,merge:function(){var g=arguments,p={},l,a=g.length;for(l=0;l<a;++l)m(p,g[l]);return p},extend:function(g,p,l,a){if(!p||!g)return g;var c=Object.prototype,f=p.prototype,q=function(j){function i(){}i.prototype=j;return new i}(f);g.prototype=q;q.constructor=g;g.superclass=f;if(p!==Object&&f.constructor===c.constructor)f.constructor=p;l&&m(q,l);a&&m(g,a);return g},augment:function(g,p,l,a){return m(g.prototype,n.isFunction(p)?p.prototype:p,l,a)},app:function(g,
p){var l=b[g]||{};m(l,this,true,["_init","add","namespace"]);l._init();return m(b[g]=l,p)},namespace:function(){var g=arguments,p=g.length,l=null,a,c,f;for(a=0;a<p;++a){f=(""+g[a]).split(".");l=this;for(c=b[f[0]]===l?1:0;c<f.length;++c)l=l[f[c]]=l[f[c]]||{}}return l},log:function(g,p,l){if(this.Config.debug){l&&(g=l+": "+g);if(b.console!==o&&console.log)console[p&&console[p]?p:"log"](g)}return this},error:function(g){if(this.Config.debug)throw g;},now:function(){return(new Date).getTime()}});n._init();
n.Config={debug:""}})(window,"KISSY");
KISSY.add("lang",function(b,n){function o(a){var c=typeof a;return a===null|(c!=="object"&&c!=="function")}var k=document,m=Array.prototype,s=m.forEach,h=m.indexOf,d=m.slice,g=/^\s+|\s+$/g,p=/^(\w+)\[\]$/,l=Object.prototype.toString;b.mix(b,{each:s?function(a,c,f){s.call(a,c,f);return this}:function(a,c,f){var q=a&&a.length||0,j;for(j=0;j<q;++j)c.call(f||this,a[j],j,a);return this},trim:String.prototype.trim?function(a){return(a||"").trim()}:function(a){return(a||"").replace(g,"")},isPlainObject:function(a){return a&&
l.call(a)==="[object Object]"&&!a.nodeType&&!a.setInterval},isEmptyObject:function(a){for(var c in a)return false;return true},isFunction:function(a){return l.call(a)==="[object Function]"},isArray:function(a){return l.call(a)==="[object Array]"},indexOf:h?function(a,c){return h.call(c,a)}:function(a,c){for(var f=0,q=c.length;f<q;++f)if(c[f]===a)return f;return-1},inArray:function(a,c){return b.indexOf(a,c)!==-1},makeArray:function(a){if(a===null||a===n)return[];if(b.isArray(a))return a;if(typeof a.length!==
"number"||typeof a==="string"||b.isFunction(a))return[a];if(a.item&&b.UA.ie){for(var c=[],f=0,q=a.length;f<q;++f)c[f]=a[f];return c}return d.call(a)},param:function(a){if(typeof a!=="object")return"";var c=[],f,q;for(f in a){q=a[f];if(o(q))c.push(f,"=",q+"","&");else if(b.isArray(q)&&q.length)for(var j=0,i=q.length;j<i;++j)o(q[j])&&c.push(f+"[]=",q[j]+"","&")}c.pop();return encodeURI(c.join(""))},unparam:function(a,c){if(typeof a!=="string"||(a=decodeURI(b.trim(a))).length===0)return{};var f={};a=
a.split(c||"&");for(var q,j,i=0,t=a.length;i<t;++i){q=a[i].split("=");c=q[0];q=q[1]||"";if((j=c.match(p))&&j[1]){f[j[1]]=f[j[1]]||[];f[j[1]].push(q)}else f[c]=q}return f},later:function(a,c,f,q,j){c=c||0;q=q||{};var i=a,t=b.makeArray(j),e;if(typeof a==="string")i=q[a];i||b.error("method undefined");a=function(){i.apply(q,t)};e=f?setInterval(a,c):setTimeout(a,c);return{id:e,interval:f,cancel:function(){this.interval?clearInterval(e):clearTimeout(e)}}},globalEval:function(a){if(a=b.trim(a)){var c=k.getElementsByTagName("head")[0]||
k.documentElement,f=k.createElement("script");if(b.UA.ie)f.text=a;else f.appendChild(k.createTextNode(a));c.insertBefore(f,c.firstChild);c.removeChild(f)}}});if("ks-debug"in b.unparam(location.hash))b.Config.debug=true});
KISSY.add("ua",function(b){var n=navigator.userAgent,o,k={ie:0,gecko:0,firefox:0,opera:0,webkit:0,safari:0,chrome:0,mobile:""},m=function(s){var h=0;return parseFloat(s.replace(/\./g,function(){return h++===0?".":""}))};if((o=n.match(/AppleWebKit\/([\d.]*)/))&&o[1]){k.webkit=m(o[1]);if((o=n.match(/Chrome\/([\d.]*)/))&&o[1])k.chrome=m(o[1]);else if((o=n.match(/\/([\d.]*) Safari/))&&o[1])k.safari=m(o[1]);if(/ Mobile\//.test(n))k.mobile="Apple";else if(o=n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))k.mobile=
o[0]}else if((o=n.match(/Opera\/.* Version\/([\d.]*)/))&&o[1]){k.opera=m(o[1]);if(n.match(/Opera Mini[^;]*/))k.mobile=o[0]}else if((o=n.match(/MSIE\s([^;]*)/))&&o[1])k.ie=m(o[1]);else if(o=n.match(/Gecko/)){k.gecko=1;if((o=n.match(/rv:([\d.]*)/))&&o[1])k.gecko=m(o[1]);if((o=n.match(/Firefox\/([\d.]*)/))&&o[1])k.firefox=m(o[1])}b.UA=k});
KISSY.add("selector",function(b,n){function o(j,i,t){var e,r=[],u,v;if(typeof j===l){j=b.trim(j);if(f.test(j)){if(i=m(j.slice(1)))r=[i]}else if(e=q.exec(j)){u=e[1];v=e[2];e=e[3];if(i=u?m(u):k(i))if(e){if(!u||j.indexOf(a)!==-1)r=h(e,v,i)}else if(v)r=s(i,v)}else if(j.indexOf(",")>-1)if(p.querySelectorAll)r=p.querySelectorAll(j);else{u=j.split(",");v=[];r=0;for(j=u.length;r<j;++r)v=v.concat(o(u[r],i));r=d(v)}}else if(j&&j.nodeType)r=[j];else if(j&&j.item)r=j;if(r.item)r=b.makeArray(r);t||g(r);return r}
function k(j){if(j===n)j=p;else if(typeof j===l&&f.test(j))j=m(j.slice(1));else if(j&&j.nodeType!==1&&j.nodeType!==9)j=null;return j}function m(j){return p.getElementById(j)}function s(j,i){return j.getElementsByTagName(i)}function h(j,i,t){t=j=t.getElementsByClassName(j);var e=0,r=0,u=j.length,v;if(i&&i!==c){t=[];for(i=i.toUpperCase();e<u;++e){v=j[e];if(v.tagName===i)t[r++]=v}}return t}function d(j){var i=false;j.sort(function(e,r){e=e.sourceIndex-r.sourceIndex;if(e===0)i=true;return e});if(i)for(var t=
1;t<j.length;t++)j[t]===j[t-1]&&j.splice(t--,1);return j}function g(j){j.each=function(i,t){b.each(j,i,t)}}var p=document,l="string",a=" ",c="*",f=/^#[\w-]+$/,q=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var j=p.createElement("div");j.appendChild(p.createComment(""));if(j.getElementsByTagName(c).length>0)s=function(i,t){i=i.getElementsByTagName(t);if(t===c){t=[];for(var e=0,r=0,u;u=i[e++];)if(u.nodeType===1)t[r++]=u;i=t}return i}})();p.getElementsByClassName||(h=p.querySelectorAll?
function(j,i,t){return t.querySelectorAll((i?i:"")+"."+j)}:function(j,i,t){i=t.getElementsByTagName(i||c);t=[];var e=0,r=0,u=i.length,v,w;for(j=a+j+a;e<u;++e){v=i[e];if((w=v.className)&&(a+w+a).indexOf(j)>-1)t[r++]=v}return t});b.query=o;b.get=function(j,i){return o(j,i,true)[0]||null}});
KISSY.add("dom-base",function(b,n){function o(e,r){return r&&r.nodeName.toUpperCase()===e.toUpperCase()}function k(e,r){for(var u=[],v=0;e;e=e.nextSibling)if(e.nodeType===1&&e!==r)u[v++]=e;return u}function m(e,r,u){r=r||0;for(var v=0;e;e=e[u])if(e.nodeType===1&&v++===r)break;return e}function s(e,r){var u=null,v;if(e&&(e.push||e.item)&&e[0]){r=r||e[0].ownerDocument;u=r.createDocumentFragment();if(e.item)e=b.makeArray(e);r=0;for(v=e.length;r<v;++r)u.appendChild(e[r])}else b.error("unable to convert "+
e+" to fragment");return u}var h=document,d=h.documentElement.textContent!==n?"textContent":"innerText",g=b.UA,p=g.ie,l=p&&p<8,a={readonly:"readOnly"},c=/href|src|style/,f=/href|src|colspan|rowspan/,q=/\r/g,j=/radio|checkbox/,i=h.createElement("DIV"),t=/^[a-z]+$/i;l&&b.mix(a,{"for":"htmlFor","class":"className"});b.DOM={query:b.query,get:b.get,attr:function(e,r,u){if(!e||e.nodeType!==1)return n;var v;r=r.toLowerCase();r=a[r]||r;if(u===n){if(c.test(r)){if(r==="style")v=e.style.cssText}else v=e[r];
if(v===n)v=e.getAttribute(r);if(l&&f.test(r))v=e.getAttribute(r,2);return v===null?n:v}if(r==="style")e.style.cssText=u;else e.setAttribute(r,""+u)},removeAttr:function(e,r){e&&e.nodeType===1&&e.removeAttribute(r)},val:function(e,r){if(!e||e.nodeType!==1)return n;if(r===n){if(o("option",e))return(e.attributes.value||{}).specified?e.value:e.text;if(o("select",e)){r=e.selectedIndex;var u=e.options;if(r<0)return null;else if(e.type==="select-one")return b.DOM.val(u[r]);e=[];r=0;for(var v=u.length;r<
v;++r)u[r].selected&&e.push(b.DOM.val(u[r]));return e}if(g.webkit&&j.test(e.type))return e.getAttribute("value")===null?"on":e.value;return(e.value||"").replace(q,"")}if(o("select",e)){u=b.makeArray(r);var w=e.options,x;r=0;for(v=w.length;r<v;++r){x=w[r];x.selected=b.inArray(b.DOM.val(x),u)}if(!u.length)e.selectedIndex=-1}else e.value=r},css:function(e,r,u){if(u===n)return e.style[r];b.each(b.makeArray(e),function(v){v.style[r]=u})},text:function(e,r){if(r===n)return(e||{})[d]||"";if(e)e[d]=r},html:function(e,
r){if(r===n)return e.innerHTML;e.innerHTML=r},children:function(e){if(e.children)return b.makeArray(e.children);return k(e.firstChild)},siblings:function(e){return k(e.parentNode.firstChild,e)},next:function(e){return m(e,1,"nextSibling")},prev:function(e){return m(e,1,"previousSibling")},parent:function(e){return(e=e.parentNode)&&e.nodeType!==11?e:null},create:function(e,r){if(typeof e==="string")e=b.trim(e);if(t.test(e))return(r||h).createElement(e);var u=null;u=r?r.createElement("DIV"):i;u.innerHTML=
e;e=u.childNodes;return u=e.length===1?e[0].parentNode.removeChild(e[0]):s(e,r||h)},addStyleSheet:function(e,r){var u=h.getElementsByTagName("head")[0],v=h.createElement("style");r&&(v.id=r);u.appendChild(v);if(v.styleSheet)v.styleSheet.cssText=e;else v.appendChild(h.createTextNode(e))}}});
KISSY.add("dom-class",function(b,n){function o(d,g,p){if(b.isArray(d)){b.each(d,function(){g.apply(p,Array.prototype.slice.call(arguments,3))});return true}}var k=b.DOM;b.mix(k,{hasClass:function(d,g){if(!g||!d||!d.className)return false;return(" "+d.className+" ").indexOf(" "+g+" ")>-1},addClass:function(d,g){if(!o(d,s,k,g))if(g&&d)m(d,g)||(d.className+=" "+g)},removeClass:function(d,g){if(!o(d,h,k,g))if(m(d,g)){d.className=(" "+d.className+" ").replace(" "+g+" "," ");m(d,g)&&h(d,g)}},replaceClass:function(d,
g,p){h(d,g);s(d,p)},toggleClass:function(d,g,p){o(d,k.toggleClass,k,g,p)||((p!==n?p:!m(d,g))?s(d,g):h(d,g))}});var m=k.hasClass,s=k.addClass,h=k.removeClass});
KISSY.add("event",function(b,n){function o(i,t,e,r){if(b.isArray(t)){b.each(t,function(u){j[i](u,e,r)});return true}if((e=b.trim(e))&&e.indexOf(c)>0){b.each(e.split(c),function(u){j[i](t,u,r)});return true}}function k(i){var t=-1;if(i.nodeType===3||i.nodeType===8)return t;return t=i.nodeType?h.attr(i,a):i.isCustomEventTarget?i.eventTargetId:i[a]}function m(i,t){if(i.nodeType)h.attr(i,a,t);else if(i.isCustomEventTarget)i.eventTargetId=t;else try{i[a]=t}catch(e){b.error(e)}}function s(i){if(i.nodeType)h.removeAttr(i,
a);else if(i.isCustomEventTarget)i.eventTargetId=n;else i[a]=n}var h=b.DOM,d=window,g=document,p=g.addEventListener?function(i,t,e){i.addEventListener&&i.addEventListener(t,e,false)}:function(i,t,e){i.attachEvent&&i.attachEvent("on"+t,e)},l=g.removeEventListener?function(i,t,e){i.removeEventListener&&i.removeEventListener(t,e,false)}:function(i,t,e){i.detachEvent&&i.detachEvent("on"+t,e)},a="data-ks-event-guid",c=" ",f=b.now(),q={},j={special:{},add:function(i,t,e){if(!o("add",i,t,e)){var r=k(i),
u,v;if(!(r===-1||!t||!b.isFunction(e))){if(!r){m(i,r=f++);q[r]={target:i,events:{}}}v=q[r].events;u=!i.isCustomEventTarget&&j.special[t]||{};if(!v[t]){r=function(w,x){if(!w||!w.fixed){w=new b.EventObject(i,w,t);b.isPlainObject(x)&&b.mix(w,x)}u.setup&&u.setup(w);return(u.handle||j._handle)(i,w,v[t].listeners)};v[t]={handle:r,listeners:[]};if(i.isCustomEventTarget)i._addEvent&&i._addEvent(t,r);else p(i,u.fix||t,r)}v[t].listeners.push(e)}}},remove:function(i,t,e){if(!o("remove",i,t,e)){var r=k(i),u,
v,w,x,y,z;if(r!==-1)if(r&&(u=q[r]))if(u.target===i){u=u.events||{};if(v=u[t]){w=v.listeners;y=w.length;if(b.isFunction(e)&&y&&b.inArray(e,w)){z=[];for(x=0;x<y;++x)e!==w[x]&&z.push(w[x]);y=z.length}if(e===n||y===0){i.isCustomEventTarget||l(i,t,v.handle);delete q[r].type}}if(t===n||b.isEmptyObject(u)){for(t in u)j.remove(i,t);delete q[r];s(i)}}}},_handle:function(i,t,e){for(var r,u=0,v=e.length;u<v;++u){r=e[u].call(i,t);if(t.isImmediatePropagationStopped)break;r===false&&t.halt()}return r},_getCache:function(i){return q[i]},
_simpleAdd:p,_simpleRemove:l};j.on=j.add;b.Event=j;d.attachEvent&&!d.addEventListener&&d.attachEvent("onunload",function(){var i,t;for(i in q)if(t=q[i].target)try{j.remove(t)}catch(e){}})});
KISSY.add("event-object",function(b,n){function o(s,h,d){this.currentTarget=s;this.originalEvent=h||{};if(h){this.type=h.type;this._fix()}else{this.type=d;this.target=s}this.fixed=true}var k=document,m="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");b.mix(o.prototype,
{_fix:function(){for(var s=this.originalEvent,h=m.length,d;h;){d=m[--h];this[d]=s[d]}if(!this.target)this.target=this.srcElement||k;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===n&&this.clientX!==n){s=k.documentElement;h=k.body;this.pageX=this.clientX+(s&&s.scrollLeft||h&&h.scrollLeft||0)-(s&&s.clientLeft||h&&h.clientLeft||0);this.pageY=this.clientY+
(s&&s.scrollTop||h&&h.scrollTop||0)-(s&&s.clientTop||h&&h.clientTop||0)}if(this.which===n)this.which=this.charCode!==n?this.charCode:this.keyCode;if(this.metaKey===n)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==n)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var s=this.originalEvent;if(s.preventDefault)s.preventDefault();else s.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var s=this.originalEvent;if(s.stopPropagation)s.stopPropagation();
else s.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var s=this.originalEvent;s.stopImmediatePropagation?s.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(s){s?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});b.EventObject=o});
KISSY.add("event-target",function(b,n){var o=b.Event;b.EventTarget={eventTargetId:n,isCustomEventTarget:true,fire:function(k,m){(k=((o._getCache(this.eventTargetId||-1)||{}).events||{})[k])&&b.isFunction(k.handle)&&k.handle(n,m)},on:function(k,m){o.add(this,k,m)},detach:function(k,m){o.remove(this,k,m)}}});
KISSY.add("event-mouseenter",function(b){var n=b.Event;b.UA.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(o){n.special[o.name]={fix:o.fix,setup:function(k){k.type=o.name},handle:function(k,m,s){var h=m.relatedTarget;try{for(;h&&h!==k;)h=h.parentNode;h!==k&&n._handle(k,m,s)}catch(d){}}}})});
KISSY.add("node",function(b){function n(m,s,h){var d;if(!(this instanceof n))return new n(m,s,h);if(!m)return null;if(m.nodeType)d=m;else if(typeof m==="string")d=o.create(m,h);s&&b.error("not implemented");this[0]=d}var o=b.DOM,k=n.prototype;b.each(["attr","removeAttr","css"],function(m){k[m]=function(s,h){var d=this[0];if(h===undefined)return o[m](d,s);else{o[m](d,s,h);return this}}});b.each(["val","text","html"],function(m){k[m]=function(s){var h=this[0];if(s===undefined)return o[m](h);else{o[m](h,
s);return this}}});b.each(["children","siblings","next","prev","parent"],function(m){k[m]=function(){var s=o[m](this[0]);return s?new b[s.length?"NodeList":"Node"](s):null}});b.each(["hasClass","addClass","removeClass","replaceClass","toggleClass"],function(m){k[m]=function(){var s=o[m].apply(o,[this[0]].concat(b.makeArray(arguments)));return typeof s==="boolean"?s:this}});b.mix(k,b.EventTarget);k._addEvent=function(m,s){b.Event._simpleAdd(this[0],m,s)};delete k.fire;b.mix(k,{one:function(m){return b.one(m,
this[0])},all:function(m){return b.all(m,this[0])},appendTo:function(m){if((m=b.get(m))&&m.appendChild)m.appendChild(this[0]);return this}});b.one=function(m,s){return new n(b.get(m,s))};b.Node=n});
KISSY.add("nodelist",function(b){function n(k){if(!(this instanceof n))return new n(k);o.apply(this,k||[])}var o=Array.prototype.push;b.mix(n.prototype,{length:0,each:function(k,m){for(var s=this.length,h=0,d;h<s;++h){d=new b.Node(this[h]);k.call(m||d,d,h,this)}return this}});b.all=function(k,m){return new n(b.query(k,m,true))};b.NodeList=n});
KISSY.add("cookie",function(b){function n(s){return typeof s==="string"&&s!==""}var o=document,k=encodeURIComponent,m=decodeURIComponent;b.Cookie={get:function(s){var h;if(n(s))if(s=o.cookie.match("(?:^| )"+s+"(?:(?:=([^;]*))|;|$)"))h=s[1]?m(s[1]):"";return h},set:function(s,h,d,g,p,l){h=k(h);var a=d;if(typeof a==="number"){a=new Date;a.setTime(a.getTime()+d*864E5)}if(a instanceof Date)h+="; expires="+a.toUTCString();if(n(g))h+="; domain="+g;if(n(p))h+="; path="+p;if(l)h+="; secure";o.cookie=s+"="+
h},remove:function(s){this.set(s,"",0)}}});
KISSY.add("json",function(b){function n(l){return l<10?"0"+l:l}function o(l){s.lastIndex=0;return s.test(l)?'"'+l.replace(s,function(a){var c=g[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+l+'"'}function k(l,a){var c,f,q=h,j,i=a[l];if(i&&typeof i==="object"&&typeof i.toJSON==="function")i=i.toJSON(l);if(typeof p==="function")i=p.call(a,l,i);switch(typeof i){case "string":return o(i);case "number":return isFinite(i)?String(i):"null";case "boolean":case "null":return String(i);
case "object":if(!i)return"null";h+=d;j=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(l=0;l<f;l+=1)j[l]=k(l,i)||"null";a=j.length===0?"[]":h?"[\n"+h+j.join(",\n"+h)+"\n"+q+"]":"["+j.join(",")+"]";h=q;return a}if(p&&typeof p==="object"){f=p.length;for(l=0;l<f;l+=1){c=p[l];if(typeof c==="string")if(a=k(c,i))j.push(o(c)+(h?": ":":")+a)}}else for(c in i)if(Object.hasOwnProperty.call(i,c))if(a=k(c,i))j.push(o(c)+(h?": ":":")+a);a=j.length===0?"{}":h?"{\n"+h+j.join(",\n"+h)+
"\n"+q+"}":"{"+j.join(",")+"}";h=q;return a}}b=b.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,d,g={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;if(typeof b.stringify!=="function")b.stringify=function(l,a,c){var f;d=h="";if(typeof c==="number")for(f=0;f<c;f+=1)d+=" ";else if(typeof c==="string")d=c;if((p=a)&&typeof a!=="function"&&(typeof a!=="object"||typeof a.length!=="number"))throw new Error("JSON.stringify");return k("",{"":l})};
if(typeof b.parse!=="function")b.parse=function(l,a){function c(f,q){var j,i,t=f[q];if(t&&typeof t==="object")for(j in t)if(Object.hasOwnProperty.call(t,j)){i=c(t,j);if(i!==undefined)t[j]=i;else delete t[j]}return a.call(f,q,t)}l=String(l);m.lastIndex=0;if(m.test(l))l=l.replace(m,function(f){return"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){l=eval("("+l+")");return typeof a==="function"?c({"":l},""):l}throw new SyntaxError("JSON.parse");}});
KISSY.add("ajax",function(b){var n=document,o=b.UA;b.Ajax={request:function(){b.error("not implemented")},getScript:function(k,m,s){var h=n.getElementsByTagName("head")[0]||n.documentElement,d=n.createElement("script");d.src=k;if(s)d.charset=s;d.async=true;if(b.isFunction(m))if(o.ie)d.onreadystatechange=function(){var g=d.readyState;if(g==="loaded"||g==="complete"){d.onreadystatechange=null;m()}};else d.onload=m;h.appendChild(d)}}});
KISSY.add("swf-ua",function(b){function n(h){var d=h[0]+".";switch(h[2].toString().length){case 1:d+="00";break;case 2:d+="0";break}return d+h[2]}b=b.UA;var o=0,k;if(b.ie){try{k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");k.AllowScriptAccess="always"}catch(m){if(k!==null)o=6}if(o===0)try{o=n((new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","))}catch(s){}}else if(k=navigator.mimeTypes["application/x-shockwave-flash"])if(k=k.enabledPlugin)o=
n(k.description.replace(/\s[rd]/g,".").replace(/[a-z\s]+/ig,"").split("."));b.flash=parseFloat(o)});
KISSY.add("swf",function(b){function n(l,a,c){var f="ks-swf-"+k++,q=parseFloat(c.version)||m;q=o.flash>=q;var j=o.flash>=8&&c.useExpressInstall&&!q,i=j?d:a;a="YUISwfId="+f+"&YUIBridgeCallback="+g;var t="<object ";this.id=f;n.instances[f]=this;if((l=b.get(l))&&(q||j)&&i){t+='id="'+f+'" ';t+=o.ie?'classid="'+s+'" ':'type="'+h+'" data="'+i+'" ';t+='width="100%" height="100%">';if(o.ie)t+='<param name="movie" value="'+i+'"/>';for(var e in c.fixedAttributes)if(p.hasOwnProperty(e))t+='<param name="'+e+
'" value="'+c.fixedAttributes[e]+'"/>';for(var r in c.flashVars){e=c.flashVars[r];if(typeof e==="string")a+="&"+r+"="+encodeURIComponent(e)}t+='<param name="flashVars" value="'+a+'"/>';t+="</object>";l.innerHTML=t;this.swf=b.get("#"+f)}}var o=b.UA,k=b.now(),m=10.22,s="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",h="application/x-shockwave-flash",d="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+k,g="KISSY.SWF.eventHandler",p={align:"",allowNetworking:"",allowScriptAccess:"",
base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};n.instances=(b.SWF||{}).instances||{};n.eventHandler=function(l,a){n.instances[l]._eventHandler(a)};b.augment(n,b.EventTarget);b.augment(n,{_eventHandler:function(l){var a=l.type;if(a==="log")b.log(l.message);else a&&this.fire(a,l)},callSWF:function(l,a){if(this.swf[l])return this.swf[l].apply(this.swf,a||[])}});b.SWF=n});
KISSY.add("swfstore",function(b,n){function o(d,g,p,l){var a="other",c=m.get(s),f=this;p=(p!==n?p:true)+"";l=(l!==n?l:true)+"";if(k.ie)a="ie";else if(k.gecko)a="gecko";else if(k.webkit)a="webkit";else if(k.opera)a="opera";if(!c||c==="null")m.set(s,c=Math.round(Math.random()*Math.PI*1E5));p={version:9.115,useExpressInstall:false,fixedAttributes:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale"},flashVars:{allowedDomain:h.location.hostname,shareData:p,browser:c,useCompression:l}};g||
(g=(new b.Node('<div style="height:0;width:0;overflow:hidden"></div>')).appendTo(h.body)[0]);f.embeddedSWF=new b.SWF(g,d||"swfstore.swf",p);f.embeddedSWF._eventHandler=function(q){b.SWF.prototype._eventHandler.call(f,q)}}var k=b.UA,m=b.Cookie,s="swfstore",h=document;b.augment(o,b.EventTarget);b.augment(o,{setItem:function(d,g){g=typeof g==="string"?g.replace(/\\/g,"\\\\"):b.JSON.stringify(g)+"";if(d=b.trim(d+""))try{return this.embeddedSWF.callSWF("setItem",[d,g])}catch(p){this.fire("error",{message:p})}}});
b.each(["getValueAt","getNameAt","getValueOf","getItems","getLength","removeItem","removeItemAt","clear","calculateCurrentSize","hasAdequateDimensions","setSize","getModificationDate","displaySettings"],function(d){o.prototype[d]=function(){try{return this.embeddedSWF.callSWF(d,b.makeArray(arguments))}catch(g){this.fire("error",{message:g})}}});b.SWFStore=o});
KISSY.add("datalazyload",function(b,n){function o(a,c){if(!(this instanceof o))return new o(a,c);if(c===n){c=a;a=[d]}b.isArray(a)||(a=[b.get(a)||d]);this.containers=a;this.config=b.merge(p,c||{});this.callbacks={els:[],fns:[]};this._init()}var k=b.DOM,m=b.Event,s=YAHOO.util.Dom,h=window,d=document,g={AUTO:"auto",MANUAL:"manual"},p={mod:g.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"},l=o.prototype;b.mix(l,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function a(){f||(f=setTimeout(function(){c();f=null},100))}function c(){q._loadItems();if(q._getItemsLength()===0){m.remove(h,"scroll",a);m.remove(h,"resize",a)}}var f,q=this;m.on(h,"scroll",a);m.on(h,"resize",function(){q.threshold=q._getThreshold();a()});q._getItemsLength()&&b.ready(function(){c()})},_filterItems:function(){var a=this.containers,c=this.threshold,f=this.config.placeholder,q=this.config.mod===
g.MANUAL,j,i,t,e,r,u,v,w=[],x=[];j=0;for(i=a.length;j<i;++j){t=b.query("img",a[j]);e=0;for(r=t.length;e<r;++e){u=t[e];v=u.getAttribute("data-lazyload-src");if(q){if(v){u.src=f;w.push(u)}}else if(s.getY(u)>c&&!v){u.setAttribute("data-lazyload-src",u.src);u.src=f;w.push(u)}}t=b.query("textarea",a[j]);e=0;for(r=t.length;e<r;++e){u=t[e];k.hasClass(u,"ks-datalazyload")&&x.push(u)}}this.images=w;this.areaes=x},_loadItems:function(){this._loadImgs();this._loadAreaes();this._fireCallbacks()},_loadImgs:function(){var a=
this.images,c=this.threshold+s.getDocumentScrollTop(),f,q,j=[];for(f=0;q=a[f++];)s.getY(q)<=c?this._loadImgSrc(q):j.push(q);this.images=j},_loadImgSrc:function(a,c){c=c||"data-lazyload-src";var f=a.getAttribute(c);if(f&&a.src!=f){a.src=f;a.removeAttribute(c)}},_loadAreaes:function(){var a=this.areaes,c=this.threshold+s.getDocumentScrollTop(),f,q,j,i=[];for(f=0;q=a[f++];){j=q;if(s.getY(j)===n)j=q.parentNode;s.getY(j)<=c?this._loadDataFromArea(q.parentNode,q):i.push(q)}this.areaes=i},_loadDataFromArea:function(a,
c){var f=k.create(c.value);c.style.display="none";c.className="";a.insertBefore(f,c);b.UA.gecko||b.query("script",f).each(function(q){b.globalEval(q.text)})},_fireCallbacks:function(){var a=this.callbacks,c=a.els,f=a.fns,q=this.threshold+s.getDocumentScrollTop(),j,i,t,e=[],r=[];for(j=0;(i=c[j])&&(t=f[j++]);)if(s.getY(i)<=q)t.call(i);else{e.push(i);r.push(t)}a.els=e;a.fns=r},addCallback:function(a,c){if((a=b.get(a))&&typeof c==="function"){this.callbacks.els.push(a);this.callbacks.fns.push(c)}},_getThreshold:function(){var a=
this.config.diff,c=s.getViewportHeight();return a==="default"?2*c:c+a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,c,f){var q=this,j,i;b.isArray(a)||(a=[b.get(a)]);b.each(a,function(t){switch(c){case "textarea-data":if((j=b.get("textarea",t))&&k.hasClass(j,f||"ks-datalazyload-custom"))q._loadDataFromArea(t,j);break;default:i=t.nodeName==="IMG"?[t]:b.query("img",t);t=0;for(var e=i.length;t<e;t++)q._loadImgSrc(i[t],
f||"data-lazyload-src-custom")}})}});b.mix(o,l,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);b.DataLazyload=o});
KISSY.add("suggest",function(b,n){function o(a,c,f){if(!(this instanceof o))return new o(a,c,f);this.textInput=b.get(a);this.dataSource=c;this.JSONDataSource=b.isPlainObject(c)?c:null;this.returnedData=null;this.config=b.merge(l,f||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var k=YAHOO.util.Dom,
m=b.DOM,s=b.Event,h=window,d=document,g=d.getElementsByTagName("head")[0],p=YAHOO.env.ua.ie,l={containerCls:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:p===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};b.mix(o.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var a=this;a.textInput.setAttribute("autocomplete",
"off");s.on(a.textInput,"blur",function(){a.stop();a.hide()});a.config.autoFocus&&a.textInput.focus();var c=0;s.on(a.textInput,"keydown",function(f){f=f.keyCode;switch(f){case 27:a.hide();a.textInput.value=a.query;a.query.length===0&&a.textInput.blur();break;case 13:a.textInput.blur();a._onKeyboardSelecting&&a.textInput.value==a._getSelectedItemKey()&&a.fire("itemSelect");a._submitForm();break;case 40:case 38:if(c++==0){a._isRunning&&a.stop();a._onKeyboardSelecting=true;a.selectItem(f===40)}else if(c==
3)c=0;break}if(f!=40&&f!=38){a._isRunning||a.start();a._onKeyboardSelecting=false}});s.on(a.textInput,"keyup",function(){c=0})},_initContainer:function(){var a=d.createElement("div"),c=this.config.containerCls;a.className="ks-suggest-container";if(c)a.className+=" "+c;a.style.position="absolute";a.style.visibility="hidden";this.container=a;this._setContainerRegion();this._initContainerEvent();d.body.insertBefore(a,d.body.firstChild)},_setContainerRegion:function(){var a=k.getRegion(this.textInput),
c=a.left,f=a.right-c-2;f=f>0?f:0;if(d.documentMode===7&&(p===7||p===8))c-=2;else b.UA.gecko&&c++;this.container.style.left=c+"px";this.container.style.top=a.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?f+"px":this.config.containerWidth},_initContainerEvent:function(){var a=this;s.on(a.container,"mousemove",function(f){f=f.target;if(f.nodeName!="LI")f=k.getAncestorByTagName(f,"li");if(k.isAncestor(a.container,f))if(f!=a.selectedItem){a._removeSelectedItem();a._setSelectedItem(f)}});
var c=null;a.container.onmousedown=function(f){c=f.target;a.textInput.onbeforedeactivate=function(){h.event.returnValue=false;a.textInput.onbeforedeactivate=null};return false};s.on(a.container,"mouseup",function(f){if(a._isInContainer([f.pageX,f.pageY])){f=f.target;if(f==c)if(f.className=="ks-suggest-close-btn")a.hide();else{if(f.nodeName!="LI")f=k.getAncestorByTagName(f,"li");if(k.isAncestor(a.container,f)){a._updateInputFromSelectItem(f);a.fire("itemSelect");a.textInput.blur();a._submitForm()}}}})},
_submitForm:function(){if(this.config.submitFormOnClickSelect){var a=this.textInput.form;if(a){if(d.createEvent){var c=d.createEvent("MouseEvents");c.initEvent("submit",true,false);a.dispatchEvent(c)}else d.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_isInContainer:function(a){var c=k.getRegion(this.container);return a[0]>=c.left&&a[0]<=c.right&&a[1]>=c.top&&a[1]<=c.bottom},_initShim:function(){var a=d.createElement("iframe");a.src="about:blank";a.className="ks-suggest-shim";a.style.position=
"absolute";a.style.visibility="hidden";a.style.border="none";this.container.shim=a;this._setShimRegion();d.body.insertBefore(a,d.body.firstChild)},_setShimRegion:function(){var a=this.container,c=a.shim;if(c){c.style.left=parseInt(a.style.left)-2+"px";c.style.top=a.style.top;c.style.width=parseInt(a.style.width)+2+"px"}},_initStyle:function(){b.get("#ks-suggest-style")||m.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var a=this,c;s.on(h,"resize",function(){c&&clearTimeout(c);c=setTimeout(function(){a._setContainerRegion();a._setShimRegion()},50)})},start:function(){var a=this;o.focusInstance=a;a._timer=setTimeout(function(){a.updateContent();a._timer=setTimeout(arguments.callee,a.config.timerDelay)},a.config.timerDelay);a._isRunning=true},stop:function(){o.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var a=
this.container,c=a.shim;a.style.visibility="";if(c){if(!c.style.height){a=k.getRegion(a);c.style.height=a.bottom-a.top-2+"px"}c.style.visibility=""}}},hide:function(){if(this.isVisible()){var a=this.container,c=a.shim;if(c)c.style.visibility="hidden";a.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var a=this.query;if(b.trim(a).length)if(this._dataCache[a]!==n){this.returnedData=
"using cache";this._fillContainer(this._dataCache[a]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[a]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var a=this;if(!p)a.dataScript=null;if(!a.dataScript){var c=d.createElement("script");c.charset="utf-8";g.insertBefore(c,g.firstChild);a.dataScript=c;if(!p){var f=(new Date).getTime();a._latestScriptTime=
f;c.setAttribute("time",f);s.on(c,"load",function(){a._scriptDataIsOut=c.getAttribute("time")!=a._latestScriptTime})}}a.queryParams="q="+encodeURIComponent(a.query)+"&code=utf-8&callback=g_ks_suggest_callback";a.fire("dataRequest");a.dataScript.src=a.dataSource+"?"+a.queryParams},handleResponse:function(a){if(!this._scriptDataIsOut){this.returnedData=a;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var c="";a=this.returnedData.length;if(a>0){c=d.createElement("ol");for(var f=
0;f<a;++f){var q=this.returnedData[f],j=this.formatItem(q.key,q.result);j.setAttribute("key",q.key);m.addClass(j,f%2?"even":"odd");c.appendChild(j)}c=c}this._fillContainer(c);a>0&&this.appendBottom();b.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(a){var c=[];if(!a)return c;if(b.isArray(a.result))a=a.result;var f=a.length;if(!f)return c;for(var q,j=0;j<f;++j){q=a[j];c[j]=typeof q==="string"?{key:q}:
b.isArray(q)&&q.length>=2?{key:q[0],result:q[1]}:q}return c},formatItem:function(a,c){var f=d.createElement("li"),q=d.createElement("span");q.className="ks-suggest-key";q.appendChild(d.createTextNode(a));f.appendChild(q);if(c!==n){a=this.config.resultFormat.replace("%result%",c);if(b.trim(a)){c=d.createElement("span");c.className="ks-suggest-result";c.appendChild(d.createTextNode(a));f.appendChild(c)}}return f},appendBottom:function(){var a=d.createElement("div");a.className="ks-suggest-bottom";if(this.config.showCloseBtn){var c=
d.createElement("a");c.href="javascript: void(0)";c.setAttribute("target","_self");c.className="ks-suggest-close-btn";c.appendChild(d.createTextNode(this.config.closeBtnText));a.appendChild(c)}b.trim(a.innerHTML)&&this.container.appendChild(a)},_fillContainer:function(a){if(a.nodeType==1){this.container.innerHTML="";this.container.appendChild(a)}else this.container.innerHTML=a;this.selectedItem=null},_displayContainer:function(){b.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(a){var c=
this.container.getElementsByTagName("li");if(c.length!=0)if(this.isVisible()){if(this.selectedItem){a=k[a?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!a)this.textInput.value=this.query}else a=c[a?0:c.length-1];this._removeSelectedItem();if(a){this._setSelectedItem(a);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){m.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(a){m.addClass(a,"selected");this.selectedItem=
a},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});b.mix(o.prototype,b.EventTarget);h.g_ks_suggest_callback=function(a){o.focusInstance&&setTimeout(function(){o.focusInstance.handleResponse(a)},0)};b.Suggest=o});
KISSY.add("switchable",function(b,n){function o(d,g){g=g||{};if(!("markupType"in g))if(g.panelCls)g.markupType=1;else if(g.panels)g.markupType=2;g=b.merge(o.Config,g);this.container=b.get(d);this.config=g;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===n)this.activeIndex=g.activeIndex;this._init()}var k=b.DOM,m=b.Event,s=document,h=o.prototype;o.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",
triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};o.Plugins=[];b.mix(h,{_init:function(){var d=this,g=d.config;d.panels.length===0&&d._parseMarkup();g.hasTriggers&&d._bindTriggers();b.each(o.Plugins,function(p){p.init&&p.init(d)})},_parseMarkup:function(){var d=this.container,g=this.config,p=g.hasTriggers,l,a=[],c=[];switch(g.markupType){case 0:if(l=b.get("."+g.navCls,d))a=k.children(l);l=b.get("."+g.contentCls,d);c=k.children(l);
break;case 1:a=b.query("."+g.triggerCls,d);c=b.query("."+g.panelCls,d);break;case 2:a=g.triggers;c=g.panels;break}d=c.length;this.length=d/g.steps;if(p&&d>0&&a.length===0)a=this._generateTriggersMarkup(this.length);this.triggers=b.makeArray(a);this.panels=b.makeArray(c);this.content=l||c[0].parentNode},_generateTriggersMarkup:function(d){var g=this.config,p=s.createElement("UL"),l,a;p.className=g.navCls;for(a=0;a<d;a++){l=s.createElement("LI");if(a===this.activeIndex)l.className=g.activeTriggerCls;
l.innerHTML=a+1;p.appendChild(l)}this.container.appendChild(p);return k.children(p)},_bindTriggers:function(){var d=this,g=d.config,p=d.triggers,l,a,c=p.length;for(a=0;a<c;a++)(function(f){l=p[f];m.on(l,"click focus",function(){d._onFocusTrigger(f)});if(g.triggerType==="mouse"){m.on(l,"mouseenter",function(){d._onMouseEnterTrigger(f)});m.on(l,"mouseleave",function(){d._onMouseLeaveTrigger(f)})}})(a)},_onFocusTrigger:function(d){if(this.activeIndex!==d){this.switchTimer&&this.switchTimer.cancel();
this.switchTo(d)}},_onMouseEnterTrigger:function(d){var g=this;if(g.activeIndex!==d)g.switchTimer=b.later(function(){g.switchTo(d)},g.config.delay*1E3)},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(d,g){var p=this.config,l=this.triggers,a=this.panels,c=this.activeIndex,f=p.steps,q=c*f,j=d*f;if(d===c)return this;if(this.fire("beforeSwitch",{toIndex:d})===false)return this;if(p.hasTriggers)this._switchTrigger(c>-1?l[c]:null,l[d]);if(g===n)g=d>c?"forward":
"forward";this._switchView(a.slice(q,q+f),a.slice(j,j+f),d,g);this.activeIndex=d;return this},_switchTrigger:function(d,g){var p=this.config.activeTriggerCls;d&&k.removeClass(d,p);k.addClass(g,p)},_switchView:function(d,g){k.css(d,"display","none");k.css(g,"display","block");this.fire("switch")},prev:function(){var d=this.activeIndex;this.switchTo(d>0?d-1:this.length-1,"backward")},next:function(){var d=this.activeIndex;this.switchTo(d<this.length-1?d+1:0,"forward")}});b.mix(h,b.EventTarget);b.Switchable=
o});
KISSY.add("switchable-autoplay",function(b){var n=b.Event,o=b.Switchable;b.mix(o.Config,{autoplay:false,interval:5,pauseOnHover:true});o.Plugins.push({name:"autoplay",init:function(k){var m=k.config;if(m.autoplay){if(m.pauseOnHover){n.on(k.container,"mouseenter",function(){k.paused=true});n.on(k.container,"mouseleave",function(){setTimeout(function(){k.paused=false},m.interval*1E3)})}k.autoplayTimer=b.later(function(){k.paused||k.switchTo(k.activeIndex<k.length-1?k.activeIndex+1:0)},m.interval*1E3,
true)}}})});
KISSY.add("switchable-effect",function(b){var n=YAHOO.util,o=b.DOM,k=n.Dom,m=b.Switchable,s;b.mix(m.Config,{effect:"none",duration:0.5,easing:n.Easing.easeNone});m.Effects={none:function(h,d,g){o.css(h,"display","none");o.css(d,"display","block");g()},fade:function(h,d,g){h.length!==1&&b.error("fade effect only supports steps == 1.");var p=this,l=p.config,a=h[0],c=d[0];p.anim&&p.anim.stop();k.setStyle(c,"opacity",1);p.anim=new n.Anim(a,{opacity:{to:0}},l.duration,l.easing);p.anim.onComplete.subscribe(function(){p.anim=null;
k.setStyle(c,"z-index",9);k.setStyle(a,"z-index",1);g()});p.anim.animate()},scroll:function(h,d,g,p){var l=this;h=l.config;d=h.effect==="scrollx";var a={};a[d?"left":"top"]={to:-(l.viewSize[d?0:1]*p)};l.anim&&l.anim.stop();l.anim=new n.Anim(l.content,a,h.duration,h.easing);l.anim.onComplete.subscribe(function(){l.anim=null;g()});l.anim.animate()}};s=m.Effects;s.scrollx=s.scrolly=s.scroll;m.Plugins.push({name:"effect",init:function(h){var d=h.config,g=d.effect,p=h.panels,l=d.steps,a=h.activeIndex*
l,c=a+l-1,f=p.length;h.viewSize=[d.viewSize[0]||p[0].offsetWidth*l,d.viewSize[0]||p[0].offsetHeight*l];if(g!=="none"){for(d=0;d<f;d++)p[d].style.display="block";switch(g){case "scrollx":case "scrolly":h.content.style.position="absolute";h.content.parentNode.style.position="relative";if(g==="scrollx"){k.setStyle(p,"float","left");h.content.style.width=h.viewSize[0]*(f/l)+"px"}break;case "fade":for(d=0;d<f;d++){k.setStyle(p[d],"opacity",d>=a&&d<=c?1:0);p[d].style.position="absolute";p[d].style.zIndex=
d>=a&&d<=c?9:1}break}}}});b.mix(m.prototype,{_switchView:function(h,d,g,p){var l=this,a=l.config.effect;(b.isFunction(a)?a:s[a]).call(l,h,d,function(){l.fire("switch")},g,p)}})});
KISSY.add("switchable-circular",function(b){function n(f,q,j,i,t){var e=this;f=e.config;q=e.length;var r=e.activeIndex,u=f.scrollType===a,v=u?s:h,w=e.viewSize[u?0:1];u=-w*i;var x={},y,z=t===l;if(y=z&&r===0&&i===q-1||t===p&&r===q-1&&i===0)u=o.call(e,e.panels,i,z,v,w);x[v]={to:u};e.anim&&e.anim.stop();e.anim=new YAHOO.util.Anim(e.content,x,f.duration,f.easing);e.anim.onComplete.subscribe(function(){y&&k.call(e,e.panels,i,z,v,w);e.anim=null;j()});e.anim.animate()}function o(f,q,j,i,t){var e=this.config.steps;
q=this.length;var r=j?q-1:0,u=(r+1)*e;for(e=r*e;e<u;e++){f[e].style.position=m;f[e].style[i]=(j?"-":g)+t*q+d}return j?t:-t*q}function k(f,q,j,i,t){var e=this.config.steps;q=this.length;var r=j?q-1:0,u=(r+1)*e;for(e=r*e;e<u;e++){f[e].style.position=g;f[e].style[i]=g}this.content.style[i]=j?-t*(q-1)+d:g}var m="relative",s="left",h="top",d="px",g="",p="forward",l="backward",a="scrollx",c=b.Switchable;b.mix(c.Config,{circular:false});c.Plugins.push({name:"circular",init:function(f){f=f.config;if(f.circular&&
(f.effect===a||f.effect==="scrolly")){f.scrollType=f.effect;f.effect=n}}})});
KISSY.add("switchable-lazyload",function(b){var n=b.DOM,o="beforeSwitch",k="img-src",m="textarea-data",s={},h=b.Switchable,d=b.DataLazyload;s[k]="data-lazyload-src-custom";s[m]="ks-datalazyload-custom";b.mix(h.Config,{lazyDataType:"",lazyDataFlag:""});h.Plugins.push({name:"autoplay",init:function(g){function p(q){var j=a.steps;q=q.toIndex*j;d.loadCustomLazyData(g.panels.slice(q,q+j),c,f);l()&&g.detach(o,p)}function l(){var q,j,i;if(c===k){q=b.query("img",g.container);j=0;for(i=q.length;j<i;j++)if(n.attr(q[j],
f))return false}else if(c===m){q=b.query("textarea",g.container);j=0;for(i=q.length;j<i;j++)if(n.hasClass(q[j],f))return false}return true}var a=g.config,c=a.lazyDataType,f=a.lazyDataFlag||s[c];!d||!c||!f||g.on(o,p)}})});KISSY.add("tabs",function(b){function n(o,k){if(!(this instanceof n))return new n(o,k);n.superclass.constructor.call(this,o,k)}b.extend(n,b.Switchable);b.Tabs=n});
KISSY.add("slide",function(b){function n(k,m){if(!(this instanceof n))return new n(k,m);m=b.merge(o,m||{});n.superclass.constructor.call(this,k,m)}var o={autoplay:true,circular:true};b.extend(n,b.Switchable);b.Slide=n});KISSY.add("carousel",function(b){function n(k,m){if(!(this instanceof n))return new n(k,m);m=b.merge(o,m||{});n.superclass.constructor.call(this,k,m)}var o={circular:true};b.extend(n,b.Switchable);b.Carousel=n});
KISSY.add("coversflow",function(b){function n(h,d){if(!(this instanceof n))return new n(h,d);d=b.merge(s,d||{});n.superclass.constructor.call(this,h,d);this._initFlow()}var o=YAHOO.util.Dom,k=b.DOM,m=b.Event,s={flowLength:4,aspectRatio:1.964,step:150,width:500,height:350,offset:0,animSpeed:50,autoSwitchToMiddle:true,hasTriggers:false,circular:true};b.extend(n,b.Switchable);b.augment(n,{_initFlow:function(){var h=this,d=h.config;h.busy=false;h.curFrame=0;h.targetFrame=0;h.zIndex=h.length;h.region=
o.getRegion(h.container);h.maxFocus=d.flowLength*d.step;h.maxHeight=h.region.height+Math.round(h.region.height/d.aspectRatio);h.middleLine=h.region.width/2;h.on("beforeSwitch",function(g){g=g.toIndex;h.perIndex=g;h.targetFrame=-g*h.config.step;return!h.busy});d.autoSwitchToMiddle?h.switchTo(Math.floor(h.length/2)):h._frame(0)},_switchView:function(){var h=this.config;if(this.targetFrame<this.curFrame-1||this.targetFrame>this.curFrame+1){this._frame(this.curFrame+(this.targetFrame-this.curFrame)/3);
this._timer=b.later(this._switchView,h.animSpeed,false,this);this.busy=true}else{this.fire("finished");this.busy=false}},_frame:function(h){var d=this.config,g=this.panels,p=this.region,l=this.middleLine-d.offset,a;this.curFrame=h;for(var c=0,f=g.length;c<f;c++){g=this.panels[c];a=c*-d.step;if(a+this.maxFocus<this.targetFrame||a-this.maxFocus>this.targetFrame)k.css(g,"visibility","hidden");else{a=Math.sqrt(1E4+h*h)+100;var q=h/a*l+l,j=d.width/d.height*90/a*l,i=0;if(j>this.maxHeight)j=this.maxHeight;
i=d.width/d.height*j;k.css(g,"left",q-72/a*l+"px");if(j&&i){k.css(g,"height",j+"px");k.css(g,"width",i+"px");k.css(g,"top",p.height/2-j/2+"px")}k.css(g,"zIndex",this.zIndex*100-Math.ceil(a));k.css(g,"visibility","visible");this._bindPanel(g,c)}this.fire("tween",{panel:g,index:c});h+=d.step}},_bindPanel:function(h,d){var g=this;m.remove(h);g.perIndex===d?m.add(h,"click",function(){return g.fire("onCurrent",{panel:h,index:d})}):m.add(h,"click",function(p){p.preventDefault();g.switchTo(d)})}});b.CoversFlow=
n});
