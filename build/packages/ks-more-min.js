/*
Copyright 2010, KISSY UI Library v1.0.5
MIT Licensed
build: 671 May 23 14:24
*/
KISSY.add("cookie",function(g){function s(p){return typeof p==="string"&&p!==""}var t=document,m=encodeURIComponent,n=decodeURIComponent;g.Cookie={get:function(p){var q;if(s(p))if(p=t.cookie.match("(?:^| )"+p+"(?:(?:=([^;]*))|;|$)"))q=p[1]?n(p[1]):"";return q},set:function(p,q,d,i,v,k){q=m(q);var b=d;if(typeof b==="number"){b=new Date;b.setTime(b.getTime()+d*864E5)}if(b instanceof Date)q+="; expires="+b.toUTCString();if(s(i))q+="; domain="+i;if(s(v))q+="; path="+v;if(k)q+="; secure";t.cookie=p+"="+
q},remove:function(p){this.set(p,"",0)}}});
KISSY.add("json",function(g){function s(k){return k<10?"0"+k:k}function t(k){p.lastIndex=0;return p.test(k)?'"'+k.replace(p,function(b){var f=i[b];return typeof f==="string"?f:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+k+'"'}function m(k,b){var f,h,o=q,u,a=b[k];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(k);if(typeof v==="function")a=v.call(b,k,a);switch(typeof a){case "string":return t(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";q+=d;u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){h=a.length;for(k=0;k<h;k+=1)u[k]=m(k,a)||"null";b=u.length===0?"[]":q?"[\n"+q+u.join(",\n"+q)+"\n"+o+"]":"["+u.join(",")+"]";q=o;return b}if(v&&typeof v==="object"){h=v.length;for(k=0;k<h;k+=1){f=v[k];if(typeof f==="string")if(b=m(f,a))u.push(t(f)+(q?": ":":")+b)}}else for(f in a)if(Object.hasOwnProperty.call(a,f))if(b=m(f,a))u.push(t(f)+(q?": ":":")+b);b=u.length===0?"{}":q?"{\n"+q+u.join(",\n"+q)+
"\n"+o+"}":"{"+u.join(",")+"}";q=o;return b}}g=g.JSON=window.JSON||{};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var n=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q,d,i={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},v;if(typeof g.stringify!=="function")g.stringify=function(k,b,f){var h;d=q="";if(typeof f==="number")for(h=0;h<f;h+=1)d+=" ";else if(typeof f==="string")d=f;if((v=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw new Error("JSON.stringify");return m("",{"":k})};
if(typeof g.parse!=="function")g.parse=function(k,b){function f(h,o){var u,a,c=h[o];if(c&&typeof c==="object")for(u in c)if(Object.hasOwnProperty.call(c,u)){a=f(c,u);if(a!==undefined)c[u]=a;else delete c[u]}return b.call(h,o,c)}k=String(k);n.lastIndex=0;if(n.test(k))k=k.replace(n,function(h){return"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(k.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){k=eval("("+k+")");return typeof b==="function"?f({"":k},""):k}throw new SyntaxError("JSON.parse");}});
KISSY.add("ajax",function(g){var s=document,t=g.UA;g.Ajax={request:function(){g.error("not implemented")},getScript:function(m,n,p){var q=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");d.src=m;if(p)d.charset=p;d.async=true;if(g.isFunction(n))if(t.ie)d.onreadystatechange=function(){var i=d.readyState;if(i==="loaded"||i==="complete"){d.onreadystatechange=null;n()}};else d.onload=n;q.appendChild(d)}}});
(function(){function g(a,c,e,j,l,r){l=0;for(var x=j.length;l<x;l++){var w=j[l];if(w){w=w[a];for(var y=false;w;){if(w.sizcache===e){y=j[w.sizset];break}if(w.nodeType===1&&!r){w.sizcache=e;w.sizset=l}if(w.nodeName.toLowerCase()===c){y=w;break}w=w[a]}j[l]=y}}}function s(a,c,e,j,l,r){l=0;for(var x=j.length;l<x;l++){var w=j[l];if(w){w=w[a];for(var y=false;w;){if(w.sizcache===e){y=j[w.sizset];break}if(w.nodeType===1){if(!r){w.sizcache=e;w.sizset=l}if(typeof c!=="string"){if(w===c){y=true;break}}else if(d.filter(c,
[w]).length>0){y=w;break}}w=w[a]}j[l]=y}}}var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,m=0,n=Object.prototype.toString,p=false,q=true;[0,0].sort(function(){q=false;return 0});var d=function(a,c,e,j){e=e||[];var l=c=c||document;if(c.nodeType!==1&&c.nodeType!==9)return[];if(!a||typeof a!=="string")return e;var r=[],x,w,y,A,B=true,D=d.isXML(c),C=a,z;do{t.exec("");if(x=t.exec(C)){C=x[3];r.push(x[1]);if(x[2]){A=
x[3];break}}}while(x);if(r.length>1&&v.exec(a))if(r.length===2&&i.relative[r[0]])w=u(r[0]+r[1],c);else for(w=i.relative[r[0]]?[c]:d(r.shift(),c);r.length;){a=r.shift();if(i.relative[a])a+=r.shift();w=u(a,w)}else{if(!j&&r.length>1&&c.nodeType===9&&!D&&i.match.ID.test(r[0])&&!i.match.ID.test(r[r.length-1])){x=d.find(r.shift(),c,D);c=x.expr?d.filter(x.expr,x.set)[0]:x.set[0]}if(c){x=j?{expr:r.pop(),set:f(j)}:d.find(r.pop(),r.length===1&&(r[0]==="~"||r[0]==="+")&&c.parentNode?c.parentNode:c,D);w=x.expr?
d.filter(x.expr,x.set):x.set;if(r.length>0)y=f(w);else B=false;for(;r.length;){x=z=r.pop();if(i.relative[z])x=r.pop();else z="";if(x==null)x=c;i.relative[z](y,x,D)}}else y=[]}y||(y=w);y||d.error(z||a);if(n.call(y)==="[object Array]")if(B)if(c&&c.nodeType===1)for(a=0;y[a]!=null;a++){if(y[a]&&(y[a]===true||y[a].nodeType===1&&d.contains(c,y[a])))e.push(w[a])}else for(a=0;y[a]!=null;a++)y[a]&&y[a].nodeType===1&&e.push(w[a]);else e.push.apply(e,y);else f(y,e);if(A){d(A,l,e,j);d.uniqueSort(e)}return e};
d.uniqueSort=function(a){if(o){p=q;a.sort(o);if(p)for(var c=1;c<a.length;c++)a[c]===a[c-1]&&a.splice(c--,1)}return a};d.matches=function(a,c){return d(a,null,null,c)};d.find=function(a,c,e){var j;if(!a)return[];for(var l=0,r=i.order.length;l<r;l++){var x=i.order[l],w;if(w=i.leftMatch[x].exec(a)){var y=w[1];w.splice(1,1);if(y.substr(y.length-1)!=="\\"){w[1]=(w[1]||"").replace(/\\/g,"");j=i.find[x](w,c,e);if(j!=null){a=a.replace(i.match[x],"");break}}}}j||(j=c.getElementsByTagName("*"));return{set:j,
expr:a}};d.filter=function(a,c,e,j){for(var l=a,r=[],x=c,w,y,A=c&&c[0]&&d.isXML(c[0]);a&&c.length;){for(var B in i.filter)if((w=i.leftMatch[B].exec(a))!=null&&w[2]){var D=i.filter[B],C,z;z=w[1];y=false;w.splice(1,1);if(z.substr(z.length-1)!=="\\"){if(x===r)r=[];if(i.preFilter[B])if(w=i.preFilter[B](w,x,e,r,j,A)){if(w===true)continue}else y=C=true;if(w)for(var E=0;(z=x[E])!=null;E++)if(z){C=D(z,w,E,x);var F=j^!!C;if(e&&C!=null)if(F)y=true;else x[E]=false;else if(F){r.push(z);y=true}}if(C!==undefined){e||
(x=r);a=a.replace(i.match[B],"");if(!y)return[];break}}}if(a===l)if(y==null)d.error(a);else break;l=a}return x};d.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var i=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var e=typeof c==="string",j=e&&!/\W/.test(c);e=e&&!j;if(j)c=c.toLowerCase();j=0;for(var l=a.length,r;j<l;j++)if(r=a[j]){for(;(r=r.previousSibling)&&r.nodeType!==1;);a[j]=e||r&&r.nodeName.toLowerCase()===
c?r||false:r===c}e&&d.filter(c,a,true)},">":function(a,c){var e=typeof c==="string",j,l=0,r=a.length;if(e&&!/\W/.test(c))for(c=c.toLowerCase();l<r;l++){if(j=a[l]){e=j.parentNode;a[l]=e.nodeName.toLowerCase()===c?e:false}}else{for(;l<r;l++)if(j=a[l])a[l]=e?j.parentNode:j.parentNode===c;e&&d.filter(c,a,true)}},"":function(a,c,e){var j=m++,l=s,r;if(typeof c==="string"&&!/\W/.test(c)){r=c=c.toLowerCase();l=g}l("parentNode",c,j,a,r,e)},"~":function(a,c,e){var j=m++,l=s,r;if(typeof c==="string"&&!/\W/.test(c)){r=
c=c.toLowerCase();l=g}l("previousSibling",c,j,a,r,e)}},find:{ID:function(a,c,e){if(typeof c.getElementById!=="undefined"&&!e)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if(typeof c.getElementsByName!=="undefined"){var e=[];c=c.getElementsByName(a[1]);for(var j=0,l=c.length;j<l;j++)c[j].getAttribute("name")===a[1]&&e.push(c[j]);return e.length===0?null:e}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,e,j,l,r){a=" "+a[1].replace(/\\/g,"")+" ";
if(r)return a;r=0;for(var x;(x=c[r])!=null;r++)if(x)if(l^(x.className&&(" "+x.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))e||j.push(x);else if(e)c[r]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}a[0]=m++;return a},ATTR:function(a,c,e,j,l,r){c=
a[1].replace(/\\/g,"");if(!r&&i.attrMap[c])a[1]=i.attrMap[c];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,c,e,j,l){if(a[1]==="not")if((t.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=d(a[3],null,null,c);else{a=d.filter(a[3],c,e,true^l);e||j.push.apply(j,a);return false}else if(i.match.POS.test(a[0])||i.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,e){return!!d(e[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return c===0},last:function(a,c,e,j){return c===j.length-1},even:function(a,c){return c%2===0},odd:function(a,c){return c%2===1},lt:function(a,c,e){return c<e[3]-0},gt:function(a,c,e){return c>e[3]-0},nth:function(a,c,e){return e[3]-
0===c},eq:function(a,c,e){return e[3]-0===c}},filter:{PSEUDO:function(a,c,e,j){var l=c[1],r=i.filters[l];if(r)return r(a,e,c,j);else if(l==="contains")return(a.textContent||a.innerText||d.getText([a])||"").indexOf(c[3])>=0;else if(l==="not"){c=c[3];e=0;for(j=c.length;e<j;e++)if(c[e]===a)return false;return true}else d.error("Syntax error, unrecognized expression: "+l)},CHILD:function(a,c){var e=c[1],j=a;switch(e){case "only":case "first":for(;j=j.previousSibling;)if(j.nodeType===1)return false;if(e===
"first")return true;j=a;case "last":for(;j=j.nextSibling;)if(j.nodeType===1)return false;return true;case "nth":e=c[2];var l=c[3];if(e===1&&l===0)return true;c=c[0];var r=a.parentNode;if(r&&(r.sizcache!==c||!a.nodeIndex)){var x=0;for(j=r.firstChild;j;j=j.nextSibling)if(j.nodeType===1)j.nodeIndex=++x;r.sizcache=c}a=a.nodeIndex-l;return e===0?a===0:a%e===0&&a/e>=0}},ID:function(a,c){return a.nodeType===1&&a.getAttribute("id")===c},TAG:function(a,c){return c==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
c},CLASS:function(a,c){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)>-1},ATTR:function(a,c){var e=c[1];a=i.attrHandle[e]?i.attrHandle[e](a):a[e]!=null?a[e]:a.getAttribute(e);e=a+"";var j=c[2];c=c[4];return a==null?j==="!=":j==="="?e===c:j==="*="?e.indexOf(c)>=0:j==="~="?(" "+e+" ").indexOf(c)>=0:!c?e&&a!==false:j==="!="?e!==c:j==="^="?e.indexOf(c)===0:j==="$="?e.substr(e.length-c.length)===c:j==="|="?e===c||e.substr(0,c.length+1)===c+"-":false},POS:function(a,c,e,j){var l=i.setFilters[c[2]];
if(l)return l(a,e,c,j)}}},v=i.match.POS,k=function(a,c){return"\\"+(c-0+1)};for(var b in i.match){i.match[b]=new RegExp(i.match[b].source+/(?![^\[]*\])(?![^\(]*\))/.source);i.leftMatch[b]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[b].source.replace(/\\(\d+)/g,k))}var f=function(a,c){a=Array.prototype.slice.call(a,0);if(c){c.push.apply(c,a);return c}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(h){f=function(a,c){c=c||[];var e=0;if(n.call(a)==="[object Array]")Array.prototype.push.apply(c,
a);else if(typeof a.length==="number")for(var j=a.length;e<j;e++)c.push(a[e]);else for(;a[e];e++)c.push(a[e]);return c}}var o;if(document.documentElement.compareDocumentPosition)o=function(a,c){if(!a.compareDocumentPosition||!c.compareDocumentPosition){if(a==c)p=true;return a.compareDocumentPosition?-1:1}a=a.compareDocumentPosition(c)&4?-1:a===c?0:1;if(a===0)p=true;return a};else if("sourceIndex"in document.documentElement)o=function(a,c){if(!a.sourceIndex||!c.sourceIndex){if(a==c)p=true;return a.sourceIndex?
-1:1}a=a.sourceIndex-c.sourceIndex;if(a===0)p=true;return a};else if(document.createRange)o=function(a,c){if(!a.ownerDocument||!c.ownerDocument){if(a==c)p=true;return a.ownerDocument?-1:1}var e=a.ownerDocument.createRange(),j=c.ownerDocument.createRange();e.setStart(a,0);e.setEnd(a,0);j.setStart(c,0);j.setEnd(c,0);a=e.compareBoundaryPoints(Range.START_TO_END,j);if(a===0)p=true;return a};d.getText=function(a){for(var c="",e,j=0;a[j];j++){e=a[j];if(e.nodeType===3||e.nodeType===4)c+=e.nodeValue;else if(e.nodeType!==
8)c+=d.getText(e.childNodes)}return c};(function(){var a=document.createElement("div"),c="script"+(new Date).getTime();a.innerHTML="<a name='"+c+"'/>";var e=document.documentElement;e.insertBefore(a,e.firstChild);if(document.getElementById(c)){i.find.ID=function(j,l,r){if(typeof l.getElementById!=="undefined"&&!r)return(l=l.getElementById(j[1]))?l.id===j[1]||typeof l.getAttributeNode!=="undefined"&&l.getAttributeNode("id").nodeValue===j[1]?[l]:undefined:[]};i.filter.ID=function(j,l){var r=typeof j.getAttributeNode!==
"undefined"&&j.getAttributeNode("id");return j.nodeType===1&&r&&r.nodeValue===l}}e.removeChild(a);e=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)i.find.TAG=function(c,e){e=e.getElementsByTagName(c[1]);if(c[1]==="*"){c=[];for(var j=0;e[j];j++)e[j].nodeType===1&&c.push(e[j]);e=c}return e};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")i.attrHandle.href=function(c){return c.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=d,c=document.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!(c.querySelectorAll&&c.querySelectorAll(".TEST").length===0)){d=function(j,l,r,x){l=l||document;if(!x&&l.nodeType===9&&!d.isXML(l))try{return f(l.querySelectorAll(j),r)}catch(w){}return a(j,l,r,x)};for(var e in a)d[e]=a[e];c=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){i.order.splice(1,0,"CLASS");i.find.CLASS=function(c,e,j){if(typeof e.getElementsByClassName!=="undefined"&&!j)return e.getElementsByClassName(c[1])};a=null}}})();d.contains=document.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&16)}:function(a,c){return a!==c&&(a.contains?a.contains(c):true)};d.isXML=function(a){return(a=(a?
a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var u=function(a,c){var e=[],j="",l;for(c=c.nodeType?[c]:c;l=i.match.PSEUDO.exec(a);){j+=l[0];a=a.replace(i.match.PSEUDO,"")}a=i.relative[a]?a+"*":a;l=0;for(var r=c.length;l<r;l++)d(a,c[l],e);return d.filter(j,e)};KISSY.externalSelector=d})();
KISSY.add("node",function(g){function s(n,p,q){var d;if(!(this instanceof s))return new s(n,p,q);if(!n)return null;if(n.nodeType)d=n;else if(typeof n==="string")d=t.create(n,q);p&&g.error("not implemented");this[0]=d}var t=g.DOM,m=s.prototype;g.each(["attr","removeAttr","css"],function(n){m[n]=function(p,q){var d=this[0];if(q===undefined)return t[n](d,p);else{t[n](d,p,q);return this}}});g.each(["val","text","html"],function(n){m[n]=function(p){var q=this[0];if(p===undefined)return t[n](q);else{t[n](q,
p);return this}}});g.each(["children","siblings","next","prev","parent"],function(n){m[n]=function(){var p=t[n](this[0]);return p?new g[p.length?"NodeList":"Node"](p):null}});g.each(["hasClass","addClass","removeClass","replaceClass","toggleClass"],function(n){m[n]=function(){var p=t[n].apply(t,[this[0]].concat(g.makeArray(arguments)));return typeof p==="boolean"?p:this}});g.mix(m,g.EventTarget);m._addEvent=function(n,p){g.Event._simpleAdd(this[0],n,p)};delete m.fire;g.mix(m,{one:function(n){return g.one(n,
this[0])},all:function(n){return g.all(n,this[0])},appendTo:function(n){if((n=g.get(n))&&n.appendChild)n.appendChild(this[0]);return this}});g.one=function(n,p){return new s(g.get(n,p))};g.Node=s});
KISSY.add("nodelist",function(g){function s(m){if(!(this instanceof s))return new s(m);t.apply(this,m||[])}var t=Array.prototype.push;g.mix(s.prototype,{length:0,each:function(m,n){for(var p=this.length,q=0,d;q<p;++q){d=new g.Node(this[q]);m.call(n||d,d,q,this)}return this}});g.all=function(m,n){return new s(g.query(m,n,true))};g.NodeList=s});
KISSY.add("swf-ua",function(g){function s(q){var d=q[0]+".";switch(q[2].toString().length){case 1:d+="00";break;case 2:d+="0";break}return d+q[2]}g=g.UA;var t=0,m;if(g.ie){try{m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");m.AllowScriptAccess="always"}catch(n){if(m!==null)t=6}if(t===0)try{t=s((new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","))}catch(p){}}else if(m=navigator.mimeTypes["application/x-shockwave-flash"])if(m=m.enabledPlugin)t=
s(m.description.replace(/\s[rd]/g,".").replace(/[a-z\s]+/ig,"").split("."));g.flash=parseFloat(t)});
KISSY.add("swf",function(g){function s(k,b,f){var h="ks-swf-"+m++,o=parseFloat(f.version)||n;o=t.flash>=o;var u=t.flash>=8&&f.useExpressInstall&&!o,a=u?d:b;b="YUISwfId="+h+"&YUIBridgeCallback="+i;var c="<object ";this.id=h;s.instances[h]=this;if((k=g.get(k))&&(o||u)&&a){c+='id="'+h+'" ';c+=t.ie?'classid="'+p+'" ':'type="'+q+'" data="'+a+'" ';c+='width="100%" height="100%">';if(t.ie)c+='<param name="movie" value="'+a+'"/>';for(var e in f.fixedAttributes)if(v.hasOwnProperty(e))c+='<param name="'+e+
'" value="'+f.fixedAttributes[e]+'"/>';for(var j in f.flashVars){e=f.flashVars[j];if(typeof e==="string")b+="&"+j+"="+encodeURIComponent(e)}c+='<param name="flashVars" value="'+b+'"/>';c+="</object>";k.innerHTML=c;this.swf=g.get("#"+h)}}var t=g.UA,m=g.now(),n=10.22,p="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",q="application/x-shockwave-flash",d="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+m,i="KISSY.SWF.eventHandler",v={align:"",allowNetworking:"",allowScriptAccess:"",
base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};s.instances=(g.SWF||{}).instances||{};s.eventHandler=function(k,b){s.instances[k]._eventHandler(b)};g.augment(s,g.EventTarget);g.augment(s,{_eventHandler:function(k){var b=k.type;if(b==="log")g.log(k.message);else b&&this.fire(b,k)},callSWF:function(k,b){if(this.swf[k])return this.swf[k].apply(this.swf,b||[])}});g.SWF=s});
KISSY.add("swfstore",function(g,s){function t(d,i,v,k){var b="other",f=n.get(p),h=this;v=(v!==s?v:true)+"";k=(k!==s?k:true)+"";if(m.ie)b="ie";else if(m.gecko)b="gecko";else if(m.webkit)b="webkit";else if(m.opera)b="opera";if(!f||f==="null")n.set(p,f=Math.round(Math.random()*Math.PI*1E5));v={version:9.115,useExpressInstall:false,fixedAttributes:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale"},flashVars:{allowedDomain:q.location.hostname,shareData:v,browser:f,useCompression:k}};i||
(i=(new g.Node('<div style="height:0;width:0;overflow:hidden"></div>')).appendTo(q.body)[0]);h.embeddedSWF=new g.SWF(i,d||"swfstore.swf",v);h.embeddedSWF._eventHandler=function(o){g.SWF.prototype._eventHandler.call(h,o)}}var m=g.UA,n=g.Cookie,p="swfstore",q=document;g.augment(t,g.EventTarget);g.augment(t,{setItem:function(d,i){i=typeof i==="string"?i.replace(/\\/g,"\\\\"):g.JSON.stringify(i)+"";if(d=g.trim(d+""))try{return this.embeddedSWF.callSWF("setItem",[d,i])}catch(v){this.fire("error",{message:v})}},
getItem:function(d){return this.embeddedSWF.callSWF("getValueOf",[d])}});g.each(["getValueAt","getNameAt","getValueOf","getItems","getLength","removeItem","removeItemAt","clear","calculateCurrentSize","hasAdequateDimensions","setSize","getModificationDate","displaySettings"],function(d){t.prototype[d]=function(){try{return this.embeddedSWF.callSWF(d,g.makeArray(arguments))}catch(i){this.fire("error",{message:i})}}});g.SWFStore=t});
KISSY.add("datalazyload",function(g,s){function t(b,f){if(!(this instanceof t))return new t(b,f);if(f===s){f=b;b=[d]}g.isArray(b)||(b=[g.get(b)||d]);this.containers=b;this.config=g.merge(v,f||{});this.callbacks={els:[],fns:[]};this._init()}var m=g.DOM,n=g.Event,p=YAHOO.util.Dom,q=window,d=document,i={AUTO:"auto",MANUAL:"manual"},v={mod:i.MANUAL,diff:"default",placeholder:"http://a.tbcdn.cn/kissy/1.0.4/build/datalazyload/dot.gif"},k=t.prototype;g.mix(k,{_init:function(){this.threshold=this._getThreshold();
this._filterItems();this._getItemsLength()&&this._initLoadEvent()},_initLoadEvent:function(){function b(){h||(h=setTimeout(function(){f();h=null},100))}function f(){o._loadItems();if(o._getItemsLength()===0){n.remove(q,"scroll",b);n.remove(q,"resize",b)}}var h,o=this;n.on(q,"scroll",b);n.on(q,"resize",function(){o.threshold=o._getThreshold();b()});o._getItemsLength()&&g.ready(function(){f()})},_filterItems:function(){var b=this.containers,f=this.threshold,h=this.config.placeholder,o=this.config.mod===
i.MANUAL,u,a,c,e,j,l,r,x=[],w=[];u=0;for(a=b.length;u<a;++u){c=g.query("img",b[u]);e=0;for(j=c.length;e<j;++e){l=c[e];r=l.getAttribute("data-lazyload-src");if(o){if(r){l.src=h;x.push(l)}}else if(p.getY(l)>f&&!r){l.setAttribute("data-lazyload-src",l.src);l.src=h;x.push(l)}}c=g.query("textarea",b[u]);e=0;for(j=c.length;e<j;++e){l=c[e];m.hasClass(l,"ks-datalazyload")&&w.push(l)}}this.images=x;this.areaes=w},_loadItems:function(){this._loadImgs();this._loadAreaes();this._fireCallbacks()},_loadImgs:function(){var b=
this.images,f=this.threshold+p.getDocumentScrollTop(),h,o,u=[];for(h=0;o=b[h++];)p.getY(o)<=f?this._loadImgSrc(o):u.push(o);this.images=u},_loadImgSrc:function(b,f){f=f||"data-lazyload-src";var h=b.getAttribute(f);if(h&&b.src!=h){b.src=h;b.removeAttribute(f)}},_loadAreaes:function(){var b=this.areaes,f=this.threshold+p.getDocumentScrollTop(),h,o,u,a=[];for(h=0;o=b[h++];){u=o;if(p.getY(u)===s)u=o.parentNode;p.getY(u)<=f?this._loadDataFromArea(o.parentNode,o):a.push(o)}this.areaes=a},_loadDataFromArea:function(b,
f){var h=m.create(f.value);f.style.display="none";f.className="";b.insertBefore(h,f);g.UA.gecko||g.query("script",b).each(function(o){g.globalEval(o.text)})},_fireCallbacks:function(){var b=this.callbacks,f=b.els,h=b.fns,o=this.threshold+p.getDocumentScrollTop(),u,a,c,e=[],j=[];for(u=0;(a=f[u])&&(c=h[u++]);)if(p.getY(a)<=o)c.call(a);else{e.push(a);j.push(c)}b.els=e;b.fns=j},addCallback:function(b,f){if((b=g.get(b))&&typeof f==="function"){this.callbacks.els.push(b);this.callbacks.fns.push(f)}},_getThreshold:function(){var b=
this.config.diff,f=p.getViewportHeight();return b==="default"?2*f:f+b},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(b,f,h){var o=this,u,a;g.isArray(b)||(b=[g.get(b)]);g.each(b,function(c){switch(f){case "textarea-data":if((u=g.get("textarea",c))&&m.hasClass(u,h||"ks-datalazyload-custom"))o._loadDataFromArea(c,u);break;default:a=c.nodeName==="IMG"?[c]:g.query("img",c);c=0;for(var e=a.length;c<e;c++)o._loadImgSrc(a[c],
h||"data-lazyload-src-custom")}})}});g.mix(t,k,true,["loadCustomLazyData","_loadImgSrc","_loadDataFromArea"]);g.DataLazyload=t});
KISSY.add("suggest",function(g,s){function t(b,f,h){if(!(this instanceof t))return new t(b,f,h);this.textInput=g.get(b);this.dataSource=f;this.JSONDataSource=g.isPlainObject(f)?f:null;this.returnedData=null;this.config=g.merge(k,h||{});this.container=null;this.queryParams=this.query="";this._timer=null;this._isRunning=false;this.dataScript=null;this._dataCache={};this._latestScriptTime="";this._onKeyboardSelecting=this._scriptDataIsOut=false;this.selectedItem=null;this._init()}var m=YAHOO.util.Dom,
n=g.DOM,p=g.Event,q=window,d=document,i=d.getElementsByTagName("head")[0],v=YAHOO.env.ua.ie,k={containerCls:"",containerWidth:"auto",resultFormat:"约%result%条结果",showCloseBtn:false,closeBtnText:"关闭",useShim:v===6,timerDelay:200,autoFocus:false,submitFormOnClickSelect:true};g.mix(t.prototype,{_init:function(){this._initTextInput();this._initContainer();this.config.useShim&&this._initShim();this._initStyle();this._initResizeEvent()},_initTextInput:function(){var b=this;b.textInput.setAttribute("autocomplete",
"off");p.on(b.textInput,"blur",function(){b.stop();b.hide()});b.config.autoFocus&&b.textInput.focus();var f=0;p.on(b.textInput,"keydown",function(h){h=h.keyCode;switch(h){case 27:b.hide();b.textInput.value=b.query;b.query.length===0&&b.textInput.blur();break;case 13:b.textInput.blur();b._onKeyboardSelecting&&b.textInput.value==b._getSelectedItemKey()&&b.fire("itemSelect");b._submitForm();break;case 40:case 38:if(f++==0){b._isRunning&&b.stop();b._onKeyboardSelecting=true;b.selectItem(h===40)}else if(f==
3)f=0;break}if(h!=40&&h!=38){b._isRunning||b.start();b._onKeyboardSelecting=false}});p.on(b.textInput,"keyup",function(){f=0})},_initContainer:function(){var b=d.createElement("div"),f=this.config.containerCls;b.className="ks-suggest-container";if(f)b.className+=" "+f;b.style.position="absolute";b.style.visibility="hidden";this.container=b;this._setContainerRegion();this._initContainerEvent();d.body.insertBefore(b,d.body.firstChild)},_setContainerRegion:function(){var b=m.getRegion(this.textInput),
f=b.left,h=b.right-f-2;h=h>0?h:0;if(d.documentMode===7&&(v===7||v===8))f-=2;else g.UA.gecko&&f++;this.container.style.left=f+"px";this.container.style.top=b.bottom+"px";this.container.style.width=this.config.containerWidth=="auto"?h+"px":this.config.containerWidth},_initContainerEvent:function(){var b=this;p.on(b.container,"mousemove",function(h){h=h.target;if(h.nodeName!="LI")h=m.getAncestorByTagName(h,"li");if(m.isAncestor(b.container,h))if(h!=b.selectedItem){b._removeSelectedItem();b._setSelectedItem(h)}});
var f=null;p.on(b.container,"mousedown",function(h){f=h.target;b.textInput.onbeforedeactivate=function(){q.event.returnValue=false;b.textInput.onbeforedeactivate=null};return false});p.on(b.container,"mouseup",function(h){if(b._isInContainer([h.pageX,h.pageY])){h=h.target;if(h==f)if(h.className=="ks-suggest-close-btn")b.hide();else{if(h.nodeName!="LI")h=m.getAncestorByTagName(h,"li");if(m.isAncestor(b.container,h)){b._updateInputFromSelectItem(h);b.fire("itemSelect");b.textInput.blur();b._submitForm()}}}})},
_submitForm:function(){if(this.config.submitFormOnClickSelect){var b=this.textInput.form;if(b){if(d.createEvent){var f=d.createEvent("MouseEvents");f.initEvent("submit",true,false);b.dispatchEvent(f)}else d.createEventObject&&b.fireEvent("onsubmit");b.submit()}}},_isInContainer:function(b){var f=m.getRegion(this.container);return b[0]>=f.left&&b[0]<=f.right&&b[1]>=f.top&&b[1]<=f.bottom},_initShim:function(){var b=d.createElement("iframe");b.src="about:blank";b.className="ks-suggest-shim";b.style.position=
"absolute";b.style.visibility="hidden";b.style.border="none";this.container.shim=b;this._setShimRegion();d.body.insertBefore(b,d.body.firstChild)},_setShimRegion:function(){var b=this.container,f=b.shim;if(f){f.style.left=parseInt(b.style.left)-2+"px";f.style.top=b.style.top;f.style.width=parseInt(b.style.width)+2+"px"}},_initStyle:function(){g.get("#ks-suggest-style")||n.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container li.selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container li.selected span{color:#FFF;cursor:default}.ks-suggest-bottom{padding:0 5px 5px}.ks-suggest-close-btn{float:right}.ks-suggest-container li,.suggest-bottom{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initResizeEvent:function(){var b=this,f;p.on(q,"resize",function(){f&&clearTimeout(f);f=setTimeout(function(){b._setContainerRegion();b._setShimRegion()},50)})},start:function(){var b=this;t.focusInstance=b;b._timer=setTimeout(function(){b.updateContent();b._timer=setTimeout(arguments.callee,b.config.timerDelay)},b.config.timerDelay);b._isRunning=true},stop:function(){t.focusInstance=null;clearTimeout(this._timer);this._isRunning=false},show:function(){if(!this.isVisible()){var b=
this.container,f=b.shim;b.style.visibility="";if(f){if(!f.style.height){b=m.getRegion(b);f.style.height=b.bottom-b.top-2+"px"}f.style.visibility=""}}},hide:function(){if(this.isVisible()){var b=this.container,f=b.shim;if(f)f.style.visibility="hidden";b.style.visibility="hidden"}},isVisible:function(){return this.container.style.visibility!="hidden"},updateContent:function(){if(this._needUpdate()){this._updateQueryValueFromInput();var b=this.query;if(g.trim(b).length)if(this._dataCache[b]!==s){this.returnedData=
"using cache";this._fillContainer(this._dataCache[b]);this._displayContainer()}else this.JSONDataSource?this.handleResponse(this.JSONDataSource[b]):this.requestData();else{this._fillContainer("");this.hide()}}},_needUpdate:function(){return this.textInput.value!=this.query},requestData:function(){var b=this;if(!v)b.dataScript=null;if(!b.dataScript){var f=d.createElement("script");f.charset="utf-8";i.insertBefore(f,i.firstChild);b.dataScript=f;if(!v){var h=(new Date).getTime();b._latestScriptTime=
h;f.setAttribute("time",h);p.on(f,"load",function(){b._scriptDataIsOut=f.getAttribute("time")!=b._latestScriptTime})}}b.queryParams="q="+encodeURIComponent(b.query)+"&code=utf-8&callback=g_ks_suggest_callback";b.fire("dataRequest");b.dataScript.src=b.dataSource+"?"+b.queryParams},handleResponse:function(b){if(!this._scriptDataIsOut){this.returnedData=b;this.fire("dataReturn");this.returnedData=this.formatData(this.returnedData);var f="";b=this.returnedData.length;if(b>0){f=d.createElement("ol");for(var h=
0;h<b;++h){var o=this.returnedData[h],u=this.formatItem(o.key,o.result);u.setAttribute("key",o.key);n.addClass(u,h%2?"even":"odd");f.appendChild(u)}f=f}this._fillContainer(f);b>0&&this.appendBottom();g.trim(this.container.innerHTML)&&this.fire("show");this._dataCache[this.query]=this.container.innerHTML;this._displayContainer()}},formatData:function(b){var f=[];if(!b)return f;if(g.isArray(b.result))b=b.result;var h=b.length;if(!h)return f;for(var o,u=0;u<h;++u){o=b[u];f[u]=typeof o==="string"?{key:o}:
g.isArray(o)&&o.length>=2?{key:o[0],result:o[1]}:o}return f},formatItem:function(b,f){var h=d.createElement("li"),o=d.createElement("span");o.className="ks-suggest-key";o.appendChild(d.createTextNode(b));h.appendChild(o);if(f!==s){b=this.config.resultFormat.replace("%result%",f);if(g.trim(b)){f=d.createElement("span");f.className="ks-suggest-result";f.appendChild(d.createTextNode(b));h.appendChild(f)}}return h},appendBottom:function(){var b=d.createElement("div");b.className="ks-suggest-bottom";if(this.config.showCloseBtn){var f=
d.createElement("a");f.href="javascript: void(0)";f.setAttribute("target","_self");f.className="ks-suggest-close-btn";f.appendChild(d.createTextNode(this.config.closeBtnText));b.appendChild(f)}g.trim(b.innerHTML)&&this.container.appendChild(b)},_fillContainer:function(b){if(b.nodeType==1){this.container.innerHTML="";this.container.appendChild(b)}else this.container.innerHTML=b;this.selectedItem=null},_displayContainer:function(){g.trim(this.container.innerHTML)?this.show():this.hide()},selectItem:function(b){var f=
this.container.getElementsByTagName("li");if(f.length!=0)if(this.isVisible()){if(this.selectedItem){b=m[b?"getNextSibling":"getPreviousSibling"](this.selectedItem);if(!b)this.textInput.value=this.query}else b=f[b?0:f.length-1];this._removeSelectedItem();if(b){this._setSelectedItem(b);this._updateInputFromSelectItem()}}else this.show()},_removeSelectedItem:function(){n.removeClass(this.selectedItem,"selected");this.selectedItem=null},_setSelectedItem:function(b){n.addClass(b,"selected");this.selectedItem=
b},_getSelectedItemKey:function(){if(!this.selectedItem)return"";return this.selectedItem.getAttribute("key")},_updateQueryValueFromInput:function(){this.query=this.textInput.value},_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)}});g.mix(t.prototype,g.EventTarget);q.g_ks_suggest_callback=function(b){t.focusInstance&&setTimeout(function(){t.focusInstance.handleResponse(b)},0)};g.Suggest=t});
KISSY.add("switchable",function(g,s){function t(d,i){i=i||{};if(!("markupType"in i))if(i.panelCls)i.markupType=1;else if(i.panels)i.markupType=2;i=g.merge(t.Config,i);this.container=g.get(d);this.config=i;this.triggers=this.triggers||[];this.panels=this.panels||[];if(this.activeIndex===s)this.activeIndex=i.activeIndex;this._init()}var m=g.DOM,n=g.Event,p=document,q=t.prototype;t.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",
triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:0,activeTriggerCls:"active",steps:1,viewSize:[]};t.Plugins=[];g.mix(q,{_init:function(){var d=this,i=d.config;d.panels.length===0&&d._parseMarkup();i.hasTriggers&&d._bindTriggers();g.each(t.Plugins,function(v){v.init&&v.init(d)})},_parseMarkup:function(){var d=this.container,i=this.config,v=i.hasTriggers,k,b=[],f=[];switch(i.markupType){case 0:if(k=g.get("."+i.navCls,d))b=m.children(k);k=g.get("."+i.contentCls,d);f=m.children(k);
break;case 1:b=g.query("."+i.triggerCls,d);f=g.query("."+i.panelCls,d);break;case 2:b=i.triggers;f=i.panels;break}d=f.length;this.length=d/i.steps;if(v&&d>0&&b.length===0)b=this._generateTriggersMarkup(this.length);this.triggers=g.makeArray(b);this.panels=g.makeArray(f);this.content=k||f[0].parentNode},_generateTriggersMarkup:function(d){var i=this.config,v=p.createElement("UL"),k,b;v.className=i.navCls;for(b=0;b<d;b++){k=p.createElement("LI");if(b===this.activeIndex)k.className=i.activeTriggerCls;
k.innerHTML=b+1;v.appendChild(k)}this.container.appendChild(v);return m.children(v)},_bindTriggers:function(){var d=this,i=d.config,v=d.triggers,k,b,f=v.length;for(b=0;b<f;b++)(function(h){k=v[h];n.on(k,"click focus",function(){d._onFocusTrigger(h)});if(i.triggerType==="mouse"){n.on(k,"mouseenter",function(){d._onMouseEnterTrigger(h)});n.on(k,"mouseleave",function(){d._onMouseLeaveTrigger(h)})}})(b)},_onFocusTrigger:function(d){if(this.activeIndex!==d){this.switchTimer&&this.switchTimer.cancel();
this.switchTo(d)}},_onMouseEnterTrigger:function(d){var i=this;if(i.activeIndex!==d)i.switchTimer=g.later(function(){i.switchTo(d)},i.config.delay*1E3)},_onMouseLeaveTrigger:function(){this.switchTimer&&this.switchTimer.cancel()},switchTo:function(d,i){var v=this.config,k=this.triggers,b=this.panels,f=this.activeIndex,h=v.steps,o=f*h,u=d*h;if(d===f)return this;if(this.fire("beforeSwitch",{toIndex:d})===false)return this;if(v.hasTriggers)this._switchTrigger(f>-1?k[f]:null,k[d]);if(i===s)i=d>f?"forward":
"forward";this._switchView(b.slice(o,o+h),b.slice(u,u+h),d,i);this.activeIndex=d;return this},_switchTrigger:function(d,i){var v=this.config.activeTriggerCls;d&&m.removeClass(d,v);m.addClass(i,v)},_switchView:function(d,i){m.css(d,"display","none");m.css(i,"display","block");this.fire("switch")},prev:function(){var d=this.activeIndex;this.switchTo(d>0?d-1:this.length-1,"backward")},next:function(){var d=this.activeIndex;this.switchTo(d<this.length-1?d+1:0,"forward")}});g.mix(q,g.EventTarget);g.Switchable=
t});
KISSY.add("switchable-autoplay",function(g){var s=g.Event,t=g.Switchable;g.mix(t.Config,{autoplay:false,interval:5,pauseOnHover:true});t.Plugins.push({name:"autoplay",init:function(m){var n=m.config;if(n.autoplay){if(n.pauseOnHover){s.on(m.container,"mouseenter",function(){m.paused=true});s.on(m.container,"mouseleave",function(){setTimeout(function(){m.paused=false},n.interval*1E3)})}m.autoplayTimer=g.later(function(){m.paused||m.switchTo(m.activeIndex<m.length-1?m.activeIndex+1:0)},n.interval*1E3,
true)}}})});
KISSY.add("switchable-effect",function(g){var s=YAHOO.util,t=g.DOM,m=s.Dom,n=g.Switchable,p;g.mix(n.Config,{effect:"none",duration:0.5,easing:s.Easing.easeNone});n.Effects={none:function(q,d,i){t.css(q,"display","none");t.css(d,"display","block");i()},fade:function(q,d,i){q.length!==1&&g.error("fade effect only supports steps == 1.");var v=this,k=v.config,b=q[0],f=d[0];v.anim&&v.anim.stop();m.setStyle(f,"opacity",1);v.anim=new s.Anim(b,{opacity:{to:0}},k.duration,k.easing);v.anim.onComplete.subscribe(function(){v.anim=null;
m.setStyle(f,"z-index",9);m.setStyle(b,"z-index",1);i()});v.anim.animate()},scroll:function(q,d,i,v){var k=this;q=k.config;d=q.effect==="scrollx";var b={};b[d?"left":"top"]={to:-(k.viewSize[d?0:1]*v)};k.anim&&k.anim.stop();k.anim=new s.Anim(k.content,b,q.duration,q.easing);k.anim.onComplete.subscribe(function(){k.anim=null;i()});k.anim.animate()}};p=n.Effects;p.scrollx=p.scrolly=p.scroll;n.Plugins.push({name:"effect",init:function(q){var d=q.config,i=d.effect,v=q.panels,k=d.steps,b=q.activeIndex*
k,f=b+k-1,h=v.length;q.viewSize=[d.viewSize[0]||v[0].offsetWidth*k,d.viewSize[0]||v[0].offsetHeight*k];if(i!=="none"){for(d=0;d<h;d++)v[d].style.display="block";switch(i){case "scrollx":case "scrolly":q.content.style.position="absolute";q.content.parentNode.style.position="relative";if(i==="scrollx"){m.setStyle(v,"float","left");q.content.style.width=q.viewSize[0]*(h/k)+"px"}break;case "fade":for(d=0;d<h;d++){m.setStyle(v[d],"opacity",d>=b&&d<=f?1:0);v[d].style.position="absolute";v[d].style.zIndex=
d>=b&&d<=f?9:1}break}}}});g.mix(n.prototype,{_switchView:function(q,d,i,v){var k=this,b=k.config.effect;(g.isFunction(b)?b:p[b]).call(k,q,d,function(){k.fire("switch")},i,v)}})});
KISSY.add("switchable-circular",function(g){function s(h,o,u,a,c){var e=this;h=e.config;o=e.length;var j=e.activeIndex,l=h.scrollType===b,r=l?p:q,x=e.viewSize[l?0:1];l=-x*a;var w={},y,A=c===k;if(y=A&&j===0&&a===o-1||c===v&&j===o-1&&a===0)l=t.call(e,e.panels,a,A,r,x);w[r]={to:l};e.anim&&e.anim.stop();e.anim=new YAHOO.util.Anim(e.content,w,h.duration,h.easing);e.anim.onComplete.subscribe(function(){y&&m.call(e,e.panels,a,A,r,x);e.anim=null;u()});e.anim.animate()}function t(h,o,u,a,c){var e=this.config.steps;
o=this.length;var j=u?o-1:0,l=(j+1)*e;for(e=j*e;e<l;e++){h[e].style.position=n;h[e].style[a]=(u?"-":i)+c*o+d}return u?c:-c*o}function m(h,o,u,a,c){var e=this.config.steps;o=this.length;var j=u?o-1:0,l=(j+1)*e;for(e=j*e;e<l;e++){h[e].style.position=i;h[e].style[a]=i}this.content.style[a]=u?-c*(o-1)+d:i}var n="relative",p="left",q="top",d="px",i="",v="forward",k="backward",b="scrollx",f=g.Switchable;g.mix(f.Config,{circular:false});f.Plugins.push({name:"circular",init:function(h){h=h.config;if(h.circular&&
(h.effect===b||h.effect==="scrolly")){h.scrollType=h.effect;h.effect=s}}})});
KISSY.add("switchable-lazyload",function(g){var s=g.DOM,t="beforeSwitch",m="img-src",n="textarea-data",p={},q=g.Switchable,d=g.DataLazyload;p[m]="data-lazyload-src-custom";p[n]="ks-datalazyload-custom";g.mix(q.Config,{lazyDataType:"",lazyDataFlag:""});q.Plugins.push({name:"autoplay",init:function(i){function v(o){var u=b.steps;o=o.toIndex*u;d.loadCustomLazyData(i.panels.slice(o,o+u),f,h);k()&&i.detach(t,v)}function k(){var o,u,a;if(f===m){o=g.query("img",i.container);u=0;for(a=o.length;u<a;u++)if(s.attr(o[u],
h))return false}else if(f===n){o=g.query("textarea",i.container);u=0;for(a=o.length;u<a;u++)if(s.hasClass(o[u],h))return false}return true}var b=i.config,f=b.lazyDataType,h=b.lazyDataFlag||p[f];!d||!f||!h||i.on(t,v)}})});KISSY.add("tabs",function(g){function s(t,m){if(!(this instanceof s))return new s(t,m);s.superclass.constructor.call(this,t,m)}g.extend(s,g.Switchable);g.Tabs=s});
KISSY.add("slide",function(g){function s(m,n){if(!(this instanceof s))return new s(m,n);n=g.merge(t,n||{});s.superclass.constructor.call(this,m,n)}var t={autoplay:true,circular:true};g.extend(s,g.Switchable);g.Slide=s});KISSY.add("carousel",function(g){function s(m,n){if(!(this instanceof s))return new s(m,n);n=g.merge(t,n||{});s.superclass.constructor.call(this,m,n)}var t={circular:true};g.extend(s,g.Switchable);g.Carousel=s});
