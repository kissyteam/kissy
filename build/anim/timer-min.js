/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 22 19:29
*/
KISSY.add("anim/timer/easing",function(){function j(a){return a}function m(a,b,d,k){var e=3*a-3*d+1,s=3*d-6*a,f=3*a,g=3*b-3*k+1,h=3*k-6*b,j=3*b;return function(a){a:{for(var d=a,b,k,i=0;8>i;i++){k=((e*d+s)*d+f)*d-a;if(o(k)<c){a=d;break a}b=(3*e*d+2*s)*d+f;if(o(b)<c)break;d-=k/b}b=1;i=0;for(d=a;b>i;){k=((e*d+s)*d+f)*d-a;if(o(k)<c)break;0<k?b=d:i=d;d=(b+i)/2}a=d}return((g*a+h)*a+j)*a}}var l=Math.PI,h=Math.pow,n=Math.sin,b=parseFloat,g=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,f={swing:function(a){return-Math.cos(a*
l)/2+0.5},easeNone:j,linear:j,easeIn:function(a){return a*a},ease:m(0.25,0.1,0.25,1),"ease-in":m(0.42,0,1,1),"ease-out":m(0,0,0.58,1),"ease-in-out":m(0.42,0,0.58,1),"ease-out-in":m(0,0.42,1,0.58),toFn:function(a){var c;return(c=a.match(g))?m(b(c[1]),b(c[2]),b(c[3]),b(c[4])):f[a]||j},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(h(2,10*(a-=1))*n((a-0.075)*2*l/0.3))},elasticOut:function(a){return 0===a||1===a?a:h(2,-10*a)*n((a-0.075)*2*l/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*h(2,10*(a-=1))*n((a-0.1125)*2*l/0.45):0.5*h(2,-10*(a-=1))*n((a-0.1125)*2*l/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var c,
d=(c=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(d*a-c):0.5*((a-=2)*a*(d*a+c)+2)},bounceIn:function(a){return 1-f.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*f.bounceIn(2*a):0.5*f.bounceOut(2*a-1)+0.5}},c=1.0E-6,o=Math.abs;return f});
KISSY.add("anim/timer/manager",function(j,m){var l=j.stamp,h=j.Env.host,n=h.requestAnimationFrame,b=h.cancelAnimationFrame;if(!n)for(var g=["ms","moz","webkit","o"],f=0;f<g.length&&!n;++f)n=h[g[f]+"RequestAnimationFrame"],b=h[g[f]+"CancelAnimationFrame"]||h[g[f]+"CancelRequestAnimationFrame"];if(!n||j.UA.chrome)n=function(c){return setTimeout(c,15)},b=function(c){clearTimeout(c)};return{runnings:{},timer:null,start:function(c){var b=l(c);this.runnings[b]||(this.runnings[b]=c,this.startTimer())},stop:function(c){this.notRun(c)},
notRun:function(c){delete this.runnings[l(c)];j.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(c){this.notRun(c)},resume:function(c){this.start(c)},startTimer:function(){var c=this;c.timer||(c.timer=n(function a(){c.runFrames()?c.stopTimer():c.timer=n(a)}))},stopTimer:function(){var c=this.timer;c&&(b(c),this.timer=0)},runFrames:function(){var c,b,a=this.runnings;for(c in a)a[c].frame(),b=0;return b===m}}});
KISSY.add("anim/timer/fx",function(j,m,l){function h(b){j.mix(this,b);this.pos=0;this.unit=this.unit||""}function n(b,g){return(!b.style||null==b.style[g])&&null!=m.attr(b,g,l,1)?1:0}h.prototype={isBasicFx:1,constructor:h,load:function(b){j.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){this.pos=b;this.update();this.finished=this.finished||1==b},interpolate:function(b,g,f){return"number"===typeof b&&"number"===typeof g?Math.round(1E5*(b+(g-b)*f))/1E5:l},update:function(){var b=
this.prop,g=this.anim.node,f=this.to,c=this.interpolate(this.from,f,this.pos);c===l?this.finished||(this.finished=1,m.css(g,b,f)):(c+=this.unit,n(g,b)?m.attr(g,b,c,1):m.css(g,b,c))},cur:function(){var b=this.prop,g=this.anim.node;if(n(g,b))return m.attr(g,b,l,1);var f,b=m.css(g,b);return isNaN(f=parseFloat(b))?!b||"auto"===b?0:b:f}};h.Factories={};h.getPos=function(b,g){var f=j.now(),c=g.duration,f=f-b.startTime-g.delay;return 0>=f?0:f>=c?1:g.easing(f/c)};h.getFx=function(b){return new (h.Factories[b.prop]||
h)(b)};return h},{requires:["dom"]});KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",function(j,m,l,h){function n(d){var d=d+"",b;if(b=d.match(o))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=d.match(a))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=d.match(i)){for(d=1;d<b.length;d++)2>b[d].length&&(b[d]+=b[d]);return[parseInt(b[1],g),parseInt(b[2],g),parseInt(b[3],g)]}return c[d=d.toLowerCase()]?c[d]:[255,255,255]}function b(){b.superclass.constructor.apply(this,arguments)}var g=16,f=Math.floor,c={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},o=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,i=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;h.background.push("backgroundColor");h.borderColor=["borderBottomColor","borderLeftColor",
"borderRightColor","borderTopColor"];h.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");h.borderBottom.push("borderBottomColor");h.borderLeft.push("borderLeftColor");h.borderRight.push("borderRightColor");h.borderTop.push("borderTopColor");j.extend(b,l,{load:function(){b.superclass.load.apply(this,arguments);this.from&&(this.from=n(this.from));this.to&&(this.to=n(this.to))},interpolate:function(a,c,e){var i=b.superclass.interpolate;return 3==a.length&&3==c.length?
"rgb("+[f(i(a[0],c[0],e)),f(i(a[1],c[1],e)),f(i(a[2],c[2],e))].join(", ")+")":4==a.length||4==c.length?"rgba("+[f(i(a[0],c[0],e)),f(i(a[1],c[1],e)),f(i(a[2],c[2],e)),f(i(a[3]||1,c[3]||1,e))].join(", ")+")":j.log("anim/color unknown value : "+a)}});j.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){l.Factories[a]=b});return b},{requires:["dom","./fx","./short-hand"]});
KISSY.add("anim/timer/transform",function(j,m,l){function h(c){c=c.split(/,/);return c=j.map(c,function(c){return b(c)})}function n(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function b(b){return Math.round(1E5*parseFloat(b))/1E5}function g(c){for(var c=c.split(")"),f=j.trim,a=-1,i=c.length-1,d,k,e=n();++a<i;)switch(d=c[a].split("("),k=f(d[0]),d=d[1],k){case "translateX":case "translateY":case "scaleX":case "scaleY":e[k]=b(d);break;case "rotate":case "skewX":case "skewY":var g=
b(d);j.endsWith(d,"deg")||(g=180*g/Math.PI);e[k]=g;break;case "translate":case "translate3d":d=d.split(",");e.translateX=b(d[0]);e.translateY=b(d[1]||0);break;case "scale":d=d.split(",");e.scaleX=b(d[0]);e.scaleY=b(d[1]||d[0]);break;case "matrix":return c=d,c=h(c),i=a=f=void 0,k=c[0],e=c[1],d=c[2],g=c[3],k*g-e*d?(f=Math.sqrt(k*k+e*e),k/=f,e/=f,i=k*d+e*g,d-=k*i,g-=e*i,a=Math.sqrt(d*d+g*g),d/=a,g/=a,i/=a,k*g<e*d&&(k=-k,e=-e,i=-i,f=-f)):f=a=i=0,{translateX:b(c[4]),translateY:b(c[5]),rotate:b(180*Math.atan2(e,
k)/Math.PI),skewX:b(180*Math.atan(i)/Math.PI),skewY:0,scaleX:b(f),scaleY:b(a)}}return e}function f(){f.superclass.constructor.apply(this,arguments)}j.extend(f,l,{load:function(){f.superclass.load.apply(this,arguments);this.from=(this.from=m.style(this.anim.node,"transform")||this.from)&&"none"!=this.from?g(this.from):n();this.to=this.to?g(this.to):n()},interpolate:function(b,g,a){var i=f.superclass.interpolate,d={};d.translateX=i(b.translateX,g.translateX,a);d.translateY=i(b.translateY,g.translateY,
a);d.rotate=i(b.rotate,g.rotate,a);d.skewX=i(b.skewX,g.skewX,a);d.skewY=i(b.skewY,g.skewY,a);d.scaleX=i(b.scaleX,g.scaleX,a);d.scaleY=i(b.scaleY,g.scaleY,a);return j.substitute("translate3d({translateX}px,{translateY}px,0) rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",d)}});return l.Factories.transform=f},{requires:["dom","./fx"]});
KISSY.add("anim/timer",function(j,m,l,h,n,b,g,f){function c(){var a;c.superclass.constructor.apply(this,arguments);j.each(a=this.to,function(b,c){var e=o(c);c!=e&&(a[e]=a[c],delete a[c])})}var o=m._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;j.extend(c,h,{prepareFx:function(){var b=this.node,c=this._propsData;j.each(c,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=n.toFn(a.easing))});j.each(f,function(a,e){var g,f=c[e],h;f&&!f.fx&&(h=f.value,g={},j.each(a,function(a){g[a]=
m.css(b,a)}),m.css(b,e,h),j.each(g,function(a,e){e in c||(c[e]=j.merge(f,{value:m.css(b,e)}));m.css(b,e,a)}),delete c[e])});var k,e,h,l,p,o,r,q;for(k in c)if(e=c[k],e.fx)e.fx.prop=k;else{h=e.value;o={prop:k,anim:this,propData:e};r=g.getFx(o);l=h;p=r.cur();h+="";q="";if(h=h.match(a)){l=parseFloat(h[2]);if((q=h[3])&&"px"!==q&&p){var t=0,u=l;do++u,m.css(b,k,u+q),t=r.cur();while(0==t);p*=u/t;m.css(b,k,p+q)}h[1]&&(l=("-="===h[1]?-1:1)*l+p)}o.from=p;o.to=l;o.unit=q;r.load(o);e.fx=r}},frame:function(){var a,
b=1,c,e,f,h,j=this._propsData;for(a in j)if(h=j[a],e=h.fx,!e.finished)if(f=g.getPos(this,h),0==f)b=0;else{e.pos=f;if(e.isBasicFx){if(e.from==e.to){e.finished=e.finished||1==f;b=0;continue}c=0;if(h.frame&&(c=h.frame(this,e),!this.isRunning()))return;!1!==c&&e.frame(e.finished||f)}else if(e.finished=e.finished||1==f,e.frame(this,e),!this.isRunning())return;b&=e.finished}(!1===this.fire("step")||b)&&this.stop(b)},doStop:function(a){var c,f,e,g=this._propsData;b.stop(this);if(a)for(c in g)if(e=g[c],(a=
e.fx)&&!a.finished)a.pos=1,a.isBasicFx?(f=0,e.frame&&(f=e.frame(this,a)),!1!==f&&a.frame(1)):a.frame(this,a),a.finished=1},doStart:function(){b.start(this)}});c.Easing=n;c.Fx=g;return c},{requires:"dom,event,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(",")});
