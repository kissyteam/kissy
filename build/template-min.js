/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("template/base",function(d){var e={},m={"#":"start","/":"end"},j={},f=function(a){a in j||(j[a]=new RegExp(a,"ig"));return j[a]},o=function(a){var c,g;return d.trim(a).replace(f("[\r\t\n]")," ").replace(f("([\"'])"),"\\$1").replace(f("{{([#/]?)(?!}})([^}]*)}}"),function(h,i,b){c="";if(i){b=d.trim(b);g=b.indexOf(" ");b=g===-1?[b,""]:[b.substring(0,b.indexOf(" ")),b.substring(b.indexOf(" "))];for(var n in k)if(b[0]===n){b.shift();if(i in m)c=k[n][m[i]].replace(f("KS_TEMPL_STAT_PARAM"),b.join("").replace(f("\\\\(['\"])"),
"$1"))}}else c="KS_TEMPL.push("+b.replace(f("\\\\(['\"])"),"$1")+");";return'");'+c+'KS_TEMPL.push("'})},k={"if":{start:"if(KS_TEMPL_STAT_PARAM){",end:"}"},"else":{start:"}else{"},elseif:{start:"}else if(KS_TEMPL_STAT_PARAM){"},each:{start:"KISSY.each(KS_TEMPL_STAT_PARAM, function(_ks_value, _ks_index){",end:"});"},"!":{start:"/*KS_TEMPL_STAT_PARAM*/"}},l=function(a){if(!(a in e)){var c="KS_DATA_"+d.now(),g,h=["var KS_TEMPL=[],KS_TEMPL_STAT_PARAM=false;with(",c,'||{}){try{KS_TEMPL.push("',o(a),'");}catch(e){KS_TEMPL=["KISSY.Template: Render Error. " + e.message]}};return KS_TEMPL.join("");'];
try{g=new Function(c,h.join(""))}catch(i){h[3]='");KS_TEMPL.push("KISSY.Template: Syntax Error. ,'+i.message+'");KS_TEMPL.push("';g=new Function(c,h.join(""))}e[a]={name:c,parser:h.join(""),render:g}}return e[a]};d.mix(l,{log:function(a){if(!(a in e)){l(a);this.log(a)}},addStatement:function(a,c){if(d.isString(a)&&d.isObject(c))k[a]=c}});return l});KISSY.add("template",function(d,e){return d.Template=e},{requires:["template/base"]});
