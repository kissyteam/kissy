/*
Copyright 2012, KISSY UI Library v1.20
MIT Licensed
build time: Apr 26 12:08
*/
(function(b,d){var k=this,h={mix:function(a,b,e,c,g){if(!b||!a)return a;e===d&&(e=!0);var h,k,q;if(c&&(q=c.length))for(h=0;h<q;h++)k=c[h],k in b&&j(k,a,b,e,g);else for(k in b)j(k,a,b,e,g);return a}},j=function(a,g,e,c,m){if(c||!(a in g)){var h=g[a],j=e[a];h!==j&&(m&&j&&(b.isArray(j)||b.isPlainObject(j))?(e=h&&(b.isArray(h)||b.isPlainObject(h))?h:b.isArray(j)?[]:{},g[a]=b.mix(e,j,c,d,!0)):j!==d&&(g[a]=e[a]))}},a=k&&k[b]||{},g=0,k=a.__HOST||(a.__HOST=k||{}),b=k[b]=h.mix(a,h);b.mix(b,{configs:{},__APP_MEMBERS:["namespace"],
__APP_INIT_METHODS:["__init"],version:"1.20",buildTime:"20120426120744",merge:function(){var a={},g,e=arguments.length;for(g=0;g<e;g++)b.mix(a,arguments[g]);return a},augment:function(){var a=b.makeArray(arguments),g=a.length-2,e=a[0],c=a[g],m=a[g+1],h=1;b.isArray(m)||(c=m,m=d,g++);b.isBoolean(c)||(c=d,g++);for(;h<g;h++)b.mix(e.prototype,a[h].prototype||a[h],c,m);return e},extend:function(a,g,e,c){if(!g||!a)return a;var m=Object.create?function(c,a){return Object.create(c,{constructor:{value:a}})}:
function(c,a){function f(){}f.prototype=c;var e=new f;e.constructor=a;return e},d=g.prototype,h;h=m(d,a);a.prototype=b.mix(h,a.prototype);a.superclass=m(d,g);e&&b.mix(h,e);c&&b.mix(a,c);return a},__init:function(){this.Config=this.Config||{};this.Env=this.Env||{};this.Config.debug=""},namespace:function(){var a=b.makeArray(arguments),g=a.length,e=null,c,m,d,h=!0===a[g-1]&&g--;for(c=0;c<g;c++){d=(""+a[c]).split(".");e=h?k:this;for(m=k[d[0]]===e?1:0;m<d.length;++m)e=e[d[m]]=e[d[m]]||{}}return e},
app:function(a,g){var e=b.isString(a),c=e?k[a]||{}:a,m=0,d=b.__APP_INIT_METHODS.length;for(b.mix(c,this,!0,b.__APP_MEMBERS);m<d;m++)b[b.__APP_INIT_METHODS[m]].call(c);b.mix(c,b.isFunction(g)?g():g);e&&(k[a]=c);return c},config:function(a){var b,e,c,g;for(g in a)if(a.hasOwnProperty(g)&&(b=this.configs)&&(e=b[g]))c=e(a[g]);return c},log:function(a,g,e){if(b.Config.debug&&(e&&(a=e+": "+a),k.console!==d&&console.log))console[g&&console[g]?g:"log"](a)},error:function(a){if(b.Config.debug)throw a;},guid:function(a){return(a||
"")+g++}});b.__init();return b})("KISSY",void 0);
(function(b,d){function k(){if(D)return D;var c=w;b.each(G,function(a){c+=a+"|"});c=c.slice(0,-1);return D=RegExp(c,"g")}function h(){if(z)return z;var c=w;b.each(C,function(a){c+=a+"|"});c+="&#(\\d{1,5});";return z=RegExp(c,"g")}function j(c){var e=typeof c;return a(c)||"object"!==e&&"function"!==e}function a(c){return b.isNull(c)||b.isUndefined(c)}function g(a,e,f){var m=a,d,l,h,j;if(!a)return m;if(a[x])return f[a[x]].destination;if("object"===typeof a){j=a.constructor;if(b.inArray(j,[Boolean,String,
Number,Date,RegExp]))m=new j(a.valueOf());else if(d=b.isArray(a))m=e?b.filter(a,e):a.concat();else if(l=b.isPlainObject(a))m={};a[x]=j=b.guid();f[j]={destination:m,input:a}}if(d)for(a=0;a<m.length;a++)m[a]=g(m[a],e,f);else if(l)for(h in a)if(a.hasOwnProperty(h)&&h!==x&&(!e||e.call(a,a[h],h,a)!==c))m[h]=g(a[h],e,f);return m}function f(c,a,f,g){if(c[y]===a&&a[y]===c)return e;c[y]=a;a[y]=c;var m=function(c,a){return null!==c&&c!==d&&c[a]!==d},l;for(l in a)a.hasOwnProperty(l)&&!m(c,l)&&m(a,l)&&f.push("expected has key '"+
l+"', but missing from actual.");for(l in c)c.hasOwnProperty(l)&&!m(a,l)&&m(c,l)&&f.push("expected missing key '"+l+"', but present in actual.");for(l in a)a.hasOwnProperty(l)&&l!=y&&(b.equals(c[l],a[l],f,g)||g.push("'"+l+"' was '"+(a[l]?a[l].toString():a[l])+"' in expected, but was '"+(c[l]?c[l].toString():c[l])+"' in actual."));b.isArray(c)&&b.isArray(a)&&c.length!=a.length&&g.push("arrays were not the same length");delete c[y];delete a[y];return 0===f.length&&0===g.length}var l=b.__HOST,e=!0,c=
!1,m=Object.prototype,n=m.toString,o=m.hasOwnProperty,m=Array.prototype,q=m.indexOf,p=m.lastIndexOf,s=m.filter,r=m.every,u=m.some,t=String.prototype.trim,v=m.map,w="",x="__~ks_cloned",y="__~ks_compared",A=/^[\s\xa0]+|[\s\xa0]+$/g,B=encodeURIComponent,E=decodeURIComponent,H={},G={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},C={},D,z,F=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;(function(){for(var c in G)G.hasOwnProperty(c)&&(C[G[c]]=c)})();b.mix(b,{stamp:function(c,a,e){if(!c)return c;
var e=e||"__~ks_stamped",f=c[e];if(!f&&!a)try{f=c[e]=b.guid(e)}catch(g){f=d}return f},noop:function(){},type:function(c){return a(c)?""+c:H[n.call(c)]||"object"},isNullOrUndefined:a,isNull:function(c){return null===c},isUndefined:function(c){return c===d},isEmptyObject:function(a){for(var f in a)if(f!==d)return c;return e},isPlainObject:function(c){return c&&"[object Object]"===n.call(c)&&"isPrototypeOf"in c},equals:function(c,g,m,l){m=m||[];l=l||[];return c===g?e:c===d||null===c||g===d||null===g?
a(c)&&a(g):c instanceof Date&&g instanceof Date?c.getTime()==g.getTime():b.isString(c)&&b.isString(g)||b.isNumber(c)&&b.isNumber(g)?c==g:"object"===typeof c&&"object"===typeof g?f(c,g,m,l):c===g},clone:function(c,a){var e={},f=g(c,a,e);b.each(e,function(c){c=c.input;if(c[x])try{delete c[x]}catch(a){b.log("delete CLONE_MARKER error : "),c[x]=d}});e=null;return f},trim:t?function(c){return a(c)?w:t.call(c)}:function(c){return a(c)?w:c.toString().replace(A,w)},substitute:function(c,a,e){return!b.isString(c)||
!b.isPlainObject(a)?c:c.replace(e||/\\?\{([^{}]+)\}/g,function(c,e){return"\\"===c.charAt(0)?c.slice(1):a[e]===d?w:a[e]})},each:function(a,e,f){if(a){var g,m=0,h=a&&a.length,j=h===d||"function"===b.type(a),f=f||l;if(j)for(g in a){if(e.call(f,a[g],g,a)===c)break}else for(g=a[0];m<h&&e.call(f,g,m,a)!==c;g=a[++m]);}return a},indexOf:q?function(c,a){return q.call(a,c)}:function(c,a){for(var e=0,f=a.length;e<f;++e)if(a[e]===c)return e;return-1},lastIndexOf:p?function(c,a){return p.call(a,c)}:function(c,
a){for(var e=a.length-1;0<=e&&a[e]!==c;e--);return e},unique:function(c,a){var e=c.slice();a&&e.reverse();for(var f=0,g,m;f<e.length;){for(m=e[f];(g=b.lastIndexOf(m,e))!==f;)e.splice(g,1);f+=1}a&&e.reverse();return e},inArray:function(c,a){return-1<b.indexOf(c,a)},filter:s?function(c,a,e){return s.call(c,a,e||this)}:function(c,a,e){var f=[];b.each(c,function(c,g,b){a.call(e||this,c,g,b)&&f.push(c)});return f},map:v?function(c,a,e){return v.call(c,a,e||this)}:function(c,a,e){for(var f=c.length,g=Array(f),
m=0;m<f;m++){var d=b.isString(c)?c.charAt(m):c[m];if(d||m in c)g[m]=a.call(e||this,d,m,c)}return g},reduce:function(c,a,f){var g=c.length;if("function"!==typeof a)throw new TypeError("callback is not function!");if(0===g&&2==arguments.length)throw new TypeError("arguments invalid");var b=0,m;if(3<=arguments.length)m=arguments[2];else{do{if(b in c){m=c[b++];break}b+=1;if(b>=g)throw new TypeError;}while(e)}for(;b<g;)b in c&&(m=a.call(d,m,c[b],b,c)),b++;return m},every:r?function(c,a,e){return r.call(c,
a,e||this)}:function(a,f,g){for(var b=a&&a.length||0,m=0;m<b;m++)if(m in a&&!f.call(g,a[m],m,a))return c;return e},some:u?function(c,a,e){return u.call(c,a,e||this)}:function(a,f,g){for(var b=a&&a.length||0,m=0;m<b;m++)if(m in a&&f.call(g,a[m],m,a))return e;return c},bind:function(c,a){var e=[].slice,f=e.call(arguments,2),g=function(){},b=function(){return c.apply(this instanceof g?this:a,f.concat(e.call(arguments)))};g.prototype=c.prototype;b.prototype=new g;return b},now:Date.now||function(){return+new Date},
fromUnicode:function(c){return c.replace(/\\u([a-f\d]{4})/ig,function(c,a){return String.fromCharCode(parseInt(a,16))})},escapeHTML:function(c){return c.replace(k(),function(c){return C[c]})},escapeRegExp:function(c){return c.replace(F,"\\$&")},unEscapeHTML:function(c){return c.replace(h(),function(c,a){return G[c]||String.fromCharCode(+a)})},makeArray:function(c){if(a(c))return[];if(b.isArray(c))return c;if("number"!==typeof c.length||b.isString(c)||b.isFunction(c))return[c];for(var e=[],f=0,g=c.length;f<
g;f++)e[f]=c[f];return e},param:function(c,a,f,g){if(!b.isPlainObject(c))return w;a=a||"&";f=f||"=";b.isUndefined(g)&&(g=e);var m=[],d,l;for(d in c)if(c.hasOwnProperty(d))if(l=c[d],d=B(d),j(l))m.push(d,f,B(l+w),a);else if(b.isArray(l)&&l.length)for(var h=0,k=l.length;h<k;++h)j(l[h])&&m.push(d,g?B("[]"):w,f,B(l[h]+w),a);m.pop();return m.join(w)},unparam:function(c,a,e){if("string"!==typeof c||0===(c=b.trim(c)).length)return{};for(var e=e||"=",f={},c=c.split(a||"&"),g,m,d=0,l=c.length;d<l;++d){a=c[d].split(e);
g=E(a[0]);try{m=E(a[1]||w)}catch(h){b.log(h+"decodeURIComponent error : "+a[1],"error"),m=a[1]||w}b.endsWith(g,"[]")&&(g=g.substring(0,g.length-2));o.call(f,g)?b.isArray(f[g])?f[g].push(m):f[g]=[f[g],m]:f[g]=m}return f},later:function(c,a,e,f,g){var a=a||0,m=c,d=b.makeArray(g),l;b.isString(c)&&(m=f[c]);m||b.error("method undefined");c=function(){m.apply(f,d)};l=e?setInterval(c,a):setTimeout(c,a);return{id:l,interval:e,cancel:function(){this.interval?clearInterval(l):clearTimeout(l)}}},startsWith:function(c,
a){return 0===c.lastIndexOf(a,0)},endsWith:function(c,a){var e=c.length-a.length;return 0<=e&&c.indexOf(a,e)==e},throttle:function(c,a,e){a=a||150;if(-1===a)return function(){c.apply(e||this,arguments)};var f=b.now();return function(){var g=b.now();g-f>a&&(f=g,c.apply(e||this,arguments))}},buffer:function(a,e,f){function g(){g.stop();m=b.later(a,e,c,f||this,arguments)}e=e||150;if(-1===e)return function(){a.apply(f||this,arguments)};var m=null;g.stop=function(){m&&(m.cancel(),m=0)};return g}});b.mix(b,
{isBoolean:j,isNumber:j,isString:j,isFunction:j,isArray:j,isDate:j,isRegExp:j,isObject:j});b.each("Boolean,Number,String,Function,Array,Date,RegExp,Object".split(","),function(c,a){H["[object "+c+"]"]=a=c.toLowerCase();b["is"+c]=function(c){return b.type(c)==a}})})(KISSY,void 0);(function(b){"require"in this||(b.__loader={},b.__loaderUtils={},b.__loaderData={})})(KISSY);
(function(b,d){"require"in this||(b.configs.map=function(d){b.Config.mappedRules=(b.Config.mappedRules||[]).concat(d)},b.mix(d,{__getMappedPath:function(d){for(var h=b.Config.mappedRules||[],j=0;j<h.length;j++){var a=h[j];if(d.match(a[0]))return d.replace(a[0],a[1])}return d}}))})(KISSY,KISSY.__loader);
(function(b,d){if(!("require"in this)){var k;k=b.configs.combines=function(d,j){var a;if(b.isObject(d))b.each(d,function(a,f){b.each(a,function(a){k(a,f)})});else if(a=b.Config.combines=b.Config.combines||{},j)a[d]=j;else return a[d]||d};b.mix(d,{__getCombinedMod:function(d){return(b.Config.combines=b.Config.combines||{})[d]||d}})}})(KISSY,KISSY.__loader);(function(b,d){"require"in this||b.mix(d,{INIT:0,LOADING:1,LOADED:2,ERROR:3,ATTACHED:4})})(KISSY,KISSY.__loaderData);
(function(b,d,k){if(!("require"in this)){var h=navigator.userAgent,j=document;b.mix(k,{docHead:function(){return j.getElementsByTagName("head")[0]||j.documentElement},isWebKit:!!h.match(/AppleWebKit/),IE:!!h.match(/MSIE/),isCss:function(a){return/\.css(?:\?|$)/i.test(a)},isLinkNode:function(a){return"link"==a.nodeName.toLowerCase()},normalizePath:function(a){for(var a=a.split("/"),g=[],e,c=0;c<a.length;c++)e=a[c],"."!=e&&(".."==e?g.pop():g.push(e));return g.join("/")},normalDepModuleName:function l(e,
c){if(!c)return c;if(b.isArray(c)){for(var m=0;m<c.length;m++)c[m]=l(e,c[m]);return c}if(a(c,"../")||a(c,"./")){var m="",d;if(-1!=(d=e.lastIndexOf("/")))m=e.substring(0,d+1);return g(m+c)}return-1!=c.indexOf("./")||-1!=c.indexOf("../")?g(c):c},removePostfix:function(a){return a.replace(/(-min)?\.js[^/]*$/i,"")},normalBasePath:function(l){(l=b.trim(l))&&"/"!=l.charAt(l.length-1)&&(l+="/");!l.match(/^(http(s)?)|(file):/i)&&!a(l,"/")&&(l=d.__pagePath+l);return g(l)},absoluteFilePath:function(a){a=k.normalBasePath(a);
return a.substring(0,a.length-1)},indexMapping:function(a){for(var e=0;e<a.length;e++)a[e].match(/\/$/)&&(a[e]+="index");return a}});var a=b.startsWith,g=k.normalizePath}})(KISSY,KISSY.__loader,KISSY.__loaderUtils);
(function(b,d){function k(){for(var g in a){var f=a[g],l=f.node,e=0;if(d.isWebKit)l.sheet&&(b.log("webkit loaded : "+g),e=1);else if(l.sheet)try{var c;if(c=l.sheet.cssRules)b.log("firefox  "+c+" loaded : "+g),e=1}catch(m){1E3===m.code&&(b.log("firefox  "+m.name+" loaded : "+g),e=1)}if(e){for(e=0;e<f.length;e++)f[e].call(l);delete a[g]}}b.isEmptyObject(a)?(j=0,b.log("end css polling")):j=setTimeout(k,h)}if(!("require"in this)){var h=30,j=0,a={};b.mix(d,{scriptOnload:document.addEventListener?function(a,
f){if(d.isLinkNode(a))return d.styleOnload(a,f);a.addEventListener("load",f,!1)}:function(a,f){if(d.isLinkNode(a))return d.styleOnload(a,f);var b=a.onreadystatechange;a.onreadystatechange=function(){/loaded|complete/i.test(a.readyState)&&(a.onreadystatechange=null,b&&b(),f.call(this))}},styleOnload:window.attachEvent?function(a,f){function d(){a.detachEvent("onload",d);b.log("ie/opera loaded : "+a.href);f.call(a)}a.attachEvent("onload",d)}:function(g,f){var d=g.href,d=a[d]=a[d]||[];d.node=g;d.push(f);
j||(b.log("start css polling"),k())}})}})(KISSY,KISSY.__loaderUtils);
(function(b,d){if(!("require"in this)){var k=d.scriptOnload;b.mix(b,{getStyle:function(h,j,a){var g=document,f=d.docHead(),g=g.createElement("link"),l=j;b.isPlainObject(l)&&(j=l.success,a=l.charset);g.href=h;g.rel="stylesheet";a&&(g.charset=a);j&&d.scriptOnload(g,j);f.appendChild(g);return g},getScript:function(h,j,a){function g(){o&&(o.cancel(),o=void 0)}if(d.isCss(h))return b.getStyle(h,j,a);var f=document,l=f.head||f.getElementsByTagName("head")[0],e=f.createElement("script"),c=j,m,n,o;b.isPlainObject(c)&&
(j=c.success,m=c.error,n=c.timeout,a=c.charset);e.src=h;e.async=!0;a&&(e.charset=a);if(j||m)k(e,function(){g();b.isFunction(j)&&j.call(e)}),b.isFunction(m)&&(f.addEventListener&&e.addEventListener("error",function(){g();m.call(e)},!1),o=b.later(function(){o=void 0;m()},1E3*(n||this.Config.timeout)));l.insertBefore(e,l.firstChild);return e}})}})(KISSY,KISSY.__loaderUtils);
(function(b,d,k,h){if(!("require"in this)){var j=k.IE,a=h.ATTACHED,g=b.mix;g(d,{add:function(f,d,e){var c=this.Env.mods,m;b.isString(f)&&!e&&b.isPlainObject(d)&&(m={},m[f]=d,f=m);if(b.isPlainObject(f))return b.each(f,function(a,e){a.name=e;c[e]&&g(a,c[e],false)}),g(c,f),this;if(b.isString(f)){var h;if(e&&(h=e.host)){f=c[h];if(!f)return b.log("module "+h+" can not be found !","error"),this;this.__isAttached(h)?d.call(this,this):(f.fns=f.fns||[],f.fns.push(d));return this}this.__registerModule(f,d,
e);if(e&&!1===e.attach)return this;d=c[f];f=k.normalDepModuleName(f,d.requires);if(this.__isAttached(f))this.__attachMod(d);else if(this.Config.debug&&!d)for(f=(h=b.makeArray(f)).length-1;0<=f;f--)e=h[f],(c[e]||{}).status!==a&&b.log(d.name+" not attached when added : depends "+e);return this}if(b.isFunction(f))return e=d,d=f,j?(f=this.__findModuleNameByInteractive(),b.log("old_ie get modname by interactive : "+f),this.__registerModule(f,d,e),this.__startLoadModuleName=null,this.__startLoadTime=0):
this.__currentModule={def:d,config:e},this;b.log("invalid format for KISSY.add !","error");return this}})}})(KISSY,KISSY.__loader,KISSY.__loaderUtils,KISSY.__loaderData);
(function(b,d,k,h){"require"in this||b.mix(d,{__buildPath:function(b,a){function g(e,c){b[e+"__builded"]||(b[e+"__builded"]=1,!b[e]&&b[c]&&(b[c]=k.normalDepModuleName(b.name,b[c]),b[e]=a+b[c]),b[e]&&d.debug&&(b[e]=b[e].replace(/-min/ig,"")),b[e]&&!b[e].match(/\?t=/)&&b.tag&&(b[e]+="?t="+b.tag),b[e]&&(b[e]=f.__getMappedPath(b[e])))}var f=this,d=f.Config,a=a||d.base;g("fullpath","path");b.cssfullpath!==h.LOADED&&g("cssfullpath","csspath")}})})(KISSY,KISSY.__loader,KISSY.__loaderUtils,KISSY.__loaderData);
(function(b,d){"require"in this||b.mix(d,{__mixMod:function(d,h){var j=this.Env.mods,a=h.Env.mods,g=j[d]||{},f=g.status;a[d]&&(b.mix(g,b.clone(a[d])),f&&(g.status=f));this.__buildPath(g,h.Config.base);j[d]=g}})})(KISSY,KISSY.__loader);
(function(b,d,k){"require"in this||b.mix(d,{__findModuleNameByInteractive:function(){for(var d=document.getElementsByTagName("script"),j,a,g=0;g<d.length;g++)if(a=d[g],"interactive"==a.readyState){j=a;break}if(!j)return b.log("can not find interactive script,time diff : "+(+new Date-this.__startLoadTime),"error"),b.log("old_ie get modname from cache : "+this.__startLoadModuleName),this.__startLoadModuleName;d=k.absoluteFilePath(j.src);this.Config.base=k.normalBasePath(this.Config.base);if(0===d.lastIndexOf(this.Config.base,
0))return k.removePostfix(d.substring(this.Config.base.length));j=this.Config.packages;var f;a=-1;for(var l in j)j.hasOwnProperty(l)&&(g=j[l].path,j.hasOwnProperty(l)&&0===d.lastIndexOf(g,0)&&g.length>a&&(a=g.length,f=g));if(f)return k.removePostfix(d.substring(f.length));b.log("interactive script does not have package config \uff1a"+d,"error")}})})(KISSY,KISSY.__loader,KISSY.__loaderUtils);
(function(b,d,k,h){if(!("require"in this)){var j=k.IE,a=h.LOADING,g=h.LOADED,f=h.ERROR,l=h.ATTACHED;b.mix(d,{__load:function(e,c,m){function d(){b.log(e.name+" is not loaded! can not find module in path : "+e.fullpath,"error");e.status=f}function h(){m.global&&p.__mixMod(e.name,m.global)}function q(){u[s]=g;e.status!==f&&(e.status!==l&&(e.status=g),c())}var p=this,s=e.fullpath,r=k.isCss(s),u=b.Env._loadQueue,t=u[s],v=t;e.status=e.status||0;e.status<a&&t&&(e.status=t===g?g:a);b.isString(e.cssfullpath)&&
(b.getScript(e.cssfullpath),e.cssfullpath=e.csspath=g);e.status<a&&s?(e.status=a,j&&!r&&(p.__startLoadModuleName=e.name,p.__startLoadTime=Number(+new Date)),v=b.getScript(s,{success:function(){if(!r){if(p.__currentModule){b.log("standard browser get modname after load : "+e.name);p.__registerModule(e.name,p.__currentModule.def,p.__currentModule.config);p.__currentModule=null}h();e.fns&&e.fns.length>0||d()}e.status!=f&&b.log(e.name+" is loaded.","info");q()},error:function(){d();q()},charset:e.charset}),
u[s]=v):e.status===a?k.scriptOnload(v,function(){h();q()}):(h(),c())}})}})(KISSY,KISSY.__loader,KISSY.__loaderUtils,KISSY.__loaderData);(function(b,d,k){if(!("require"in this)){var h=k.ATTACHED,k=b.mix;k(d,{__pagePath:location.href.replace(location.hash,"").replace(/[^/]*$/i,""),__currentModule:null,__startLoadTime:0,__startLoadModuleName:null,__isAttached:function(d){var a=this.Env.mods,g=!0;b.each(d,function(f){f=a[f];if(!f||f.status!==h)return g=!1});return g}})}})(KISSY,KISSY.__loader,KISSY.__loaderData);
(function(b,d,k){"require"in this||(b.configs.packages=function(d){var j;j=b.Config.packages=b.Config.packages||{};b.each(d,function(a){j[a.name]=a;a.path=a.path&&k.normalBasePath(a.path);a.tag=a.tag&&encodeURIComponent(a.tag)})},b.mix(d,{__getPackagePath:function(d){if(d.packagepath)return d.packagepath;var j=b.__getCombinedMod(d.name),a=this.Config.packages||{},g="",f;for(f in a)a.hasOwnProperty(f)&&b.startsWith(j,f)&&f.length>g.length&&(g=f);j=a[g];d.charset=j&&j.charset||d.charset;d.tag=j?j.tag:
encodeURIComponent(b.Config.tag||b.buildTime);return d.packagepath=j&&j.path||this.Config.base}}))})(KISSY,KISSY.__loader,KISSY.__loaderUtils);(function(b,d,k){if(!("require"in this)){var h=k.LOADED,j=b.mix;j(d,{__registerModule:function(a,g,f){var f=f||{},d=this.Env.mods,e=d[a]||{};j(e,{name:a,status:h});e.fns&&e.fns.length&&b.log(a+" is defined more than once");e.fns=e.fns||[];e.fns.push(g);j(d[a]=e,f)}})}})(KISSY,KISSY.__loader,KISSY.__loaderData);
(function(b,d,k,h){if(!("require"in this)){var j=h.LOADED,a=h.ATTACHED;b.mix(d,{use:function(a,f,d){a=a.replace(/\s+/g,"").split(",");k.indexMapping(a);var d=d||{},e=this,c;if(e.__isAttached(a)){var m=e.__getModules(a);f&&f.apply(e,m)}else return b.each(a,function(b){e.__attachModByName(b,function(){if(!c&&e.__isAttached(a)){c=!0;var b=e.__getModules(a);f&&f.apply(e,b)}},d)}),e},__getModules:function(a){var f=this,d=[f];b.each(a,function(a){k.isCss(a)||d.push(f.require(a))});return d},require:function(a){var a=
this.Env.mods[a],f=this.onRequire&&this.onRequire(a);return void 0!==f?f:a&&a.value},__attachModByName:function(g,f,d){var e=this.Env.mods,c=e[g];c||(c={path:(this.Config.componentJsName||function(c){var a="js",e;if(e=c.match(/(.+)\.(js|css)$/i))a=e[2],c=e[1];return c+"-min."+a})(b.__getCombinedMod(g)),charset:"utf-8"},e[g]=c);c.name=g;c&&c.status===a||(d.global&&this.__mixMod(g,d.global),this.__attach(c,f,d))},__attach:function(g,f,d){function e(){var c,a=g.name,e,f,m,d,l=g.requires;c=g.__allRequires=
g.__allRequires||{};for(var h=0;h<l.length;h++)if(e=l[h],m=s[e],c[e]=1,m&&(d=m.__allRequires))for(f in d)d.hasOwnProperty(f)&&(c[f]=1);if(c[a]){f=[];for(e in c)c.hasOwnProperty(e)&&f.push(e);b.error("find cyclic dependency by mod "+a+" between mods : "+f.join(","))}}function c(){!p&&m.__isAttached(g.requires)&&(g.status===j&&m.__attachMod(g),g.status===a&&(p=1,f()))}var m=this,h,o,q,p=0,s=m.Env.mods,r=(g.requires||[]).concat();g.requires=r;b.Config.debug&&e();for(q=0;q<r.length;q++)h=r[q]=k.normalDepModuleName(g.name,
r[q]),(o=s[h])&&o.status===a||m.__attachModByName(h,c,d);m.__buildPath(g,m.__getPackagePath(g));m.__load(g,function(){g.requires=g.requires||[];var e=g.requires,f=[];for(q=0;q<e.length;q++){h=e[q]=k.normalDepModuleName(g.name,e[q]);var j=s[h],o=b.inArray(h,r);j&&j.status===a||o||f.push(h)}if(f.length)for(q=0;q<f.length;q++)m.__attachModByName(f[q],c,d);else c()},d)},__attachMod:function(g){var f=this,d=g.fns;d&&b.each(d,function(a){a=b.isFunction(a)?a.apply(f,f.__getModules(g.requires)):a;g.value=
g.value||a});g.status=a}})}})(KISSY,KISSY.__loader,KISSY.__loaderUtils,KISSY.__loaderData);
(function(b,d,k){function h(g){var f=k.absoluteFilePath(g.src),d=g.getAttribute("data-combo-prefix")||"??",g=g.getAttribute("data-combo-sep")||",",g=f.split(g),e,c=g[0],d=c.indexOf(d);-1==d?e=f.replace(j,"$1"):(e=c.substring(0,d),f=c.substring(d+2,c.length),f.match(a)?e+=f.replace(j,"$1"):b.each(g,function(c){if(c.match(a)){e=e+c.replace(j,"$1");return false}}));return e}if(!("require"in this)){b.mix(b,d);var j=/^(.*)(seed|kissy)(-aio)?(-min)?\.js[^/]*/i,a=/(seed|kissy)(-aio)?(-min)?\.js/i;b.__initLoader=
function(){this.Env.mods=this.Env.mods||{}};b.Env._loadQueue={};b.__initLoader();(function(){var a=document.getElementsByTagName("script"),a=h(a[a.length-1]);b.Config.base=k.normalBasePath(a);b.Config.timeout=10})();b.mix(b.configs,{base:function(a){b.Config.base=k.normalBasePath(a)},timeout:function(a){b.Config.timeout=a},debug:function(a){b.Config.debug=a}});b.each(d,function(a,f){b.__APP_MEMBERS.push(f)});b.__APP_INIT_METHODS.push("__initLoader")}})(KISSY,KISSY.__loader,KISSY.__loaderUtils);
(function(b,d){function k(){if(!g&&(g=!0,f)){for(var a,e=0;a=f[e++];)a.call(h,b);f=null}}var h=b.__HOST,j=h.document,a=j.documentElement,g=!1,f=[],l=/^#?([\w-]+)$/,e=/\S/;b.mix(b,{isWindow:function(a){return"object"===b.type(a)&&"setInterval"in a&&"document"in a&&9==a.document.nodeType},parseXML:function(a){var e;try{window.DOMParser?e=(new DOMParser).parseFromString(a,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(a))}catch(f){b.log("parseXML error : "),b.log(f),e=
d}(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+a);return e},globalEval:function(a){a&&e.test(a)&&(window.execScript||function(a){window.eval.call(window,a)})(a)},ready:function(a){g?a.call(h,this):f.push(a);return this},available:function(a,e){if((a=(a+"").match(l)[1])&&b.isFunction(e))var f=1,g,d=b.later(function(){((g=j.getElementById(a))&&(e(g)||1)||500<++f)&&d.cancel()},40,!0)}});if(location&&-1!==(location.search||"").indexOf("ks-debug"))b.Config.debug=
!0;(function(){var c=a.doScroll,e=c?"onreadystatechange":"DOMContentLoaded",f=function(){k()};if("complete"===j.readyState)k();else{if(j.addEventListener){var g=function(){j.removeEventListener(e,g,!1);k()};j.addEventListener(e,g,!1);h.addEventListener("load",f,!1)}else{var d=function(){"complete"===j.readyState&&(j.detachEvent(e,d),k())};j.attachEvent(e,d);h.attachEvent("onload",f);f=!1;try{f=null===h.frameElement}catch(l){b.log("frameElement error : "),b.log(l)}if(c&&f){var s=function(){try{c("left"),
k()}catch(a){setTimeout(s,40)}};s()}}return 0}})()})(KISSY,void 0);(function(b){b.config({combines:{core:"dom,ua,event,node,json,ajax,anim,base,cookie".split(",")}})})(KISSY);
KISSY.add("ua/base",function(){var b=navigator.userAgent,d="",k="",h,j=[6,9],a=document.createElement("div"),g,f={},l=function(a){var c=0;return parseFloat(a.replace(/\./g,function(){return 0===c++?".":""}))};a.innerHTML="<\!--[if IE {{version}}]><s></s><![endif]--\>".replace("{{version}}","");g=a.getElementsByTagName("s");if(0<g.length){k="ie";f[d="trident"]=0.1;if((h=b.match(/Trident\/([\d.]*)/))&&h[1])f[d]=l(h[1]);b=j[0];for(j=j[1];b<=j;b++)if(a.innerHTML="<\!--[if IE {{version}}]><s></s><![endif]--\>".replace("{{version}}",
b),0<g.length){f[k]=b;break}}else if((h=b.match(/AppleWebKit\/([\d.]*)/))&&h[1]){f[d="webkit"]=l(h[1]);if((h=b.match(/Chrome\/([\d.]*)/))&&h[1])f[k="chrome"]=l(h[1]);else if((h=b.match(/\/([\d.]*) Safari/))&&h[1])f[k="safari"]=l(h[1]);if(/ Mobile\//.test(b))f.mobile="apple";else if(h=b.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))f.mobile=h[0].toLowerCase()}else if((h=b.match(/Presto\/([\d.]*)/))&&h[1]){if(f[d="presto"]=l(h[1]),(h=b.match(/Opera\/([\d.]*)/))&&h[1]){f[k="opera"]=l(h[1]);if((h=
b.match(/Opera\/.* Version\/([\d.]*)/))&&h[1])f[k]=l(h[1]);if((h=b.match(/Opera Mini[^;]*/))&&h)f.mobile=h[0].toLowerCase();else if((h=b.match(/Opera Mobi[^;]*/))&&h)f.mobile=h[0]}}else if((h=b.match(/MSIE\s([^;]*)/))&&h[1]){if(f[d="trident"]=0.1,f[k="ie"]=l(h[1]),(h=b.match(/Trident\/([\d.]*)/))&&h[1])f[d]=l(h[1])}else if(h=b.match(/Gecko/)){f[d="gecko"]=0.1;if((h=b.match(/rv:([\d.]*)/))&&h[1])f[d]=l(h[1]);if((h=b.match(/Firefox\/([\d.]*)/))&&h[1])f[k="firefox"]=l(h[1])}f.core=d;f.shell=k;f._numberify=
l;return f});KISSY.add("ua/extra",function(b,d){var k=navigator.userAgent,h,j,a={},g=d._numberify;if(k.match(/360SE/))a[j="se360"]=3;else if(k.match(/Maxthon/)&&(h=window.external)){j="maxthon";try{a[j]=g(h.max_version)}catch(f){a[j]=0.1}}else if(h=k.match(/TencentTraveler\s([\d.]*)/))a[j="tt"]=h[1]?g(h[1]):0.1;else if(k.match(/TheWorld/))a[j="theworld"]=3;else if(h=k.match(/SE\s([\d.]*)/))a[j="sougou"]=h[1]?g(h[1]):0.1;j&&(a.shell=j);b.mix(d,a);return d},{requires:["ua/base"]});
KISSY.add("ua",function(b,d){return d},{requires:["ua/extra"]});
KISSY.add("dom/base",function(b,d,k){function h(a,f){return a&&a.nodeType===f}var j={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},a={_isCustomDomain:function(a){var a=a||window,f=a.document.domain,a=a.location.hostname;return f!=a&&f!="["+a+"]"},_genEmptyIframeSrc:function(b){b=b||window;if(d.ie&&a._isCustomDomain(b))return"javascript:void(function(){"+
encodeURIComponent("document.open();document.domain='"+b.document.domain+"';document.close();")+"}())"},_NODE_TYPE:j,_isElementNode:function(b){return h(b,a.ELEMENT_NODE)},_getWin:function(b){return b&&"scrollTo"in b&&b.document?b:h(b,a.DOCUMENT_NODE)?b.defaultView||b.parentWindow:b===k||null===b?window:!1},_nodeTypeIs:h,_isNodeList:function(a){return a&&!a.nodeType&&a.item&&!a.setTimeout},_nodeName:function(a,f){return a&&a.nodeName.toLowerCase()===f.toLowerCase()}};b.mix(a,j);return a},{requires:["ua"]});
KISSY.add("dom/attr",function(b,d,k,h){function j(a,c){var c=r[c]||c,e=t[c];return e&&e.get?e.get(a,c):a[c]}var k=document.documentElement,a=!k.hasAttribute,g=k.textContent===h?"innerText":"textContent",f=d._nodeName,l=d._isElementNode,e=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,c=/^(?:button|input|object|select|textarea)$/i,m=/^a(?:rea)?$/i,n=/:|^on/,o=/\r/g,q={},p={val:1,css:1,html:1,text:1,data:1,width:1,height:1,
offset:1,scrollTop:1,scrollLeft:1},s={tabindex:{get:function(a){var e=a.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):c.test(a.nodeName)||m.test(a.nodeName)&&a.href?0:h}},style:{get:function(a){return a.style.cssText},set:function(a,c){a.style.cssText=c}}},r={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",
contenteditable:"contentEditable"},u={get:function(a,c){return d.prop(a,c)?c.toLowerCase():h},set:function(a,c,e){!1===c?d.removeAttr(a,e):(c=r[e]||e,c in a&&(a[c]=!0),a.setAttribute(e,e.toLowerCase()));return e}},t={},v={},w={option:{get:function(a){var c=a.attributes.value;return!c||c.specified?a.value:a.text}},select:{get:function(a){var c=a.selectedIndex,e=a.options;if(0>c)return null;if("select-one"===a.type)return d.val(e[c]);for(var a=[],c=0,f=e.length;c<f;++c)e[c].selected&&a.push(d.val(e[c]));
return a},set:function(a,c){var e=b.makeArray(c);b.each(a.options,function(a){a.selected=b.inArray(d.val(a),e)});e.length||(a.selectedIndex=-1);return e}}};a&&(v={get:function(a,c){var e;return(e=a.getAttributeNode(c))&&""!==e.nodeValue?e.nodeValue:h},set:function(a,c,e){var f=a.getAttributeNode(e);if(f)f.nodeValue=c;else try{var b=a.ownerDocument.createAttribute(e);b.value=c;a.setAttributeNode(b)}catch(d){return a.setAttribute(e,c,0)}}},q=r,s.tabIndex=s.tabindex,b.each("href,src,width,height,colSpan,rowSpan".split(","),
function(a){s[a]={get:function(c){c=c.getAttribute(a,2);return c===null?h:c}}}),w.button=s.value=v);b.each(["radio","checkbox"],function(a){w[a]={get:function(a){return a.getAttribute("value")===null?"on":a.value},set:function(a,c){if(b.isArray(c))return a.checked=b.inArray(d.val(a),c)}}});b.mix(d,{prop:function(a,c,e){if(b.isPlainObject(c))for(var f in c)d.prop(a,f,c[f]);else{var a=d.query(a),c=r[c]||c,g=t[c];if(e!==h)a.each(function(a){g&&g.set?g.set(a,e,c):a[c]=e});else if(a.length)return j(a[0],
c)}},hasProp:function(a,c){for(var e=d.query(a),f=0;f<e.length;f++)if(j(e[f],c)!==h)return true;return false},removeProp:function(a,c){c=r[c]||c;d.query(a).each(function(a){try{a[c]=h;delete a[c]}catch(e){b.log("delete el property error : ");b.log(e)}})},attr:function(a,c,e,f){if(b.isPlainObject(c)){var f=e,g;for(g in c)d.attr(a,g,c[g],f)}else if(c=b.trim(c)){if(f&&p[c])return d[c](a,e);c=c.toLowerCase();if(f&&p[c])return d[c](a,e);a=d.query(a);if(e===h)return d.__attr(a[0],c);a.each(function(a){d.__attr(a,
c,e)})}},__attr:function(a,c,b){if(l(a)){var c=q[c]||c,d;d=f(a,"form")?v:e.test(c)?u:n.test(c)?v:s[c];if(b===h){if(d&&d.get)return d.get(a,c);a=a.getAttribute(c);return a===null?h:a}d&&d.set?d.set(a,b,c):a.setAttribute(c,""+b)}},removeAttr:function(a,c){c=c.toLowerCase();c=q[c]||c;d.query(a).each(function(a){if(l(a)){var f;a.removeAttribute(c);if(e.test(c)&&(f=r[c]||c)in a)a[f]=false}})},hasAttr:a?function(a,c){for(var c=c.toLowerCase(),e=d.query(a),f=0;f<e.length;f++){var b=e[f].getAttributeNode(c);
if(b&&b.specified)return true}return false}:function(a,c){for(var e=d.query(a),f=0;f<e.length;f++)if(e[f].hasAttribute(c))return true;return false},val:function(a,c){var e,f;if(c===h){var g=d.get(a);if(g){if((e=w[g.nodeName.toLowerCase()]||w[g.type])&&"get"in e&&(f=e.get(g,"value"))!==h)return f;f=g.value;return typeof f==="string"?f.replace(o,""):b.isNullOrUndefined(f)?"":f}}else d.query(a).each(function(a){if(a.nodeType===1){var f=c;b.isNullOrUndefined(f)?f="":typeof f==="number"?f=f+"":b.isArray(f)&&
(f=b.map(f,function(a){return b.isNullOrUndefined(f)?"":a+""}));e=w[a.nodeName.toLowerCase()]||w[a.type];if(!e||!("set"in e)||e.set(a,f,"value")===h)a.value=f}})},text:function(a,c){if(c===h){var e=d.get(a);return l(e)?e[g]||"":d._nodeTypeIs(e,d.TEXT_NODE)?e.nodeValue:h}d.query(a).each(function(a){if(l(a))a[g]=c;else if(d._nodeTypeIs(a,d.TEXT_NODE))a.nodeValue=c})}});return d},{requires:["./base","ua"]});
KISSY.add("dom/class",function(b,d,k){function h(b){return(a+b+a).replace(f,a)}function j(a,e,c,f){if(!(e=b.trim(e)))return f?!1:k;for(var a=d.query(a),h=a.length,j=e.split(g),e=[],q=0;q<j.length;q++){var p=b.trim(j[q]);p&&e.push(p)}for(q=0;q<h;q++)if(j=a[q],d._isElementNode(j)&&(j=c(j,e,e.length),j!==k))return j;return f?!1:k}var a=" ",g=/[\.\s]\s*\.?/,f=/[\n\t]/g;b.mix(d,{__hasClass:function(f,e){var c=f.className;return c?(c=h(c),-1<c.indexOf(a+e+a)):!1},hasClass:function(f,e){return j(f,e,function(c,
e,f){if(c=c.className){for(var c=h(c),b=0,d=!0;b<f;b++)if(0>c.indexOf(a+e[b]+a)){d=!1;break}if(d)return!0}},!0)},addClass:function(f,e){j(f,e,function(c,f,d){var g=c.className;if(g){for(var l=h(g),j=0;j<d;j++)0>l.indexOf(a+f[j]+a)&&(g+=a+f[j]);c.className=b.trim(g)}else c.className=e},k)},removeClass:function(f,e){j(f,e,function(c,e,f){var d=c.className;if(d)if(f){for(var d=h(d),g=0,l;g<f;g++)for(l=a+e[g]+a;0<=d.indexOf(l);)d=d.replace(l,a);c.className=b.trim(d)}else c.className=""},k)},replaceClass:function(a,
e,c){d.removeClass(a,e);d.addClass(a,c)},toggleClass:function(a,e,c){var f=b.isBoolean(c),g;j(a,e,function(a,e,b){for(var l=0,h;l<b;l++)h=e[l],g=f?!c:d.hasClass(a,h),d[g?"removeClass":"addClass"](a,h)},k)}});return d},{requires:["dom/base"]});
KISSY.add("dom/create",function(b,d,k,h){function j(a){var c=b.require("event");c&&c.detach(a);d.removeData(a)}function a(e,f,b){if(c(f,d.DOCUMENT_FRAGMENT_NODE))for(var f=f.childNodes,b=b.childNodes,g=0;f[g];)b[g]&&a(e,f[g],b[g]),g++;else if(m(f)){f=f.getElementsByTagName("*");b=b.getElementsByTagName("*");for(g=0;f[g];)b[g]&&e(f[g],b[g]),g++}}function g(a,c){var e=b.require("event");if(!m(c)||d.hasData(a)){var f=d.data(a),g;for(g in f)d.data(c,g,f[g]);e&&(e._removeData(c),e._clone(a,c))}}function f(a,
c){c.clearAttributes&&c.clearAttributes();c.mergeAttributes&&c.mergeAttributes(a);var e=c.nodeName.toLowerCase(),f=a.childNodes;if("object"===e&&!c.childNodes.length)for(e=0;e<f.length;e++)c.appendChild(f[e].cloneNode(!0));else if("input"===e&&("checkbox"===a.type||"radio"===a.type)){if(a.checked&&(c.defaultChecked=c.checked=a.checked),c.value!==a.value)c.value=a.value}else if("option"===e)c.selected=a.defaultSelected;else if("input"===e||"textarea"===e)c.defaultValue=a.defaultValue;c.removeAttribute(d.__EXPANDO)}
function l(a,c){var e=null,f,g;if(a&&(a.push||a.item)&&a[0]){c=c||a[0].ownerDocument;e=c.createDocumentFragment();a=b.makeArray(a);f=0;for(g=a.length;f<g;f++)e.appendChild(a[f])}else b.log("Unable to convert "+a+" to fragment.");return e}var e=document,k=k.ie,c=d._nodeTypeIs,m=d._isElementNode,n=b.isString,o=e.createElement("div"),q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,p=/<([\w:]+)/,s=/^\s+/,r=k&&9>k,u=/<|&#?\w+;/,t=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;b.mix(d,{create:function(a,
f,g,j){if(m(a)||c(a,d.TEXT_NODE))return d.clone(a);var k=null;if(!n(a))return k;j===h&&(j=!0);j&&(a=b.trim(a));if(!a)return k;var j=d._creators,o,v,g=g||e,w,x="div";if(u.test(a))if(w=t.exec(a))k=g.createElement(w[1]);else{a=a.replace(q,"<$1></$2>");if((w=p.exec(a))&&(o=w[1]))x=o.toLowerCase();o=(j[x]||j.div)(a,g);r&&(v=a.match(s))&&o.insertBefore(g.createTextNode(v[0]),o.firstChild);v=o.childNodes;1===v.length?k=v[0].parentNode.removeChild(v[0]):v.length?k=l(v,g):b.error(a+" : create node error")}else k=
g.createTextNode(a);a=k;b.isPlainObject(f)&&(m(a)?d.attr(a,f,!0):c(a,d.DOCUMENT_FRAGMENT_NODE)&&d.attr(a.childNodes,f,!0));return a},_creators:{div:function(a,c){var f=c&&c!=e?c.createElement("div"):o;f.innerHTML="m<div>"+a+"</div>";return f.lastChild}},html:function(a,c,e,f){var a=d.query(a),b=a[0];if(b){if(c===h)return m(b)?b.innerHTML:null;var g=!1,c=c+"";if(!c.match(/<(?:script|style)/i)&&(!r||!c.match(s))&&!y[(c.match(p)||["",""])[1].toLowerCase()])try{a.each(function(a){m(a)&&(j(a.getElementsByTagName("*")),
a.innerHTML=c)}),g=!0}catch(l){}g||(c=d.create(c,0,b.ownerDocument,!1),a.each(function(a){m(a)&&(d.empty(a),d.append(c,a,e))}));f&&f()}},remove:function(a,c){d.query(a).each(function(a){if(!c&&m(a)){var e=a.getElementsByTagName("*");j(e);j(a)}a.parentNode&&a.parentNode.removeChild(a)})},clone:function(e,b,l,h){e=d.get(e);if(!e)return null;var j=e.cloneNode(b);if(m(e)||c(e,d.DOCUMENT_FRAGMENT_NODE))m(e)&&f(e,j),b&&a(f,e,j);l&&(g(e,j),b&&h&&a(g,e,j));return j},empty:function(a){d.query(a).each(function(a){d.remove(a.childNodes)})},
_nl2frag:l});var v=d._creators,w=d.create,x=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,y={option:"select",optgroup:"select",area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},A;for(A in y)(function(a){v[A]=function(c,e){return w("<"+a+">"+c+"</"+a+">",null,e)}})(y[A]);8>k&&(v.tbody=function(a,c){var e=w("<table>"+a+"</table>",null,c),f=e.children.tags("tbody")[0];1<e.children.length&&f&&!x.test(a)&&
f.parentNode.removeChild(f);return e});b.mix(v,{thead:v.tbody,tfoot:v.tbody,caption:v.tbody,colgroup:v.tbody});return d},{requires:["./base","ua"]});
KISSY.add("dom/data",function(b,d,k){var h=window,j="_ks_data_"+b.now(),a={},g={},f={applet:1,object:1,embed:1},l={hasData:function(a,c){if(a)if(c!==k){if(c in a)return!0}else if(!b.isEmptyObject(a))return!0;return!1}},e={hasData:function(a,c){return a==h?e.hasData(g,c):l.hasData(a[j],c)},data:function(a,c,f){if(a==h)return e.data(g,c,f);var b=a[j];if(f!==k)b=a[j]=a[j]||{},b[c]=f;else return c!==k?b&&b[c]:b=a[j]=a[j]||{}},removeData:function(a,c){if(a==h)return e.removeData(g,c);var f=a[j];if(c!==
k)delete f[c],b.isEmptyObject(f)&&e.removeData(a);else try{delete a[j]}catch(d){a[j]=k}}},c={hasData:function(c,e){var f=c[j];return!f?!1:l.hasData(a[f],e)},data:function(c,e,g){if(f[c.nodeName.toLowerCase()])return k;var d=c[j];if(!d){if(e!==k&&g===k)return k;d=c[j]=b.guid()}c=a[d];if(g!==k)c=a[d]=a[d]||{},c[e]=g;else return e!==k?c&&c[e]:c=a[d]=a[d]||{}},removeData:function(e,f){var g=e[j],d;if(g)if(d=a[g],f!==k)delete d[f],b.isEmptyObject(d)&&c.removeData(e);else{delete a[g];try{delete e[j]}catch(l){e[j]=
k}e.removeAttribute&&e.removeAttribute(j)}}};b.mix(d,{__EXPANDO:j,hasData:function(a,f){for(var b=!1,g=d.query(a),l=0;l<g.length&&!(b=(b=g[l])&&b.nodeType?c.hasData(b,f):e.hasData(b,f));l++);return b},data:function(a,f,g){if(b.isPlainObject(f)){for(var l in f)d.data(a,l,f[l]);return k}if(g===k){if((a=d.get(a))&&a.nodeType)return c.data(a,f,g);if(a)return e.data(a,f,g)}else d.query(a).each(function(a){a&&a.nodeType?c.data(a,f,g):e.data(a,f,g)});return k},removeData:function(a,f){d.query(a).each(function(a){a&&
a.nodeType?c.removeData(a,f):e.removeData(a,f)})}});return d},{requires:["./base"]});
KISSY.add("dom/insertion",function(b,d,k){function h(a){for(var e=0;e<a.length;e++){var f=a[e];if(f.nodeType==k.DOCUMENT_FRAGMENT_NODE)h(f.childNodes);else if(l(f,"input")){if("checkbox"===f.type||"radio"===f.type)f.defaultChecked=f.checked}else if(c(f))for(var f=f.getElementsByTagName("input"),b=0;b<f.length;b++)h(f[b])}}function j(a,b){var g=[],d,l,h;for(d=0;a[d];d++)if(l=a[d],h=l.nodeName.toLowerCase(),l.nodeType==k.DOCUMENT_FRAGMENT_NODE)g.push.apply(g,j(e(l.childNodes),b));else if("script"===
h&&(!l.type||m.test(l.type)))l.parentNode&&l.parentNode.removeChild(l),b&&b.push(l);else{if(c(l)&&!f.test(h)){h=[];var n,o,x=l.getElementsByTagName("script");for(o=0;o<x.length;o++)n=x[o],(!n.type||m.test(n.type))&&h.push(n);a.splice.apply(a,[d+1,0].concat(h))}g.push(l)}return g}function a(a){a.src?b.getScript(a.src):(a=b.trim(a.text||a.textContent||a.innerHTML||""))&&b.globalEval(a)}function g(c,e,f,g){c=k.query(c);g&&(g=[]);c=j(c,g);8>d.ie&&h(c);var e=k.query(e),m=c.length,l=e.length;if((m||g&&
g.length)&&l){var c=k._nl2frag(c),n;1<l&&(n=k.clone(c,!0));for(var o=0;o<l;o++){var x=e[o];if(m){var y=0<o?k.clone(n,!0):c;f(y,x)}g&&g.length&&b.each(g,a)}}}var f=/^(?:button|input|object|select|textarea)$/i,l=k._nodeName,e=b.makeArray,c=k._isElementNode,m=/\/(java|ecma)script/i;b.mix(k,{insertBefore:function(a,c,e){g(a,c,function(a,c){c.parentNode&&c.parentNode.insertBefore(a,c)},e)},insertAfter:function(a,c,e){g(a,c,function(a,c){c.parentNode&&c.parentNode.insertBefore(a,c.nextSibling)},e)},appendTo:function(a,
c,e){g(a,c,function(a,c){c.appendChild(a)},e)},prependTo:function(a,c,e){g(a,c,function(a,c){c.insertBefore(a,c.firstChild)},e)}});var n={prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},o;for(o in n)k[o]=k[n[o]];return k},{requires:["ua","./create"]});
KISSY.add("dom/offset",function(b,d,k,h){function j(a){var c,b=0;c=0;var g=f.body,m=n(a[s]);a[x]&&(c=a[x](),b=c[r],c=c[u],a=l&&9!=f.documentMode&&(o?e.clientTop:g.clientTop)||0,b-=l&&9!=f.documentMode&&(o?e.clientLeft:g.clientLeft)||0,c-=a,"apple"==k.mobile&&(b-=d[v](m),c-=d[w](m)));return{left:b,top:c}}function a(a,c){var e={left:0,top:0},f=n(a[s]),b=a,c=c||f;do{var g;if(f==c){var m=b;g=j(m);m=n(m[s]);g.left+=d[v](m);g.top+=d[w](m)}else g=j(b);e.left+=g.left;e.top+=g.top}while(f&&f!=c&&(b=f.frameElement)&&
(f=f.parent));return e}var g=window,f=document,l=k.ie,e=f.documentElement,c=d._isElementNode,m=d._nodeTypeIs,n=d._getWin,o="CSS1Compat"===f.compatMode,q=Math.max,p=parseInt,s="ownerDocument",r="left",u="top",t=b.isNumber,v="scrollLeft",w="scrollTop",x="getBoundingClientRect";b.mix(d,{offset:function(c,e,f){if(e===h){var c=d.get(c),b;c&&(b=a(c,f));return b}d.query(c).each(function(c){"static"===d.css(c,"position")&&(c.style.position="relative");var f=a(c),b={},g,m;for(m in e)g=p(d.css(c,m),10)||0,
b[m]=g+e[m]-f[m];d.css(c,b)})},scrollIntoView:function(a,c,e,f,b){var g,l;if(a=d.get(a)){c&&(c=d.get(c));c||(c=a.ownerDocument);!0!==b&&(f=f===h?!0:!!f,e=e===h?!0:!!e);m(c,d.DOCUMENT_NODE)&&(c=n(c));l=!!n(c);var b=d.offset(a),j=d.outerHeight(a);g=d.outerWidth(a);var k,o,v,t;l?(a=c,k=d.height(a),o=d.width(a),t={left:d.scrollLeft(a),top:d.scrollTop(a)},a=b[r]-t[r],l=b[u]-t[u],g=b[r]+g-(t[r]+o),b=b[u]+j-(t[u]+k)):(k=d.offset(c),o=c.clientHeight,v=c.clientWidth,t={left:d.scrollLeft(c),top:d.scrollTop(c)},
a=b[r]-k[r]-(p(d.css(c,"borderLeftWidth"))||0),l=b[u]-k[u]-(p(d.css(c,"borderTopWidth"))||0),g=b[r]+g-(k[r]+v+(p(d.css(c,"borderRightWidth"))||0)),b=b[u]+j-(k[u]+o+(p(d.css(c,"borderBottomWidth"))||0)));if(0>l||0<b)!0===e?d.scrollTop(c,t.top+l):!1===e?d.scrollTop(c,t.top+b):0>l?d.scrollTop(c,t.top+l):d.scrollTop(c,t.top+b);if(f&&(0>a||0<g))!0===e?d.scrollLeft(c,t.left+a):!1===e?d.scrollLeft(c,t.left+g):0>a?d.scrollLeft(c,t.left+a):d.scrollLeft(c,t.left+g)}},docWidth:0,docHeight:0,viewportHeight:0,
viewportWidth:0});b.each(["Left","Top"],function(a,e){var f="scroll"+a;d[f]=function(b,m){if(t(b))return arguments.callee(g,b);var b=d.get(b),l,j=n(b);if(j)if(m!==h){var m=parseFloat(m),k="Left"==a?m:d.scrollLeft(j),o="Top"==a?m:d.scrollTop(j);j.scrollTo(k,o)}else l=j["page"+(e?"Y":"X")+"Offset"],t(l)||(j=j.document,l=j.documentElement[f],t(l)||(l=j.body[f]));else c(b)&&(m!==h?b[f]=parseFloat(m):l=b[f]);return l}});b.each(["Width","Height"],function(a){d["doc"+a]=function(c){c=d.get(c);c=n(c).document;
return q(c.documentElement["scroll"+a],c.body["scroll"+a],d["viewport"+a](c))};d["viewport"+a]=function(c){var c=d.get(c),e="client"+a,c=n(c).document,f=c.body,b=c.documentElement[e];return"CSS1Compat"===c.compatMode&&b||f&&f[e]||b}});return d},{requires:["./base","ua"]});
KISSY.add("dom/style",function(b,d,k,h){function j(a){return a.replace(r,u)}function a(a,c,e){var f={},b;for(b in c)f[b]=a[m][b],a[m][b]=c[b];e.call(a);for(b in c)a[m][b]=f[b]}function g(a,c,e){var f;if(3===a.nodeType||8===a.nodeType||!(f=a[m]))return h;var c=j(c),g,d=x[c],c=y[c]||c;if(e!==h){null===e||e===v?e=v:!isNaN(Number(e))&&!s[c]&&(e+=w);d&&d.set&&(e=d.set(a,e));if(e!==h)try{a[m][c]=e}catch(l){b.log("css set error :"+l)}return h}if(!d||!("get"in d&&(g=d.get(a,!1))!==h))g=f[c];return g===h?
"":g}function f(a,c,e){if(b.isWindow(a))return c==n?d.viewportWidth(a):d.viewportHeight(a);if(9==a.nodeType)return c==n?d.docWidth(a):d.docHeight(a);var f=c===n?["Left","Right"]:["Top","Bottom"],g=c===n?a.offsetWidth:a.offsetHeight;if(0<g)return"border"!==e&&b.each(f,function(c){e||(g-=parseFloat(d.css(a,"padding"+c))||0);g="margin"===e?g+(parseFloat(d.css(a,e+c))||0):g-(parseFloat(d.css(a,"border"+c+"Width"))||0)}),g;g=d._getComputedStyle(a,c);if(0>g||b.isNullOrUndefined(g))g=a.style[c]||0;g=parseFloat(g)||
0;e&&b.each(f,function(c){g+=parseFloat(d.css(a,"padding"+c))||0;"padding"!==e&&(g+=parseFloat(d.css(a,"border"+c+"Width"))||0);"margin"===e&&(g+=parseFloat(d.css(a,e+c))||0)});return g}var l=document,e=l.documentElement,c=k.ie,m="style",n="width",o="display"+b.now(),q=parseInt,p=/^-?\d+(?:px)?$/i,s={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},r=/-([a-z])/ig,u=function(a,c){return c.toUpperCase()},t=/([A-Z]|^ms)/g,v="",w="px",x={},y={},A={};e[m].cssFloat!==
h?y["float"]="cssFloat":e[m].styleFloat!==h&&(y["float"]="styleFloat");var B,E;b.mix(d,{_camelCase:j,_cssNumber:s,_CUSTOM_STYLES:x,_cssProps:y,_getComputedStyle:function(a,c){var e="",f={},b=a.ownerDocument,c=c.replace(t,"-$1").toLowerCase();if(f=b.defaultView.getComputedStyle(a,null))e=f.getPropertyValue(c)||f[c];""==e&&!d.__contains(b.documentElement,a)&&(c=y[c]||c,e=a[m][c]);return e},style:function(a,c,e){if(b.isPlainObject(c))for(var f in c)d.style(a,f,c[f]);else{if(e===h)return a=d.get(a),f=
"",a&&(f=g(a,c,e)),f;d.query(a).each(function(a){g(a,c,e)})}},css:function(a,c,e){if(b.isPlainObject(c))for(var f in c)d.css(a,f,c[f]);else{c=j(c);f=x[c];if(e===h){a=d.get(a);e="";if(a&&(!f||!("get"in f&&(e=f.get(a,!0))!==h)))e=d._getComputedStyle(a,c);return e===h?"":e}d.style(a,c,e)}},show:function(a){d.query(a).each(function(a){a[m].display=d.data(a,o)||v;if("none"===d.css(a,"display")){var c;a:{c=a.tagName.toLowerCase();var e,f;if(!A[c]){e=l.body||l.documentElement;f=l.createElement(c);d.prepend(f,
e);var b=d.css(f,"display");e.removeChild(f);if("none"===b||""===b){if(B)d.prepend(B,e);else if(B=l.createElement("iframe"),B.frameBorder=B.width=B.height=0,d.prepend(B,e),f=d._genEmptyIframeSrc())B.src=f;if(!E||!B.createElement)try{E=B.contentWindow.document,E.write(("CSS1Compat"===l.compatMode?"<!doctype html>":"")+"<html><head>"+(k.ie&&d._isCustomDomain()?"<script>document.domain = '"+l.domain+"';<\/script>":"")+"</head><body>"),E.close()}catch(g){c="block";break a}f=E.createElement(c);E.body.appendChild(f);
b=d.css(f,"display");e.removeChild(B)}A[c]=b}c=A[c]}d.data(a,o,c);a[m].display=c}})},hide:function(a){d.query(a).each(function(a){var c=a[m],e=c.display;"none"!==e&&(e&&d.data(a,o,e),c.display="none")})},toggle:function(a){d.query(a).each(function(a){"none"===d.css(a,"display")?d.show(a):d.hide(a)})},addStyleSheet:function(a,c,e){b.isString(a)&&(e=c,c=a,a=window);var a=d.get(a),a=d._getWin(a).document,f;if(e&&(e=e.replace("#",v)))f=d.get("#"+e,a);f||(f=d.create("<style>",{id:e},a),d.get("head",a).appendChild(f),
f.styleSheet?f.styleSheet.cssText=c:f.appendChild(a.createTextNode(c)))},unselectable:function(a){d.query(a).each(function(a){if(k.gecko)a[m].MozUserSelect="none";else if(k.webkit)a[m].KhtmlUserSelect="none";else if(k.ie||k.opera){var c=0,e=a.getElementsByTagName("*");for(a.setAttribute("unselectable","on");a=e[c++];)switch(a.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:a.setAttribute("unselectable","on")}}})},innerWidth:0,innerHeight:0,outerWidth:0,
outerHeight:0,width:0,height:0});b.each([n,"height"],function(a){d["inner"+(a.charAt(0).toUpperCase()+a.substring(1))]=function(c){return(c=d.get(c))?f(c,a,"padding"):null};d["outer"+(a.charAt(0).toUpperCase()+a.substring(1))]=function(c,e){var b=d.get(c);return b?f(b,a,e?"margin":"border"):null};d[a]=function(c,e){var f=d.css(c,a,e);f&&(f=parseFloat(f));return f}});var H={position:"absolute",visibility:"hidden",display:"block"};b.each(["height","width"],function(c){x[c]={get:function(e,b){var g;
if(b)return 0!==e.offsetWidth?g=f(e,c):a(e,H,function(){g=f(e,c)}),g+"px"},set:function(a,c){if(p.test(c)){if(c=parseFloat(c),0<=c)return c+"px"}else return c}}});b.each(["left","top"],function(a){x[a]={get:function(e,f){if(f){var g=d._getComputedStyle(e,a);if("auto"===g){g=0;if(b.inArray(d.css(e,"position"),["absolute","fixed"])){g=e["left"===a?"offsetLeft":"offsetTop"];if(c&&9!=document.documentMode||k.opera)g-=e.offsetParent&&e.offsetParent["client"+("left"==a?"Left":"Top")]||0;g-=q(d.css(e,"margin-"+
a))||0}g+="px"}return g}}}});return d},{requires:["dom/base","ua"]});
KISSY.add("dom/selector",function(b,d,k){function h(c,e){var f,b,g="string"===typeof c,d=e===k?[m]:e===k?[m]:h(e,k);g&&(c=v(c),1==d.length&&c&&(f=a(c,d[0])));if(!f&&(f=[],c)){for(b=0;b<d.length;b++)r.apply(f,j(c,d[b]));1<f.length&&(1<d.length||g&&-1<c.indexOf(t))&&A(f)}f.each=function(a){var c,e;for(e=0;e<this.length;e++){c=this[e];if(a(c,e)===false)break}};return f}function j(a,e){var f="string"===typeof a;if(f&&a.match(y)||!f)f=g(a,e);else if(f&&-1<a.indexOf(t)){var f=[],d,m=a.split(/\s*,\s*/);
for(d=0;d<m.length;d++)r.apply(f,j(m[d],e))}else f=[],(d=b.require("sizzle"))?d(a,e,f):c(a);return f}function a(a,c){var f,b,g,m;if(x.test(a))f=(b=l(a.slice(1),c))?[b]:[];else if(g=y.exec(a)){b=g[1];m=g[2];g=g[3];if(c=b?l(b,c):c)g?!b||-1!=a.indexOf(u)?f=[].concat(B(g,m,c)):(b=l(b,c))&&d.__hasClass(b,g)&&(f=[b]):m&&(f=e(m,c));f=f||[]}return f}function g(c,e){var b;"string"===typeof c?b=a(c,e)||[]:c&&(o(c)||p(c))?b=n(c,function(a){return f(a,e)}):c&&f(c,e)&&(b=[c]);return b}function f(a,c){return!a?
!1:c==m?!0:d.__contains(c,a)}function l(a,c){var e=c;c.nodeType!==d.DOCUMENT_NODE&&(e=c.ownerDocument);(e=e.getElementById(a))&&e.id===a||(e&&e.parentNode?d.__attr(e,"id")!==a?e=d.filter(w,"#"+a,c)[0]||null:f(e,c)||(e=null):e=null);return e}function e(a,c){return c&&q(c.getElementsByTagName(a))||[]}function c(a){b.error("Unsupported selector: "+a)}var m=document,n=b.filter,o=b.isArray,q=b.makeArray,p=d._isNodeList,s=d._nodeName,r=Array.prototype.push,u=" ",t=",",v=b.trim,w="*",x=/^#[\w-]+$/,y=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,
A;(function(){var a,c,e=!0;[0,0].sort(function(){e=!1;return 0});A=function(f){if(a&&(c=e,f.sort(a),c))for(var b=1,g=f.length;b<g;)f[b]===f[b-1]?f.splice(b,1):b++;return f};a=m.documentElement.compareDocumentPosition?function(a,e){return a==e?(c=!0,0):!a.compareDocumentPosition||!e.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(e)&4?-1:1}:function(a,e){if(a==e)return c=!0,0;if(a.sourceIndex&&e.sourceIndex)return a.sourceIndex-e.sourceIndex}})();(function(){var a=
m.createElement("div");a.appendChild(m.createComment(""));0<a.getElementsByTagName(w).length&&(e=function(a,c){var e=q(c.getElementsByTagName(a));if(a===w){for(var f=[],b=0,g;g=e[b++];)1===g.nodeType&&f.push(g);e=f}return e})})();var B=m.getElementsByClassName?function(a,c,e){if(!e)return[];var a=e.getElementsByClassName(a),f=0,b=a.length,g;if(c&&c!==w)for(e=[];f<b;++f)g=a[f],s(g,c)&&e.push(g);else e=q(a);return e}:m.querySelectorAll?function(a,c,e){return e&&q(e.querySelectorAll((c?c:"")+"."+a))||
[]}:function(a,c,e){if(!e)return[];for(var c=e.getElementsByTagName(c||w),e=[],f=0,b=c.length,g;f<b;++f)g=c[f],d.__hasClass(g,a)&&e.push(g);return e};b.mix(d,{query:h,get:function(a,c){return h(a,c)[0]||null},unique:A,filter:function(a,e,f){var a=h(a,f),f=b.require("sizzle"),g,m,l,j,k=[];if("string"===typeof e&&(e=v(e))&&(g=y.exec(e)))l=g[1],m=g[2],j=g[3],l?l&&!m&&!j&&(e=function(a){return d.__attr(a,"id")===l}):e=function(a){var c=!0,e=!0;m&&(c=s(a,m));j&&(e=d.__hasClass(a,j));return e&&c};b.isFunction(e)?
k=b.filter(a,e):e&&f?k=f.matches(e,a):c(e);return k},test:function(a,c,e){a=h(a,e);return a.length&&d.filter(a,c,e).length===a.length}});return d},{requires:["./base"]});
KISSY.add("dom/style-ie",function(b,d,k,h){if(!k.ie)return d;var j=document,a=j.documentElement,g=h._CUSTOM_STYLES,f=/^-?\d+(?:px)?$/i,l=/^-?\d/,e=/opacity=([^)]*)/,c=/alpha\([^)]*\)/i;try{b.isNullOrUndefined(a.style.opacity)&&(g.opacity={get:function(a,c){return e.test((c&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(a,e){var e=parseFloat(e),f=a.style,g=a.currentStyle,d=isNaN(e)?"":"alpha(opacity="+100*e+")",m=b.trim(g&&g.filter||f.filter||
"");f.zoom=1;if(1<=e&&""===b.trim(m.replace(c,""))&&(f.removeAttribute("filter"),g&&!g.filter))return;f.filter=c.test(m)?m.replace(c,d):m+(m?", ":"")+d}})}catch(m){b.log("IE filters ActiveX is disabled. ex = "+m)}var k=8==k.ie,n={};n.thin=k?"1px":"2px";n.medium=k?"3px":"4px";n.thick=k?"5px":"6px";b.each(["","Top","Left","Right","Bottom"],function(a){var c="border"+a+"Width",e="border"+a+"Style";g[c]={get:function(a,f){var b=f?a.currentStyle:0,g=b&&""+b[c]||void 0;g&&0>g.indexOf("px")&&(g=n[g]&&"none"!==
b[e]?n[g]:0);return g}}});if(!(j.defaultView||{}).getComputedStyle&&a.currentStyle)d._getComputedStyle=function(a,c){var c=d._cssProps[c]||c,e=a.currentStyle&&a.currentStyle[c];if(!f.test(e)&&l.test(e)){var b=a.style,g=b.left,m=a.runtimeStyle&&a.runtimeStyle.left;m&&(a.runtimeStyle.left=a.currentStyle.left);b.left="fontSize"===c?"1em":e||0;e=b.pixelLeft+"px";b.left=g;m&&(a.runtimeStyle.left=m)}return""===e?"auto":e};return d},{requires:["./base","ua","./style"]});
KISSY.add("dom/traversal",function(b,d,k){function h(a,l,e,c,m,h){if(!(a=d.get(a)))return null;if(0===l)return a;h||(a=a[e]);if(!a)return null;m=m&&d.get(m)||null;l===k&&(l=1);var h=[],o=b.isArray(l),q,p;b.isNumber(l)&&(q=0,p=l,l=function(){return++q===p});for(;a&&a!=m;){if(g(a)&&j(a,l)&&(!c||c(a)))if(h.push(a),!o)break;a=a[e]}return o?h:h[0]||null}function j(a,g){if(!g)return!0;if(b.isArray(g))for(var e=0;e<g.length;e++){if(d.test(a,g[e]))return!0}else if(d.test(a,g))return!0;return!1}function a(a,
b,e){var c=[],m=a=d.get(a);a&&e&&(m=a.parentNode);if(m){e=0;for(m=m.firstChild;m;m=m.nextSibling)if(g(m)&&m!==a&&(!b||d.test(m,b)))c[e++]=m}return c}var g=d._isElementNode;b.mix(d,{closest:function(a,b,e){return h(a,b,"parentNode",function(a){return a.nodeType!=d.DOCUMENT_FRAGMENT_NODE},e,!0)},parent:function(a,b,e){return h(a,b,"parentNode",function(a){return a.nodeType!=d.DOCUMENT_FRAGMENT_NODE},e)},first:function(a,b){var e=d.get(a);return h(e&&e.firstChild,b,"nextSibling",k,k,!0)},last:function(a,
b){var e=d.get(a);return h(e&&e.lastChild,b,"previousSibling",k,k,!0)},next:function(a,b){return h(a,b,"nextSibling",k)},prev:function(a,b){return h(a,b,"previousSibling",k)},siblings:function(f,b){return a(f,b,!0)},children:function(f,b){return a(f,b,k)},__contains:document.documentElement.contains?function(a,b){if(a.nodeType==d.TEXT_NODE)return!1;var e;if(b.nodeType==d.TEXT_NODE)b=b.parentNode,e=!0;else{if(b.nodeType==d.DOCUMENT_NODE)return!1;e=a!==b}return e&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?
function(a,b){return!!(a.compareDocumentPosition(b)&16)}:0,contains:function(a,b){a=d.get(a);b=d.get(b);if(a&&b)return d.__contains(a,b)},equals:function(a,b){a=d.query(a);b=d.query(b);if(a.length!=b.length)return!1;for(var e=a.length;0<=e;e--)if(a[e]!=b[e])return!1;return!0}});return d},{requires:["./base"]});KISSY.add("dom",function(b,d){return d},{requires:"dom/attr,dom/class,dom/create,dom/data,dom/insertion,dom/offset,dom/style,dom/selector,dom/style-ie,dom/traversal".split(",")});
KISSY.add("event/keycodes",function(){var b={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,
WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,
MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(d){if(d.altKey&&!d.ctrlKey||d.metaKey||d.keyCode>=b.F1&&d.keyCode<=b.F12)return!1;switch(d.keyCode){case b.ALT:case b.CAPS_LOCK:case b.CONTEXT_MENU:case b.CTRL:case b.DOWN:case b.END:case b.ESC:case b.HOME:case b.INSERT:case b.LEFT:case b.MAC_FF_META:case b.META:case b.NUMLOCK:case b.NUM_CENTER:case b.PAGE_DOWN:case b.PAGE_UP:case b.PAUSE:case b.PHANTOM:case b.PRINT_SCREEN:case b.RIGHT:case b.SHIFT:case b.UP:case b.WIN_KEY:case b.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(d){if(d>=b.ZERO&&d<=b.NINE||d>=b.NUM_ZERO&&d<=b.NUM_MULTIPLY||d>=b.A&&d<=b.Z||goog.userAgent.WEBKIT&&0==d)return!0;switch(d){case b.SPACE:case b.QUESTION_MARK:case b.NUM_PLUS:case b.NUM_MINUS:case b.NUM_PERIOD:case b.NUM_DIVISION:case b.SEMICOLON:case b.DASH:case b.EQUALS:case b.COMMA:case b.PERIOD:case b.SLASH:case b.APOSTROPHE:case b.SINGLE_QUOTE:case b.OPEN_SQUARE_BRACKET:case b.BACKSLASH:case b.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return b});
KISSY.add("event/object",function(b,d){function k(a,b,f){this.currentTarget=a;this.originalEvent=b||{};b?(this.type=b.type,this._fix()):(this.type=f,this.target=a);this.currentTarget=a;this.fixed=!0}var h=document,j="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis".split(",");
b.augment(k,{_fix:function(){for(var a=this.originalEvent,b=j.length,f,l=this.currentTarget,l=9===l.nodeType?l:l.ownerDocument||h;b;)f=j[--b],this[f]=a[f];this.target||(this.target=this.srcElement||h);3===this.target.nodeType&&(this.target=this.target.parentNode);!this.relatedTarget&&this.fromElement&&(this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement);this.pageX===d&&this.clientX!==d&&(a=l.documentElement,b=l.body,this.pageX=this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||
0)-(a&&a.clientLeft||b&&b.clientLeft||0),this.pageY=this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0));this.which===d&&(this.which=this.charCode===d?this.keyCode:this.charCode);this.metaKey===d&&(this.metaKey=this.ctrlKey);!this.which&&this.button!==d&&(this.which=this.button&1?1:this.button&2?3:this.button&4?2:0)},preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1;this.isDefaultPrevented=!0},stopPropagation:function(){var a=
this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;this.isPropagationStopped=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=!0;this.stopPropagation()},halt:function(a){a?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return k});
KISSY.add("event/utils",function(b,d){var k=document;return{splitAndRun:function(d,j){b.each(d.split(/\s+/),j)},batchForType:function(d,j,a,g){if(g&&0<g.indexOf(" ")){var f=b.makeArray(arguments);b.each(g.split(/\s+/),function(b){var e=[].concat(f);e.splice(0,4,a,b);d[j].apply(d,e)});return!0}return 0},isValidTarget:function(b){return b&&b.nodeType!==d.TEXT_NODE&&b.nodeType!==d.COMMENT_NODE},isIdenticalHandler:function(d,j,a){var g=d.scope||a,f=1,l=j.scope||a;if(d.fn!==j.fn||g!==l)f=0;else if((d=
d.data)!==(j=j.data))!d&&j||d&&!j?f=0:d&&j&&(!d.equals||!j.equals?b.error("no equals in data"):d.equals(j,a)||(f=0));return f},simpleAdd:k.addEventListener?function(b,d,a,g){b.addEventListener&&b.addEventListener(d,a,!!g)}:function(b,d,a){b.attachEvent&&b.attachEvent("on"+d,a)},simpleRemove:k.removeEventListener?function(b,d,a,g){b.removeEventListener&&b.removeEventListener(d,a,!!g)}:function(b,d,a){b.detachEvent&&b.detachEvent("on"+d,a)}}},{requires:["dom"]});
KISSY.add("event/base",function(b,d,k,h,j){function a(a,c){var e=x._data(a);return(e&&e.events||{})[c]||[]}function g(c,e){for(var b=a(c,e.type).slice(0),f,g,d=0,m=b.length;d<m&&!(f=b[d],f=f.fn.call(f.scope||c,e,f.data),f!==j&&(!1!==g&&(g=f),!1===f&&e.halt()),e.isImmediatePropagationStopped);++d);return g}function f(a,c,e,f,b){var g=v[c]||{};!f.length&&(!g.setup||!1===g.setup.call(a))&&n(a,c,e);g.add&&g.add.call(a,b)}var l=h.isValidTarget,e=h.isIdenticalHandler,c=h.batchForType,m=h.simpleRemove,n=
h.simpleAdd,o=h.splitAndRun,q=d._nodeName,p=b.makeArray,s=b.each,r=b.trim,u="",t="trigger-none-"+b.now(),v={},w="ksEventTargetId"+b.now(),x={_clone:function(a,c){if(c.nodeType===d.ELEMENT_NODE&&x._hasData(a)){var e=x._data(a).events;s(e,function(a,e){s(a,function(a){x.on(c,e,a.fn,a.scope,a.data)})})}},_hasData:function(a){return d.hasData(a,w)},_data:function(a){var c=p(arguments);c.splice(1,0,w);return d.data.apply(d,c)},_removeData:function(a){var c=p(arguments);c.splice(1,0,w);return d.removeData.apply(d,
c)},special:v,__add:function(a,c,d,m,h,j){var n;if(c&&b.isFunction(m)&&(!a||l(c))){(n=x._data(c))||x._data(c,n={});var o=n.events=n.events||{},o=o[d]=o[d]||[],m={fn:m,scope:h,data:j},v=n.handler;v||(v=n.handler=function(a,c){if(!(a&&a.type==u)){var e=v.target;if(!a||!a.fixed)a=new k(e,a);var f=a.type;b.isPlainObject(c)&&b.mix(a,c);f&&(a.type=f);return g(e,a)}},v.target=c);for(n=o.length-1;0<=n;--n)if(e(o[n],m,c))return;a&&(f(c,d,v,o,m),c=null);o.push(m)}},add:function(a,e,f,b,g){e=r(e);if(c(x,"add",
a,e,f,b,g))return a;d.query(a).each(function(a){x.__add(!0,a,e,f,b,g)});return a},__remove:function(a,c,f,g,d,h){if(c&&(!a||l(c))){var k=x._data(c),n=k&&k.events,o,t,w,q=a&&v[f]||{};if(n)if(f){if(o=n[f]){t=o.length;if(g&&t){var p={data:h,fn:g,scope:d},s,h=d=0;for(w=[];d<t;++d)s=o[d],e(s,p,c)?q.remove&&q.remove.call(c,s):w[h++]=s;n[f]=w;t=w.length}if(g===j||0===t)a&&(!q.tearDown||!1===q.tearDown.call(c))&&m(c,f,k.handler),delete n[f]}b.isEmptyObject(n)&&(k.handler.target=null,delete k.handler,delete k.events,
x._removeData(c))}else for(f in n)x.__remove(a,c,f)}},remove:function(a,e,f,b,g){e=r(e);if(c(x,"remove",a,e,f,b))return a;d.query(a).each(function(a){x.__remove(!0,a,e,f,b,g)});return a},_handle:g,fire:function(a,c,e,f){var m=!0,c=r(c);if(-1<c.indexOf(" "))return o(c,function(c){m=x.fire(a,c,e,f)&&m}),m;e=e||{};e.type=c;d.query(a).each(function(a){var d=c,h=e;if(l(a)){var n,o=!0;h instanceof k?n=h:(n=new k(a,j,d),b.mix(n,h));n.type=d;f&&n.halt();var h=a,v="on"+d;do n.currentTarget=h,g(h,n),h[v]&&
!1===h[v].call(h)&&n.preventDefault(),h=h.parentNode||h.ownerDocument||h===a.ownerDocument&&window;while(h&&!n.isPropagationStopped);if(n.isDefaultPrevented)o=!1;else if(!("click"===d&&q(a,"a"))){var w;try{v&&a[d]&&((w=a[v])&&(a[v]=null),u=d,a[d]())}catch(p){b.log("trigger action error : "),b.log(p)}w&&(a[v]=w);u=t}a=o}else a=!1;m=a&&m});return m}};x.__getListeners=a;x.on=x.add;x.detach=x.remove;return x},{requires:["dom","./object","./utils"]});
KISSY.add("event/target",function(b,d,k,h,j){function a(a,c,e){if(e instanceof k)return e.currentTarget=a,e;a=new k(a,j,c);b.isPlainObject(e)&&b.mix(a,e);a.type=c;return a}function g(a){a[c]=a[c]||{};return a[c]}function f(a){a[o]=a[o]||{};return a[o]}function l(a,c){var e=g(a);return e[c]&&e[c].bubbles||e[q]&&e[q].bubbles}function e(a){return function(c,e,f){var b=this,c=m(c);n(c,function(c){d["__"+a](!1,b,c,e,f)});return b}}var c="__~ks_publish",m=b.trim,n=h.splitAndRun,o="__~ks_bubble_targets",
q="*",h={fire:function(c,e){var f=this,b,g,h,c=m(c);if(0<c.indexOf(" "))return n(c,function(a){g=f.fire(a,e);!1===g&&(b=!1)}),b;h=a(f,c,e);b=d._handle(f,h);!h.isPropagationStopped&&l(f,c)&&(g=f.bubble(c,h),!1!==b&&(b=g));return b},publish:function(a,c){var e=g(this);(a=m(a))&&(e[a]=c)},bubble:function(a,c){var e,g=f(this);b.each(g,function(f){f=f.fire(a,c);!1!==e&&(e=f)});return e},addTarget:function(a){f(this)[b.stamp(a)]=a},removeTarget:function(a){delete f(this)[b.stamp(a)]},on:e("add")};h.detach=
e("remove");return h},{requires:["./base","./object","./utils"]});KISSY.add("event/focusin",function(b,d,k){d.ie||b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(b){function d(a){return k.fire(a.target,b.name)}var a=0;k.special[b.name]={setup:function(){0===a++&&document.addEventListener(b.fix,d,!0)},tearDown:function(){0===--a&&document.removeEventListener(b.fix,d,!0)}}});return k},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(b,d,k,h){var j=document,h=j.documentMode||h.ie;if(!("onhashchange"in window)||h&&8>h){var a=window,g="<html><head><title>"+(j.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",f=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},l,e,c=function(){var a=f();a!==e&&(e=a,m(a));l=setTimeout(c,50)},m=h&&8>h?function(a){var a=b.substitute(g,{hash:a,head:k._isCustomDomain()?"<script>document.domain = '"+j.domain+"';<\/script>":""}),
c=q.contentWindow.document;try{c.open(),c.write(a),c.close()}catch(e){}}:function(){d.fire(a,"hashchange")},n=function(){l||c()},o=function(){l&&clearTimeout(l);l=0},q;8>h&&(n=function(){if(!q){var g=k._genEmptyIframeSrc();q=k.create("<iframe "+(g?'src="'+g+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');k.prepend(q,j.documentElement);d.add(q,"load",function(){d.remove(q,"load");m(f());d.add(q,"load",l);c()});j.onpropertychange=function(){try{"title"===event.propertyName&&
(q.contentWindow.document.title=j.title+" - "+f())}catch(a){}};var l=function(){var c=b.trim(q.contentWindow.document.body.innerText),g=f();c!=g&&(b.log("set loc hash :"+c),e=location.hash=c);d.fire(a,"hashchange")}}},o=function(){l&&clearTimeout(l);l=0;d.detach(q);k.remove(q);q=0});d.special.hashchange={setup:function(){if(this===a){e=f();n()}},tearDown:function(){this===a&&o()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/valuechange",function(b,d,k){function h(a){k.removeData(a,c);if(k.hasData(a,m)){var e=k.data(a,m);clearTimeout(e);k.removeData(a,m)}}function j(a){h(a.target)}function a(a){k.hasData(a,m)||k.data(a,m,setTimeout(function(){var e=a.value,f=k.data(a,c);e!==f&&(d.fire(a,l,{prevVal:f,newVal:e},!0),k.data(a,c,e));k.data(a,m,setTimeout(arguments.callee,n))},n))}function g(e){var f=e.target;"focus"==e.type&&k.data(f,c,f.value);a(f)}function f(a){h(a);d.remove(a,"blur",j);d.remove(a,"mousedown keyup keydown focus",
g)}var l="valuechange",e=k._nodeName,c="event/valuechange/history",m="event/valuechange/poll",n=50;d.special[l]={setup:function(){if(e(this,"input")||e(this,"textarea"))f(this),d.on(this,"blur",j),d.on(this,"mousedown keyup keydown focus",g)},tearDown:function(){f(this)}};return d},{requires:["./base","dom"]});
KISSY.add("event/delegate",function(b,d,k,h){function j(a,c){if(void 0===a.fn&&void 0===a.selector)return!0;if(void 0===a.fn)return this.selector==a.selector;var f=this.scope||c,b=a.scope||c;return this.fn==a.fn&&this.selector==a.selector&&f==b}function a(a,c){var f=d.closest(a.target,[c.selector],this);if(f){for(var b=a.currentTarget,g=0;g<f.length&&!(a.currentTarget=f[g],!1===c.fn.call(c.scope||this,a)&&a.halt(),a.isPropagationStopped);g++);a.currentTarget=b}}function g(a,c){var f,b=a.target,g=
a.relatedTarget;a.type=c.preType;if((b=d.closest(b,c.selector,this))&&b!==g&&(!g||!d.contains(b,g)))g=a.currentTarget,a.currentTarget=b,f=c.fn.call(c.scope||this,a),a.currentTarget=g;return f}var f=h.batchForType,l={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:g},mouseleave:{type:"mouseout",handler:g}};b.mix(k,{delegate:function(e,c,b,g,h){if(f(k,"delegate",e,c,b,g,h))return e;d.query(e).each(function(e){var f=c,d=a;l[c]&&(c=l[f].type,d=l[f].handler||d);k.on(e,
c,d,e,{fn:g,selector:b,preType:f,scope:h,equals:j})});return e},undelegate:function(e,c,b,g,h){if(f(k,"undelegate",e,c,b,g,h))return e;d.query(e).each(function(e){var f=c,d=a;l[c]&&(c=l[f].type,d=l[f].handler||d);k.remove(e,c,d,e,{fn:g,selector:b,preType:f,scope:h,equals:j})});return e}});return k},{requires:["dom","./base","./utils"]});
KISSY.add("event/mouseenter",function(b,d,k,h){h.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(h){function a(a){var f=a.relatedTarget;a.type=h.name;try{if(!f||f===document||f.parentNode)f!==this&&(!f||!k.contains(this,f))&&d._handle(this,a)}catch(l){b.log("withinElement error : ","error"),b.log(l,"error")}}d.special[h.name]={setup:function(){d.add(this,h.fix,a)},tearDown:function(){d.remove(this,h.fix,a)}}});return d},{requires:["./base","dom","ua"]});
KISSY.add("event/submit",function(b,d,k,h){b=document.documentMode;if(d.ie&&(9>d.ie||b&&9>b)){var j=h._nodeName;k.special.submit={setup:function(){if(j(this,"form"))return!1;k.on(this,"click keypress",a)},tearDown:function(){if(j(this,"form"))return!1;k.remove(this,"click keypress",a);h.query("form",this).each(function(a){a.__submit__fix&&(a.__submit__fix=0,k.remove(a,"submit",g))})}};var a=function(a){a=a.target;if((a=j(a,"input")||j(a,"button")?a.form:null)&&!a.__submit__fix)a.__submit__fix=1,k.on(a,
"submit",g)},g=function(a){this.parentNode&&k.fire(this.parentNode,"submit",a)}}},{requires:["ua","./base","dom"]});
KISSY.add("event/change",function(b,d,k,h){b=document.documentMode;if(d.ie&&(9>d.ie||b&&9>b)){var j=/^(?:textarea|input|select)$/i,a=function(a){a=a.type;return"checkbox"==a||"radio"==a};k.special.change={setup:function(){if(j.test(this.nodeName))if(a(this))k.on(this,"propertychange",g),k.on(this,"click",f);else return!1;else k.on(this,"beforeactivate",l)},tearDown:function(){if(j.test(this.nodeName))if(a(this))k.remove(this,"propertychange",g),k.remove(this,"click",f);else return!1;else k.remove(this,
"beforeactivate",l),h.query("textarea,input,select",this).each(function(a){a.__changeHandler&&(a.__changeHandler=0,k.remove(a,"change",e))})}};var g=function(a){"checked"==a.originalEvent.propertyName&&(this.__changed=1)},f=function(a){this.__changed&&(this.__changed=0,k.fire(this,"change",a))},l=function(a){a=a.target;j.test(a.nodeName)&&!a.__changeHandler&&(a.__changeHandler=1,k.on(a,"change",e))},e=function(c){if(!a(this)){var e;(e=this.parentNode)&&k.fire(e,"change",c)}}}},{requires:["ua","./base",
"dom"]});
KISSY.add("event/mousewheel",function(b,d,k,h,j){function a(a){var c,f,g,l=a.detail;a.wheelDelta&&(g=a.wheelDelta/120);a.detail&&(g=-(0==l%3?l/3:l));void 0!==a.axis&&(a.axis===a.HORIZONTAL_AXIS?(f=0,c=-1*g):a.axis===a.VERTICAL_AXIS&&(c=0,f=g));void 0!==a.wheelDeltaY&&(f=a.wheelDeltaY/120);void 0!==a.wheelDeltaX&&(c=-1*a.wheelDeltaX/120);!c&&!f&&(f=g);a=new j(this,a);b.mix(a,{deltaY:f,delta:g,deltaX:c,type:"mousewheel"});return d._handle(this,a)}var g=k.gecko?"DOMMouseScroll":"mousewheel",f=h.simpleRemove,
l=h.simpleAdd;d.special.mousewheel={setup:function(){var e;e=d._data(this)[e]=b.bind(a,this);l(this,g,e)},tearDown:function(){var a,c=d._data(this);a=c[a];f(this,g,a);delete c[a]}}},{requires:["./base","ua","./utils","./object"]});KISSY.add("event",function(b,d,k,h,j){k.KeyCodes=d;k.Target=h;k.Object=j;return k},{requires:"event/keycodes,event/base,event/target,event/object,event/focusin,event/hashchange,event/valuechange,event/delegate,event/mouseenter,event/submit,event/change,event/mousewheel".split(",")});
KISSY.add("node/base",function(b,d,k){function h(f,l,e){if(!(this instanceof h))return new h(f,l,e);if(f)if(b.isString(f)){if(f=d.create(f,l,e),f.nodeType===d.DOCUMENT_FRAGMENT_NODE)return j.push.apply(this,a(f.childNodes)),k}else{if(b.isArray(f)||g(f))return j.push.apply(this,a(f)),k}else return k;this[0]=f;this.length=1;return k}var j=Array.prototype,a=b.makeArray,g=d._isNodeList;b.augment(h,{length:0,item:function(a){return b.isNumber(a)?a>=this.length?null:new h(this[a]):new h(a)},add:function(a,
g,e){b.isNumber(g)&&(e=g,g=k);a=h.all(a,g).getDOMNodes();g=new h(this);e===k?j.push.apply(g,a):(e=[e,0],e.push.apply(e,a),j.splice.apply(g,e));return g},slice:function(a,b){return new h(j.slice.call(this,a,b))},getDOMNodes:function(){return j.slice.call(this)},each:function(a,g){var e=this;b.each(e,function(c,b){c=new h(c);return a.call(g||c,c,b,e)});return e},getDOMNode:function(){return this[0]},end:function(){return this.__parent||this},all:function(a){a=0<this.length?h.all(a,this):new h;a.__parent=
this;return a},one:function(a){a=this.all(a);if(a=a.length?a.slice(0,1):null)a.__parent=this;return a}});b.mix(h,{all:function(a,g){return b.isString(a)&&(a=b.trim(a))&&3<=a.length&&b.startsWith(a,"<")&&b.endsWith(a,">")?(g&&(g.getDOMNode&&(g=g.getDOMNode()),g.ownerDocument&&(g=g.ownerDocument)),new h(a,k,g)):new h(d.query(a,g))},one:function(a,b){var e=h.all(a,b);return e.length?e.slice(0,1):null}});b.mix(h,d._NODE_TYPE);return h},{requires:["dom"]});
KISSY.add("node/attach",function(b,d,k,h,j){function a(a,e,c){c.unshift(e);a=d[a].apply(d,c);return a===j?e:a}var g=h.prototype,f=b.makeArray;b.each("equals,contains,scrollTop,scrollLeft,height,width,innerHeight,innerWidth,outerHeight,outerWidth,addStyleSheet,appendTo,prependTo,insertBefore,before,after,insertAfter,test,hasClass,addClass,removeClass,replaceClass,toggleClass,removeAttr,hasAttr,hasProp,scrollIntoView,remove,empty,removeData,hasData,unselectable".split(","),function(b){g[b]=function(){var e=
f(arguments);return a(b,this,e)}});b.each("filter,first,last,parent,closest,next,prev,clone,siblings,children".split(","),function(a){g[a]=function(){var e=f(arguments);e.unshift(this);e=d[a].apply(d,e);return e===j?this:e===null?null:new h(e)}});b.each({attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,data:1},function(h,e){g[e]=function(){var c;c=f(arguments);c[h]===j&&!b.isObject(c[0])?(c.unshift(this),c=d[e].apply(d,c)):c=a(e,this,c);return c}});b.each(["on","detach","fire","delegate",
"undelegate"],function(a){g[a]=function(){var e=f(arguments);e.unshift(this);k[a].apply(k,e);return this}})},{requires:["dom","event","./base"]});KISSY.add("node/override",function(b,d,k,h){b.each(["append","prepend","before","after"],function(j){h.prototype[j]=function(a){b.isString(a)&&(a=d.create(a));if(a)d[j](a,this);return this}})},{requires:["dom","event","./base","./attach"]});
KISSY.add("anim/easing",function(){var b=Math.PI,d=Math.pow,k=Math.sin,h=1.70158,j={swing:function(a){return-Math.cos(a*b)/2+0.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:
-(d(2,10*(a-=1))*k((a-0.075)*2*b/0.3))},elasticOut:function(a){return 0===a||1===a?a:d(2,-10*a)*k((a-0.075)*2*b/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*d(2,10*(a-=1))*k((a-0.1125)*2*b/0.45):0.5*d(2,-10*(a-=1))*k((a-0.1125)*2*b/0.45)+1},backIn:function(a){1===a&&(a-=0.0010);return a*a*((h+1)*a-h)},backOut:function(a){return(a-=1)*a*((h+1)*a+h)+1},backBoth:function(a){return 1>(a*=2)?0.5*a*a*(((h*=1.525)+1)*a-h):0.5*((a-=2)*a*(((h*=1.525)+1)*a+h)+2)},bounceIn:function(a){return 1-
j.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*j.bounceIn(2*a):0.5*j.bounceOut(2*a-1)+0.5},NativeTimeFunction:{easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"}};
return j});
KISSY.add("anim/manager",function(b){var d=b.stamp;return{interval:15,runnings:{},timer:null,start:function(b){var h=d(b);this.runnings[h]||(this.runnings[h]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(k){delete this.runnings[d(k)];b.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=setTimeout(function(){b.runFrames()?b.stopTimer():(b.timer=0,b.startTimer())},b.interval))},
stopTimer:function(){var b=this.timer;b&&(clearTimeout(b),this.timer=0)},runFrames:function(){var b=1,d=this.runnings,j;for(j in d)d.hasOwnProperty(j)&&(b=0,d[j]._frame());return b}}});
KISSY.add("anim/fx",function(b,d,k){function h(a){this.load(a)}function j(a,b){return(!a.style||null==a.style[b])&&null!=d.attr(a,b,k,1)?1:0}b.augment(h,{load:function(a){b.mix(this,a);this.startTime=b.now();this.pos=0;this.unit=this.unit||""},frame:function(a){var g=0,f=b.now();a||f>=this.duration+this.startTime?g=this.pos=1:(a=f-this.startTime,this.pos=this.easing(a/this.duration));this.update();return g},interpolate:function(a,g,f){return b.isNumber(a)&&b.isNumber(g)?(a+(g-a)*f).toFixed(3):k},
update:function(){var a=this.prop,g=this.elem,f=this.from,h=this.to,e=this.interpolate(f,h,this.pos);e===k?this.finished||(this.finished=1,d.css(g,a,h),b.log(this.prop+" update directly ! : "+e+" : "+f+" : "+h)):(e+=this.unit,j(g,a)?d.attr(g,a,e,1):d.css(g,a,e))},cur:function(){var a=this.prop,b=this.elem;if(j(b,a))return d.attr(b,a,k,1);var f,a=d.css(b,a);return isNaN(f=parseFloat(a))?!a||"auto"===a?0:a:f}});h.Factories={};h.getFx=function(a){return new (h.Factories[a.prop]||h)(a)};return h},{requires:["dom"]});
KISSY.add("anim/queue",function(b,d){function k(b,g,e){var g=g||a,c,m=d.data(b,j);!m&&!e&&d.data(b,j,m={});m&&(c=m[g],!c&&!e&&(c=m[g]=[]));return c}function h(f,g){var g=g||a,e=d.data(f,j);e&&delete e[g];b.isEmptyObject(e)&&d.removeData(f,j)}var j=b.guid("ks-queue-"+b.now()+"-"),a=b.guid("ks-queue-"+b.now()+"-"),g={queueCollectionKey:j,queue:function(a){var b=k(a.elem,a.config.queue);b.push(a);"..."!==b[0]&&g.dequeue(a);return b},remove:function(a){var g=k(a.elem,a.config.queue,1);g&&(a=b.indexOf(a,
g),-1<a&&g.splice(a,1))},removeQueues:function(a){d.removeData(a,j)},removeQueue:h,dequeue:function(a){var b=a.elem,a=a.config.queue,e=k(b,a,1),c=e&&e.shift();"..."==c&&(c=e.shift());c?(e.unshift("..."),c._runInternal()):h(b,a)}};return g},{requires:["dom"]});
KISSY.add("anim/base",function(b,d,k,h,j,a,g,f){function l(a,c,f,g,m){if(a=d.get(a)){if(!(this instanceof l))return new l(a,c,f,g,m);var c=b.isString(c)?b.unparam(c,";",":"):b.clone(c),h;for(h in c){var j=o(b.trim(h));h!=j&&(c[j]=c[h],delete c[h])}f=b.isPlainObject(f)?b.clone(f):{duration:parseFloat(f)||void 0,easing:g,complete:m};this.config=f=b.merge(r,f);f.duration*=1E3;this.elem=this.domEl=a;this.props=c;this._backupProps={};this._fxs={};this.on("complete",e)}}function e(a){var c=this._backupProps,
e=this.config;b.isEmptyObject(c=this._backupProps)||d.css(this.elem,c);e.complete&&e.complete.call(this,a)}function c(){var c=this.config,e=this._backupProps,f=this.elem,l,k,n,o=c.specialEasing||{},t=this._fxs,r=this.props;m(this);if(!1===this.fire("start"))this.stop(0);else{if(q(f))for(n in l="none"==d.css(f,"display"),r)if(k=r[n],"hide"==k&&l||"show"==k&&!l){this.stop(1);return}b.each(r,function(a,e){if(r.hasOwnProperty(e)){var f;b.isArray(a)?(f=o[e]=a[1],r[e]=a[0]):f=o[e]=o[e]||c.easing;b.isString(f)&&
(f=o[e]=h[f]);o[e]=f||h.easeNone}});b.each(s,function(a,c){var e,g,m;if(m=r[c]){g={};b.each(a,function(a){g[a]=d.css(f,a);o[a]=o[c]});d.css(f,c,m);for(e in g)r[e]=d.css(f,e),d.css(f,e,g[e]);delete r[c]}});for(n in r)if(r.hasOwnProperty(n)){k=b.trim(r[n]);var C,D,z={elem:f,prop:n,duration:c.duration,easing:o[n]},F=g.getFx(z);b.inArray(k,p)?(e[n]=d.style(f,n),"toggle"==k&&(k=l?"show":"hide"),"hide"==k?(C=0,D=F.cur(),e.display="none"):(D=0,C=F.cur(),d.css(f,n,D),d.show(f)),k=C):(C=k,D=F.cur());k+="";
var J="",I=k.match(u);if(I){C=parseFloat(I[2]);if((J=I[3])&&"px"!==J)d.css(f,n,k),D*=C/F.cur(),d.css(f,n,D+J);I[1]&&(C=("-="===I[1]?-1:1)*C+D)}z.from=D;z.to=C;z.unit=J;F.load(z);t[n]=F}if(q(f)&&(r.width||r.height))b.mix(e,{overflow:d.style(f,"overflow"),"overflow-x":d.style(f,"overflowX"),"overflow-y":d.style(f,"overflowY")}),d.css(f,"overflow","hidden"),"inline"===d.css(f,"display")&&"none"===d.css(f,"float")&&(j.ie?d.css(f,"zoom",1):d.css(f,"display","inline-block"));a.start(this)}}function m(a){var c=
a.elem,e=d.data(c,t);e||d.data(c,t,e={});e[b.stamp(a)]=a}function n(a,c,e,g){e&&!1!==g&&f.removeQueue(a,g);var a=d.data(a,t),a=b.merge(a),m;for(m in a)e=a[m],e.config.queue==g&&e.stop(c)}var o=d._camelCase,q=d._isElementNode,p=["hide","show","toggle"],s={border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom",
"marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},r={duration:1,easing:"easeNone"},u=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;l.SHORT_HANDS=s;b.augment(l,k.Target,{isRunning:function(){var a=d.data(this.elem,t);return a?!!a[b.stamp(this)]:0},_runInternal:c,run:function(){!1===this.config.queue?c.call(this):f.queue(this);return this},_frame:function(){var a,c=1,e=this._fxs;for(a in e)e.hasOwnProperty(a)&&(c&=e[a].frame());(!1===this.fire("step")||
c)&&this.stop(c)},stop:function(c){var e=this.config.queue,g,m=this._fxs;if(this.isRunning()){if(c){for(g in m)m.hasOwnProperty(g)&&m[g].frame(1);this.fire("complete")}a.stop(this);c=this.elem;if(g=d.data(c,t))delete g[b.stamp(this)],b.isEmptyObject(g)&&d.removeData(c,t);!1!==e&&f.dequeue(this);return this}!1!==e&&f.remove(this)}});var t=b.guid("ks-anim-unqueued-"+b.now()+"-");l.stop=function(a,c,e,g){if(null===g||b.isString(g)||!1===g)return n.apply(void 0,arguments);e&&f.removeQueues(a);var m=d.data(a,
t),m=b.merge(m),h;for(h in m)m[h].stop(c)};l.isRunning=function(a){return(a=d.data(a,t))&&!b.isEmptyObject(a)};l.Q=f;return l},{requires:"dom,event,./easing,ua,./manager,./fx,./queue".split(",")});
KISSY.add("anim/color",function(b,d,k,h){function j(a){var a=a+"",f;if(f=a.match(e))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])];if(f=a.match(c))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])];if(f=a.match(m)){for(a=1;a<f.length;a++)2>f[a].length&&(f[a]+=f[a]);return[parseInt(f[1],g),parseInt(f[2],g),parseInt(f[3],g)]}if(l[a=a.toLowerCase()])return l[a];b.log("only allow rgb or hex color string : "+a,"warn");return[255,255,255]}function a(){a.superclass.constructor.apply(this,
arguments)}var g=16,f=Math.floor,l={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},e=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,c=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,m=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,d=k.SHORT_HANDS;
d.background=["backgroundColor"];d.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];d.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");d.borderBottom.push("borderBottomColor");d.borderLeft.push("borderLeftColor");d.borderRight.push("borderRightColor");d.borderTop.push("borderTopColor");b.extend(a,h,{load:function(){a.superclass.load.apply(this,arguments);this.from&&(this.from=j(this.from));this.to&&(this.to=j(this.to))},
interpolate:function(c,e,g){var d=a.superclass.interpolate;if(3==c.length&&3==e.length)return"rgb("+[f(d(c[0],e[0],g)),f(d(c[1],e[1],g)),f(d(c[2],e[2],g))].join(", ")+")";if(4==c.length||4==e.length)return"rgba("+[f(d(c[0],e[0],g)),f(d(c[1],e[1],g)),f(d(c[2],e[2],g)),f(d(c[3]||1,e[3]||1,g))].join(", ")+")";b.log("anim/color unknown value : "+c)}});b.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(c){h.Factories[c]=a});
return a},{requires:["dom","./base","./fx"]});KISSY.add("anim",function(b,d,k){d.Easing=k;return d},{requires:["anim/base","anim/easing","anim/color"]});
KISSY.add("node/anim",function(b,d,k,h,j){function a(a,b,e){for(var c=[],d={},e=e||0;e<b;e++)c.push.apply(c,g[e]);for(e=0;e<c.length;e++)d[c[e]]=a;return d}var g=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];b.augment(h,{animate:function(){var a=b.makeArray(arguments);b.each(this,function(b){k.apply(j,[b].concat(a)).run()});return this},stop:function(a,g,e){b.each(this,function(c){k.stop(c,a,g,e)});
return this},isRunning:function(){for(var a=0;a<this.length;a++)if(k.isRunning(this[a]))return 1;return 0}});b.each({show:a("show",3),hide:a("hide",3),toggle:a("toggle",3),fadeIn:a("show",3,2),fadeOut:a("hide",3,2),fadeToggle:a("toggle",3,2),slideDown:a("show",1),slideUp:a("hide",1),slideToggle:a("toggle",1)},function(a,g){h.prototype[g]=function(e,c,m){if(d[g]&&!e)d[g](this);else b.each(this,function(b){k(b,a,e,m||"easeOut",c).run()});return this}})},{requires:["dom","anim","./base"]});
KISSY.add("node",function(b,d,k){k.KeyCodes=d.KeyCodes;return k},{requires:["event","node/base","node/attach","node/override","node/anim"]});
KISSY.add("json/json2",function(b,d){function k(a){return 10>a?"0"+a:a}function h(a){l.lastIndex=0;return l.test(a)?'"'+a.replace(l,function(a){var c=m[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function j(a,b){var f,g,d,m,l=e,k,w=b[a];w&&"object"===typeof w&&"function"===typeof w.toJSON&&(w=w.toJSON(a));"function"===typeof n&&(w=n.call(b,a,w));switch(typeof w){case "string":return h(w);case "number":return isFinite(w)?""+w:"null";case "boolean":case "null":return""+
w;case "object":if(!w)return"null";e+=c;k=[];if("[object Array]"===Object.prototype.toString.apply(w)){m=w.length;for(f=0;f<m;f+=1)k[f]=j(f,w)||"null";d=0===k.length?"[]":e?"[\n"+e+k.join(",\n"+e)+"\n"+l+"]":"["+k.join(",")+"]";e=l;return d}if(n&&"object"===typeof n){m=n.length;for(f=0;f<m;f+=1)g=n[f],"string"===typeof g&&(d=j(g,w))&&k.push(h(g)+(e?": ":":")+d)}else for(g in w)Object.hasOwnProperty.call(w,g)&&(d=j(g,w))&&k.push(h(g)+(e?": ":":")+d);d=0===k.length?"{}":e?"{\n"+e+k.join(",\n"+e)+"\n"+
l+"}":"{"+k.join(",")+"}";e=l;return d}}var a=window,g=a.JSON;if(!g||9>d.ie)g=a.JSON={};"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,c,m={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof g.stringify&&(g.stringify=function(a,b,f){var g;c=e="";if(typeof f==="number")for(g=0;g<f;g=g+1)c=c+" ";else typeof f==="string"&&(c=f);if((n=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return j("",{"":a})});
"function"!==typeof g.parse&&(g.parse=function(a,c){function e(a,b){var f,g,d=a[b];if(d&&typeof d==="object")for(f in d)if(Object.hasOwnProperty.call(d,f)){g=e(d,f);g!==void 0?d[f]=g:delete d[f]}return c.call(a,b,d)}var b,a=""+a;f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
""))){b=eval("("+a+")");return typeof c==="function"?e({"":b},""):b}throw new SyntaxError("JSON.parse");});return g},{requires:["ua"]});KISSY.add("json",function(b,d){return{parse:function(k){return b.isNullOrUndefined(k)||""===k?null:d.parse(k)},stringify:d.stringify}},{requires:["json/json2"]});
KISSY.add("ajax/form-serializer",function(b,d){var k=/^(?:select|textarea)/i,h=/\r?\n/g,j=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return{serialize:function(a){var g=[],f={};d.query(a).each(function(a){a=a.elements?b.makeArray(a.elements):[a];g.push.apply(g,a)});g=b.filter(g,function(a){return a.name&&!a.disabled&&(a.checked||k.test(a.nodeName)||j.test(a.type))});b.each(g,function(a){var e=d.val(a),e=b.map(b.makeArray(e),function(a){return a.replace(h,
"\r\n")}),a=f[a.name]=f[a.name]||[];a.push.apply(a,e)});return b.param(f,void 0,void 0,!1)}}},{requires:["dom"]});
KISSY.add("ajax/xhrobject",function(b,d){function k(a){var g=a.responseText,f=a.responseXML,d=a.config,e=d.converters,c=a.converters||{},m,h,j=d.contents,k=d.dataType;if(g||f){for(d=a.mimeType||a.getResponseHeader("Content-Type");"*"==k[0];)k.shift();if(!k.length)for(m in j)if(j[m].test(d)){k[0]!=m&&k.unshift(m);break}k[0]=k[0]||"text";"text"==k[0]&&void 0!==g?h=g:"xml"==k[0]&&void 0!==f?h=f:b.each(["text","xml"],function(a){var b=k[0];if(c[a]&&c[a][b]||e[a]&&e[a][b])return k.unshift(a),h="text"==
a?g:f,!1})}j=k[0];for(d=1;d<k.length;d++){m=k[d];var p=c[j]&&c[j][m]||e[j]&&e[j][m];if(!p)throw"no covert for "+j+" => "+m;h=p(h);j=m}a.responseData=h}function h(a){b.mix(this,{responseData:null,config:a||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null})}var j=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg;b.augment(h,d.Target,{setRequestHeader:function(a,b){this.requestHeaders[a]=
b;return this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getResponseHeader:function(a){var b;if(2===this.state){if(!this.responseHeaders)for(this.responseHeaders={};b=j.exec(this.responseHeadersString);)this.responseHeaders[b[1]]=b[2];b=this.responseHeaders[a]}return void 0===b?null:b},overrideMimeType:function(a){this.state||(this.mimeType=a);return this},abort:function(a){a=a||"abort";this.transport&&this.transport.abort(a);this.callback(0,a);return this},
callback:function(a,b){if(2!=this.state){this.state=2;this.readyState=4;var f;if(200<=a&&300>a||304==a)if(304==a)b="notmodified",f=!0;else try{k(this),b="success",f=!0}catch(d){b="parsererror : "+d}else 0>a&&(a=0);this.status=a;this.statusText=b;f?this.fire("success"):this.fire("error");this.fire("complete");this.transport=void 0}}});return h},{requires:["event"]});
KISSY.add("ajax/base",function(b,d,k,h){function j(a){a=b.mix(b.clone(u),a||{},void 0,void 0,!0);if(!b.isBoolean(a.crossDomain)){var c=e.exec(a.url.toLowerCase());a.crossDomain=!(!c||!(c[1]!=p[1]||c[2]!=p[2]||(c[3]||("http:"===c[1]?m:n))!=(p[3]||("http:"===p[1]?m:n))))}a.processData&&a.data&&!b.isString(a.data)&&(a.data=b.param(a.data,void 0,void 0,a.serializeArray));a.type=a.type.toUpperCase();a.hasContent=!o.test(a.type);if(!a.hasContent&&(a.data&&(a.url+=(/\?/.test(a.url)?"&":"?")+a.data),!1===
a.cache))a.url+=(/\?/.test(a.url)?"&":"?")+"_ksTS="+(b.now()+"_"+b.guid());a.dataType=b.trim(a.dataType||"*").split(l);a.context=a.context||a;return a}function a(a,c){f.fire(a,{ajaxConfig:c.config,xhr:c})}function g(c){var e=this.config,c=c.type;this.timeoutTimer&&clearTimeout(this.timeoutTimer);e[c]&&e[c].call(e.context,this.responseData,this.statusText,this);a(c,this)}function f(c){if(c.url){var c=j(c),e=new h(c);a("start",e);var f=new (r[c.dataType[0]]||r["*"])(e);e.transport=f;c.contentType&&
e.setRequestHeader("Content-Type",c.contentType);var d=c.dataType[0],m=c.accepts;e.setRequestHeader("Accept",d&&m[d]?m[d]+("*"===d?"":", */*; q=0.01"):m["*"]);for(var l in c.headers)e.setRequestHeader(l,c.headers[l]);e.on("complete success error",g);e.readyState=1;a("send",e);c.async&&0<c.timeout&&(e.timeoutTimer=setTimeout(function(){e.abort("timeout")},1E3*c.timeout));try{e.state=1,f.send()}catch(k){2>e.status?e.callback(-1,k):b.error(k)}return e}}var l=/\s+/,e=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,
c=function(a){return a},m=80,n=443,o=/^(?:GET|HEAD)$/,q,p;try{q=location.href}catch(s){b.log("ajax/base get curLocation error : "),b.log(s),q=document.createElement("a"),q.href="",q=q.href}p=e.exec(q);q=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(p[1]);var r={},u={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",
"*":"*/*"},converters:{text:{json:d.parse,html:c,text:c,xml:b.parseXML}},contents:{xml:/xml/,html:/html/,json:/json/}};u.converters.html=u.converters.text;b.mix(f,k.Target);b.mix(f,{isLocal:q,setupConfig:function(a){b.mix(u,a,void 0,void 0,!0)},setupTransport:function(a,c){r[a]=c},getTransport:function(a){return r[a]},getConfig:function(){return u}});return f},{requires:["json","event","./xhrobject"]});
KISSY.add("ajax/xhrbase",function(b,d){function k(a,b){try{return new (b||h).XMLHttpRequest}catch(d){}}var h=window,j=h.XDomainRequest,a={proto:{}};a.xhr=h.ActiveXObject?function(a,f){var l;if(a&&j)l=new j;else if(!(l=!d.isLocal&&k(a,f)))a:{try{l=new (f||h).ActiveXObject("Microsoft.XMLHTTP");break a}catch(e){b.log("createActiveXHR error")}l=void 0}return l}:k;b.mix(a.proto,{sendInternal:function(){var a=this,f=a.xhrObj,d=f.config,e=a.xhr,c,m;d.username?e.open(d.type,d.url,d.async,d.username,d.password):
e.open(d.type,d.url,d.async);if(c=d.xhrFields)for(m in c)e[m]=c[m];f.mimeType&&e.overrideMimeType&&e.overrideMimeType(f.mimeType);!d.crossDomain&&!f.requestHeaders["X-Requested-With"]&&(f.requestHeaders["X-Requested-With"]="XMLHttpRequest");try{if(!d.crossDomain)for(m in f.requestHeaders)e.setRequestHeader(m,f.requestHeaders[m])}catch(h){b.log("setRequestHeader in xhr error : "),b.log(h)}e.send(d.hasContent&&d.data||null);!d.async||4==e.readyState?a._callback():j&&e instanceof j?(e.onload=function(){e.readyState=
4;e.status=200;a._callback()},e.onerror=function(){e.readyState=4;e.status=500;a._callback()}):e.onreadystatechange=function(){a._callback()}},abort:function(){this._callback(0,1)},_callback:function(a,f){var h=this.xhr,e=this.xhrObj,c=e.config;try{if(f||4==h.readyState)if(j&&h instanceof j?(h.onerror=b.noop,h.onload=b.noop):h.onreadystatechange=b.noop,f)4!==h.readyState&&h.abort();else{var m=h.status;j&&h instanceof j||(e.responseHeadersString=h.getAllResponseHeaders());var k=h.responseXML;k&&k.documentElement&&
(e.responseXML=k);e.responseText=h.responseText;try{var o=h.statusText}catch(q){b.log("xhr statustext error : ","error"),b.log(q,"error"),o=""}!m&&d.isLocal&&!c.crossDomain?m=e.responseText?200:404:1223===m&&(m=204);e.callback(m,o)}}catch(p){b.log(p.stack||p,"error"),h.onreadystatechange=b.noop,f||e.callback(-1,p)}}});return a},{requires:["./base"]});
KISSY.add("ajax/subdomain",function(b,d,k,h){function j(a){var c=a.config;this.xhrObj=a;a=c.url.match(g);this.__hostname=a[2];this.__protocol=a[1];c.crossDomain=!1}function a(){var e=l[this.__hostname];e.ready=1;k.detach(e.iframe,"load",a,this);this.send()}var g=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,f=document,l={};b.augment(j,d.proto,{send:function(){var e=this.xhrObj.config,c=this.__hostname,g=l[c],j="/sub_domain_proxy.html";e.xdr&&e.xdr.subDomain&&e.xdr.subDomain.proxy&&(j=e.xdr.subDomain.proxy);
g&&g.ready?(this.xhr=d.xhr(0,g.iframe.contentWindow))?this.sendInternal():b.error("document.domain not set correctly!"):(g?e=g.iframe:(g=l[c]={},e=g.iframe=document.createElement("iframe"),h.css(e,{position:"absolute",left:"-9999px",top:"-9999px"}),h.prepend(e,f.body||f.documentElement),e.src=this.__protocol+"//"+c+j),k.on(e,"load",a,this))}});return j},{requires:["./xhrbase","event","dom"]});
KISSY.add("ajax/xdr",function(b,d,k){function h(a,b,f){e||(e=!0,a='<object id="'+g+'" type="application/x-shockwave-flash" data="'+a+'" width="0" height="0"><param name="movie" value="'+a+'" /><param name="FlashVars" value="yid='+b+"&uid="+f+'&host=KISSY.io" /><param name="allowScriptAccess" value="always" /></object>',b=l.createElement("div"),k.prepend(b,l.body||l.documentElement),b.innerHTML=a)}function j(a){b.log("use flash xdr");this.xhrObj=a}var a={},g="io_swf",f,l=document,e=!1;b.augment(j,
{send:function(){var c=this,e=c.xhrObj.config;h((e.xdr||{}).src||b.Config.base+"ajax/io.swf",1,1);f?(c._uid=b.guid(),a[c._uid]=c,f.send(e.url,{id:c._uid,uid:c._uid,method:e.type,data:e.hasContent&&e.data||{}})):setTimeout(function(){c.send()},200)},abort:function(){f.abort(this._uid)},_xdrResponse:function(c,e){var b,f=this.xhrObj;f.responseText=decodeURI(e.c.responseText);switch(c){case "success":b={status:200,statusText:"success"};delete a[e.id];break;case "abort":delete a[e.id];break;case "timeout":case "transport error":case "failure":delete a[e.id],
b={status:500,statusText:c}}b&&f.callback(b.status,b.statusText)}});d.applyTo=function(a,e,f){var a=e.split("."),g=b;b.each(a,function(a){g=g[a]});g.apply(null,f)};d.xdrReady=function(){f=l.getElementById(g)};d.xdrResponse=function(c,e,b){var f=a[e.uid];f&&f._xdrResponse(c,e,b)};b.io=d;return j},{requires:["./base","dom"]});
KISSY.add("ajax/xhr",function(b,d,k,h,j){var a=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,g=window.XDomainRequest,f=k.xhr();if(f){var l=function(a){a=a.split(".");return 2>a.length?a.join("."):a.reverse().slice(0,2).reverse().join(".")},e=function(c){var e=c.config,b=e.xdr||{};if(e.crossDomain){e=e.url.match(a);if(l(location.hostname)==l(e[2]))return new h(c);if(!("withCredentials"in f)&&("flash"===""+b.use||!g))return new j(c)}this.xhrObj=c};b.augment(e,k.proto,{send:function(){this.xhr=k.xhr(this.xhrObj.config.crossDomain);
this.sendInternal()}});d.setupTransport("*",e)}return d},{requires:["./base","./xhrbase","./subdomain","./xdr"]});
KISSY.add("ajax/script",function(b,d){function k(b){if(!b.config.crossDomain&&!b.config.forceScript)return new (d.getTransport("*"))(b);this.xhrObj=b;return 0}var h=document;d.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(d){b.globalEval(d);return d}}}});b.augment(k,{send:function(){var b=this,a,g=this.xhrObj.config,f=h.head||h.getElementsByTagName("head")[0]||
h.documentElement;b.head=f;a=h.createElement("script");b.script=a;a.async="async";g.scriptCharset&&(a.charset=g.scriptCharset);a.src=g.url;a.onerror=a.onload=a.onreadystatechange=function(a){a=a||window.event;b._callback((a.type||"error").toLowerCase())};f.insertBefore(a,f.firstChild)},_callback:function(b,a){var g=this.script,f=this.xhrObj,d=this.head;if(g&&(a||!g.readyState||/loaded|complete/.test(g.readyState)||"error"==b))g.onerror=g.onload=g.onreadystatechange=null,d&&g.parentNode&&d.removeChild(g),
this.head=this.script=void 0,!a&&"error"!=b?f.callback(200,"success"):"error"==b&&f.callback(500,"scripterror")},abort:function(){this._callback(0,1)}});d.setupTransport("script",k);return d},{requires:["./base","./xhr"]});
KISSY.add("ajax/jsonp",function(b,d){d.setupConfig({jsonp:"callback",jsonpCallback:function(){return b.guid("jsonp")}});d.on("start",function(d){var d=d.xhr,h=d.config;if("jsonp"==h.dataType[0]){var j,a=h.jsonpCallback,g=b.isFunction(a)?a():a,f=window[g];h.url+=(/\?/.test(h.url)?"&":"?")+h.jsonp+"="+g;window[g]=function(a){1<arguments.length&&(a=b.makeArray(arguments));j=[a]};d.on("complete",function(){window[g]=f;if(void 0===f)try{delete window[g]}catch(a){}else j&&f(j[0])});d.converters=d.converters||
{};d.converters.script=d.converters.script||{};d.converters.script.json=function(){j||b.error(" not call jsonpCallback : "+g);return j[0]};h.dataType.length=2;h.dataType[0]="script";h.dataType[1]="json"}});return d},{requires:["./base"]});
KISSY.add("ajax/form",function(b,d,k,h){d.on("start",function(b){b=b.xhr.config;if(b.form){var a=k.get(b.form);if("multipart/form-data"!=(a.encoding||a.enctype).toLowerCase()){if(a=h.serialize(a))b.hasContent?(b.data=b.data||"",b.data&&(b.data+="&"),b.data+=a):b.url+=(/\?/.test(b.url)?"&":"?")+a}else a=b.dataType[0],"*"==a&&(a="text"),b.dataType.length=2,b.dataType[0]="iframe",b.dataType[1]=a}});return d},{requires:["./base","dom","./form-serializer"]});
KISSY.add("ajax/iframe-upload",function(b,d,k,h){function j(a){this.xhr=a}var a=document;h.setupConfig({converters:{iframe:h.getConfig().converters.text,text:{iframe:function(a){return a}}}});b.augment(j,{send:function(){var g=this.xhr,f=g.config,h,e=d.get(f.form);this.attrs={target:d.attr(e,"target")||"",action:d.attr(e,"action")||""};this.form=e;var c=b.guid("ajax-iframe");g.iframe=d.create("<iframe  id='"+c+"' name='"+c+"' style='position:absolute;left:-9999px;top:-9999px;'/>");g.iframeId=c;d.prepend(g.iframe,
a.body||a.documentElement);d.attr(e,{target:g.iframeId,action:f.url});if(f.data){h=f.data;f=f.serializeArray;h=b.unparam(h);var c=[],m;for(m in h)for(var j=b.isArray(h[m]),o=b.makeArray(h[m]),q=0;q<o.length;q++){var p=a.createElement("input");p.type="hidden";p.name=m+(j&&f?"[]":"");p.value=o[q];d.append(p,e);c.push(p)}h=c}this.fields=h;k.on(g.iframe,"load error",this._callback,this);e.submit()},_callback:function(a){var b=this.xhr,a=a.type,h=b.iframe;h&&(d.attr(this.form,this.attrs),"load"==a?(a=
h.contentWindow.document,b.responseXML=a,b.responseText=d.text(a.body),b.callback(200,"success")):"error"==a&&b.callback(500,"error"),d.remove(this.fields),k.detach(h),setTimeout(function(){d.remove(h)},30),b.iframe=null)},abort:function(){this._callback(0,1)}});h.setupTransport("iframe",j);return h},{requires:["dom","event","./base"]});
KISSY.add("ajax",function(b,d,k){b.mix(k,{serialize:d.serialize,get:function(d,j,a,g,f){b.isFunction(j)&&(g=a,a=j,j=void 0);return k({type:f||"get",url:d,data:j,success:a,dataType:g})},post:function(d,j,a,g){b.isFunction(j)&&(g=a,a=j,j=void 0);return k.get(d,j,a,g,"post")},jsonp:function(d,j,a){b.isFunction(j)&&(a=j,j=void 0);return k.get(d,j,a,"jsonp")},getScript:b.getScript,getJSON:function(d,j,a){b.isFunction(j)&&(a=j,j=void 0);return k.get(d,j,a,"json")},upload:function(d,j,a,g,f){b.isFunction(a)&&
(f=g,g=a,a=void 0);return k({url:d,type:"post",dataType:f,form:j,data:a,success:g})}});return k},{requires:"ajax/form-serializer,ajax/base,ajax/xhrobject,ajax/xhr,ajax/script,ajax/jsonp,ajax/form,ajax/iframe-upload".split(",")});
KISSY.add("base/attribute",function(b,d){function k(a,e,b,f,g,d,h){h=h||b;return a.fire(e+(b.charAt(0).toUpperCase()+b.substring(1))+"Change",{attrName:h,subAttrName:d,prevVal:f,newVal:g})}function h(a,e,b){var f=a[e]||{};b&&(a[e]=f);return f}function j(a){return h(a,"__attrs",!0)}function a(a){return h(a,"__attrVals",!0)}function g(a,e){for(var b=0,f=e.length;a!=d&&b<f;b++)a=a[e[b]];return a}function f(c,e,f,h,j){var h=h||{},l,s,r,u=e;-1!==e.indexOf(".")&&(l=e.split("."),e=l.shift());r=c.get(e);
l&&(s=g(r,l));if(!(!l&&r===f||l&&s===f)){if(l){var t=s=b.clone(r),v=l.length-1;if(0<=v){for(var w=0;w<v;w++)t=t[l[w]];t!=d&&(t[l[w]]=f)}f=s}if(!h.silent&&!1===k(c,"before",e,r,f,u))return!1;f=c.__set(e,f);if(!1===f)return f;h.silent||(f=a(c)[e],k(c,"after",e,r,f,u),j?j.push({prevVal:r,newVal:f,attrName:e,subAttrName:u}):k(c,"","*",[r],[f],[u],[e]));return c}}function l(){}l.INVALID={};var e=l.INVALID;b.augment(l,{getAttrs:function(){return j(this)},getAttrVals:function(){var a={},e,b=j(this);for(e in b)a[e]=
this.get(e);return a},addAttr:function(a,e,f){var g=j(this),e=b.clone(e);g[a]?b.mix(g[a],e,f):g[a]=e;return this},addAttrs:function(a,e){var f=this;b.each(a,function(a,c){f.addAttr(c,a)});e&&f.set(e);return f},hasAttr:function(a){return a&&j(this).hasOwnProperty(a)},removeAttr:function(c){this.hasAttr(c)&&(delete j(this)[c],delete a(this)[c]);return this},set:function(a,e,g){var d;if(b.isPlainObject(a)){var h=a,a=0;d=!0;g=e;e=[];for(a in h)if(d=f(this,a,h[a],g,e),!1===d)break;var j=[],l=[],r=[],u=
[];b.each(e,function(a){l.push(a.prevVal);r.push(a.newVal);j.push(a.attrName);u.push(a.subAttrName)});j.length&&k(this,"","*",l,r,u,j);return d}return f(this,a,e,g)},__set:function(c,f){var g,l=h(j(this),c,!0),k=l.validator,l=l.setter;if((k=b.isString(k)?this[k]:k)&&!1===k.call(this,f,c))return!1;if(l=b.isString(l)?this[l]:l)g=l.call(this,f,c);if(g===e)return!1;g!==d&&(f=g);a(this)[c]=f},get:function(c){var e,f,d;-1!==c.indexOf(".")&&(e=c.split("."),c=e.shift());f=h(j(this),c).getter;d=c in a(this)?
a(this)[c]:this.__getDefAttrVal(c);if(f=b.isString(f)?this[f]:f)d=f.call(this,d,c);e&&(d=g(d,e));return d},__getDefAttrVal:function(a){var e=h(j(this),a),f;if(f=b.isString(e.valueFn)?this[e.valueFn]:e.valueFn)f=f.call(this),f!==d&&(e.value=f),delete e.valueFn,j(this)[a]=e;return e.value},reset:function(a,e){if(b.isString(a))return this.hasAttr(a)?this.set(a,this.__getDefAttrVal(a),e):this;var e=a,f=j(this),g={};for(a in f)g[a]=this.__getDefAttrVal(a);this.set(g,e);return this}});d&&(l.prototype.addAttrs=
d);return l});KISSY.add("base/base",function(b,d,k){function h(b){for(var a=this.constructor;a;){var g=a.ATTRS;if(g){var f=void 0;for(f in g)g.hasOwnProperty(f)&&this.addAttr(f,g[f],!1)}a=a.superclass?a.superclass.constructor:null}if(b)for(var d in b)b.hasOwnProperty(d)&&this.__set(d,b[d])}b.augment(h,k.Target,d);return h},{requires:["./attribute","event"]});KISSY.add("base",function(b,d,k){d.Attribute=k;return d},{requires:["base/base","base/attribute"]});
KISSY.add("cookie/base",function(b){var d=document,k=encodeURIComponent,h=decodeURIComponent;return{get:function(j){var a,g;if(b.isString(j)&&""!==j&&(g=(""+d.cookie).match(RegExp("(?:^| )"+j+"(?:(?:=([^;]*))|;|$)"))))a=g[1]?h(g[1]):"";return a},set:function(h,a,g,f,l,e){var a=""+k(a),c=g;"number"===typeof c&&(c=new Date,c.setTime(c.getTime()+864E5*g));c instanceof Date&&(a+="; expires="+c.toUTCString());b.isString(f)&&""!==f&&(a+="; domain="+f);b.isString(l)&&""!==l&&(a+="; path="+l);e&&(a+="; secure");
d.cookie=h+"="+a},remove:function(b,a,g,f){this.set(b,"",-1,a,g,f)}}});KISSY.add("cookie",function(b,d){return d},{requires:["cookie/base"]});KISSY.add("core",function(b,d,k,h,j,a,g,f,l,e){d={UA:d,DOM:k,Event:h,EventTarget:h.Target,EventObject:h.Object,Node:j,NodeList:j,JSON:a,Ajax:g,IO:g,ajax:g,io:g,jsonp:g.jsonp,Anim:f,Easing:f.Easing,Base:l,Cookie:e,one:j.one,all:j.all,get:k.get,query:k.query};b.mix(b,d);return d},{requires:"ua,dom,event,node,json,ajax,anim,base,cookie".split(",")});KISSY.use("core");
KISSY.add("sizzle/impl",function(){function b(a,c,e,b,f,g){for(var f=0,d=b.length;f<d;f++){var m=b[f];if(m){for(var h=!1,m=m[a];m;){if(m.sizcache===e){h=b[m.sizset];break}1===m.nodeType&&!g&&(m.sizcache=e,m.sizset=f);if(m.nodeName.toLowerCase()===c){h=m;break}m=m[a]}b[f]=h}}}function d(a,c,b,f,g,d){for(var g=0,m=f.length;g<m;g++){var h=f[g];if(h){for(var j=!1,h=h[a];h;){if(h.sizcache===b){j=f[h.sizset];break}if(1===h.nodeType)if(d||(h.sizcache=b,h.sizset=g),"string"!==typeof c){if(h===c){j=!0;break}}else if(0<
e.filter(c,[h]).length){j=h;break}h=h[a]}f[g]=j}}}var k=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,h=0,j=Object.prototype.toString,a=!1,g=!0,f=/\\/g,l=/\W/;[0,0].sort(function(){g=!1;return 0});var e=function(a,b,f,g){var f=f||[],d=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return f;var h,l,n,o,p,s=!0,r=e.isXML(b),z=[],F=a;do if(k.exec(""),h=k.exec(F))if(F=h[3],z.push(h[1]),
h[2]){o=h[3];break}while(h);if(1<z.length&&m.exec(a))if(2===z.length&&c.relative[z[0]])l=u(z[0]+z[1],b);else for(l=c.relative[z[0]]?[b]:e(z.shift(),b);z.length;)a=z.shift(),c.relative[a]&&(a+=z.shift()),l=u(a,l);else if(!g&&1<z.length&&9===b.nodeType&&!r&&c.match.ID.test(z[0])&&!c.match.ID.test(z[z.length-1])&&(h=e.find(z.shift(),b,r),b=h.expr?e.filter(h.expr,h.set)[0]:h.set[0]),b){h=g?{expr:z.pop(),set:q(g)}:e.find(z.pop(),1===z.length&&("~"===z[0]||"+"===z[0])&&b.parentNode?b.parentNode:b,r);l=
h.expr?e.filter(h.expr,h.set):h.set;for(0<z.length?n=q(l):s=!1;z.length;)h=p=z.pop(),c.relative[p]?h=z.pop():p="",null==h&&(h=b),c.relative[p](n,h,r)}else n=[];n||(n=l);n||e.error(p||a);if("[object Array]"===j.call(n))if(s)if(b&&1===b.nodeType)for(a=0;null!=n[a];a++)n[a]&&(!0===n[a]||1===n[a].nodeType&&e.contains(b,n[a]))&&f.push(l[a]);else for(a=0;null!=n[a];a++)n[a]&&1===n[a].nodeType&&f.push(l[a]);else f.push.apply(f,n);else q(n,f);o&&(e(o,d,f,g),e.uniqueSort(f));return f};e.uniqueSort=function(c){if(s&&
(a=g,c.sort(s),a))for(var e=1;e<c.length;e++)c[e]===c[e-1]&&c.splice(e--,1);return c};e.matches=function(a,c){return e(a,null,null,c)};e.matchesSelector=function(a,c){return 0<e(c,null,null,[a]).length};e.find=function(a,e,b){var g;if(!a)return[];for(var d=0,m=c.order.length;d<m;d++){var h,j=c.order[d];if(h=c.leftMatch[j].exec(a)){var l=h[1];h.splice(1,1);if("\\"!==l.substr(l.length-1)&&(h[1]=(h[1]||"").replace(f,""),g=c.find[j](h,e,b),null!=g)){a=a.replace(c.match[j],"");break}}}g||(g="undefined"!==
typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]);return{set:g,expr:a}};e.filter=function(a,b,f,g){for(var d,h,m=a,j=[],l=b,k=b&&b[0]&&e.isXML(b[0]);a&&b.length;){for(var n in c.filter)if(null!=(d=c.leftMatch[n].exec(a))&&d[2]){var o,q,p=c.filter[n];q=d[1];h=!1;d.splice(1,1);if("\\"!==q.substr(q.length-1)){l===j&&(j=[]);if(c.preFilter[n])if(d=c.preFilter[n](d,l,f,j,g,k)){if(!0===d)continue}else h=o=!0;if(d)for(var s=0;null!=(q=l[s]);s++)if(q){o=p(q,d,s,l);var r=g^!!o;f&&null!=o?r?h=!0:
l[s]=!1:r&&(j.push(q),h=!0)}if(void 0!==o){f||(l=j);a=a.replace(c.match[n],"");if(!h)return[];break}}}if(a===m)if(null==h)e.error(a);else break;m=a}return l};e.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var c=e.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,c){var b=
"string"===typeof c,f=b&&!l.test(c),b=b&&!f;f&&(c=c.toLowerCase());for(var f=0,g=a.length,d;f<g;f++)if(d=a[f]){for(;(d=d.previousSibling)&&1!==d.nodeType;);a[f]=b||d&&d.nodeName.toLowerCase()===c?d||!1:d===c}b&&e.filter(c,a,!0)},">":function(a,c){var b,f="string"===typeof c,g=0,d=a.length;if(f&&!l.test(c))for(c=c.toLowerCase();g<d;g++){if(b=a[g])b=b.parentNode,a[g]=b.nodeName.toLowerCase()===c?b:!1}else{for(;g<d;g++)(b=a[g])&&(a[g]=f?b.parentNode:b.parentNode===c);f&&e.filter(c,a,!0)}},"":function(a,
c,e){var f,g=h++,m=d;"string"===typeof c&&!l.test(c)&&(f=c=c.toLowerCase(),m=b);m("parentNode",c,g,a,f,e)},"~":function(a,c,e){var f,g=h++,m=d;"string"===typeof c&&!l.test(c)&&(f=c=c.toLowerCase(),m=b);m("previousSibling",c,g,a,f,e)}},find:{ID:function(a,c,e){if("undefined"!==typeof c.getElementById&&!e)return(a=c.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,c){if("undefined"!==typeof c.getElementsByName){for(var e=[],b=c.getElementsByName(a[1]),f=0,g=b.length;f<g;f++)b[f].getAttribute("name")===
a[1]&&e.push(b[f]);return 0===e.length?null:e}},TAG:function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,e,b,g,d){a=" "+a[1].replace(f,"")+" ";if(d)return a;for(var d=0,m;null!=(m=c[d]);d++)m&&(g^(m.className&&0<=(" "+m.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?e||b.push(m):e&&(c[d]=!1));return!1},ID:function(a){return a[1].replace(f,"")},TAG:function(a){return a[1].replace(f,"").toLowerCase()},CHILD:function(a){if("nth"===
a[1]){a[2]||e.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}else a[2]&&e.error(a[0]);a[0]=h++;return a},ATTR:function(a,e,b,g,d,m){e=a[1]=a[1].replace(f,"");!m&&c.attrMap[e]&&(a[1]=c.attrMap[e]);a[4]=(a[4]||a[5]||"").replace(f,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,f,g,d){if("not"===a[1])if(1<(k.exec(a[3])||"").length||
/^\w/.test(a[3]))a[3]=e(a[3],null,null,b);else return a=e.filter(a[3],b,f,1^d),f||g.push.apply(g,a),!1;else if(c.match.POS.test(a[0])||c.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},
empty:function(a){return!a.firstChild},has:function(a,c,b){return!!e(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var c=a.getAttribute("type"),e=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===e&&(c===e||null===c)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},
password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var c=a.nodeName.toLowerCase();return("input"===c||"button"===c)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var c=a.nodeName.toLowerCase();return("input"===c||"button"===c)&&"reset"===a.type},button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},
focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,c){return 0===c},last:function(a,c,e,b){return c===b.length-1},even:function(a,c){return 0===c%2},odd:function(a,c){return 1===c%2},lt:function(a,c,e){return c<e[3]-0},gt:function(a,c,e){return c>e[3]-0},nth:function(a,c,e){return e[3]-0===c},eq:function(a,c,e){return e[3]-0===c}},filter:{PSEUDO:function(a,b,f,g){var d=b[1],m=c.filters[d];if(m)return m(a,f,b,g);if("contains"===d)return 0<=(a.textContent||a.innerText||
e.getText([a])||"").indexOf(b[3]);if("not"===d){b=b[3];f=0;for(g=b.length;f<g;f++)if(b[f]===a)return!1;return!0}e.error(d)},CHILD:function(a,c){var e=c[1],b=a;switch(e){case "only":case "first":for(;b=b.previousSibling;)if(1===b.nodeType)return!1;if("first"===e)return!0;b=a;case "last":for(;b=b.nextSibling;)if(1===b.nodeType)return!1;return!0;case "nth":var e=c[2],f=c[3];if(1===e&&0===f)return!0;var g=c[0],d=a.parentNode;if(d&&(d.sizcache!==g||!a.nodeIndex)){for(var m=0,b=d.firstChild;b;b=b.nextSibling)1===
b.nodeType&&(b.nodeIndex=++m);d.sizcache=g}b=a.nodeIndex-f;return 0===e?0===b:0===b%e&&0<=b/e}},ID:function(a,c){return 1===a.nodeType&&a.getAttribute("id")===c},TAG:function(a,c){return"*"===c&&1===a.nodeType||a.nodeName.toLowerCase()===c},CLASS:function(a,c){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)},ATTR:function(a,e){var b=e[1],b=c.attrHandle[b]?c.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),f=b+"",g=e[2],d=e[4];return null==b?"!="===g:"="===g?f===d:"*="===g?0<=
f.indexOf(d):"~="===g?0<=(" "+f+" ").indexOf(d):!d?f&&!1!==b:"!="===g?f!==d:"^="===g?0===f.indexOf(d):"$="===g?f.substr(f.length-d.length)===d:"|="===g?f===d||f.substr(0,d.length+1)===d+"-":!1},POS:function(a,e,b,f){var g=c.setFilters[e[2]];if(g)return g(a,b,e,f)}}},m=c.match.POS,n=function(a,c){return"\\"+(c-0+1)},o;for(o in c.match)c.match[o]=RegExp(c.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),c.leftMatch[o]=RegExp(/(^(?:.|\r|\n)*?)/.source+c.match[o].source.replace(/\\(\d+)/g,n));var q=
function(a,c){a=Array.prototype.slice.call(a,0);return c?(c.push.apply(c,a),c):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(p){q=function(a,c){var e=0,b=c||[];if("[object Array]"===j.call(a))Array.prototype.push.apply(b,a);else if("number"===typeof a.length)for(var f=a.length;e<f;e++)b.push(a[e]);else for(;a[e];e++)b.push(a[e]);return b}}var s,r;document.documentElement.compareDocumentPosition?s=function(c,e){return c===e?(a=!0,0):!c.compareDocumentPosition||
!e.compareDocumentPosition?c.compareDocumentPosition?-1:1:c.compareDocumentPosition(e)&4?-1:1}:(s=function(c,e){if(c===e)return a=!0,0;if(c.sourceIndex&&e.sourceIndex)return c.sourceIndex-e.sourceIndex;var b,f,g=[],d=[];b=c.parentNode;f=e.parentNode;var m=b;if(b===f)return r(c,e);if(b){if(!f)return 1}else return-1;for(;m;)g.unshift(m),m=m.parentNode;for(m=f;m;)d.unshift(m),m=m.parentNode;b=g.length;f=d.length;for(m=0;m<b&&m<f;m++)if(g[m]!==d[m])return r(g[m],d[m]);return m===b?r(c,d[m],-1):r(g[m],
e,1)},r=function(a,c,e){if(a===c)return e;for(a=a.nextSibling;a;){if(a===c)return-1;a=a.nextSibling}return 1});e.getText=function(a){for(var c="",b,f=0;a[f];f++){b=a[f];b.nodeType===3||b.nodeType===4?c=c+b.nodeValue:b.nodeType!==8&&(c=c+e.getText(b.childNodes))}return c};(function(){var a=document.createElement("div"),e="script"+(new Date).getTime(),b=document.documentElement;a.innerHTML="<a name='"+e+"'/>";b.insertBefore(a,b.firstChild);if(document.getElementById(e)){c.find.ID=function(a,c,e){if(typeof c.getElementById!==
"undefined"&&!e)return(c=c.getElementById(a[1]))?c.id===a[1]||typeof c.getAttributeNode!=="undefined"&&c.getAttributeNode("id").nodeValue===a[1]?[c]:void 0:[]};c.filter.ID=function(a,c){var e=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&e&&e.nodeValue===c}}b.removeChild(a);b=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)c.find.TAG=function(a,c){var e=c.getElementsByTagName(a[1]);
if(a[1]==="*"){for(var b=[],f=0;e[f];f++)e[f].nodeType===1&&b.push(e[f]);e=b}return e};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#")c.attrHandle.href=function(a){return a.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=e,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){e=function(b,f,g,d){f=f||
document;if(!d&&!e.isXML(f)){var m=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(m&&(f.nodeType===1||f.nodeType===9)){if(m[1])return q(f.getElementsByTagName(b),g);if(m[2]&&c.find.CLASS&&f.getElementsByClassName)return q(f.getElementsByClassName(m[2]),g)}if(f.nodeType===9){if(b==="body"&&f.body)return q([f.body],g);if(m&&m[3]){var h=f.getElementById(m[3]);if(h&&h.parentNode){if(h.id===m[3])return q([h],g)}else return q([],g)}try{return q(f.querySelectorAll(b),g)}catch(j){}}else if(f.nodeType===
1&&f.nodeName.toLowerCase()!=="object"){var m=f,l=(h=f.getAttribute("id"))||"__sizzle__",k=f.parentNode,n=/^\s*[+~]/.test(b);h?l=l.replace(/'/g,"\\$&"):f.setAttribute("id",l);if(n&&k)f=f.parentNode;try{if(!n||k)return q(f.querySelectorAll("[id='"+l+"'] "+b),g)}catch(o){}finally{h||m.removeAttribute("id")}}}return a(b,f,g,d)};for(var f in a)e[f]=a[f];b=null}}();(function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var f=
!b.call(document.createElement("div"),"div"),g=false;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(d){g=true}e.matchesSelector=function(a,d){d=d.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!e.isXML(a))try{if(g||!c.match.PSEUDO.test(d)&&!/!=/.test(d)){var m=b.call(a,d);if(m||!f||a.document&&a.document.nodeType!==11)return m}}catch(h){}return e(d,null,null,[a]).length>0}}})();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){c.order.splice(1,0,"CLASS");c.find.CLASS=function(a,c,e){if(typeof c.getElementsByClassName!=="undefined"&&!e)return c.getElementsByClassName(a[1])};a=null}}})();e.contains=document.documentElement.contains?function(a,c){return a!==c&&(a.contains?a.contains(c):true)}:document.documentElement.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&
16)}:function(){return false};e.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var u=function(a,b){for(var f,g=[],d="",m=b.nodeType?[b]:b;f=c.match.PSEUDO.exec(a);){d=d+f[0];a=a.replace(c.match.PSEUDO,"")}a=c.relative[a]?a+"*":a;f=0;for(var h=m.length;f<h;f++)e(a,m[f],g);return e.filter(d,g)};return e});KISSY.add("sizzle",function(b,d){return d},{requires:["sizzle/impl"]});
KISSY.add("datalazyload/impl",function(b,d,k,h){function j(a,e){if(!(this instanceof j))return new j(a,e);e===h&&(e=a,a=[f]);b.isArray(a)||(a=[d.get(a)||f]);this.containers=a;this.config=b.merge(c,e);this.callbacks={els:[],fns:[]};this._init();return h}var a=window,g=0.1,f=document,l="scroll",e="resize",c={mod:"manual",diff:"default",placeholder:"none",execScript:!0};b.augment(j,{_init:function(){this.threshold=this._getThreshold();this._filterItems();this._initLoadEvent()},_filterItems:function(){var a=
this.containers,c,e,f,g=[],h=[];c=0;for(e=a.length;c<e;++c)f=d.query("img",a[c]),g=g.concat(b.filter(f,this._filterImg,this)),f=d.query("textarea",a[c]),h=h.concat(b.filter(f,this._filterArea,this));this.images=g;this.areaes=h},_filterImg:function(a){var c=a.getAttribute("data-ks-lazyload"),e=this.threshold,b=this.config.placeholder;if("manual"===this.config.mod){if(c)return"none"!==b&&(a.src=b),!0}else if(d.offset(a).top>e&&!c)return d.attr(a,"data-ks-lazyload",a.src),"none"!==b?a.src=b:a.removeAttribute("src"),
!0},_filterArea:function(a){return d.hasClass(a,"ks-datalazyload")},_initLoadEvent:function(){function c(){d||(d=b.later(function(){f();d=null},g))}function f(){h._loadItems();0===h._getItemsLength()&&(k.remove(a,l,c),k.remove(a,e,j))}var d,h=this,j;k.on(a,l,c);k.on(a,e,j=function(){h.threshold=h._getThreshold();c()});h._getItemsLength()&&b.ready(function(){f()})},_loadItems:function(){this._loadImgs();this._loadAreas();this._fireCallbacks()},_loadImgs:function(){this.images=b.filter(this.images,
this._loadImg,this)},_loadImg:function(a){var c=this.threshold+d.scrollTop();if(d.offset(a).top<=c)this._loadImgSrc(a);else return!0},_loadImgSrc:function(a,c){var c=c||"data-ks-lazyload",e=a.getAttribute(c);e&&a.src!=e&&(a.src=e,a.removeAttribute(c))},_loadAreas:function(){this.areaes=b.filter(this.areaes,this._loadArea,this)},_loadArea:function(a){var c="none"===d.css(a,"display");if(d.offset(c?a.parentNode:a).top<=this.threshold+d.scrollTop())this._loadAreaData(a.parentNode,a,this.config.execScript);
else return!0},_loadAreaData:function(a,c,e){c.style.display="none";c.className="";a=d.create("<div>");c.parentNode.insertBefore(a,c);d.html(a,c.value,e===h?!0:e)},_fireCallbacks:function(){var a=this.callbacks,c=a.els,e=a.fns,b=this.threshold+d.scrollTop(),f,g,h,j=[],l=[];for(f=0;(g=c[f])&&(h=e[f++]);)d.offset(g).top<=b?h.call(g):(j.push(g),l.push(h));a.els=j;a.fns=l},addCallback:function(a,c){var e=this.callbacks;if((a=d.get(a))&&b.isFunction(c))e.els.push(a),e.fns.push(c);this._fireCallbacks()},
_getThreshold:function(){var a=this.config.diff,c=d.viewportHeight();return"default"===a?2*c:c+ +a},_getItemsLength:function(){return this.images.length+this.areaes.length+this.callbacks.els.length},loadCustomLazyData:function(a,c){var e=this,f,g;"img-src"===c&&(c="img");b.isArray(a)||(a=[d.get(a)]);b.each(a,function(a){switch(c){case "img":g="IMG"===a.nodeName?[a]:d.query("img",a);b.each(g,function(a){e._loadImgSrc(a,"data-ks-lazyload-custom")});break;default:(f=d.get("textarea",a))&&d.hasClass(f,
"ks-datalazyload-custom")&&e._loadAreaData(a,f)}})}});b.mix(j,j.prototype,!0,["loadCustomLazyData","_loadImgSrc","_loadAreaData"]);return j},{requires:["dom","event"]});KISSY.add("datalazyload",function(b,d){return b.DataLazyload=d},{requires:["datalazyload/impl"]});
KISSY.add("template/base",function(b){function d(d){if(!k[d]){var h=b.guid(a),j,n,o=[e,h,c,n=q(d),m];try{j=new Function(h,o.join(""))}catch(p){o[3]=g+f+l+","+p.message+g+f,j=new Function(h,o.join(""))}k[d]={name:h,o:n,parser:o.join(""),render:j}}return k[d]}var k={},h={"#":"start","/":"end"},j=RegExp("KS_TEMPL_STAT_PARAM","g"),a="KS_DATA_",g='");',f='KS_TEMPL.push("',l="KISSY.Template: Syntax Error. ",e="var KS_TEMPL=[],KS_TEMPL_STAT_PARAM=false;with(",c='||{}){try{KS_TEMPL.push("',m='");}catch(e){KS_TEMPL=["KISSY.Template: Render Error. " + e.message]}};return KS_TEMPL.join("");',
n=function(a){return a.replace(/"/g,'\\"')},o=b.trim,q=function(a){var c,e;return n(o(a).replace(/[\r\t\n]/g," ").replace(/\\/g,"\\\\")).replace(/\{\{([#/]?)(?!\}\})([^}]*)\}\}/g,function(a,d,m){c="";m=o(m).replace(/\\"/g,'"');if(d){if(e=m.indexOf(" "),m=-1===e?[m,""]:[m.substring(0,e),m.substring(e)],a=m[0],m=o(m[1]),(a=p[a])&&h[d])d=a[h[d]],c=""+(b.isFunction(d)?d.apply(this,m.split(/\s+/)):d.replace(j,m))}else c="KS_TEMPL.push(typeof ("+m+') ==="undefined"?"":'+m+");";return g+c+f})},p={"if":{start:'if(typeof (KS_TEMPL_STAT_PARAM) !=="undefined" && KS_TEMPL_STAT_PARAM){',
end:"}"},"else":{start:"}else{"},elseif:{start:"}else if(KS_TEMPL_STAT_PARAM){"},each:{start:function(a,c,e,b){var f="_ks_value",g="_ks_index";"as"===c&&e&&(f=e||f,g=b||g);return"KISSY.each("+a+", function("+f+", "+g+"){"},end:"});"},"!":{start:"/*KS_TEMPL_STAT_PARAM*/"}};b.mix(d,{log:function(a){a in k?"js_beautify"in window||b.log(k[a].parser,"info"):(d(a),this.log(a))},addStatement:function(a,c){b.isString(a)?p[a]=c:b.mix(p,a)}});return d});
KISSY.add("template/node",function(b,d,k){var h=k.all;b.mix(b,{tmpl:function(b,a){return h(d(h(b).html()).render(a))}})},{requires:["./base","node"]});KISSY.add("template",function(b,d){return b.Template=d},{requires:["template/base","template/node"]});KISSY.add("flash/base",function(){return{swfs:{},length:0,version:"1.3"}});
KISSY.add("flash/ua",function(b,d){function k(a){var g=b.isString(a)?a.match(/(\d)+/g).splice(0,3):a;b.isArray(g)&&(a=parseFloat(g[0]+"."+h(g[1],3)+h(g[2],5)));return a||0}function h(a,b){for(var e=(a+"").length;e++<b;)a="0"+a;return a}var j,a,g=!0;d.fpv=function(b){if(b||g){g=!1;var d;if(navigator.plugins&&navigator.mimeTypes.length)d=(navigator.plugins["Shockwave Flash"]||0).description;else if(window.ActiveXObject)try{d=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(e){}j=
!d?void 0:d.match(/(\d)+/g).splice(0,3);a=k(j)}return j};d.fpvGEQ=function(b,h){g&&d.fpv(h);return!!a&&a>=k(b)}},{requires:["ua"]});
KISSY.add("flash/embed",function(b,d,k,h,j){function a(a,b){return l+a+e+c+b+c}function g(a,c){return'<param name="'+a+'" value="'+c+'" />'}var f=/^(?:object|embed)/i,l=" ",e="=",c='"',m=Object.prototype,n=encodeURIComponent,o={wmode:"",allowscriptaccess:"",allownetworking:"",allowfullscreen:"",play:"false",loop:"",menu:"",quality:"",scale:"",salign:"",bgcolor:"",devicefont:"",hasPriority:"",base:"",swliveconnect:"",seamlesstabbing:""},q={params:{},attrs:{width:215,height:138},version:9};b.mix(h,
{fpv:d.fpv,fpvGEQ:d.fpvGEQ,add:function(a,c,e){var g,m,j,l,c=h._normalize(c),c=b.merge(q,c);c.attrs=b.merge(q.attrs,c.attrs);m=b.isString(a)?a.replace("#",""):a;if(!(a=k.get(a)))a=k.create("<div id="+m+"/>"),k.prepend(a,document.body);l=a.nodeName.toLowerCase();j=!f.test(l);a.id||(a.id=b.guid("ks-flash-container-"));m=a.id;c.id||(c.id=b.guid("ks-flash-"));c.attrs.id=c.id;if(d.fpv()){if(!d.fpvGEQ(c.version)){h._callback(e,0,m,a,j);if(!(g=c.xi)||!b.isString(g))return;c.src=g}if(j)c.src?h._embed(a,c,
e):h._callback(e,-3,m,a,j);else{if("object"==l&&(d.gecko||d.opera||7<d.chrome))a=k.query("object",a)[0]||a;c.attrs.id=m;h._register(a,c,e,j)}}else h._callback(e,-1,m,a,j)},get:function(a){a=b.isString(a)?a.replace("#",""):a;return h.swfs[a]},remove:function(a){if(a=h.get(a))k.remove(a),delete h.swfs[a.id],h.length-=1},contains:function(a){var c=h.swfs,e,f=!1;if(b.isString(a))f=a in c;else for(e in c)if(c[e]===a){f=!0;break}return f},_register:function(a,c,e,b){c=c.attrs.id;h._addSWF(c,a);h._callback(e,
1,c,a,b)},_embed:function(a,c,e){a.innerHTML=h._stringSWF(c);a=k.get("#"+c.id);h._register(a,c,e,!0)},_callback:function(a,c,e,f,g){c&&b.isFunction(a)&&a({status:c,id:e,swf:f,dynamic:!!g})},_addSWF:function(a,c){a&&c&&(h.swfs[a]=c,h.length+=1)},_stringSWF:function(c){var e,b=e="",f=c.src,j=c.attrs,c=c.params,l,k;if(d.ie){k="object";for(l in j)j[l]!=m[l]&&"classid"!=l&&"data"!=l&&(e+=a(l,j[l]));e+=a("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");for(l in c)l in o&&(b+=g(l,c[l]));b+=g("movie",
f);c.flashvars&&(b+=g("flashvars",h.toFlashVars(c.flashvars)));e="<"+k+e+">"+b+"</"+k+">"}else{k="embed";e+=a("src",f);for(l in j)j[l]!=m[l]&&"classid"!=l&&"data"!=l&&(e+=a(l,j[l]));e+=a("type","application/x-shockwave-flash");for(l in c)l in o&&(b+=a(l,c[l]));c.flashvars&&(b+=a("flashvars",h.toFlashVars(c.flashvars)));e="<"+k+e+b+"/>"}return e},_normalize:function(a){var c,e,f,g=a||{};if(b.isPlainObject(a))for(f in g={},a)c=f.toLowerCase(),e=a[f],"flashvars"!==c&&(e=h._normalize(e)),g[c]=e;return g},
toFlashVars:function(a){if(!b.isPlainObject(a))return"";var c,e,f=[];for(c in a){e=a[c];if(b.isString(e))e=n(e);else{e=j.stringify(e);if(!e)continue;e=e.replace(/:"([^"]+)/g,function(a,c){return':"'+n(c)})}f.push(c+"="+e)}return f.join("&").replace(/"/g,"'")}});return h},{requires:["ua","dom","flash/base","json","flash/ua"]});KISSY.add("flash",function(b,d){return b.Flash=d},{requires:["flash/base","flash/embed"]});
KISSY.add("dd/ddm",function(b,d,k,h,j,a){function g(){g.superclass.constructor.apply(this,arguments)}function f(a,e){var f=a.get("activeDrag"),g=f.get("mode"),d=a.get("drops"),h,j=0,l=0,k=c(f.get("node")),q=n(k);b.each(d,function(a){var b;if(b=a.getNodeFromTarget(e,f.get("dragNode")[0],f.get("node")[0]))if("point"==g)m(c(b),f.mousePos)&&(b=n(c(b)),h?b<l&&(h=a,l=b):(h=a,l=b));else if("intersect"==g)b=n(o(k,c(b))),b>l&&(l=b,h=a);else if("strict"==g&&(b=n(o(k,c(b))),b==q))return h=a,!1});if((j=a.get("activeDrop"))&&
j!=h)j._handleOut(e),f._handleOut(e);a.set("activeDrop",h);h&&(j!=h?h._handleEnter(e):h._handleOver(e))}function l(a){var c=document;a._shim=(new j("<div style='background-color:red;position:"+(s?"absolute":"fixed")+";left:0;width:100%;height:100%;top:0;cursor:"+v.get("dragCursor")+";z-index:"+u+";'></div>")).prependTo(c.body||c.documentElement).css("opacity",0);l=e;if(s)h.on(p,"resize scroll",t,a);e(a)}function e(a){var c=a.get("activeDrag").get("activeHandler"),e="auto";c&&(e=c.css("cursor"));"auto"==
e&&(e=a.get("dragCursor"));a._shim.css({cursor:e,display:"block"});s&&t.call(a)}function c(a){var c=a.offset();return{left:c.left,right:c.left+a.outerWidth(),top:c.top,bottom:c.top+a.outerHeight()}}function m(a,c){return a.left<=c.left&&a.right>=c.left&&a.top<=c.top&&a.bottom>=c.top}function n(a){return a.top>=a.bottom||a.left>=a.right?0:(a.right-a.left)*(a.bottom-a.top)}function o(a,c){var e=Math.max(a.top,c.top),b=Math.min(a.right,c.right),f=Math.min(a.bottom,c.bottom);return{left:Math.max(a.left,
c.left),right:b,top:e,bottom:f}}var q=document,p=window,s=6===d.ie,r=b.throttle(function(a){var c=this.__activeToDrag,e=this.get("activeDrag");(e||c)&&a.preventDefault();e?(e._move(a),f(this,a)):c&&c._move(a)},30),u=999999;g.ATTRS={prefixCls:{value:"ks-dd-"},dragCursor:{value:"move"},clickPixelThresh:{value:3},bufferTime:{value:1E3},activeDrag:{},activeDrop:{},drops:{value:[]}};var t=b.throttle(function(){var a;(a=this.get("activeDrag"))&&a.get("shim")&&this._shim.css({width:k.docWidth(),height:k.docHeight()})},
30);b.extend(g,a,{__activeToDrag:0,_regDrop:function(a){this.get("drops").push(a)},_unregDrop:function(a){a=b.indexOf(a,this.get("drops"));-1!=a&&this.get("drops").splice(a,1)},_regToDrag:function(a){h.on(q,"mouseup",this._end,this);h.on(q,"mousemove",r,this);this.__activeToDrag=a},_start:function(){var a=this.__activeToDrag;this.set("activeDrag",a);this.__activeToDrag=0;a.get("shim")&&l(this);this.fire("dragstart",{drag:a})},_end:function(){var a=this.get("activeDrag"),c=this.get("activeDrop"),e=
{drag:a,drop:c};h.remove(q,"mousemove",r,this);h.remove(q,"mouseup",this._end,this);this.__activeToDrag&&(this.__activeToDrag._end(),this.__activeToDrag=0);this._shim&&this._shim.hide();a&&(a._end(),c?(c._end(),this.fire("drophit",e),this.fire("dragdrophit",e)):this.fire("dragdropmiss",{drag:a}),this.fire("dragend",{drag:a}),this.set("activeDrag",null),this.set("activeDrop",null))}});var v=new g;v.inRegion=m;v.region=c;v.area=n;return v},{requires:["ua","dom","event","node","base"]});
KISSY.add("dd/draggable",function(b,d,k,h,j){function a(){a.superclass.constructor.apply(this,arguments);this._init()}function g(){return!1}function f(a){var c=a.target;this._checkMouseDown(a)&&this._check(c)&&this._prepare(a)}var l=b.each,e=d.ie,c=document;a.POINT="point";a.INTERSECT="intersect";a.STRICT="strict";a.ATTRS={node:{setter:function(a){return k.one(a)}},clickPixelThresh:{valueFn:function(){return j.get("clickPixelThresh")}},bufferTime:{valueFn:function(){return j.get("bufferTime")}},dragNode:{},
shim:{value:!0},handlers:{value:[],getter:function(a){var c=this;a.length||(a[0]=c.get("node"));l(a,function(e,f){b.isFunction(e)&&(e=e.call(c));if(b.isString(e)||e.nodeType)e=k.one(e);a[f]=e});c.__set("handlers",a);return a}},activeHandler:{},dragging:{value:!1,setter:function(a){this.get("dragNode")[a?"addClass":"removeClass"](j.get("prefixCls")+"dragging")}},mode:{value:"point"},disabled:{value:!1,setter:function(a){this.get("dragNode")[a?"addClass":"removeClass"](j.get("prefixCls")+"-disabled");
return a}},move:{value:!1},primaryButtonOnly:{value:!0},halt:{value:!0}};var m;b.extend(a,h,{startMousePos:null,startNodePos:null,_diff:null,_bufferTimer:null,_init:function(){var a=this.get("node");this.set("dragNode",a);a.on("mousedown",f,this).on("dragstart",this._fixDragStart)},_fixDragStart:function(a){a.preventDefault()},destroy:function(){this.get("dragNode").detach("mousedown",f,this).detach("dragstart",this._fixDragStart);this.detach()},_check:function(a){var c=this,e=c.get("handlers"),b=
0;l(e,function(e){if(e.contains(a)||e[0]==a)return b=1,c.set("activeHandler",e),!1});return b},_checkMouseDown:function(a){return this.get("primaryButtonOnly")&&1<a.button||this.get("disabled")?0:1},_prepare:function(a){var b=this;e&&(m=c.body.onselectstart,c.body.onselectstart=g);b.get("halt")?a.halt():a.preventDefault();var f=b.get("node"),d=a.pageX,a=a.pageY,f=f.offset();b.startMousePos=b.mousePos={left:d,top:a};b.startNodePos=f;b._diff={left:d-f.left,top:a-f.top};j._regToDrag(b);if(d=b.get("bufferTime"))b._bufferTimer=
setTimeout(function(){b._start()},d)},_clearBufferTimer:function(){this._bufferTimer&&(clearTimeout(this._bufferTimer),this._bufferTimer=0)},_move:function(a){var c,e=this._diff;c=this.startMousePos;var b=a.pageX,a=a.pageY,f=b-e.left,e=a-e.top;this.get("dragging")?(this.mousePos={left:b,top:a},c={left:f,top:e,pageX:b,pageY:a,drag:this},b=1,!1===this.fire("drag",c)&&(b=0),!1===j.fire("drag",c)&&(b=0),b&&this.get("move")&&this.get("node").offset(c)):(e=this.get("clickPixelThresh"),(Math.abs(b-c.left)>=
e||Math.abs(a-c.top)>=e)&&this._start())},_end:function(){var a;this._clearBufferTimer();e&&(c.body.onselectstart=m);this.get("dragging")&&(this.get("node").removeClass(j.get("prefixCls")+"drag-over"),(a=j.get("activeDrop"))?this.fire("dragdrophit",{drag:this,drop:a}):this.fire("dragdropmiss",{drag:this}),this.set("dragging",0),this.fire("dragend",{drag:this}))},_handleOut:function(){this.get("node").removeClass(j.get("prefixCls")+"drag-over");this.fire("dragexit",{drag:this,drop:j.get("activeDrop")})},
_handleEnter:function(a){this.get("node").addClass(j.get("prefixCls")+"drag-over");this.fire("dragenter",a)},_handleOver:function(a){this.fire("dragover",a)},_start:function(){this._clearBufferTimer();this.set("dragging",1);j._start();this.fire("dragstart",{drag:this})}});return a},{requires:["ua","node","base","./ddm"]});
KISSY.add("dd/droppable",function(b,d,k,h){function j(){j.superclass.constructor.apply(this,arguments);this._init()}j.ATTRS={node:{setter:function(a){if(a)return d.one(a)}}};b.extend(j,k,{getNodeFromTarget:function(a,b,f){var a=this.get("node"),d=a[0];return d==b||d==f?null:a},_init:function(){h._regDrop(this)},__getCustomEvt:function(a){return b.mix({drag:h.get("activeDrag"),drop:this},a)},_handleOut:function(){var a=this.__getCustomEvt();this.get("node").removeClass(h.get("prefixCls")+"drop-over");
this.fire("dropexit",a);h.fire("dropexit",a);h.fire("dragexit",a)},_handleEnter:function(a){a=this.__getCustomEvt(a);a.drag._handleEnter(a);this.get("node").addClass(h.get("prefixCls")+"drop-over");this.fire("dropenter",a);h.fire("dragenter",a);h.fire("dropenter",a)},_handleOver:function(a){a=this.__getCustomEvt(a);a.drag._handleOver(a);this.fire("dropover",a);h.fire("dragover",a);h.fire("dropover",a)},_end:function(){var a=this.__getCustomEvt();this.get("node").removeClass(h.get("prefixCls")+"drop-over");
this.fire("drophit",a)},destroy:function(){h._unregDrop(this)}});return j},{requires:["node","base","./ddm"]});
KISSY.add("dd/proxy",function(b,d,k){function h(){h.superclass.constructor.apply(this,arguments);this[j]={}}var j="__proxy_destructors",a=b.stamp,g=b.guid("__dd_proxy"),f="__proxy";h.ATTRS={node:{value:function(a){return new d(a.get("node").clone(!0))}},destroyOnEnd:{value:!1},moveOnEnd:{value:!0}};b.extend(h,k,{attach:function(d){function e(){var a=h.get("node"),c=d.get("node");h[f]?a=h[f]:b.isFunction(a)&&(a=a(d),a.addClass("ks-dd-proxy"),a.css("position","absolute"),h[f]=a);c.parent().append(a);
a.show();a.offset(c.offset());d.__set("dragNode",c);d.__set("node",a)}function c(){var a=h[f];h.get("moveOnEnd")&&d.get("dragNode").offset(a.offset());h.get("destroyOnEnd")?(a.remove(),h[f]=0):a.hide();d.__set("node",d.get("dragNode"))}var h=this,k=a(d,1,g);if(!k||!h[j][k])d.on("dragstart",e),d.on("dragend",c),k=a(d,0,g),h[j][k]={drag:d,fn:function(){d.detach("dragstart",e);d.detach("dragend",c)}}},unAttach:function(b){var b=a(b,1,g),e=this[j];b&&e[b]&&(e[b].fn(),delete e[b])},destroy:function(){var a=
this.get("node"),e=this[j];a&&!b.isFunction(a)&&a.remove();for(var c in e)this.unAttach(e[c].drag)}});return h},{requires:["node","base"]});
KISSY.add("dd/draggable-delegate",function(b,d,k,h,j){function a(){a.superclass.constructor.apply(this,arguments)}function g(a){var b,e;if(this._checkMouseDown(a)){b=this.get("handlers");var c=new j(a.target);(b=b.length?this._getHandler(c):c)&&(e=this._getNode(b));e&&(this.__set("activeHandler",b),this.__set("node",e),this.__set("dragNode",e),this._prepare(a))}}b.extend(a,k,{_init:function(){this.get("container").on("mousedown",g,this).on("dragstart",this._fixDragStart)},_getHandler:function(a){for(var g,
e=this.get("container"),c=this.get("handlers");a&&a[0]!==e[0];){b.each(c,function(c){if(h.test(a[0],c))return g=a,!1});if(g)break;a=a.parent()}return g},_getNode:function(a){return a.closest(this.get("selector"),this.get("container"))},destroy:function(){this.get("container").detach("mousedown",g,this).detach("dragstart",this._fixDragStart);this.detach()}},{ATTRS:{container:{setter:function(a){return j.one(a)}},selector:{},handlers:{value:[],getter:0},disabled:{setter:function(a){this.get("container")[a?
"addClass":"removeClass"](d.get("prefixCls")+"-disabled");return a}}}});return a},{requires:["./ddm","./draggable","dom","node"]});
KISSY.add("dd/droppable-delegate",function(b,d,k,h,j){function a(){var a=this.get("container"),b=this.get("selector");this.__allNodes=a.all(b)}function g(){g.superclass.constructor.apply(this,arguments);d.on("dragstart",a,this)}b.extend(g,k,{getNodeFromTarget:function(a,b,e){var c={left:a.pageX,top:a.pageY},a=this.__allNodes,g=0,h=Number.MAX_VALUE;a&&a.each(function(a){var f=a[0];if(!(f===e||f===b)&&d.inRegion(d.region(a),c))f=d.area(d.region(a)),f<h&&(h=f,g=a)});g&&(this.set("lastNode",this.get("node")),
this.set("node",g));return g},_handleOut:function(){g.superclass._handleOut.apply(this,arguments);this.set("node",0);this.set("lastNode",0)},_handleOver:function(a){var b=this.get("node"),e=g.superclass._handleOut,c=g.superclass._handleOver,d=g.superclass._handleEnter,h=this.get("lastNode");h[0]!==b[0]?(this.set("node",h),e.apply(this,arguments),this.set("node",b),d.call(this,a)):c.call(this,a)}},{ATTRS:{lastNode:{},selector:{},container:{setter:function(a){return j.one(a)}}}});return g},{requires:["./ddm",
"./droppable","dom","node"]});
KISSY.add("dd/scroll",function(b,d,k,h,j){function a(){a.superclass.constructor.apply(this,arguments);this[e]={}}var g=window,f=b.stamp,l=100,e="__dd_scrolls";a.ATTRS={node:{valueFn:function(){return h.one(g)},setter:function(a){return h.one(a)}},rate:{value:[10,10]},diff:{value:[20,20]}};var c=b.isWindow;b.extend(a,k,{getRegion:function(a){return c(a[0])?{width:j.viewportWidth(),height:j.viewportHeight()}:{width:a.outerWidth(),height:a.outerHeight()}},getOffset:function(a){return c(a[0])?{left:j.scrollLeft(),
top:j.scrollTop()}:a.offset()},getScroll:function(a){return{left:a.scrollLeft(),top:a.scrollTop()}},setScroll:function(a,c){a.scrollLeft(c.left);a.scrollTop(c.top)},unAttach:function(a){var c,b=this[e];if((c=f(a,1,"__dd-scroll-id-"))&&b[c])b[c].fn(),delete b[c]},destroy:function(){var a=this[e],c;for(c in a)this.unAttach(a[c].drag)},attach:function(a){function g(){if(c(r[0]))return 0;var e=a.mousePos,b=d.region(r);return!d.inRegion(b,e)?(clearTimeout(A),A=0,1):0}function h(c){!c.fake&&!g()&&(x=c,
y=b.clone(a.mousePos),c=s.getOffset(r),y.left-=c.left,y.top-=c.top,A||k())}function j(){clearTimeout(A);A=null}function k(){if(!g()){var e=s.getRegion(r),f=e.width,e=e.height,d=s.getScroll(r),h=b.clone(d),j=!1;y.top-e>=-w[1]&&(d.top+=v[1],j=!0);y.top<=w[1]&&(d.top-=v[1],j=!0);y.left-f>=-w[0]&&(d.left+=v[0],j=!0);y.left<=w[0]&&(d.left-=v[0],j=!0);j?(s.setScroll(r,d),A=setTimeout(k,l),x.fake=!0,c(r[0])&&(d=s.getScroll(r),x.left+=d.left-h.left,x.top+=d.top-h.top),a.get("move")&&a.get("node").offset(x),
a.fire("drag",x)):A=null}}var s=this,r=s.get("node"),u=f(a,0,"__dd-scroll-id-"),t=s[e];if(!t[u]){var v=s.get("rate"),w=s.get("diff"),x,y,A=null;a.on("drag",h);a.on("dragend",j);t[u]={drag:a,fn:function(){a.detach("drag",h);a.detach("dragend",j)}}}}});return a},{requires:["./ddm","base","node","dom"]});KISSY.add("dd",function(b,d,k,h,j,a,g,f){d={Draggable:k,Droppable:h,DDM:d,Proxy:j,DraggableDelegate:a,DroppableDelegate:g,Scroll:f};b.mix(b,d);return d},{requires:"dd/ddm,dd/draggable,dd/droppable,dd/proxy,dd/draggable-delegate,dd/droppable-delegate,dd/scroll".split(",")});
KISSY.add("resizable/base",function(b,d,k,h){function j(b){var b=b.newVal,f=this.dds,d=this.get("node");this.destroy();for(e=0;e<b.length;e++){var h=b[e],j=l("<div class='"+m+" "+m+"-"+h+"'></div>").prependTo(d),h=f[h]=new c({node:j,cursor:null});h.on("drag",g,this);h.on("dragstart",a,this)}}function a(){var a=this.get("node");this._width=a.width();this._top=parseInt(a.css("top"));this._left=parseInt(a.css("left"));this._height=a.height()}function g(a){var c=this.get("node"),b=a.target,f;a:{f=this.dds;
for(var g in f)if(f[g]==b){f=g;break a}f=0}g=this._width;var d=this._height,h=this.get("minWidth"),m=this.get("maxWidth"),j=this.get("minHeight"),l=this.get("maxHeight"),a=o[f](h,m,j,l,this._top,this._left,g,d,a.top-b.startNodePos.top,a.left-b.startNodePos.left),b=["width","height","top","left"];for(e=0;e<b.length;e++)a[e]&&c.css(b[e],a[e])}function f(a){var c;f.superclass.constructor.apply(this,arguments);this.on("afterHanldersChange",j,this);c=this.get("node");this.dds={};"static"==c.css("position")&&
c.css("position","relative");j.call(this,{newVal:this.get("handlers")})}var l=d.all,e,c=h.Draggable,m="ks-resizable-handler",h=["l","r"],n=["t","b"],o={t:function(a,c,e,b,f,g,d,h,m){a=Math.min(Math.max(e,h-m),b);return[0,a,f+h-a,0]},b:function(a,c,e,b,f,g,d,h,m){return[0,Math.min(Math.max(e,h+m),b),0,0]},r:function(a,c,e,b,f,g,d,h,m,j){return[Math.min(Math.max(a,d+j),c),0,0,0]},l:function(a,c,e,b,f,g,d,h,m,j){a=Math.min(Math.max(a,d-j),c);return[a,0,0,g+d-a]}};for(e=0;e<h.length;e++)for(d=0;d<n.length;d++)(function(a,
c){o[a+c]=o[c+a]=function(){var b=o[a].apply(this,arguments),f=o[c].apply(this,arguments),g=[];for(e=0;e<b.length;e++)g[e]=b[e]||f[e];return g}})(h[e],n[d]);b.extend(f,k,{destroy:function(){var a=this.dds,c;for(c in a)a.hasOwnProperty(c)&&(a[c].destroy(),a[c].get("node").remove(),delete a[c])}},{ATTRS:{node:{setter:function(a){return l(a)}},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},maxHeight:{value:Number.MAX_VALUE},handlers:{value:[]}}});return f},{requires:["node",
"base","dd"]});KISSY.add("resizable",function(b,d){return d},{requires:["resizable/base"]});
KISSY.add("uibase/align",function(b,d,k,h){function j(a){for(var e=a.ownerDocument.body,b=k.css(a,"position"),f="fixed"==b||"absolute"==b,a=a.parentNode;a&&a!=e;a=a.parentNode)if(b=k.css(a,"position"),f=f&&"static"==b,"visible"!=k.css(a,"overflow")&&(!f||"fixed"==b||"absolute"==b||"relative"==b))return a;return null}function a(a){for(var e in a)if(0===e.indexOf("fail"))return!0;return!1}function g(c){var f=c.offset,g=c.node,h=c.points,l,p=this.get("el"),f=f||[0,0];l=p.offset();g=e(g,h[0]);h=e(p,h[1]);
h=[h.left-g.left,h.top-g.top];l={left:l.left-h[0]+ +f[0],top:l.top-h[1]+ +f[1]};a:{f=l;l=this.get("el");p={};h={width:l.outerWidth(),height:l.outerHeight()};g=b.clone(h);if(!b.isEmptyObject(c.overflow)){for(var p={left:0,right:Infinity,top:0,bottom:Infinity},s=l[0];s=j(s);){var r=s.clientWidth;if(!d.ie||0!==r){var r=s.clientLeft,u=s.clientTop,t=k.offset(s);t.left+=r;t.top+=u;p.top=Math.max(p.top,t.top);p.right=Math.min(p.right,t.left+s.clientWidth);p.bottom=Math.min(p.bottom,t.top+s.clientHeight);
p.left=Math.max(p.left,t.left)}}s=k.scrollLeft();r=k.scrollTop();p.left=Math.max(p.left,s);p.top=Math.max(p.top,r);p.right=Math.min(p.right,s+k.viewportWidth());p.bottom=Math.min(p.bottom,r+k.viewportHeight());p=0<=p.top&&0<=p.left&&p.bottom>p.top&&p.right>p.left?p:null;c=c.overflow||{};s={};f.left<p.left&&c.adjustX&&(f.left=p.left,s.adjustX=1);f.left<p.left&&f.left+g.width>p.right&&c.resizeWidth&&(g.width-=f.left+g.width-p.right,s.resizeWidth=1);f.left+g.width>p.right&&c.adjustX&&(f.left=Math.max(p.right-
g.width,p.left),s.adjustX=1);c.failX&&(s.failX=f.left<p.left||f.left+g.width>p.right);f.top<p.top&&c.adjustY&&(f.top=p.top,s.adjustY=1);f.top>=p.top&&f.top+g.height>p.bottom&&c.resizeHeight&&(g.height-=f.top+g.height-p.bottom,s.resizeHeight=1);f.top+g.height>p.bottom&&c.adjustY&&(f.top=Math.max(p.bottom-g.height,p.top),s.adjustY=1);c.failY&&(s.failY=f.top<p.top||f.top+g.height>p.bottom);p=s;if(a(p)){c=p;break a}}this.set("x",f.left);this.set("y",f.top);if(g.width!=h.width||g.height!=h.height)l.width(g.width),
l.height(g.height);c=p}return c}function f(a,e,f){var g=[];b.each(a,function(a){g.push(a.replace(e,function(a){return f[a]}))});return g}function l(){}function e(a,e){var b=e.charAt(0),f=e.charAt(1),g,d,j,l;a?(a=h.one(a),g=a.offset(),d=a.outerWidth(),j=a.outerHeight()):(g={left:k.scrollLeft(),top:k.scrollTop()},d=k.viewportWidth(),j=k.viewportHeight());l=g.left;g=g.top;"c"===b?g+=j/2:"b"===b&&(g+=j);"c"===f?l+=d/2:"r"===f&&(l+=d);return{left:l,top:g}}l.ATTRS={align:{}};l.prototype={_uiSetAlign:function(a){b.isPlainObject(a)&&
this.align(a.node,a.points,a.offset,a.overflow)},align:function(c,e,d,h){var j={},h=b.clone(h||{}),d=d&&[].concat(d)||[0,0];h.failX&&(j.failX=1);h.failY&&(j.failY=1);var l=g.call(this,{node:c,points:e,offset:d,overflow:j});if(a(l)&&(l.failX&&(e=f(e,/[lr]/ig,{l:"r",r:"l"}),d[0]=-d[0]),l.failY))e=f(e,/[tb]/ig,{t:"b",b:"t"}),l=d,l[1]=-l[1],d=l;l=g.call(this,{node:c,points:e,offset:d,overflow:j});a(l)&&(delete h.failX,delete h.failY,g.call(this,{node:c,points:e,offset:d,overflow:h}))},center:function(a){this.set("align",
{node:a,points:["cc","cc"],offset:[0,0]})}};return l},{requires:["ua","dom","node"]});
KISSY.add("uibase/base",function(b,d,k){function h(a){return a.charAt(0).toUpperCase()+a.substring(1)}function j(f){d.apply(this,arguments);for(var e=f,c=this.constructor;c;){if(e&&e[g]&&c.HTML_PARSER&&(e[g]=k.one(e[g]))){var h=e[g],j=c.HTML_PARSER,o=void 0,q=void 0;for(o in j)j.hasOwnProperty(o)&&(q=j[o],b.isFunction(q)?this.__set(o,q.call(this,h)):b.isString(q)?this.__set(o,h.one(q)):b.isArray(q)&&q[0]&&this.__set(o,h.all(q[0])))}c=c.superclass&&c.superclass.constructor}a(this,"initializer","constructor");
f&&f.autoRender&&this.render()}function a(a,e,c){for(var b=a.constructor,f=[],g,d,h,j;b;){j=[];if(h=b.__ks_exts)for(var k=0;k<h.length;k++)if(g=h[k])"constructor"!=c&&(g=g.prototype.hasOwnProperty(c)?g.prototype[c]:null),g&&j.push(g);b.prototype.hasOwnProperty(e)&&(d=b.prototype[e])&&j.push(d);j.length&&f.push.apply(f,j.reverse());b=b.superclass&&b.superclass.constructor}for(k=f.length-1;0<=k;k--)f[k]&&f[k].call(a)}var g="srcNode",f=function(){};j.HTML_PARSER={};j.ATTRS={rendered:{value:!1},created:{value:!1}};
b.extend(j,d,{create:function(){this.get("created")||(this._createDom(),this.fire("createDom"),a(this,"createDom","__createDom"),this.fire("afterCreateDom"),this.set("created",!0))},render:function(){this.get("rendered")||(this.create(),this._renderUI(),this.fire("renderUI"),a(this,"renderUI","__renderUI"),this.fire("afterRenderUI"),this._bindUI(),this.fire("bindUI"),a(this,"bindUI","__bindUI"),this.fire("afterBindUI"),this._syncUI(),this.fire("syncUI"),a(this,"syncUI","__syncUI"),this.fire("afterSyncUI"),
this.set("rendered",!0))},_createDom:f,_renderUI:f,renderUI:f,_bindUI:function(){var a=this,e=a.__attrs,c,b;for(c in e)e.hasOwnProperty(c)&&(b="_uiSet"+h(c),a[b]&&function(c,e){a.on("after"+h(c)+"Change",function(c){a[e](c.newVal,c)})}(c,b))},bindUI:f,_syncUI:function(){var a=this.__attrs,e;for(e in a)if(a.hasOwnProperty(e)){var c="_uiSet"+h(e);if(this[c]&&!1!==a[e].sync&&void 0!==this.get(e))this[c](this.get(e))}},syncUI:f,destroy:function(){for(var a=this.constructor,e,c,b;a;){a.prototype.hasOwnProperty("destructor")&&
a.prototype.destructor.apply(this);if(e=a.__ks_exts)for(b=e.length-1;0<=b;b--)(c=e[b]&&e[b].prototype.__destructor)&&c.apply(this);a=a.superclass&&a.superclass.constructor}this.fire("destroy");this.detach()}});j.create=function(a,e,c,f){function g(){j.apply(this,arguments)}b.isArray(a)&&(f=c,c=e,e=a,a=j);a=a||j;b.isObject(e)&&(f=c,c=e,e=[]);b.extend(g,a,c,f);if(e){g.__ks_exts=e;var d={},a=e.concat(g);b.each(a,function(a){a&&b.each(["ATTRS","HTML_PARSER"],function(c){if(a[c]){d[c]=d[c]||{};b.mix(d[c],
a[c],true,void 0,true)}})});b.each(d,function(a,c){g[c]=a});var h={};b.each(a,function(a){if(a){var a=a.prototype,c;for(c in a)a.hasOwnProperty(c)&&(h[c]=a[c])}});b.each(h,function(a,c){g.prototype[c]=a})}return g};return j},{requires:["base","node"]});
KISSY.add("uibase/box",function(){function b(){}b.ATTRS={html:{view:!0,sync:!1},width:{view:!0},height:{view:!0},elCls:{view:!0},elStyle:{view:!0},elAttrs:{view:!0},elBefore:{view:!0},el:{view:!0},render:{view:!0},visibleMode:{value:"display",view:!0},visible:{view:!0},srcNode:{view:!0}};b.HTML_PARSER={el:function(b){this.decorateInternal&&this.decorateInternal(b);return b}};b.prototype={_uiSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.render();this.set("visible",!0)},hide:function(){this.set("visible",
!1)}};return b});
KISSY.add("uibase/boxrender",function(b,d){function k(){}function h(a,b,f,d,e,c){b=b||{};f&&(b.width=f);d&&(b.height=d);var f="",h;for(h in b)b.hasOwnProperty(h)&&(f+=h+":"+b[h]+";");var b="",j;for(j in c)c.hasOwnProperty(j)&&(b+=" "+j+"='"+c[j]+"' ");return"<"+e+(f?" style='"+f+"' ":"")+b+(a?" class='"+a+"' ":"")+"></"+e+">"}var j=b.all;k.ATTRS={el:{setter:function(a){return j(a)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},elBefore:{},render:{},html:{sync:!1},visible:{},
visibleMode:{}};k.construct=h;k.HTML_PARSER={html:function(a){return a.html()}};k.prototype={__renderUI:function(){if(this.__boxRenderNew){var a=this.get("render"),b=this.get("el"),f=this.get("elBefore");f?b.insertBefore(f):a?b.appendTo(a):b.appendTo("body")}},__createDom:function(){var a=this.get("el");a||(this.__boxRenderNew=!0,a=new d(h(this.get("elCls"),this.get("elStyle"),this.get("width"),this.get("height"),this.get("elTagName"),this.get("elAttrs"))),this.set("el",a),this.get("html")&&a.html(this.get("html")))},
_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){this.get("el").height(a)},_uiSetHtml:function(a){this.get("el").html(a)},_uiSetVisible:function(a){var b=this.get("el");"visibility"==this.get("visibleMode")?b.css("visibility",a?"visible":"hidden"):b.css("display",a?"":"none")},show:function(){this.render();this.set("visible",
!0)},hide:function(){this.set("visible",!1)},__destructor:function(){var a=this.get("el");a&&(a.detach(),a.remove())}};return k},{requires:["node"]});KISSY.add("uibase/close",function(){function b(){}b.ATTRS={closable:{view:!0},closeAction:{value:"hide"}};var d={hide:"hide",destroy:"destroy"};b.prototype={__bindUI:function(){var b=this,h=b.get("view").get("closeBtn");h&&h.on("click",function(h){b[d[b.get("closeAction")]||"hide"]();h.preventDefault()})}};return b});
KISSY.add("uibase/closerender",function(b,d){function k(){}k.ATTRS={closable:{value:!0},closeBtn:{}};k.HTML_PARSER={closeBtn:function(b){return b.one("."+this.get("prefixCls")+"ext-close")}};k.prototype={_uiSetClosable:function(b){var d=this.get("closeBtn");d&&(b?d.css("display",""):d.css("display","none"))},__renderUI:function(){var b=this.get("closeBtn"),j=this.get("el");!b&&j&&(b=(new d("<a tabindex='0' href='javascript:void(\"\u5173\u95ed\")' role='button' class='"+this.get("prefixCls")+"ext-close'><span class='"+
this.get("prefixCls")+"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(j),this.set("closeBtn",b))},__destructor:function(){var b=this.get("closeBtn");b&&b.detach()}};return k},{requires:["node"]});
KISSY.add("uibase/constrain",function(b,d,k){function h(){}function j(a){var g;if(!a)return g;var f=this.get("el");!0!==a?(a=k.one(a),g=a.offset(),b.mix(g,{maxLeft:g.left+a.outerWidth()-f.outerWidth(),maxTop:g.top+a.outerHeight()-f.outerHeight()})):(a=document.documentElement.clientWidth,g={left:d.scrollLeft(),top:d.scrollTop()},b.mix(g,{maxLeft:g.left+a-f.outerWidth(),maxTop:g.top+d.viewportHeight()-f.outerHeight()}));return g}h.ATTRS={constrain:{value:!1}};h.prototype={__renderUI:function(){var a=
this,b=a.getAttrs(),f=b.x,b=b.y,d=f.setter,e=b.setter;f.setter=function(c){var e=d&&d.call(a,c);void 0===e&&(e=c);if(!a.get("constrain"))return e;c=j.call(a,a.get("constrain"));return Math.min(Math.max(e,c.left),c.maxLeft)};b.setter=function(c){var b=e&&e.call(a,c);void 0===b&&(b=c);if(!a.get("constrain"))return b;c=j.call(a,a.get("constrain"));return Math.min(Math.max(b,c.top),c.maxTop)};a.addAttr("x",f);a.addAttr("y",b)}};return h},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function b(){}b.ATTRS={content:{view:!0,sync:!1},contentEl:{view:!0},contentElAttrs:{view:!0},contentElStyle:{view:!0},contentTagName:{view:!0}};b.prototype={};return b});
KISSY.add("uibase/contentboxrender",function(b,d,k){function h(){}function j(a,b){var d=a.get("contentEl");d.html("");b&&d.append(b)}h.ATTRS={contentEl:{},contentElAttrs:{},contentElCls:{value:""},contentElStyle:{},contentTagName:{value:"div"},content:{sync:!1}};h.HTML_PARSER={content:function(a){return a.html()}};var a=k.construct;h.prototype={__renderUI:function(){},__createDom:function(){var g,f;g=this.get("el");var h=b.makeArray(g[0].childNodes);g=(new d(a(this.get("prefixCls")+"contentbox "+
this.get("contentElCls"),this.get("contentElStyle"),void 0,void 0,this.get("contentTagName"),this.get("contentElAttrs")))).appendTo(g);this.set("contentEl",g);if(h.length)for(f=0;f<h.length;f++)g.append(h[f]);else(f=this.get("content"))&&j(this,f)},_uiSetContentElCls:function(a){this.get("contentEl").addClass(a)},_uiSetContentElAttrs:function(a){this.get("contentEl").attr(a)},_uiSetContentElStyle:function(a){this.get("contentEl").css(a)},_uiSetContent:function(a){j(this,a)}};return h},{requires:["node",
"./boxrender"]});
KISSY.add("uibase/drag",function(b){function d(){}d.ATTRS={handlers:{value:[]},draggable:{value:!0}};d.prototype={_uiSetHandlers:function(b){b&&0<b.length&&this.__drag&&this.__drag.set("handlers",b)},__bindUI:function(){var d=b.require("dd/draggable"),h=this.get("el");this.get("draggable")&&d&&(this.__drag=new d({node:h}))},_uiSetDraggable:function(b){var d=this.__drag;d&&(b?(d.detach("drag"),d.on("drag",this._dragExtAction,this)):d.detach("drag"))},_dragExtAction:function(b){this.set("xy",[b.left,
b.top])},__destructor:function(){var b=this.__drag;b&&b.destroy()}};return d});KISSY.add("uibase/loading",function(){function b(){}b.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return b});
KISSY.add("uibase/loadingrender",function(b,d){function k(){}k.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=(new d("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.get("el")));this._loadingExtEl.show()},unloading:function(){var b=this._loadingExtEl;b&&b.hide()}};return k},{requires:["node"]});
KISSY.add("uibase/mask",function(){function b(){}b.ATTRS={mask:{value:!1}};b.prototype={_uiSetMask:function(b){b?(this.on("show",this.get("view")._maskExtShow,this.get("view")),this.on("hide",this.get("view")._maskExtHide,this.get("view"))):(this.detach("show",this.get("view")._maskExtShow,this.get("view")),this.detach("hide",this.get("view")._maskExtHide,this.get("view")))}};return b},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(b,d,k){function h(){return l?n.width()+e:"100%"}function j(){return l?n.height()+e:"100%"}function a(){f=c("<div class='"+this.get("prefixCls")+"ext-mask'/>").prependTo("body");f.css({position:l?"absolute":"fixed",left:0,top:0,width:h(),height:j()});l&&(o=c("<iframe style='position:absolute;left:0px;top:0px;background:red;width:"+h()+";height:"+j()+";filter:alpha(opacity=0);z-index:-1;'/>").insertBefore(f));f.unselectable();f.on("mousedown click",function(a){a.halt()})}
function g(){}var f,l=6===d.ie,e="px",c=k.all,m=c(window),n=c(document),o,q=0,p=b.throttle(function(){var a={width:h(),height:j()};f.css(a);o&&o.css(a)},50);g.prototype={_maskExtShow:function(){f||a.call(this);var c={"z-index":this.get("zIndex")-1},b={display:""};f.css(c);o&&o.css(c);q++;if(1==q&&(f.css(b),o&&o.css(b),l))m.on("resize scroll",p)},_maskExtHide:function(){q--;0>=q&&(q=0);if(!q){var a={display:"none"};f&&f.css(a);o&&o.css(a);l&&m.detach("resize scroll",p)}},__destructor:function(){this._maskExtHide()}};
return g},{requires:["ua","node"]});KISSY.add("uibase/position",function(b){function d(){}d.ATTRS={x:{view:!0},y:{view:!0},xy:{setter:function(d){var h=b.makeArray(d);h.length&&(h[0]&&this.set("x",h[0]),h[1]&&this.set("y",h[1]));return d},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:!0}};d.prototype={move:function(d,h){b.isArray(d)&&(h=d[1],d=d[0]);this.set("xy",[d,h])}};return d});
KISSY.add("uibase/positionrender",function(){function b(){}b.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999}};b.prototype={__renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_uiSetZIndex:function(b){this.get("el").css("z-index",b)},_uiSetX:function(b){this.get("el").offset({left:b})},_uiSetY:function(b){this.get("el").offset({top:b})}};
return b});KISSY.add("uibase/resize",function(b){function d(){}d.ATTRS={resize:{value:{}}};d.prototype={__destructor:function(){this.resizer&&this.resizer.destroy()},_uiSetResize:function(d){var h=b.require("resizable");h&&(this.resizer&&this.resizer.destroy(),d.node=this.get("el"),d.autoRender=!0,d.handlers&&(this.resizer=new h(d)))}};return d});
KISSY.add("uibase/shimrender",function(b,d){function k(){}k.ATTRS={shim:{value:!0}};k.prototype={_uiSetShim:function(b){var j=this.get("el");b&&!this.__shimEl?(this.__shimEl=new d("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'/>"),j.prepend(this.__shimEl)):!b&&this.__shimEl&&(this.__shimEl.remove(),delete this.__shimEl)}};return k},{requires:["node"]});
KISSY.add("uibase/stdmod",function(){function b(){}b.ATTRS={header:{view:!0},body:{view:!0},footer:{view:!0},bodyStyle:{view:!0},footerStyle:{view:!0},headerStyle:{view:!0},headerContent:{view:!0},bodyContent:{view:!0},footerContent:{view:!0}};b.prototype={};return b});
KISSY.add("uibase/stdmodrender",function(b,d){function k(){}function h(a,b){var f=a.get("contentEl"),h=a.get(b);h||(h=(new d("<div class='"+a.get("prefixCls")+j+b+"'/>")).appendTo(f),a.set(b,h))}var j="stdmod-";k.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};k.HTML_PARSER={header:function(a){return a.one("."+this.get("prefixCls")+j+"header")},body:function(a){return a.one("."+this.get("prefixCls")+j+"body")},footer:function(a){return a.one("."+
this.get("prefixCls")+j+"footer")}};k.prototype={_setStdModContent:function(a,g){b.isString(g)?this.get(a).html(g):(this.get(a).html(""),this.get(a).append(g))},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){this._setStdModContent("body",a)},_uiSetHeaderContent:function(a){this._setStdModContent("header",a)},_uiSetFooterContent:function(a){this._setStdModContent("footer",
a)},__renderUI:function(){h(this,"header");h(this,"body");h(this,"footer")}};return k},{requires:["node"]});KISSY.add("uibase",function(b,d,k,h,j,a,g,f,l,e,c,m,n,o,q,p,s,r,u,t,v){a.Render=g;m.Render=n;o.Render=q;p.Render=s;t.Render=v;h.Render=j;l.Render=e;b.mix(d,{Align:k,Box:h,Close:a,Contrain:f,Contentbox:l,Drag:c,Loading:m,Mask:o,Position:p,Shim:{Render:r},Resize:u,StdMod:t});return b.UIBase=d},{requires:"uibase/base,uibase/align,uibase/box,uibase/boxrender,uibase/close,uibase/closerender,uibase/constrain,uibase/contentbox,uibase/contentboxrender,uibase/drag,uibase/loading,uibase/loadingrender,uibase/mask,uibase/maskrender,uibase/position,uibase/positionrender,uibase/shimrender,uibase/resize,uibase/stdmod,uibase/stdmodrender".split(",")});
KISSY.add("component/container",function(b,d,k,h,j,a){return d.create(k,[j,a])},{requires:["uibase","./modelcontrol","./uistore","./delegatechildren","./decoratechildren"]});KISSY.add("component/decoratechild",function(b,d){function k(){}b.augment(k,d,{decorateInternal:function(b){this.set("el",b);var d=this.get("decorateChildCls"),a=this.get("prefixCls");if(b=b.one("."+this.getCls(d)))(d=this._findUIByClass(b))?this.decorateChildrenInternal(d,b,a):this.decorateChildren(b)}});return k},{requires:["./decoratechildren"]});
KISSY.add("component/decoratechildren",function(b,d){function k(){}b.augment(k,{decorateInternal:function(b){this.set("el",b);this.decorateChildren(b)},decorateChildrenInternal:function(b,d,a){this.addChild(new b({srcNode:d,prefixCls:a}))},_findUIByClass:function(h){var j=h.attr("class")||"",a=this.get("prefixCls"),j=j.replace(RegExp("\\b"+a,"ig"),""),a=d.getUIByClass(j);a||(b.log(h),b.log("can not find ui "+j+" from this markup"));return a},decorateChildren:function(b){var d=this,b=b.children(),
a=d.get("prefixCls");b.each(function(b){var f=d._findUIByClass(b);d.decorateChildrenInternal(f,b,a)})}});return k},{requires:["./uistore"]});
KISSY.add("component/delegatechildren",function(b){function d(){}b.augment(d,{__bindUI:function(){this.get("el").on("mousedown mouseup mouseover mouseout dblclick",this._handleChildMouseEvents,this)},_handleChildMouseEvents:function(d){var h=this.getOwnerControl(d.target);if(h)switch(d.type){case "mousedown":h._handleMouseDown(d);break;case "mouseup":h._handleMouseUp(d);break;case "mouseover":h._handleMouseOver(d);break;case "mouseout":h._handleMouseOut(d);break;case "dblclick":h._handleDblClick(d);
break;default:b.error(d.type+" unhandled!")}},getOwnerControl:function(b){for(var d=this.get("children"),j=d.length,a=this.get("el")[0];b&&b!==a;){for(var g=0;g<j;g++)if(d[g].get("el")[0]===b)return d[g];b=b.parentNode}return null}});return d});
KISSY.add("component/modelcontrol",function(b,d,k,h,j){function a(a){return function(b){b=b.newVal;this.get("view")&&this.get("view").set(a,b)}}function g(a){return function(b){return void 0===b?this.get("view")&&this.get("view").get(a):b}}function f(a,b,e){a.create();var f=a.getContentElement();b.set("parent",a);b.set("render",f);b.set("elBefore",e);a.get("rendered")?b.render():(b.create(),f[0].insertBefore(b.get("el")[0],e&&e[0]||null))}function l(a){if(a.__componentClasses)return a.__componentClasses;
for(var b=a.constructor,f=[];b&&b!=e;){var d=h.getClsByUI(b);d&&f.push(d);b=b.superclass&&b.superclass.constructor}return a.__componentClasses=f.join(" ")}var e=k.create([k.Box],{getCls:h.getCls,initializer:function(){var c=this.__attrs||{},b;for(b in c)if(c.hasOwnProperty(b)){var e=c[b];e.view&&(this.on("after"+(b.charAt(0).toUpperCase()+b.substring(1))+"Change",a(b)),e.getter=g(b))}},renderUI:function(){var a=this;a.get("view").render();var e=a.get("children");b.each(e,function(b){f(a,b);b.render()})},
createDom:function(){var a;if(!(a=this.get("view"))){a=this.constructor;for(var e;a&&!e;)e=a.DefaultRender,a=a.superclass&&a.superclass.constructor;if(e){a=this.__attrs||{};var f={},d;for(d in a)if(a.hasOwnProperty(d)){var g;if(a[d].view&&void 0!==(g=this.get(d)))f[d]=g}a=new e(f)}else a=0}(e=a)?(e.create(),e._renderCls(l(this)),this.get("allowTextSelection_")||e.get("el").unselectable(),this.set("view",e)):(b.error("no view for"),b.error(this.constructor))},getContentElement:function(){var a=this.get("view");
return a&&a.getContentElement()},addChild:function(a,b){var e=this.get("children"),d=null;void 0!==b?(e.splice(b,0,a),d=e[b]||null):e.push(a);f(this,a,d)},removeChild:function(a,e){var f=this.get("children"),d=b.indexOf(a,f);-1!=d&&f.splice(d,1);e&&a.destroy()},removeChildren:function(a){var e=this,f=[].concat(e.get("children"));b.each(f,function(b){e.removeChild(b,a)});e.set("children",[])},getChildAt:function(a){return this.get("children")[a]},_uiSetHandleMouseEvents:function(a){var b=this.get("el");
a?(b.on("mouseenter",this._handleMouseEnter,this),b.on("mouseleave",this._handleMouseLeave,this),b.on("mousedown",this._handleMouseDown,this),b.on("mouseup",this._handleMouseUp,this),b.on("dblclick",this._handleDblClick,this)):(b.detach("mouseenter",this._handleMouseEnter,this),b.detach("mouseleave",this._handleMouseLeave,this),b.detach("mousedown",this._handleMouseDown,this),b.detach("mouseup",this._handleMouseUp,this),b.detach("dblclick",this._handleDblClick,this))},_handleDblClick:function(a){this.get("disabled")||
this._performInternal(a)},_isMouseEventWithinElement:function(a,b){var e=a.relatedTarget;if(!e)return!1;if(e===b[0]||b.contains(e))return!0},_handleMouseOver:function(a){var b=this.get("el");if(this.get("disabled"))return!0;this._isMouseEventWithinElement(a,b)||this._handleMouseEnter(a)},_handleMouseOut:function(a){var b=this.get("el");if(this.get("disabled"))return!0;this._isMouseEventWithinElement(a,b)||this._handleMouseLeave(a)},_handleMouseEnter:function(){if(this.get("disabled"))return!0;this.set("highlighted",
!0)},_handleMouseLeave:function(){if(this.get("disabled"))return!0;this.set("active",!1);this.set("highlighted",!1)},_handleMouseDown:function(a){if(this.get("disabled"))return!0;1==a.which&&this.get("activeable")&&this.set("active",!0);var b=this.getKeyEventTarget();1==a.which&&0<=b.attr("tabindex")&&b[0].focus();1==a.which&&!this.get("allowTextSelection_")&&a.preventDefault()},_uiSetFocusable:function(a){var b=this.getKeyEventTarget();a?(b.on("focus",this._handleFocus,this),b.on("blur",this._handleBlur,
this),b.on("keydown",this._handleKeydown,this)):(b.detach("focus",this._handleFocus,this),b.detach("blur",this._handleBlur,this),b.detach("keydown",this._handleKeydown,this))},_uiSetFocused:function(a){this._forwardSetAttrToView("focused",a)},_uiSetHighlighted:function(a){this._forwardSetAttrToView("highlighted",a)},_forwardSetAttrToView:function(a,b){var e=this.get("view");e["_set"+(a.charAt(0).toUpperCase()+a.substring(1))].call(e,b,l(this))},_uiSetDisabled:function(a){this._forwardSetAttrToView("disabled",
a)},_uiSetActive:function(a){this._forwardSetAttrToView("active",a)},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},_handleMouseUp:function(a){if(this.get("disabled"))return!0;this.get("active")&&1==a.which&&(this._performInternal(a),this.set("active",!1))},_handleFocus:function(){this.set("focused",!0)},_handleBlur:function(){this.set("focused",!1)},_handleKeyEventInternal:function(a){if(a.keyCode==d.KeyCodes.ENTER)return this._performInternal(a)},_handleKeydown:function(a){if(this.get("disabled"))return!0;
if(this._handleKeyEventInternal(a))return a.halt(),!0},_performInternal:function(){},destructor:function(){var a=this.get("children");b.each(a,function(a){a.destroy()});(a=this.get("view"))&&a.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{view:!0,value:!0},activeable:{value:!0},focused:{},active:{},highlighted:{},children:{value:[]},prefixCls:{view:!0,value:"ks-"},parent:{},view:{},disabled:{},allowTextSelection_:{value:!1}},DefaultRender:j});return e},{requires:["event","uibase","./uistore",
"./render"]});
KISSY.add("component/render",function(b,d,k){function h(b,a,d){return b.getCls(a.split(/\s+/).join(d+" ")+d)}return d.create([d.Box.Render],{_completeClasses:function(b,a){return h(this,b,a)},_renderCls:function(b){this.get("el").addClass(this.getCls(b))},getCls:k.getCls,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},_uiSetFocusable:function(b){var a=this.getKeyEventTarget(),d=a.attr("tabindex");0<=d&&!b?a.attr("tabindex",
-1):!(0<=d)&&b&&a.attr("tabindex",0)},_setHighlighted:function(b,a){this.get("el")[b?"addClass":"removeClass"](h(this,a,"-hover"))},_setDisabled:function(b,a){this.get("el")[b?"addClass":"removeClass"](h(this,a,"-disabled")).attr({tabindex:b?-1:0,"aria-disabled":b})},_setActive:function(b,a){this.get("el")[b?"addClass":"removeClass"](h(this,a,"-active")).attr("aria-pressed",!!b)},_setFocused:function(b,a){this.get("el")[b?"addClass":"removeClass"](h(this,a,"-focused"))}},{ATTRS:{prefixCls:{},focusable:{}}})},
{requires:["uibase","./uistore"]});
KISSY.add("component/uistore",function(b){function d(b){for(var d in k)if(k[d].ui==b)return d;return 0}var k={};return{getCls:function(d){for(var d=b.trim(d).split(/\s+/),j=0;j<d.length;j++)d[j]&&(d[j]=this.get("prefixCls")+d[j]);return d.join(" ")},getClsByUI:d,getClsByInstance:function(b){return d(b.constructor)},getUIByClass:function(b){for(var b=b.split(/\s+/),d=null,a=0;a<b.length;a++){var g=k[b[a]];g&&-1<g.priority&&(d=g.ui)}return d},setUIByClass:function(b,d){k[b]=d},PRIORITY:{LEVEL1:10,LEVEL2:20,
LEVEL3:30,LEVEL4:40,LEVEL5:50,LEVEL6:60}}});KISSY.add("component",function(b,d,k,h,j,a,g,f){return{ModelControl:d,Render:k,Container:h,UIStore:j,DelegateChildren:a,DecorateChild:f,DecorateChildren:g}},{requires:"component/modelcontrol,component/render,component/container,component/uistore,component/delegatechildren,component/decoratechildren,component/decoratechild".split(",")});
KISSY.add("switchable/base",function(b,d,k,h){function j(a,c){c=c||{};"markupType"in c||(c.panelCls?c.markupType=1:c.panels&&(c.markupType=2));for(var f=this.constructor;f;)c=b.merge(f.Config,c),f=f.superclass?f.superclass.constructor:null;this.container=d.get(a);this.config=c;this.activeIndex=this.completedIndex=c.activeIndex;!(-1<this.activeIndex)&&"number"!=typeof c.switchTo&&(this.completedIndex=this.activeIndex=0);this._init();this._initPlugins();this.fire(l);-1<this.activeIndex||"number"==typeof c.switchTo&&
this.switchTo(c.switchTo)}function a(a){var c={};c.type=a.originalEvent.type;c.target=a.originalEvent.target||a.originalEvent.srcElement;return{originalEvent:c}}var g=b.makeArray,f=k.Target,l="init";j.getDomEvent=a;j.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};j.Plugins=
[];b.augment(j,f,{_initPlugins:function(){for(var a=this,c=a.constructor;c;)b.each(c.Plugins,function(c){c.init&&c.init(a)}),c=c.superclass?c.superclass.constructor:null},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var a=this.container,c=this.config,b,f,h=[],j=[];switch(c.markupType){case 0:(b=d.get("."+c.navCls,a))&&(h=d.children(b));f=d.get("."+c.contentCls,a);j=d.children(f);break;case 1:h=d.query("."+c.triggerCls,a);j=d.query("."+
c.panelCls,a);break;case 2:h=c.triggers,j=c.panels}a=j.length;this.length=Math.ceil(a/c.steps);c.hasTriggers&&0<a&&0===h.length&&(h=this._generateTriggersMarkup(this.length));this.triggers=g(h);this.panels=g(j);this.content=f||j[0].parentNode;this.nav=b||c.hasTriggers&&h[0].parentNode},_generateTriggersMarkup:function(a){var c=this.config,b=d.create("<ul>"),f,g;b.className=c.navCls;for(g=0;g<a;g++)f=d.create("<li>"),g===this.activeIndex&&(f.className=c.activeTriggerCls),f.innerHTML=g+1,b.appendChild(f);
this.container.appendChild(b);return d.children(b)},_bindTriggers:function(){var a=this,c=a.config,b=a.triggers,f,d,g=b.length;for(d=0;d<g;d++)(function(d){f=b[d];k.on(f,"click",function(c){a._onFocusTrigger(d,c)});"mouse"===c.triggerType&&(k.on(f,"mouseenter",function(c){a._onMouseEnterTrigger(d,c)}),k.on(f,"mouseleave",function(){a._onMouseLeaveTrigger(d)}))})(d)},_onFocusTrigger:function(b,c){this._triggerIsValid(b)&&(this._cancelSwitchTimer(),this.switchTo(b,h,a(c)))},_onMouseEnterTrigger:function(e,
c){var f=this;if(f._triggerIsValid(e)){var d=a(c);f.switchTimer=b.later(function(){f.switchTo(e,h,d)},1E3*f.config.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=h)},switchTo:function(a,c,b,f){var d=this,g=d.config,j=d.triggers,l=d.panels,k=d.activeIndex,u=g.steps,t=k*u,v=a*u;if(!d._triggerIsValid(a)||!1===d.fire("beforeSwitch",{toIndex:a}))return d;
g.hasTriggers&&d._switchTrigger(-1<k?j[k]:null,j[a]);c===h&&(c=a>k?"forward":"backward");d._switchView(-1<k?l.slice(t,t+u):null,l.slice(v,v+u),a,c,b,function(){f&&f.call(d,a);d.completedIndex=a});d.activeIndex=a;return d},_switchTrigger:function(a,c){var b=this.config.activeTriggerCls;a&&d.removeClass(a,b);d.addClass(c,b)},_switchView:function(a,c,b,f,g,h){a&&d.css(a,"display","none");d.css(c,"display","block");this._fireOnSwitch(b,g);h&&h.call(this)},_fireOnSwitch:function(a,c){this.fire("switch",
b.mix(c||{},{currentIndex:a}))},prev:function(a){var c=this.activeIndex;this.switchTo(0<c?c-1:this.length-1,"backward",a)},next:function(a){var c=this.activeIndex;this.switchTo(c<this.length-1?c+1:0,"forward",a)}});return j},{requires:["dom","event"]});
KISSY.add("switchable/aria",function(b,d,k,h){function j(){this.stop&&this.stop()}function a(){this.start&&this.start()}h.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var d=b.container;k.on(d,"focusin",j,b);k.on(d,"focusout",a,b)}}});var g=["a","input","button","object"];return{setTabIndex:function(a,h){a.tabIndex=h;d.query("*",a).each(function(a){var c=a.nodeName.toLowerCase();b.inArray(c,g)&&(d.hasAttr(a,"oriTabIndex")||d.attr(a,"oriTabIndex",a.tabIndex),a.tabIndex=-1!=h?d.attr(a,
"oriTabIndex"):h)})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/accordion/base",function(b,d,k){function h(b,a){if(!(this instanceof h))return new h(b,a);h.superclass.constructor.apply(this,arguments)}b.extend(h,k,{_switchTrigger:function(b,a){var g=this.config;g.multiple?d.toggleClass(a,g.activeTriggerCls):h.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(b){return this.config.multiple||h.superclass._triggerIsValid.call(this,b)},_switchView:function(b,a,g,f,l,e){var c=a[0];this.config.multiple?(d.toggle(c),this._fireOnSwitch(g,
l),e&&e.call(this)):h.superclass._switchView.apply(this,arguments)}});h.Plugins=[];h.Config={markupType:1,triggerType:"click",multiple:!1};return h},{requires:["dom","../base"]});
KISSY.add("switchable/accordion/aria",function(b,d,k,h,j){function a(a){var c;b.each(this.triggers,function(b){if(b==a||d.contains(b,a))c=b});return c}function g(a){var c;b.each(this.panels,function(b){if(b==a||d.contains(b,a))c=b});return c}function f(c){var e=a.call(this,c);e||(c=g.call(this,c),e=this.triggers[b.indexOf(c,this.panels)]);return e}function l(a){switch(a.keyCode){case q:case p:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case x:a.ctrlKey&&!a.altKey&&a.halt()}}function e(e){var d=
e.target,g=this.triggers,h=!e.ctrlKey&&!e.shiftKey&&!e.altKey,j=e.ctrlKey&&!e.shiftKey&&!e.altKey;switch(e.keyCode){case A:case y:if((d=a.call(this,d))&&h)this.switchTo(b.indexOf(d,this.triggers)),e.halt();break;case u:case t:if(d=a.call(this,d))m.call(this,d),e.halt();break;case v:case w:if(d=a.call(this,d))n.call(this,d),e.halt();break;case p:j&&(e.halt(),d=f.call(this,d),n.call(this,d));break;case q:j&&(e.halt(),d=f.call(this,d),m.call(this,d));break;case r:h&&(f.call(this,d),c.call(this,0,!0),
e.halt());break;case s:h&&(f.call(this,d),c.call(this,g.length-1,!0),e.halt());break;case x:e.ctrlKey&&!e.altKey&&(e.halt(),d=f.call(this,d),e.shiftKey?m.call(this,d):n.call(this,d))}}function c(a,c){var e=this.triggers,f=e[a];b.each(e,function(a){a!==f&&(B(a,"-1"),d.removeClass(a,"ks-switchable-select"),a.setAttribute("aria-selected","false"))});c&&f.focus();B(f,"0");d.addClass(f,"ks-switchable-select");f.setAttribute("aria-selected","true")}function m(a){var e=this.triggers,a=b.indexOf(a,e);c.call(this,
0==a?e.length-1:a-1,!0)}function n(a){var e=this.triggers,a=b.indexOf(a,e);c.call(this,a==e.length-1?0:a+1,!0)}function o(a){var e=!(!a.originalEvent.target&&!a.originalEvent.srcElement),a=a.currentIndex,f=this.panels,d=this.triggers,g=d[a],h=f[a];this.config.multiple||(b.each(f,function(a){a!==h&&a.setAttribute("aria-hidden","true")}),b.each(d,function(a){a!==g&&a.setAttribute("aria-hidden","true")}));f=h.getAttribute("aria-hidden");h.setAttribute("aria-hidden","false"==f?"true":"false");g.setAttribute("aria-expanded",
"false"==f?"false":"true");c.call(this,a,e)}var q=33,p=34,s=35,r=36,u=37,t=38,v=39,w=40,x=9,y=32,A=13;b.mix(j.Config,{aria:!0});j.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var c=a.container,f=a.activeIndex;d.attr(c,"aria-multiselectable",a.config.multiple?"true":"false");a.nav&&d.attr(a.nav,"role","tablist");var g=a.triggers,h=a.panels,j=0;b.each(h,function(a){a.id||(a.id=b.guid("ks-accordion-tab-panel"))});b.each(g,function(a){a.id||(a.id=b.guid("ks-accordion-tab"))});b.each(g,
function(a){a.setAttribute("role","tab");a.setAttribute("aria-expanded",f==j?"true":"false");a.setAttribute("aria-selected",f==j?"true":"false");a.setAttribute("aria-controls",h[j].id);B(a,f==j?"0":"-1");j++});j=0;b.each(h,function(a){var c=g[j];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",f==j?"false":"true");a.setAttribute("aria-labelledby",c.id);j++});a.on("switch",o,a);k.on(c,"keydown",e,a);k.on(c,"keypress",l,a)}}});var B=h.setTabIndex},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/autoplay",function(b,d,k,h){b.mix(k.Config,{autoplay:!1,interval:5,pauseOnHover:!0});k.Plugins.push({name:"autoplay",init:function(j){function a(){l=b.later(function(){j.paused||j.switchTo(j.activeIndex<j.length-1?j.activeIndex+1:0,"forward")},f,!0)}var g=j.config,f=1E3*g.interval,l;g.autoplay&&(a(),j.stop=function(){l&&(l.cancel(),l=h);j.paused=!0},j.start=function(){l&&(l.cancel(),l=h);j.paused=!1;a()},g.pauseOnHover&&(d.on(j.container,"mouseenter",j.stop,j),d.on(j.container,
"mouseleave",j.start,j)))}});return k},{requires:["event","./base"]});KISSY.add("switchable/autorender",function(b,d,k,h){h.autoRender=function(h,a){d.query("."+(h||"KS_Widget"),a).each(function(a){var f=a.getAttribute("data-widget-type"),d;if(f&&-1<"Switchable Tabs Slide Carousel Accordion".indexOf(f))try{(d=a.getAttribute("data-widget-config"))&&(d=d.replace(/'/g,'"')),new b[f](a,k.parse(d))}catch(e){b.log("Switchable.autoRender: "+e,"warn")}})}},{requires:["dom","json","switchable/base"]});
KISSY.add("switchable/carousel/base",function(b,d,k,h,j){function a(b,d){if(!(this instanceof a))return new a(b,d);a.superclass.constructor.apply(this,arguments)}var g={originalEvent:{target:1}};a.Config={circular:!0,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};a.Plugins=[];b.extend(a,h,{_init:function(){var f=this;a.superclass._init.call(f);var h=f.config,e=h.disableBtnCls;b.each(["prev","next"],function(a){var b=f[a+"Btn"]=d.get("."+
h[a+"BtnCls"],f.container);k.on(b,"mousedown",function(h){h.preventDefault();if(!d.hasClass(b,e))f[a](g)})});if(!h.circular)f.on("switch",function(a){a=a.currentIndex;a=0===a?f.prevBtn:a===f.length-1?f.nextBtn:j;d.removeClass([f.prevBtn,f.nextBtn],e);a&&d.addClass(a,e)});k.on(f.panels,"click",function(){f.fire("itemSelected",{item:this})})}});return a},{requires:["dom","event","../base"]});
KISSY.add("switchable/carousel/aria",function(b,d,k,h,j){function a(a){var c=a.currentIndex,e=this.activeIndex,f=this.panels,d=f[c*this.config.steps],g=this.triggers,c=g[c];if((a=!(!a.originalEvent.target&&!a.originalEvent.srcElement))||-1==e)b.each(g,function(a){r(a,-1)}),b.each(f,function(a){r(a,-1)}),c&&r(c,0),r(d,0),a&&d.focus()}function g(a){var c;b.each(this.triggers,function(b){if(b==a||d.contains(b,a))return c=b,!1});return c}function f(a){var c=a.target;switch(a.keyCode){case q:case o:if(c=
g.call(this,c)){var e=d.next(c),f=this.triggers;e||(e=f[0]);r(c,-1);e&&(r(e,0),e.focus());a.halt()}break;case n:case m:if(c=g.call(this,c))e=d.prev(c),f=this.triggers,e||(e=f[f.length-1]),r(c,-1),e&&(r(e,0),e.focus()),a.halt();break;case s:case p:if(c=g.call(this,c))this.switchTo(b.indexOf(c,this.triggers),void 0,u),a.halt()}}function l(a){var c;b.each(this.panels,function(b){if(b==a||d.contains(b,a))return c=b,!1});return c}function e(a,c){var e=b.indexOf(a,this.panels),f=this.config.steps,d=Math.floor(e/
f);return d==this.activeIndex?1:0==e%f||e%f==f-1?(this.switchTo(d,c,u),0):1}function c(a){var c=a.target;switch(a.keyCode){case q:case o:if(c=l.call(this,c)){var b=d.next(c),f=this.panels;b||(b=f[0]);r(c,-1);r(b,0);e.call(this,b,t)&&b.focus();a.halt()}break;case n:case m:if(c=l.call(this,c))b=d.prev(c),f=this.panels,b||(b=f[f.length-1]),r(c,-1),r(b,0),e.call(this,b,v)&&b.focus(),a.halt();break;case s:case p:if(c=l.call(this,c))this.fire("itemSelected",{item:c}),a.halt()}}var m=37,n=38,o=39,q=40,p=
32,s=13,r=h.setTabIndex,u={originalEvent:{target:1}},t="forward",v="backward";b.mix(j.Config,{aria:!1});j.Plugins.push({name:"aria",init:function(e){if(e.config.aria){var d=e.triggers,g=e.panels,h=e.content,j=e.activeIndex;h.id||(h.id=b.guid("ks-switchbale-content"));h.setAttribute("role","listbox");var m=0;b.each(d,function(a){r(a,j==m?"0":"-1");a.setAttribute("role","button");a.setAttribute("aria-controls",h.id);m++});m=0;b.each(g,function(a){r(a,"-1");a.setAttribute("role","option");m++});e.on("switch",
a,e);if(d=e.nav)k.on(d,"keydown",f,e);k.on(h,"keydown",c,e);d=e.prevBtn;g=e.nextBtn;d&&(r(d,0),d.setAttribute("role","button"),k.on(d,"keydown",function(a){if(a.keyCode==s||a.keyCode==p){e.prev(u);a.preventDefault()}}));g&&(r(g,0),g.setAttribute("role","button"),k.on(g,"keydown",function(a){if(a.keyCode==s||a.keyCode==p){e.next(u);a.preventDefault()}}))}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/effect",function(b,d,k,h,j,a){var g;b.mix(j.Config,{effect:"none",duration:0.5,easing:"easeNone"});j.Effects={none:function(a,b,e){a&&d.css(a,"display","none");d.css(b,"display","block");e&&e()},fade:function(f,g,e){f&&1!==f.length&&b.error("fade effect only supports steps == 1.");var c=this,j=c.config,k=f?f[0]:null,o=g[0];c.anim&&(c.anim.stop(),d.css(c.anim.fromEl,{zIndex:1,opacity:0}),d.css(c.anim.toEl,"zIndex",9));d.css(o,"opacity",1);k?(c.anim=(new h(k,{opacity:0},j.duration,
j.easing,function(){c.anim=a;d.css(o,"z-index",9);d.css(k,"z-index",1);e&&e()})).run(),c.anim.toEl=o,c.anim.fromEl=k):(d.css(o,"z-index",9),e&&e())},scroll:function(b,g,e,c){var j=this,g=j.config,k="scrollx"===g.effect,o={};o[k?"left":"top"]=-(j.viewSize[k?0:1]*c)+"px";j.anim&&j.anim.stop();b?j.anim=(new h(j.content,o,g.duration,g.easing,function(){j.anim=a;e&&e()})).run():(d.css(j.content,o),e&&e())}};g=j.Effects;g.scrollx=g.scrolly=g.scroll;j.Plugins.push({name:"effect",init:function(a){var g=a.config,
e=g.effect,c=a.panels,h=a.content,j=g.steps,k=a.activeIndex,q=c.length;a.viewSize=[g.viewSize[0]||c[0].offsetWidth*j,g.viewSize[1]||c[0].offsetHeight*j];if("none"!==e)switch(d.css(c,"display","block"),e){case "scrollx":case "scrolly":d.css(h,"position","absolute");"static"==d.css(h.parentNode,"position")&&d.css(h.parentNode,"position","relative");"scrollx"===e&&(d.css(c,"float","left"),d.width(h,a.viewSize[0]*(q/j)));break;case "fade":var p=k*j,s=p+j-1,r;b.each(c,function(a,c){r=c>=p&&c<=s;d.css(a,
{opacity:r?1:0,position:"absolute",zIndex:r?9:1})})}}});b.augment(j,{_switchView:function(a,d,e,c,h,j){var k=this,q=k.config.effect;(b.isFunction(q)?q:g[q]).call(k,a,d,function(){k._fireOnSwitch(e,h);j&&j.call(k)},e,c)}});return j},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/circular",function(b,d,k,h){function j(b,f,h,j,m){var l=this,f=l.config,x=l.length,y=l.activeIndex,A=f.scrollType===p,B=A?e:c,E=l.viewSize[A?0:1],A=-E*j,H={},G,C=m===q;(G=C&&0===y&&j===x-1||m===o&&y===x-1&&0===j)&&(A=a.call(l,l.panels,j,C,B,E));H[B]=A+n;l.anim&&l.anim.stop();b?l.anim=(new k(l.content,H,f.duration,f.easing,function(){G&&g.call(l,l.panels,j,C,B,E);l.anim=void 0;h&&h()})).run():(d.css(l.content,H),h&&h())}function a(a,c,b,e,g){var h=this.config.steps,c=this.length,
j=b?c-1:0,a=a.slice(j*h,(j+1)*h);d.css(a,f,l);d.css(a,e,(b?-1:1)*g*c);return b?g:-g*c}function g(a,c,b,e,g){var h=this.config.steps,c=this.length,j=b?c-1:0,a=a.slice(j*h,(j+1)*h);d.css(a,f,m);d.css(a,e,m);d.css(this.content,e,b?-g*(c-1):m)}var f="position",l="relative",e="left",c="top",m="",n="px",o="forward",q="backward",p="scrollx";b.mix(h.Config,{circular:!1});h.Plugins.push({name:"circular",init:function(a){a=a.config;if(a.circular&&(a.effect===p||"scrolly"===a.effect))a.scrollType=a.effect,a.effect=
j}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/countdown",function(b,d,k,h,j,a){b.mix(j.Config,{countdown:!1,countdownFromStyle:"",countdownToStyle:"width: 0"});j.Plugins.push({name:"countdown",init:function(g){function f(a){j();p=(new h(n[a],q,m-1)).run()}function j(){c&&(clearTimeout(c),c=null);p&&(p.stop(),p=a)}var e=g.config,c,m=e.interval,n=[],o=e.countdownFromStyle,q=e.countdownToStyle,p;e.autoplay&&e.hasTriggers&&e.countdown&&(b.each(g.triggers,function(a,c){a.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
a.innerHTML+"</div>";n[c]=a.firstChild}),e.pauseOnHover&&(k.on(g.container,"mouseenter",function(){j();var a=n[g.activeIndex];o?p=(new h(a,o,0.2,"easeOut")).run():d.attr(a,"style","")}),k.on(g.container,"mouseleave",function(){j();var a=g.activeIndex;d.attr(n[a],"style",o);c=setTimeout(function(){f(a)},200)})),g.on("beforeSwitch",function(){j();n[g.activeIndex]&&d.attr(n[g.activeIndex],"style",o||"")}),g.on("switch",function(a){g.paused||f(a.currentIndex)}),-1<g.activeIndex&&f(g.activeIndex))}});
return j},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(b,d,k){var h="beforeSwitch",j="img",a="textarea",g={};g[j]="data-ks-lazyload-custom";g[a]="ks-datalazyload-custom";b.mix(k.Config,{lazyDataType:a});k.Plugins.push({name:"lazyload",init:function(f){function k(b){var g=c.steps,b=b.toIndex*g;e.loadCustomLazyData(f.panels.slice(b,b+g),m);a:{if(b=(g=m===j)?"img":m===a?"textarea":"")for(var b=d.query(b,f.container),p=0,s=b.length;p<s;p++){var r=b[p];if(g?d.attr(r,n):d.hasClass(r,n)){g=!1;break a}}g=!0}g&&f.detach(h,
k)}var e=b.require("datalazyload"),c=f.config,m,n;"img-src"===c.lazyDataType&&(c.lazyDataType=j);"area-data"===c.lazyDataType&&(c.lazyDataType=a);m=c.lazyDataType;n=g[m];if(e&&m&&n)f.on(h,k)}});return k},{requires:["dom","./base"]});KISSY.add("switchable/slide/base",function(b,d){function k(b,d){if(!(this instanceof k))return new k(b,d);k.superclass.constructor.apply(this,arguments)}k.Config={autoplay:!0,circular:!0};k.Plugins=[];b.extend(k,d);return k},{requires:["../base"]});
KISSY.add("switchable/slide/aria",function(b,d,k,h,j){function a(a){switch(a.keyCode){case e:case l:this.next(c);a.halt();break;case f:case g:this.prev(c),a.halt()}}var g=37,f=38,l=39,e=40;b.mix(j.Config,{aria:!1});var c={originalEvent:{target:1}},m=h.setTabIndex;j.Plugins.push({name:"aria",init:function(c){if(c.config.aria){var e=c.panels,f=0,g=c.activeIndex;b.each(c.triggers,function(a){m(a,"-1");f++});f=0;b.each(e,function(a){m(a,g==f?"0":"-1");d.attr(a,"role","option");f++});var h=c.content;d.attr(h,
"role","listbox");k.on(h,"keydown",a,c);m(e[0],0);c.on("switch",function(a){var b=a.currentIndex,a=!(!a.originalEvent.target&&!a.originalEvent.srcElement),f=c.completedIndex;-1<f&&m(e[f],-1);m(e[b],0);a&&e[b].focus()})}}})},{requires:["dom","event","../aria","./base"]});KISSY.add("switchable/tabs/base",function(b,d){function k(b,d){if(!(this instanceof k))return new k(b,d);k.superclass.constructor.call(this,b,d);return 0}b.extend(k,d);k.Config={};k.Plugins=[];return k},{requires:["../base"]});
KISSY.add("switchable/tabs/aria",function(b,d,k,h,j,a){function g(a){var c;b.each(this.triggers,function(b){if(b==a||d.contains(b,a))c=b});return c}function f(a){switch(a.keyCode){case c:case m:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case s:a.ctrlKey&&!a.altKey&&a.halt()}}function l(a){var b=a.target,e=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case n:case o:g.call(this,b)&&(this.prev(u(a)),a.halt());break;case q:case p:g.call(this,b)&&(this.next(u(a)),a.halt());break;case m:e&&
(a.halt(),this.next(u(a)));break;case c:e&&(a.halt(),this.prev(u(a)));break;case s:a.ctrlKey&&!a.altKey&&(a.halt(),a.shiftKey?this.prev(u(a)):this.next(u(a)))}}function e(a){var c=!(!a.originalEvent.target&&!a.originalEvent.srcElement),b=this.completedIndex,e=a.currentIndex;if(b!=e){var a=this.triggers[b],f=this.triggers[e],b=this.panels[b],e=this.panels[e];a&&r(a,"-1");r(f,"0");c&&f.focus();b&&b.setAttribute("aria-hidden","true");e.setAttribute("aria-hidden","false")}}var c=33,m=34,n=37,o=38,q=39,
p=40,s=9;b.mix(a.Config,{aria:!0});a.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var c=a.triggers,g=a.activeIndex,h=a.panels,j=a.container;a.nav&&d.attr(a.nav,"role","tablist");var m=0;b.each(c,function(a){a.setAttribute("role","tab");r(a,g==m?"0":"-1");a.id||(a.id=b.guid("ks-switchable"));m++});m=0;b.each(h,function(a){var b=c[m];a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",g==m?"false":"true");a.setAttribute("aria-labelledby",b.id);m++});a.on("switch",e,a);k.on(j,
"keydown",l,a);k.on(j,"keypress",f,a)}}});var r=j.setTabIndex,u=h.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable",function(b,d,k,h,j,a,g,f,l,e,c,m,n,o,q,p){b.Switchable=d;k={Accordion:h,Carousel:f,Slide:o,Tabs:p};b.mix(b,k);b.mix(d,k);return d},{requires:"switchable/base,switchable/aria,switchable/accordion/base,switchable/accordion/aria,switchable/autoplay,switchable/autorender,switchable/carousel/base,switchable/carousel/aria,switchable/circular,switchable/countdown,switchable/effect,switchable/lazyload,switchable/slide/base,switchable/slide/aria,switchable/tabs/base,switchable/tabs/aria".split(",")});
KISSY.add("overlay/overlayrender",function(b,d,k,h){function j(a){return b.require("uibase/"+a)}return k.create(h.Render,[j("contentboxrender"),j("positionrender"),j("loadingrender"),6===d.ie?j("shimrender"):null,j("closerender"),j("maskrender")])},{requires:["ua","uibase","component"]});
KISSY.add("overlay/ariarender",function(b,d){function k(){}function h(b){var f=b.keyCode,d=this.get("el");if(f==a){var f=j(b.target),e=this.__ariaArchor;if(f.equals(d)&&b.shiftKey)e[0].focus(),b.halt();else if(f.equals(e)&&!b.shiftKey)d[0].focus(),b.halt();else if(f.equals(d)||d.contains(f))return;b.halt()}}var j=d.all,a=d.KeyCodes.TAB;k.prototype={__renderUI:function(){var a=this.get("el"),f=this.get("header");this.get("aria")&&(a.attr("role","dialog"),a.attr("tabindex",0),f.attr("id")||f.attr("id",
b.guid("ks-dialog-header")),a.attr("aria-labelledby",f.attr("id")),this.__ariaArchor=j("<div tabindex='0'></div>").appendTo(a))},__bindUI:function(){var a=this;if(a.get("aria")){var b=a.get("el"),d;a.on("afterVisibleChange",function(e){e.newVal?(d=document.activeElement,b[0].focus(),b.attr("aria-hidden","false"),b.on("keydown",h,a)):(b.attr("aria-hidden","true"),b.detach("keydown",h,a),d&&d.focus())})}}};return k},{requires:["node"]});
KISSY.add("overlay/aria",function(b,d){function k(){}k.ATTRS={aria:{view:!0}};k.prototype={__bindUI:function(){var b=this,j=b.get("el");if(b.get("aria"))j.on("keydown",function(a){a.keyCode===d.KeyCodes.ESC&&(b.hide(),a.halt())})}};return k},{requires:["event"]});
KISSY.add("overlay/effect",function(b){function d(){}var k={fade:["Out","In"],slide:["Up","Down"]},h=["block","none"];d.ATTRS={effect:{value:{effect:"none",duration:0.5,easing:"easeOut"},setter:function(d){var a=d.effect;b.isString(a)&&!k[a]&&(d.effect="none")}}};d.prototype={__bindUI:function(){var b=this;b.on("afterVisibleChange",function(a){var d=b.get("effect").effect;if("none"!=d){var f=a.newVal,a=Number(f),l=b.get("el");l.stop(1,1);l.css({visibility:"visible",display:h[a]});l[d+k[d][a]](b.get("effect").duration,
function(){l.css({display:h[0],visibility:f?"visible":"hidden"})},b.get("effect").easing,!1)}})}};return d},{requires:["anim"]});
KISSY.add("overlay/overlay",function(b,d,k,h,j){function a(a){return b.require("uibase/"+a)}d=d.create(k.ModelControl,[a("contentbox"),a("position"),a("loading"),a("align"),a("close"),a("resize"),a("mask"),j],{},{ATTRS:{focusable:{value:!1},closable:{value:!1},handleMouseEvents:{value:!1},allowTextSelection_:{value:!0},visibleMode:{value:"visibility"}}});d.DefaultRender=h;k.UIStore.setUIByClass("overlay",{priority:k.UIStore.PRIORITY.LEVEL1,ui:d});return d},{requires:["uibase","component","./overlayrender",
"./effect"]});KISSY.add("overlay/dialogrender",function(b,d,k,h){return d.create(k,[b.require("uibase/stdmodrender"),h])},{requires:["uibase","./overlayrender","./ariarender"]});
KISSY.add("overlay/dialog",function(b,d,k,h,j,a){b=h.create(k,[b.require("uibase/stdmod"),b.require("uibase/drag"),b.require("uibase/constrain"),a],{},{ATTRS:{closable:{value:!0},handlers:{valueFn:function(){var a=this;return[function(){return a.get("view").get("header")}]}}}});b.DefaultRender=j;d.UIStore.setUIByClass("dialog",{priority:d.UIStore.PRIORITY.LEVEL2,ui:b});return b},{requires:["component","overlay/overlay","uibase","overlay/dialogrender","./aria"]});
KISSY.add("overlay/popup",function(b,d,k,h){function j(a,d){b.isUndefined(d)?d=a:d.srcNode=a;j.superclass.constructor.call(this,d)}j.ATTRS={trigger:{setter:function(a){return b.one(a)}},triggerType:{value:"click"}};b.extend(j,k,{initializer:function(){var a=this;a.get("trigger")&&("mouse"===a.get("triggerType")?(a._bindTriggerMouse(),a.on("bindUI",function(){a._bindContainerMouse()})):a._bindTriggerClick())},_bindTriggerMouse:function(){var a=this,d=a.get("trigger"),f;a.__mouseEnterPopup=function(){a._clearHiddenTimer();
f=b.later(function(){a.show();f=h},100)};d.on("mouseenter",a.__mouseEnterPopup);a._mouseLeavePopup=function(){f&&(f.cancel(),f=h);a._setHiddenTimer()};d.on("mouseleave",a._mouseLeavePopup)},_bindContainerMouse:function(){this.get("el").on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var a=this;a._hiddenTimer=b.later(function(){a.hide()},100)},_clearHiddenTimer:function(){this._hiddenTimer&&(this._hiddenTimer.cancel(),this._hiddenTimer=
h)},_bindTriggerClick:function(){var a=this;a.__clickPopup=function(b){b.halt();a.show()};a.get("trigger").on("click",a.__clickPopup)},destructor:function(){var a=this.get("trigger");a&&(this.__clickPopup&&a.detach("click",this.__clickPopup),this.__mouseEnterPopup&&a.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&a.detach("mouseleave",this._mouseLeavePopup));this.get("el")&&this.get("el").detach("mouseleave",this._setHiddenTimer,this).detach("mouseenter",this._clearHiddenTimer,
this)}});d.UIStore.setUIByClass("popup",{priority:d.UIStore.PRIORITY.LEVEL1,ui:j});return j},{requires:["component","./overlay"]});KISSY.add("overlay",function(b,d,k,h,j,a){d.Render=k;h.Render=j;d.Dialog=h;b.Overlay=d;b.Dialog=h;d.Popup=b.Popup=a;return d},{requires:["overlay/overlay","overlay/overlayrender","overlay/dialog","overlay/dialogrender","overlay/popup"]});
KISSY.add("suggest",function(b,d,k,h,j){function a(c,e,g){if(!(this instanceof a))return new a(c,e,g);this.textInput=d.get(c);this.config=g=b.merge(t,g);if(b.isString(e)){if(e+=-1===e.indexOf("?")?"?":"&",this.dataSource=e+g.callbackName+"="+(c=g.callbackFn),2===g.dataType&&(this.config.dataType=0),c!==p)e=c,g=e.split("."),c=g.length,1<c?(e=e.replace(/^(.*)\..+$/,"$1"),e=b.namespace(e,!0),e[g[c-1]]=f):l[e]=f}else this.dataSource=e,this.config.dataType=2;this.queryParams=this.query=s;this._dataCache=
{};this._init();return 0}function g(a,c){1===c.nodeType?(d.html(a,s),a.appendChild(c)):d.html(a,c)}function f(c){a.focusInstance&&b.later(function(){a.focusInstance._handleResponse(c)},0)}var l=window,e=k.Target,c=document,m,n=d.get("head"),o=h.ie,q=9<=o,p="KISSY.Suggest.callback",s="",r=parseInt,u=/^(?:input|button|a)$/i,t={containerCls:s,resultFormat:"%result%",closeBtnText:"\u5173\u95ed",shim:6===o,submitOnSelect:!0,offset:-1,charset:"utf-8",callbackName:"callback",callbackFn:p,queryName:"q",dataType:0};
b.augment(a,e,{_init:function(){m=c.body;this._initTextInput();this._initContainer();this.config.shim&&this._initShim();this._initStyle();this._initEvent()},_initTextInput:function(){var a=this,c=a.textInput,e=!1,f=0;d.attr(c,"autocomplete","off");a.config.autoFocus&&c.focus();k.on(c,"keydown",function(d){var g=d.keyCode;if((35==g||36==g)&&!c.value)d.halt();else{if(27===g)a.hide(),c.value=a.query;else if(32<g&&41>g)if(c.value){if(40===g||38===g)0===f++?(a._isRunning&&a.stop(),e=!0,a._selectItem(40===
g)):3==f&&(f=0),d.preventDefault()}else c.blur();else if(13===g){c.blur();if(e&&c.value==a._getSelectedItemKey()&&!1===a.fire("itemSelect"))return;a._submitForm()}else a._isRunning||a.start(),e=!1;h.chrome&&(a._keyTimer&&a._keyTimer.cancel(),a._keyTimer=b.later(function(){a._keyTimer=j},500))}});k.on(c,"keyup",function(){f=0});k.on(c,"blur",function(){a.stop();b.later(function(){a._focusing||a.hide()},0)})},_initContainer:function(){var a=this.config.containerCls,a=d.create("<div>",{"class":"ks-suggest-container"+
(a?" "+a:s),style:"position:absolute;visibility:hidden"}),c=d.create("<div>",{"class":"ks-suggest-content"}),b=d.create("<div>",{"class":"ks-suggest-footer"});a.appendChild(c);a.appendChild(b);m.insertBefore(a,m.firstChild);this.container=a;this.content=c;this.footer=b;this._initContainerEvent()},_setContainerRegion:function(){var a=this.config,c=this.textInput,b=d.offset(c),e=this.container;d.offset(e,{left:b.left,top:b.top+c.offsetHeight+a.offset});d.width(e,a.containerWidth||c.offsetWidth-2)},
_initContainerEvent:function(){var a=this,c=a.textInput,e=a.container,f=a.content,g=a.footer,h,j;k.on(f,"mousemove",function(c){a._keyTimer||(c=c.target,"LI"!==c.nodeName&&(c=d.parent(c,"li")),d.contains(f,c)&&c!==a.selectedItem&&(a._removeSelectedItem(),a._setSelectedItem(c)))});k.on(f,"mousedown",function(a){a=a.target;"LI"!==a.nodeName&&(a=d.parent(a,"li"));h=a});k.on(e,"mousedown",function(a){u.test(a.target.nodeName)||(c.onbeforedeactivate=function(){l.event.returnValue=!1;c.onbeforedeactivate=
null},a.preventDefault())});k.on(f,"mouseup",function(b){var e=b.target;if(!(2<b.which)&&("LI"!==e.nodeName&&(e=d.parent(e,"li")),e==h&&d.contains(f,e)&&(a._updateInputFromSelectItem(e),!1!==a.fire("itemSelect")))){try{c.blur()}catch(g){}a._submitForm()}});k.on(g,"focusin",function(){a._focusing=!0;a._removeSelectedItem();j=!1});k.on(g,"focusout",function(){a._focusing=!1;b.later(function(){j?a.hide():a._focusing||a.textInput.focus()},0)});k.on(a.container,"mouseleave",function(){j=!0});k.on(g,"click",
function(c){d.hasClass(c.target,"ks-suggest-closebtn")&&a.hide()})},_submitForm:function(){if(this.config.submitOnSelect){var a=this.textInput.form;if(a&&!1!==this.fire("beforeSubmit",{form:a})){if(c.createEvent){var b=c.createEvent("MouseEvents");b.initEvent("submit",!0,!1);a.dispatchEvent(b)}else c.createEventObject&&a.fireEvent("onsubmit");a.submit()}}},_initShim:function(){var a=d.create("<iframe>",{src:"about:blank","class":"ks-suggest-shim",style:"position:absolute;visibility:hidden;border:none"});
this.container.shim=a;m.insertBefore(a,m.firstChild)},_setShimRegion:function(){var a=this.container,c=a.style,b=a.shim;b&&d.css(b,{left:r(c.left)-2,top:c.top,width:r(c.width)+2,height:d.height(a)-2})},_initStyle:function(){d.get("#ks-suggest-style")||d.addStyleSheet(".ks-suggest-container{background:white;border:1px solid #999;z-index:99999}.ks-suggest-shim{z-index:99998}.ks-suggest-container li{color:#404040;padding:1px 0 2px;font-size:12px;line-height:18px;float:left;width:100%}.ks-suggest-container .ks-selected{background-color:#39F;cursor:default}.ks-suggest-key{float:left;text-align:left;padding-left:5px}.ks-suggest-result{float:right;text-align:right;padding-right:5px;color:green}.ks-suggest-container .ks-selected span{color:#FFF;cursor:default}.ks-suggest-footer{padding:0 5px 5px}.ks-suggest-closebtn{float:right}.ks-suggest-container li,.ks-suggest-footer{overflow:hidden;zoom:1;clear:both}.ks-suggest-container{*margin-left:2px;_margin-left:-2px;_margin-top:-3px}",
"ks-suggest-style")},_initEvent:function(){var a=this;k.on(l,"resize",function(){a._setContainerRegion();a._setShimRegion()})},start:function(){var c=this;!1!==c.fire("beforeStart")&&(a.focusInstance=c,c._timer=b.later(function(){c._updateContent();c._timer=b.later(arguments.callee,200)},200),c._isRunning=!0)},stop:function(){a.focusInstance=j;this._timer&&this._timer.cancel();this._isRunning=!1},show:function(){if(!this.isVisible()){var a=this.container,c=a.shim;this._setContainerRegion();a.style.visibility=
s;c&&(this._setShimRegion(),c.style.visibility=s)}},hide:function(){if(this.isVisible()){var a=this.container,c=a.shim;c&&(c.style.visibility="hidden");a.style.visibility="hidden"}},isVisible:function(){return"hidden"!=this.container.style.visibility},_updateContent:function(){var a=this.textInput;if(a.value!=this.query)if(a=this.query=a.value,b.trim(a))switch(this.config.dataType){case 0:this._dataCache[a]!==j?(b.log("use cache"),this._fillContainer(this._dataCache[a]),this._displayContainer()):
(b.log("no cache, data from server"),this._requestData());break;case 1:b.log("no cache, data always from server");this._requestData();break;case 2:b.log("use static datasource"),this._handleResponse(this.dataSource[a])}else this._fillContainer(),this.hide()},_requestData:function(){var a=this,e=a.config,f;if(!o||q)a.dataScript=j;if(!a.dataScript&&(f=c.createElement("script"),f.charset=e.charset,f.async=!0,n.insertBefore(f,n.firstChild),a.dataScript=f,!o||q)){var g=b.now();a._latestScriptTime=g;d.attr(f,
"data-time",g);k.on(f,"load",function(){a._scriptDataIsOut=d.attr(f,"data-time")!=a._latestScriptTime})}a.queryParams=e.queryName+"="+encodeURIComponent(a.query);!1!==a.fire("beforeDataRequest")&&(a.dataScript.src=a.dataSource+"&"+a.queryParams)},_handleResponse:function(a){var c=s;this._scriptDataIsOut||(this.returnedData=a,!1!==this.fire("dataReturn",{data:a})&&(c=this.config.contentRenderer?this.config.contentRenderer(a):this._renderContent(a),this._fillContainer(c),!1!==this.fire("beforeShow")&&
(this.config.dataType||(this._dataCache[this.query]=d.html(this.content)),this._displayContainer())))},_renderContent:function(){var a,c=s,b,e,f,g;a=this._formatData(this.returnedData);if(0<(b=a.length)){e=d.create("<ol>");for(c=0;c<b;++c)f=a[c],f=this._formatItem(g=f.key,f.result),d.attr(f,"key",g),d.addClass(f,c%2?"ks-even":"ks-odd"),e.appendChild(f);c=e}return c},_formatData:function(a){var c=[],e,f,d,g=0;if(!a)return c;b.isArray(a.result)&&(a=a.result);if(!(e=a.length))return c;for(d=0;d<e;++d)f=
a[d],b.isString(f)?c[g++]={key:f}:b.isArray(f)&&1<f.length&&(c[g++]={key:f[0],result:f[1]});return c},_formatItem:function(a,c){var e=d.create("<li>"),f;e.appendChild(d.create("<span>",{"class":"ks-suggest-key",html:a}));c&&(f=this.config.resultFormat.replace("%result%",c),b.trim(f)&&e.appendChild(d.create("<span>",{"class":"ks-suggest-result",html:f})));return e},_fillContainer:function(a,c){this._fillContent(a||s);this._fillFooter(c||s);this.isVisible()&&this._setShimRegion()},_fillContent:function(a){g(this.content,
a);this.selectedItem=j},_fillFooter:function(a){var c=this.config,b=this.footer;g(b,a);c.closeBtn&&b.appendChild(d.create("<a>",{"class":"ks-suggest-closebtn",text:c.closeBtnText,href:"javascript: void(0)",target:"_self"}));this.fire("updateFooter",{footer:b,query:this.query});d.css(b,"display",d.text(b)?s:"none")},_displayContainer:function(){b.trim(d.text(this.container))?this.show():this.hide()},_selectItem:function(a){var c=d.query("li",this.container);if(0!==c.length)if(this.isVisible()){if(this.selectedItem?
(a=c[b.indexOf(this.selectedItem,c)+(a?1:-1)],a||(this.textInput.value=this.query)):a=c[a?0:c.length-1],this._removeSelectedItem(),a)this._setSelectedItem(a),this._updateInputFromSelectItem()}else this.show()},_removeSelectedItem:function(){d.removeClass(this.selectedItem,"ks-selected");this.selectedItem=j},_setSelectedItem:function(a){d.addClass(a,"ks-selected");this.selectedItem=a;this.textInput.focus()},_getSelectedItemKey:function(){return!this.selectedItem?s:d.attr(this.selectedItem,"key")},
_updateInputFromSelectItem:function(){this.textInput.value=this._getSelectedItemKey(this.selectedItem)||this.query}});a.version=1.1;a.callback=f;return b.Suggest=a},{requires:["dom","event","ua"]});
KISSY.add("imagezoom/zoomer",function(b,d,k){function h(){var c;if((c=this.get("bigImageSrc"))&&this.get("preload"))(new Image).src=c;this._isInner=this.get("type")===a;e=new d(document.body)}function j(a,b){var e=a[0];e&&e.complete&&e.clientWidth?b():e.onLoad=function(){setTimeout(b,100)}}var a="inner",g=/^.+\.(?:jpg|png|gif)$/i,f=Math.round,l=Math.min,e;h.ATTRS={width:{valueFn:function(){return this.get("imageWidth")}},height:{valueFn:function(){return this.get("imageHeight")}},elCls:{value:"ks-imagezoom-viewer"},
elStyle:{value:{overflow:"hidden",position:"absolute"}},type:{value:"standard"},preload:{value:!0},bigImageSrc:{setter:function(a){return a&&g.test(a)?a:this.get("bigImageSrc")},valueFn:function(){var a=this.get("imageNode");return a&&(a=a.attr("data-ks-imagezoom"))&&g.test(a)?a:k}},bigImageWidth:{valueFn:function(){var a=this.bigImage;return(a=a&&a.width())||800}},bigImageHeight:{valueFn:function(){var a=this.bigImage;return(a=a&&a.height())||800}},currentMouse:{value:k},lensClass:{value:"ks-imagezoom-lens"},
lensHeight:{value:k},lensWidth:{value:k},lensTop:{value:k},lensLeft:{value:k}};h.HTML_PARSER={};b.augment(h,{__renderUI:function(){var a=this,f;a.viewer=a.get("contentEl");f=a.bigImage=(new d('<img src="'+a.get("bigImageSrc")+'" />')).css("position","absolute").appendTo(a.viewer);a._setLensSize();a._setLensOffset();a._isInner?(a.set("align",{node:a.image,points:["cc","cc"]}),a._bigImageCopy=(new d('<img src="'+a.image.attr("src")+'"  />')).css("position","absolute").width(a.get("bigImageWidth")).height(a.get("bigImageHeight")).prependTo(a.viewer)):
a.lens=(new d('<div class="'+a.get("lensClass")+'"></div>')).css("position","absolute").appendTo(e).hide();a.viewer.appendTo(a.get("el"));a.loading();j(f,function(){b.log([f[0].complete,f.width()]);a.unloading();a._setLensSize();a.set("bigImageWidth",f.width());a.set("bigImageHeight",f.height())})},__bindUI:function(){var a=this;a.on("afterVisibleChange",function(b){b.newVal?(a._isInner&&a._anim(0.4,42),e.on("mousemove",a._mouseMove,a)):((b=a.lens)&&b.hide(),e.detach("mousemove",a._mouseMove,a))})},
__syncUI:function(){},__destructor:function(){this.viewer.remove();this.lens.remove()},_setLensSize:function(){var a=this.get("imageWidth"),b=this.get("imageHeight"),e=this.get("bigImageWidth"),d=this.get("bigImageHeight"),g=this.get("width"),h=this.get("height");this.set("lensWidth",l(f(g*a/e),a));this.set("lensHeight",l(f(h*b/d),b))},_setLensOffset:function(a){var a=a||this.get("currentMouse"),b=this.get("imageLeft"),e=this.get("imageTop"),f=this.get("imageWidth"),d=this.get("imageHeight");this.get("width");
this.get("height");var g=this.get("lensWidth"),h=this.get("lensHeight"),j=a.pageX-g/2,a=a.pageY-h/2;j<=b?j=b:j>=f+b-g&&(j=f+b-g);a<=e?a=e:a>=d+e-h&&(a=d+e-h);this.set("lensLeft",j);this.set("lensTop",a)},_mouseMove:function(a){var b=this.get("imageLeft"),e=this.get("imageTop"),f=this.get("imageWidth"),d=this.get("imageHeight");a.pageX>b&&a.pageX<b+f&&a.pageY>e&&a.pageY<e+d?this.set("currentMouse",a):this.hide()},_anim:function(a,e){var d=this,g,h=1;g=d.get("imageLeft");var j=d.get("imageTop"),l=d.get("imageWidth"),
r=d.get("imageHeight"),u=d.get("bigImageWidth"),t=d.get("bigImageHeight"),v=-f((d.get("lensLeft")-g)*u/l),w=-f((d.get("lensTop")-j)*t/r),x,y,A;d._animTimer&&d._animTimer.cancel();d.bigImage.width(l).height(r);d._bigImageCopy.width(l).height(r);d._animTimer=b.later(g=function(){x=l+(u-l)/e*h;y=r+(t-r)/e*h;A={left:v/e*h,top:w/e*h};d.bigImage.width(x).height(y).css(A);d._bigImageCopy.width(x).height(y).css(A);++h>e&&(d._animTimer.cancel(),d._animTimer=k)},1E3*a/e,!0);g()},_uiSetCurrentMouse:function(a){if(this.bigImage&&
!this._animTimer){var b=this.lens;b&&b.show();this._setLensOffset(a);a={left:-f((this.get("lensLeft")-this.get("imageLeft"))*this.get("bigImageWidth")/this.get("imageWidth")),top:-f((this.get("lensTop")-this.get("imageTop"))*this.get("bigImageHeight")/this.get("imageHeight"))};this._bigImageCopy&&this._bigImageCopy.css(a);this.bigImage.css(a)}},_uiSetLensWidth:function(a){this.lens&&this.lens.width(a)},_uiSetLensHeight:function(a){this.lens&&this.lens.height(a)},_uiSetLensTop:function(a){this.lens&&
this.lens.offset({top:a})},_uiSetLensLeft:function(a){this.lens&&this.lens.offset({left:a})},_uiSetBigImageWidth:function(a){a&&this.bigImage&&this.bigImage.width(a);a&&this._bigImageCopy&&this._bigImageCopy.width(a)},_uiSetBigImageHeight:function(a){a&&this.bigImage&&this.bigImage.height(a);a&&this._bigImageCopy&&this._bigImageCopy.height(a)},_uiSetBigImageSrc:function(a){a&&this.bigImage&&this.bigImage.attr("src",a);a&&this._bigImageCopy&&this._bigImageCopy.attr("src",a)},changeImageSrc:function(a){this.image.attr("src",
a);this.loading()},refreshRegion:function(){this._fresh=this.get("align");this.set("align",k)}});h.__imgOnLoad=j;return h},{requires:["node"]});
KISSY.add("imagezoom/base",function(b,d,k,h,j,a,g,f,l){function e(a){return b.require("uibase/"+a)}return a.create([e("boxrender"),e("contentboxrender"),e("positionrender"),e("loadingrender"),6==h.ie?e("shimrender"):null,e("align"),e("maskrender"),f],{initializer:function(){var a=this,b;(b=a.image=a.get("imageNode"))&&f.__imgOnLoad(b,function(){a.imageWrap||(a._render(),a._bind())})},destructor:function(){this.image.detach()},_render:function(){var a=this.image,e=a.parent();"inline"!==e.css("display")&&
(e=a);this.imageWrap=(new g(b.substitute("<div class='{wrapClass}'></div>",{wrapClass:this.get("wrapClass")}))).insertBefore(e);this.imageWrap.prepend(e);this.get("showIcon")&&(this.icon=new g(b.substitute("<span class='{iconClass}'></span>",{iconClass:this.get("iconClass")})),this.imageWrap.append(this.icon))},_bind:function(){var a=this,e;a.image.on("mouseenter",function(f){a.get("hasZoom")&&(e=b.later(function(){a.set("currentMouse",f);a._fresh&&(a.set("align",a._fresh),a._fresh=l);a.show();e=
l},50))}).on("mouseleave",function(){e&&(e.cancel(),e=l)});a.on("afterVisibleChange",function(b){b.newVal?(b=a.icon)&&b.hide():(b=a.icon)&&b.show()})},_uiSetHasZoom:function(a){a?(a=this.icon)&&a.show():(a=this.icon)&&a.hide()}},{ATTRS:{imageNode:{setter:function(a){return g.one(a)}},wrapClass:{value:"ks-imagezoom-wrap"},imageWidth:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.width())||400}},imageHeight:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.height())||400}},
imageLeft:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.offset().left)||400}},imageTop:{valueFn:function(){var a=this.get("imageNode");return(a=a&&a.offset().top)||400}},hasZoom:{value:!0,setter:function(a){return!!a}},showIcon:{value:!0},iconClass:{value:"ks-imagezoom-icon"},prefixCls:{value:"ks-"}}})},{requires:"dom,event,ua,anim,uibase,node,imagezoom/zoomer".split(",")});
KISSY.add("imagezoom/autorender",function(b,d,k,h){h.autoRender=function(j,a){d.query("."+(j||"KS_Widget"),a).each(function(a){var f;if("ImageZoom"===a.getAttribute("data-widget-type"))try{(f=a.getAttribute("data-widget-config"))&&(f=f.replace(/'/g,'"')),new h(a,k.parse(f))}catch(d){b.log("ImageZoom.autoRender: "+d,"warn")}})}},{requires:["dom","json","imagezoom/base"]});KISSY.add("imagezoom",function(b,d){return b.ImageZoom=d},{requires:["imagezoom/base","imagezoom/autorender"]});
KISSY.add("calendar/base",function(b,d,k,h){function j(a,b){this._init(a,b)}var a=k.Target,g=d.all;b.augment(j,{_init:function(f,h){var e=g(f);this.id=this.C_Id=this._stamp(e);this._buildParam(h);this.popup?(this.trigger=e,this.con=new d("<div>"),g(document.body).append(this.con),this.C_Id=this._stamp(this.con),this.con.css({top:"0px",position:"absolute",background:"white",visibility:"hidden"})):this.con=e;e=function(){};b.augment(e,a);e=new e;b.mix(this,e);this.render();this._buildEvent();return this},
render:function(a){var b=0,e,c,a=a||{};this._parseParam(a);this.con.addClass("ks-cal-call ks-clearfix multi-"+this.pages);this.ca=this.ca||[];for(b=0;b<this.ca.length;b++)this.ca[b].detachEvent();this.con.html("");this.ca.length=this.pages;b=0;for(c=[this.year,this.month];b<this.pages;b++)0===b?a=!0:(a=!1,c=this._computeNextMonth(c)),e=b==this.pages-1,this.ca[b]=new this.Page({year:c[0],month:c[1],prevArrow:a,nextArrow:e,showTime:this.showTime},this),this.ca[b].render();return this},destroy:function(){for(var a=
0;a<this.ca.length;a++)this.ca[a].detachEvent();b.each(this.EV,function(a){a&&a.target.detach(a.type,a.fn)});this.con.remove()},_stamp:function(a){a.attr("id")||a.attr("id",b.guid("K_Calendar"));return a.attr("id")},_showdate:function(a,b){var e=new Date(b-0+864E5*a),e=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return new Date(e)},_buildEvent:function(){var a=this,d,e;if(!a.popup)return this;b.each(a.EV,function(a){a&&a.target.detach(a.type,a.fn)});a.EV=a.EV||[];d=a.EV[0]={target:g(document),
type:"click"};d.fn=function(b){var e=g(b.target);if(!(e.attr("id")===a.C_Id||(e.hasClass("ks-next")||e.hasClass("ks-prev"))&&"A"===e[0].tagName||e.attr("id")==a.id||"hidden"==a.con.css("visibility")))if(!a.con.contains(e)||!("option"===e[0].nodeName.toLowerCase()||"select"===e[0].nodeName.toLowerCase()))b=[b.pageX,b.pageY],e=[{x:a.con.offset().left,y:a.con.offset().top},{x:a.con.offset().left+a.con.width(),y:a.con.offset().top+a.con.height()}],b[0]>e[0].x&&b[0]<e[1].x&&b[1]>e[0].y&&b[1]<e[1].y||a.hide()};
d.target.on(d.type,d.fn);for(e=0;e<a.triggerType.length;e++)d=a.EV[e+1]={target:g("#"+a.id),type:a.triggerType[e],fn:function(c){c.target=g(c.target);c.preventDefault();var e=a.triggerType;b.inArray("click",e)&&b.inArray("focus",e)?"focus"==c.type&&a.toggle():b.inArray("click",e)&&!b.inArray("focus",e)?"click"==c.type&&a.toggle():!b.inArray("click",e)&&b.inArray("focus",e)?setTimeout(function(){a.toggle()},170):a.toggle()}},d.target.on(d.type,d.fn);return this},toggle:function(){"hidden"==this.con.css("visibility")?
this.show():this.hide()},show:function(){this.con.css("visibility","");var a=this.trigger.offset().left,b=this.trigger.outerHeight()||this.trigger.height(),b=this.trigger.offset().top+b;this.con.css("left",a.toString()+"px");this.con.css("top",b.toString()+"px");this.fire("show");return this},hide:function(){this.con.css("visibility","hidden");this.fire("hide");return this},_buildParam:function(a){function d(b,c){var g=a[c];e[c]=g===h||null===g?b:g}var e=this;if(a===h||null===a)a={};b.each({date:new Date,
startDay:0,pages:1,closable:!1,rangeSelect:!1,minDate:!1,maxDate:!1,multiSelect:!1,navigator:!0,popup:!1,showTime:!1,triggerType:["click"]},d);"string"===typeof a.triggerType&&(a.triggerType=[a.triggerType]);d(e.date,"selected");a.startDay&&(e.startDay=(7-a.startDay)%7);if(a.range!==h&&null!==a.range){var c=e._showdate(1,new Date(a.range.start.getFullYear()+"/"+(a.range.start.getMonth()+1)+"/"+a.range.start.getDate())),g=e._showdate(1,new Date(a.range.end.getFullYear()+"/"+(a.range.end.getMonth()+
1)+"/"+a.range.end.getDate()));e.range={start:c,end:g}}else e.range={start:null,end:null};e.EV=[];return this},_parseParam:function(a){var b;if(a===h||null===a)a={};for(b in a)this[b]=a[b];this._handleDate();return this},_templetShow:function(a,b){var e,c,d,g;if(b instanceof Array){e="";for(c=0;c<b.length;c++)e+=arguments.callee(a,b[c]);a=e}else if(e=a.match(/{\$(.*?)}/g),b!==h&&null!==e){c=0;for(d=e.length;c<d;c++)g=e[c].replace(/({\$)|}/g,""),g=b[g]!==h?b[g]:"",a=a.replace(e[c],g)}return a},_handleDate:function(){var a=
this.date;this.weekday=a.getDay()+1;this.day=a.getDate();this.month=a.getMonth();this.year=a.getFullYear();return this},_getHeadStr:function(a,b){return a.toString()+"\u5e74"+(Number(b)+1).toString()+"\u6708"},_monthAdd:function(){11==this.month?(this.year++,this.month=0):this.month++;this.date=new Date(this.year.toString()+"/"+(this.month+1).toString()+"/1");return this},_monthMinus:function(){0===this.month?(this.year--,this.month=11):this.month--;this.date=new Date(this.year.toString()+"/"+(this.month+1).toString()+
"/1");return this},_computeNextMonth:function(a){var b=a[0],a=a[1];11==a?(b++,a=0):a++;return[b,a]},_handleOffset:function(){for(var a="\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","),b=this.startDay,e="",e=[],c=0;7>c;c++)e[c]={day:a[(c-b+7)%7]};e=this._templetShow("<span>{$day}</span>",e);return{day_html:e}},_handleRange:function(a){null===this.range.start&&null===this.range.end||null!==this.range.start&&null!==this.range.end?(this.range.start=a,this.range.end=null,this.render()):null!==this.range.start&&null===this.range.end&&
(this.range.end=a,this.range.start.getTime()>this.range.end.getTime()&&(a=this.range.start,this.range.start=this.range.end,this.range.end=a),this.fire("rangeSelect",this.range),this.render());return this}});return j},{requires:["node","event"]});
KISSY.add("calendar/date",function(){var b=function(){var b=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,h=/[^-+\dA-Z]/g,j=function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a},a={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",
isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},g="Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,\u661f\u671f\u65e5,\u661f\u671f\u4e00,\u661f\u671f\u4e8c,\u661f\u671f\u4e09,\u661f\u671f\u56db,\u661f\u671f\u4e94,\u661f\u671f\u516d".split(","),f="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(",");
return function(l,e,c){1==arguments.length&&"[object String]"==Object.prototype.toString.call(l)&&!/\d/.test(l)&&(e=l,l=void 0);l=l?new Date(l):new Date;if(isNaN(l))throw SyntaxError("invalid date");e=""+(a[e]||e||a["default"]);"UTC:"==e.slice(0,4)&&(e=e.slice(4),c=!0);var m=c?"getUTC":"get",n=l[m+"Date"](),o=l[m+"Day"](),q=l[m+"Month"](),p=l[m+"FullYear"](),s=l[m+"Hours"](),r=l[m+"Minutes"](),u=l[m+"Seconds"](),m=l[m+"Milliseconds"](),t=c?0:l.getTimezoneOffset(),v={d:n,dd:j(n,void 0),ddd:g[o],dddd:g[o+
7],w:g[o+14],m:q+1,mm:j(q+1,void 0),mmm:f[q],mmmm:f[q+12],yy:(""+p).slice(2),yyyy:p,h:s%12||12,hh:j(s%12||12,void 0),H:s,HH:j(s,void 0),M:r,MM:j(r,void 0),s:u,ss:j(u,void 0),l:j(m,3),L:j(99<m?Math.round(m/10):m,void 0),t:12>s?"a":"p",tt:12>s?"am":"pm",T:12>s?"A":"P",TT:12>s?"AM":"PM",Z:c?"UTC":((""+l).match(k)||[""]).pop().replace(h,""),o:(0<t?"-":"+")+j(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10)*n%10]};return e.replace(b,function(a){return a in
v?v[a]:a.slice(1,a.length-1)})}}();return{format:function(d,k,h){return b(d,k,h)},parse:function(b){var k=null;k instanceof Date?b=k:(k=new Date(b),b=k instanceof Date&&"Invalid Date"!=k&&!isNaN(k)?k:null);return b}}});
KISSY.add("calendar/page",function(b,d,k,h){b.augment(h,{Page:function(d,a){this.father=a;this.month=Number(d.month);this.year=Number(d.year);this.prevArrow=d.prevArrow;this.nextArrow=d.nextArrow;this.timmer=this.node=null;this.id="";this.EV=[];this.html=['<div class="ks-cal-box" id="{$id}"><div class="ks-cal-hd"><a href="javascript:void(0);" class="ks-prev {$prev}"><</a><a href="javascript:void(0);" class="ks-title">{$title}</a><a href="javascript:void(0);" class="ks-next {$next}">></a></div><div class="ks-cal-bd"><div class="ks-whd">',a._handleOffset().day_html,
'</div><div class="ks-dbd ks-clearfix">{$ds}</div></div><div class="ks-setime hidden"></div><div class="ks-cal-ft {$showtime}"><div class="ks-cal-time">\u65f6\u95f4\uff1a00:00 &hearts;</div></div><div class="ks-selectime hidden"></div></div><\!--#ks-cal-box--\>'].join("");this.nav_html='<p>\u6708<select value="{$the_month}"><option class="m1" value="1">01</option><option class="m2" value="2">02</option><option class="m3" value="3">03</option><option class="m4" value="4">04</option><option class="m5" value="5">05</option><option class="m6" value="6">06</option><option class="m7" value="7">07</option><option class="m8" value="8">08</option><option class="m9" value="9">09</option><option class="m10" value="10">10</option><option class="m11" value="11">11</option><option class="m12" value="12">12</option></select></p><p>\u5e74<input type="text" value="{$the_year}" onfocus="this.select()"/></p><p><button class="ok">\u786e\u5b9a</button><button class="cancel">\u53d6\u6d88</button></p>';
this.Verify=function(){return{isDay:function(a){if(!/^\d+$/i.test(a))return!1;a=Number(a);return!(1>a||31<a)},isYear:function(a){if(!/^\d+$/i.test(a))return!1;a=Number(a);return!(100>a||1E4<a)},isMonth:function(a){if(!/^\d+$/i.test(a))return!1;a=Number(a);return!(1>a||12<a)}}};this._renderUI=function(){var a={};this.HTML="";a.prev="";a.next="";a.title="";a.ds="";this.prevArrow||(a.prev="hidden");this.nextArrow||(a.next="hidden");this.father.showtime||(a.showtime="hidden");a.id=this.id="ks-cal-"+Math.random().toString().replace(/.\./i,
"");a.title=this.father._getHeadStr(this.year,this.month);this.createDS();a.ds=this.ds;this.father.con.append(this.father._templetShow(this.html,a));this.node=k.one("#"+this.id);this.father.showTime&&(a=this.node.one(".ks-cal-ft"),a.removeClass("hidden"),this.timmer=new this.father.TimeSelector(a,this.father));return this};this.detachEvent=function(){this.EV=this.EV||[];b.each(this.EV,function(a){a&&a.target.detach(a.type,a.fn)})};this._buildEvent=function(){function a(){d.target.on(d.type,d.fn)}
var f=this,d,e=k.one("#"+f.id);b.each(f.EV,function(a){a&&a.target.detach(a.type,a.fn)});f.EV=f.EV||[];d=f.EV[0]={target:e.one("div.ks-dbd"),type:"click",fn:function(a){a.target=k(a.target);if(!a.target.hasClass("ks-null")&&!a.target.hasClass("ks-disabled")){var a=Number(a.target.html()),b=new Date("2010/01/01");b.setYear(f.year);b.setMonth(f.month);b.setDate(a);f.father.dt_date=b;f.father.fire("select",{date:b});f.father.popup&&f.father.closable&&f.father.hide();f.father.rangeSelect&&f.father._handleRange(b);
f.father.render({selected:b})}}};a();d=f.EV[1]={target:e.one("a.ks-prev"),type:"click",fn:function(a){a.preventDefault();f.father._monthMinus().render();f.father.fire("monthChange",{date:new Date(f.father.year+"/"+(f.father.month+1)+"/01")})}};a();d=f.EV[2]={target:e.one("a.ks-next"),type:"click",fn:function(a){a.preventDefault();f.father._monthAdd().render();f.father.fire("monthChange",{date:new Date(f.father.year+"/"+(f.father.month+1)+"/01")})}};a();f.father.navigator&&(d=f.EV[3]={target:e.one("a.ks-title"),
type:"click",fn:function(a){try{f.timmer.hidePopup(),a.preventDefault()}catch(b){}a.target=k(a.target);a=e.one(".ks-setime");a.html("");var d=f.father._templetShow(f.nav_html,{the_month:f.month+1,the_year:f.year});a.html(d);a.removeClass("hidden");e.one("input").on("keydown",function(a){a.target=k(a.target);38==a.keyCode&&(a.target.val(Number(a.target.val())+1),a.target[0].select());40==a.keyCode&&(a.target.val(Number(a.target.val())-1),a.target[0].select());if(13==a.keyCode){var a=e.one(".ks-setime").one("select").val(),
b=e.one(".ks-setime").one("input").val();e.one(".ks-setime").addClass("hidden");f.Verify().isYear(b)&&f.Verify().isMonth(a)&&(f.father.render({date:new Date(b+"/"+a+"/01")}),f.father.fire("monthChange",{date:new Date(b+"/"+a+"/01")}))}})}},a(),d=f.EV[4]={target:e.one(".ks-setime"),type:"click",fn:function(a){a.preventDefault();a.target=k(a.target);if(a.target.hasClass("ok")){var a=e.one(".ks-setime").one("select").val(),b=e.one(".ks-setime").one("input").val();e.one(".ks-setime").addClass("hidden");
f.Verify().isYear(b)&&f.Verify().isMonth(a)&&(f.father.render({date:new Date(b+"/"+a+"/01")}),f.father.fire("monthChange",{date:new Date(b+"/"+a+"/01")}))}else a.target.hasClass("cancel")&&e.one(".ks-setime").addClass("hidden")}},a());return this};this._getNode=function(){return this.node};this._getNumOfDays=function(a,b){return 32-(new Date(a,b-1,32)).getDate()};this.createDS=function(){var a="",b=(7-this.father.startDay+(new Date(this.year+"/"+(this.month+1)+"/01")).getDay())%7,d=this._getNumOfDays(this.year,
this.month+1),e=this.father.selected,c=new Date,h;for(h=0;h<b;h++)a+='<a href="javascript:void(0);" class="ks-null">0</a>';for(h=1;h<=d;h++){var b="",j=new Date(this.year,this.month,h);this.father.minDate&&new Date(this.year,this.month,h+1)<this.father.minDate||this.father.maxDate&&j>this.father.maxDate?b="ks-disabled":this.father.range&&j>=this.father.range.start&&j<=this.father.range.end?b="ks-range":e&&e.getFullYear()==this.year&&e.getMonth()==this.month&&e.getDate()==h&&(b="ks-selected");c.getFullYear()==
this.year&&c.getMonth()==this.month&&c.getDate()==h&&(b+=" ks-today");a+="<a "+(b?"class="+b:"")+' href="javascript:void(0);">'+h+"</a>"}this.ds=a;return this};this.render=function(){this._renderUI();this._buildEvent();return this}}});return h},{requires:["ua","node","calendar/base"]});
KISSY.add("calendar/time",function(b,d,k){b.augment(k,{TimeSelector:function(b,j){this.father=j;this.fcon=b.parent(".ks-cal-box");this.popupannel=this.fcon.one(".ks-selectime");"undefined"==typeof j._time&&(j._time=new Date);this.time=j._time;this.status="s";this.ctime=d('<div class="ks-cal-time">\u65f6\u95f4\uff1a<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><\!--{{arrow--\><div class="cta"><button class="u"></button><button class="d"></button></div><\!--arrow}}--\></div>');this.button=
d('<button class="ct-ok">\u786e\u5b9a</button>');this.h_a="00,01,02,03,04,05,06,07,08,09,10,11,12,13,14,15,16,17,18,19,20,21,22,23".split(",");this.m_a="00,10,20,30,40,50".split(",");this.s_a="00,10,20,30,40,50".split(",");this.parseSubHtml=function(a){for(var b="",d=0;d<a.length;d++)b=b+('<a href="javascript:void(0);" class="item">'+a[d]+"</a>");return b+'<a href="javascript:void(0);" class="x">x</a>'};this.showPopup=function(a){this.popupannel.html(a);this.popupannel.removeClass("hidden");a=this.status;this.ctime.all("span").removeClass("on");
switch(a){case "h":this.ctime.all(".h").addClass("on");break;case "m":this.ctime.all(".m").addClass("on");break;case "s":this.ctime.all(".s").addClass("on")}};this.hidePopup=function(){this.popupannel.addClass("hidden")};this.render=function(){var a=this.get("h"),b=this.get("m"),d=this.get("s");this.father._time=this.time;this.ctime.all(".h").html(a);this.ctime.all(".m").html(b);this.ctime.all(".s").html(d);return this};this.set=function(a,b){b=Number(b);switch(a){case "h":this.time.setHours(b);break;
case "m":this.time.setMinutes(b);break;case "s":this.time.setSeconds(b)}this.render()};this.get=function(a){var b=this.time;switch(a){case "h":return b.getHours();case "m":return b.getMinutes();case "s":return b.getSeconds()}};this.add=function(){var a=this.status,b=this.get(a);b++;this.set(a,b)};this.minus=function(){var a=this.status,b=this.get(a);b--;this.set(a,b)};this._init=function(){var a=this;b.html("").append(a.ctime);b.append(a.button);a.render();a.popupannel.on("click",function(b){b=d(b.target);
if(b.hasClass("x"))a.hidePopup();else if(b.hasClass("item")){b=Number(b.html());a.set(a.status,b);a.hidePopup()}});a.button.on("click",function(){var b=typeof a.father.dt_date=="undefined"?a.father.date:a.father.dt_date;b.setHours(a.get("h"));b.setMinutes(a.get("m"));b.setSeconds(a.get("s"));a.father.fire("timeSelect",{date:b});a.father.popup&&a.father.closable&&a.father.hide()});a.ctime.on("keyup",function(b){if(b.keyCode==38||b.keyCode==37){b.preventDefault();a.add()}if(b.keyCode==40||b.keyCode==
39){b.preventDefault();a.minus()}});a.ctime.one(".u").on("click",function(){a.hidePopup();a.add()});a.ctime.one(".d").on("click",function(){a.hidePopup();a.minus()});a.ctime.one(".h").on("click",function(){var b=a.parseSubHtml(a.h_a);a.status="h";a.showPopup(b)});a.ctime.one(".m").on("click",function(){var b=a.parseSubHtml(a.m_a);a.status="m";a.showPopup(b)});a.ctime.one(".s").on("click",function(){var b=a.parseSubHtml(a.s_a);a.status="s";a.showPopup(b)})};this._init()}});return k},{requires:["node",
"calendar/base"]});KISSY.add("calendar",function(b,d,k,h,j){b.Calendar=d;b.Date=j;d.Date=j;return d},{requires:["calendar/base","calendar/page","calendar/time","calendar/date"]});
KISSY.add("menu/delmenuitem",function(b,d,k,h,j,a){function g(a){var b=a.get("parent");!1!==b.fire("beforeDelete",{target:a})&&(b.removeChild(a,!0),b.set("highlightedItem",null),b.fire("delete",{target:a}))}var f=d.all,b=a.CLS,l=a.DEL_CLS,k=k.create(j,{_performInternal:function(a){return f(a.target).hasClass(this.getCls(l))?(g(this),!0):j.prototype._performInternal.call(this,a)},_handleKeydown:function(a){if(a.keyCode===d.KeyCodes.D)return g(this),!0}},{ATTRS:{delTooltip:{view:!0}},DefaultRender:a});
h.UIStore.setUIByClass(b,{priority:h.UIStore.PRIORITY.LEVEL4,ui:k});return k},{requires:["node","uibase","component","./menuitem","./delmenuitemrender"]});
KISSY.add("menu/delmenuitemrender",function(b,d,k,h,j){function a(a){a.get("contentEl").append(b.substitute(g,{prefixCls:a.get("prefixCls"),tooltip:a.get("delTooltip")}))}var g='<span class="{prefixCls}menuitem-delete" title="{tooltip}">X</span>';return k.create(j,{createDom:function(){a(this)},_uiSetContent:function(b){j.prototype._uiSetContent.call(this,b);a(this)},_uiSetDelTooltip:function(){this._uiSetContent(this.get("content"))}},{ATTRS:{delTooltip:{}},HTML_PARSER:{delEl:function(a){return a.one(this.getCls("menuitem-delete"))}},
CLS:"menuitem-deletable",DEL_CLS:"menuitem-delete"})},{requires:["node","uibase","component","./menuitemrender"]});
KISSY.add("menu/filtermenu",function(b,d,k,h,j){var a=d.create(h,{bindUI:function(){this.get("view").get("filterInput").on("keyup",this.handleFilterEvent,this)},_handleMouseEnter:function(){a.superclass._handleMouseEnter.apply(this,arguments);this.getKeyEventTarget()[0].select()},handleFilterEvent:function(){var a=this.get("view").get("filterInput"),b=this.get("highlightedItem");this.set("filterStr",a.val());(!b||!b.get("visible"))&&this.set("highlightedItem",this._getNextEnabledHighlighted(0,1))},
_uiSetFilterStr:function(a){this.filterItems(a)},filterItems:function(a){var d=this.get("view"),h=d.get("labelEl"),d=d.get("filterInput");h[a?"hide":"show"]();if(this.get("allowMultiple")){var h=[],e;e=a.match(/(.+)[,\uff0c]\s*([^\uff0c,]*)/);var c=[];e&&(c=e[1].split(/[,\uff0c]/));/[,\uff0c]$/.test(a)?(h=[],e&&(h=c,e=c[c.length-1],(c=(c=this.get("highlightedItem"))&&c.get("content"))&&-1<c.indexOf(e)&&e&&(h[h.length-1]=c),d.val(h.join(",")+",")),a=""):(e&&(a=e[2]||""),h=c);this.get("enteredItems").length!=
h.length&&(b.log("enteredItems : "),b.log(h),this.set("enteredItems",h))}var d=this.get("children"),j=a&&RegExp(a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"ig"),k=this.getCls("menuitem-hit");b.each(d,function(b){var c=b.get("content");a?-1<c.indexOf(a)?(b.set("visible",!0),b.get("contentEl").html(c.replace(j,function(a){return"<span class='"+k+"'>"+a+"</span>"}))):b.set("visible",!1):(b.get("contentEl").html(c),b.set("visible",!0))})},decorateInternal:function(a){this.set("el",
a);this.decorateChildren(a.one("."+this.getCls("menu-content")))},reset:function(){var a=this.get("view");this.set("filterStr","");this.set("enteredItems",[]);(a=a&&a.get("filterInput"))&&a.val("")},destructor:function(){var a=this.get("view");(a=a&&a.get("filterInput"))&&a.detach()}},{ATTRS:{label:{view:!0},filterStr:{},enteredItems:{value:[]},allowMultiple:{value:!1}},DefaultRender:j});k.UIStore.setUIByClass("filtermenu",{priority:k.UIStore.PRIORITY.LEVEL2,ui:a});return a},{requires:["uibase","component",
"./menu","./filtermenurender"]});
KISSY.add("menu/filtermenurender",function(b,d,k,h){var j=d.all;return k.create(h,{getContentElement:function(){return this.get("menuContent")},getKeyEventTarget:function(){return this.get("filterInput")},createDom:function(){var a=h.prototype.getContentElement.call(this),b=this.get("filterWrap");b||this.set("filterWrap",b=j("<div class='"+this.getCls("menu-filter")+"'/>").appendTo(a));this.get("labelEl")||this.set("labelEl",j("<div class='"+this.getCls("menu-filter-label")+"'/>").appendTo(b));this.get("filterInput")||
this.set("filterInput",j("<input autocomplete='off'/>").appendTo(b));this.get("menuContent")||this.set("menuContent",j("<div class='"+this.getCls("menu-content")+"'/>").appendTo(a))},_uiSetLabel:function(a){this.get("labelEl").html(a)}},{ATTRS:{label:{}},HTML_PARSER:{labelEl:function(a){return a.one("."+this.getCls("menu-filter")).one("."+this.getCls("menu-filter-label"))},filterWrap:function(a){return a.one("."+this.getCls("menu-filter"))},menuContent:function(a){return a.one("."+this.getCls("menu-content"))},
filterInput:function(a){return a.one("."+this.getCls("menu-filter")).one("input")}}})},{requires:["node","uibase","./menurender"]});
KISSY.add("menu/menu",function(b,d,k,h,j){function a(){this.set("highlightedItem",void 0)}var g=d.KeyCodes,f=k.create(h.Container,{_uiSetHighlightedItem:function(a,b){var c=b&&b.prevVal;c&&c.set("highlighted",!1);a&&a.set("highlighted",!0);this.set("activeItem",a)},_handleBlur:function(a){f.superclass._handleBlur.call(this,a);this.set("highlightedItem",void 0)},_getNextEnabledHighlighted:function(a,b){var c=this.get("children"),d=c.length,f=a;do{var g=c[a];if(!g.get("disabled")&&!1!==g.get("visible"))return c[a];
a=(a+b+d)%d}while(a!=f)},_handleKeydown:function(a){if(this._handleKeyEventInternal(a))return a.halt(),!0},_handleKeyEventInternal:function(a){var e=this.get("highlightedItem");if(e&&e._handleKeydown(a))return!0;var c=this.get("children"),d=c.length;if(0!==d){switch(a.keyCode){case g.ESC:return;case g.HOME:this.set("highlightedItem",this._getNextEnabledHighlighted(0,1));break;case g.END:this.set("highlightedItem",this._getNextEnabledHighlighted(d-1,-1));break;case g.UP:e?(a=b.indexOf(e,c),d=(a-1+
d)%d):d-=1;this.set("highlightedItem",this._getNextEnabledHighlighted(d,-1));break;case g.DOWN:e?(a=b.indexOf(e,c),d=(a+1+d)%d):d=0;this.set("highlightedItem",this._getNextEnabledHighlighted(d,1));break;default:return}return!0}},bindUI:function(){this.on("hide",a,this)},containsElement:function(a){if(!this.get("view")||this.get("view").containsElement(a))return!0;for(var b=this.get("children"),c=0,d=b.length;c<d;c++){var f=b[c];if("function"==typeof f.containsElement&&f.containsElement(a))return!0}return!1}},
{ATTRS:{focusable:{value:!0},visibleMode:{value:"display"},highlightedItem:{},activeItem:{view:!0}},DefaultRender:j});h.UIStore.setUIByClass("menu",{priority:h.UIStore.PRIORITY.LEVEL1,ui:f});return f},{requires:["event","uibase","component","./menurender","./submenu"]});
KISSY.add("menu/menuitem",function(b,d,k,h){var j=b.all,a=d.create(k.ModelControl,[d.Contentbox],{_handleMouseEnter:function(b){if(a.superclass._handleMouseEnter.call(this,b))return!0;this.get("parent").set("highlightedItem",this)},_handleMouseLeave:function(b){if(a.superclass._handleMouseLeave.call(this,b))return!0;this.get("parent").set("highlightedItem",void 0)},_performInternal:function(){this.get("selectable")&&this.set("selected",!0);this.get("checkable")&&this.set("checked",!this.get("checked"));
this.get("parent").fire("click",{target:this});return!0},_uiSetChecked:function(a){this._forwardSetAttrToView("checked",a)},_uiSetSelected:function(a){this._forwardSetAttrToView("selected",a)},_uiSetHighlighted:function(b){a.superclass._uiSetHighlighted.apply(this,arguments);if(b){var d=this.get("el"),h=d.parent(function(a){return"visible"!=j(a).css("overflow")},this.get("parent").get("el").parent());h&&d.scrollIntoView(h,void 0,void 0,!0)}},containsElement:function(a){return this.get("view")&&this.get("view").containsElement(a)}},
{ATTRS:{focusable:{value:!1},visibleMode:{value:"display"},handleMouseEvents:{value:!1},selectable:{view:!0},checkable:{view:!0},value:{},checked:{},selected:{}},HTML_PARSER:{selectable:function(a){var b=this.getCls("menuitem-selectable");return a.hasClass(b)}}});a.DefaultRender=h;k.UIStore.setUIByClass("menuitem",{priority:k.UIStore.PRIORITY.LEVEL1,ui:a});return a},{requires:["uibase","component","./menuitemrender"]});
KISSY.add("menu/menuitemrender",function(b,d,k,h){return k.create(h.Render,[k.Contentbox.Render],{renderUI:function(){var d=this.get("el");d.attr("role","menuitem");this.get("contentEl").addClass(this.getCls("menuitem-content"));d.attr("id")||d.attr("id",b.guid("ks-menuitem"))},_setSelected:function(b,a){var d=this.get("el"),f=this._completeClasses(a,"-selected");d[b?"addClass":"removeClass"](f)},_setChecked:function(b,a){var d=this.get("el"),f=this._completeClasses(a,"-checked");d[b?"addClass":"removeClass"](f)},
_uiSetSelectable:function(b){this.get("el").attr("role",b?"menuitemradio":"menuitem")},_uiSetCheckable:function(b){if(b){var a=this.get("el"),g=this.getCls("menuitem-checkbox"),f=a.one("."+g);f||(f=(new d("<div class='"+g+"'/>")).prependTo(a),f.unselectable())}this.get("el").attr("role",b?"menuitemcheckbox":"menuitem")},containsElement:function(b){var a=this.get("el");return a[0]==b||a.contains(b)}},{ATTRS:{selected:{},checked:{}}})},{requires:["node","uibase","component"]});
KISSY.add("menu/menurender",function(b,d,k,h){return k.create(h.Render,[k.Contentbox.Render],{renderUI:function(){var d=this.get("el");d.attr("role","menu").attr("aria-haspopup",!0);d.attr("id")||d.attr("id",b.guid("ks-menu"))},_uiSetActiveItem:function(b){var a=this.get("el");b?(b=b.get("el").attr("id"),a.attr("aria-activedescendant",b)):a.attr("aria-activedescendant","")},containsElement:function(b){var a=this.get("el");return a[0]===b||a.contains(b)}},{ATTRS:{activeItem:{}}})},{requires:["ua",
"uibase","component"]});
KISSY.add("menu/popupmenu",function(b,d,k,h,j){function a(a){var b=a.get("parent"),d;b&&b.get("menu")===a&&(d=b.get("parent"));return d}function g(b){return(b=a(b))&&b.get(f)?b:0}var f="autoHideOnMouseLeave",l=d.create(h,[d.Position,d.Align],{_clearLeaveHideTimers:function(){var a,b,d;if(this.get(f)){if(a=this._leaveHideTimer)clearTimeout(a),this._leaveHideTimer=0;var g=this.get("children");for(a=0;a<g.length;a++)b=g[a],(d=b.get("menu"))&&d.get(f)&&d._clearLeaveHideTimers()}},_handleMouseLeave:function(){var b=
this;b.get(f)&&(b._leaveHideTimer=setTimeout(function(){for(var c,d=c=b;d&&!(c=d,d=g(c),!d););c.hide();(c=a(c))&&c.set("highlightedItem",null)},b.get("autoHideDelay")))},_handleMouseEnter:function(){var a=g(this);a?a._clearLeaveHideTimers():this._clearLeaveHideTimers()},_handleBlur:function(){l.superclass._handleBlur.apply(this,arguments);this.hide()}},{ATTRS:{focusable:{value:!1},visibleMode:{value:"visibility"},autoHideOnMouseLeave:{},autoHideDelay:{value:100}},DefaultRender:j});k.UIStore.setUIByClass("popupmenu",
{priority:k.UIStore.PRIORITY.LEVEL2,ui:l});return l},{requires:["uibase","component","./menu","./popupmenurender"]});KISSY.add("menu/popupmenurender",function(b,d,k,h){return k.create(h,[k.Position.Render,6===d.ie?k.Shim.Render:null])},{requires:["ua","uibase","./menurender"]});
KISSY.add("menu/separator",function(b,d,k,h){b=d.create(k.ModelControl,{},{ATTRS:{focusable:{value:!1},disabled:{value:!0},handleMouseEvents:{value:!1}},DefaultRender:h});k.UIStore.setUIByClass("menuseparator",{priority:k.UIStore.PRIORITY.LEVEL2,ui:b});return b},{requires:["uibase","component","./separatorrender"]});KISSY.add("menu/separatorrender",function(b,d,k){return d.create(k.Render,{createDom:function(){this.get("el").attr("role","separator")}})},{requires:["uibase","component"]});
KISSY.add("menu/submenu",function(b,d,k,h,j,a){function g(a){var b=this.get("menu"),a=a.target,e=this.get("el");!e.contains(a)&&e[0]!==a&&!b.containsElement(a)&&(b.hide(),this.get("parent").set("highlightedItem",null))}var f=d.KeyCodes,l=document,e=k.create(j,[h.DecorateChild],{_onParentHide:function(){this.get("menu")&&this.get("menu").hide()},bindUI:function(){var a=this.get("parent"),b=this.get("menu");a&&(a.on("hide",this._onParentHide,this),b.on("click",function(b){a.fire("click",{target:b.target})}),
a.__bindDocClickToHide||(d.on(l,"click",g,this),b.__bindDocClickToHide=1),b.on("afterActiveItemChange",function(b){a.set("activeItem",b.newVal)}));b.on("beforeHighlightedItemChange",this.onChildHighlight_,this)},_handleMouseEnter:function(a){if(e.superclass._handleMouseEnter.call(this,a))return!0;this.clearTimers();this.showTimer_=b.later(this.showMenu,this.get("menuDelay"),!1,this)},showMenu:function(){var a=this.get("menu");a.set("align",b.mix({node:this.get("el"),points:["tr","tl"]},this.get("menuAlign")));
a.render();this.get("el").attr("aria-haspopup",a.get("el").attr("id"));a.show()},clearTimers:function(){this.dismissTimer_&&(this.dismissTimer_.cancel(),this.dismissTimer_=null);this.showTimer_&&(this.showTimer_.cancel(),this.showTimer_=null)},onChildHighlight_:function(a){a.newVal&&this.get("menu").get("parent")==this&&(this.clearTimers(),this.get("parent").set("highlightedItem",this))},hideMenu:function(){var a=this.get("menu");a&&a.hide()},_performInternal:function(){this.clearTimers();this.showMenu();
e.superclass._performInternal.apply(this,arguments)},_handleKeydown:function(a){var b=this.get("menu"),e=b&&b.get("visible"),g=a.keyCode;if(e){if(!b._handleKeydown(a))if(g==f.LEFT)this.hideMenu(),this.get("parent").set("activeItem",this);else return}else if(g==f.RIGHT)this.showMenu(),a=b.get("children"),a[0]&&b.set("highlightedItem",a[0]);else{if(a.keyCode==d.KeyCodes.ENTER)return this._performInternal(a);return}return!0},_uiSetHighlighted:function(a,d){e.superclass._uiSetHighlighted.call(this,a,
d);a||(this.dismissTimer_&&this.dismissTimer_.cancel(),this.dismissTimer_=b.later(this.hideMenu,this.get("menuDelay"),!1,this))},containsElement:function(a){var b=this.get("menu");return b&&b.containsElement(a)},decorateChildrenInternal:function(a,e,d){e.css("visibility","hidden");b.one(e[0].ownerDocument.body).prepend(e);this.set("menu",new a({srcNode:e,prefixCls:d}))},destructor:function(){var a=this.get("parent"),b=this.get("menu");this.clearTimers();d.remove(l,"click",g,this);a&&a.detach("hide",
this._onParentHide,this);!this.get("externalSubMenu")&&b&&b.destroy()}},{ATTRS:{menuDelay:{value:300},externalSubMenu:{value:!1},menuAlign:{},menu:{setter:function(a){a.set("parent",this)}},decorateChildCls:{value:"popupmenu"}},DefaultRender:a});h.UIStore.setUIByClass("submenu",{priority:h.UIStore.PRIORITY.LEVEL2,ui:e});return e},{requires:["event","uibase","component","./menuitem","./submenurender"]});
KISSY.add("menu/submenurender",function(b,d,k){var h;return h=d.create(k,{renderUI:function(){var d=this.get("el"),a=this.get("contentEl");d.attr("aria-haspopup","true");a.append(b.substitute('<span class="{prefixCls}submenu-arrow">\u25ba</span>',{prefixCls:this.get("prefixCls")}))},_uiSetContent:function(d){h.superclass._uiSetContent.call(this,d);this.get("contentEl").append(b.substitute('<span class="{prefixCls}submenu-arrow">\u25ba</span>',{prefixCls:this.get("prefixCls")}))}})},{requires:["uibase","./menuitemrender"]});
KISSY.add("menu",function(b,d,k,h,j,a,g,f,l,e,c,m){d.Render=k;d.Item=h;d.Item.Render=j;d.SubMenu=a;a.Render=g;d.Separator=f;d.PopupMenu=e;d.FilterMenu=c;d.DelMenuItem=m;return d},{requires:"menu/menu,menu/menurender,menu/menuitem,menu/menuitemrender,menu/submenu,menu/submenurender,menu/separator,menu/separatorrender,menu/popupmenu,menu/filtermenu,menu/delmenuitem,menu/delmenuitemrender".split(",")});
KISSY.add("button/base",function(b,d,k,h,j){var a=d.KeyCodes,b=k.create(h.ModelControl,[k.Contentbox],{bindUI:function(){this.get("el").on("keyup",this._handleKeyEventInternal,this)},_handleKeyEventInternal:function(b){return b.keyCode==a.ENTER&&"keydown"==b.type||b.keyCode==a.SPACE&&"keyup"==b.type?this._performInternal(b):b.keyCode==a.SPACE},_performInternal:function(){this.fire("click")}},{ATTRS:{value:{},describedby:{view:!0},tooltip:{view:!0},collapseSide:{view:!0}}});b.DefaultRender=j;h.UIStore.setUIByClass("button",
{priority:h.UIStore.PRIORITY.LEVEL1,ui:b});return b},{requires:["event","uibase","component","./customrender"]});
KISSY.add("button/buttonrender",function(b,d,k){return d.create(k.Render,{createDom:function(){this.get("el").attr("role","button").addClass(this.getCls("inline-block button"))},_uiSetTooltip:function(b){this.get("el").attr("title",b)},_uiSetDescribedby:function(b){this.get("el").attr("aria-describedby",b)},_uiSetCollapseSide:function(b){var d=this.getCls("button-collapse-"),a=this.get("el");a.removeClass(d+"left "+d+"right");b&&a.addClass(d+b)}},{ATTRS:{describedby:{},tooltip:{},collapseSide:{}}})},
{requires:["uibase","component"]});
KISSY.add("button/customrender",function(b,d,k,h){return k.create(h,[k.Contentbox.Render],{createDom:function(){var h=this.get("el"),a=this.get("contentEl"),g=b.guid("ks-button-labelby");h.attr("aria-labelledby",g);a.addClass(this.getCls("button-outer-box"));h=b.makeArray(a[0].childNodes);a=(new d("<div id='"+g+"' class='"+this.getCls("button-inner-box")+"'/>")).appendTo(a);for(g=0;g<h.length;g++)a.append(h[g]);this.set("innerEl",a)},_uiSetContent:function(b){var a=this.get("innerEl");a.html("");
b&&a.append(b)}},{innerEL:{}})},{requires:["node","uibase","./buttonrender"]});
KISSY.add("button/split",function(b){function d(){d.superclass.constructor.apply(this,arguments)}var k={content:function(b){b=b.target;this.set("content",b.get("content"));this.set("value",b.get("value"))},value:function(b){this.set("value",b.target.get("value"))}};d.ATTRS={first:{},second:{},eventType:{value:"click"},eventHandler:{value:"content"}};b.extend(d,b.Base,{render:function(){var b=this.get("eventType"),d=k[this.get("eventHandler")],a=this.get("first"),g=this.get("second");a.set("collapseSide",
"right");g.set("collapseSide","left");a.render();g.render();if(b&&d)g.on(b,d,a)}});return d},{requires:["base"]});KISSY.add("button",function(b,d,k,h){d.Render=k;d.Split=h;return d},{requires:["button/base","button/customrender","button/split"]});
KISSY.add("menubutton/menubutton",function(b,d,k,h,j,a,g,f){function l(){var a=this.get("menu"),c=this.get("el");a&&a.get("visible")&&a.set("align",b.merge({node:c},m,this.get("menuAlign")))}var e=k.all,c=k.KeyCodes,m={points:["bl","tl"],overflow:{failX:1,failY:1,adjustX:1,adjustY:1}},n=d.create(h,[g.DecorateChild],{initializer:function(){this._reposition=b.buffer(l,50,this)},_hideMenu:function(){var a=this.get("menu");a&&a.hide()},_showMenu:function(){var a=this.get("el"),c=this.get("menu");c&&!c.get("visible")&&
(c.set("align",b.merge({node:a},m,this.get("menuAlign"))),c.show(),a.attr("aria-haspopup",c.get("el").attr("id")))},_uiSetCollapsed:function(a){a?this._hideMenu():this._showMenu()},__bindMenu:function(){var a=this,c=this.get("menu");c&&(c.on("afterActiveItemChange",function(b){a.set("activeItem",b.newVal)}),c.on("click",a._handleMenuClick,a),e(window).on("resize",a._reposition,a),a.__bindMenu=b.noop)},_handleMenuClick:function(a){this.fire("click",{target:a.target});this.set("collapsed",!0)},bindUI:function(){this.__bindMenu()},
_handleKeyEventInternal:function(a){var b=this.get("menu");if(a.keyCode==c.SPACE){if(a.preventDefault(),"keyup"!=a.type)return f}else if("keydown"!=a.type)return f;return b&&b.get("visible")?(b=b._handleKeydown(a),a.keyCode==c.ESC?(this.set("collapsed",!0),!0):b):a.keyCode==c.SPACE||a.keyCode==c.DOWN||a.keyCode==c.UP?(this.set("collapsed",!1),!0):f},_performInternal:function(){var a=this.get("menu");a&&(a.get("visible")?this.set("collapsed",!0):this.set("collapsed",!1))},_handleBlur:function(a){n.superclass._handleBlur.call(this,
a);this.set("collapsed",!0)},getMenu:function(){var c=this.get("menu");c||(c=new a.PopupMenu(b.mix({prefixCls:this.get("prefixCls")},this.get("menuCfg"))),this.set("menu",c),this.__bindMenu());return c},addItem:function(a,b){this.getMenu().addChild(a,b)},removeItem:function(a,b){var c=this.get("menu");c&&c.removeChild(a,b)},removeItems:function(a){this.get("menu")&&this.get("menu").removeChildren(a)},getItemAt:function(a){return this.get("menu")&&this.get("menu").getChildAt(a)},_uiSetDisabled:function(a){n.superclass._uiSetDisabled.apply(this,
b.makeArray(arguments));!a&&this.set("collapsed",!0)},decorateChildrenInternal:function(a,c,e){c.css("visibility","hidden");b.one(c[0].ownerDocument.body).prepend(c);this.set("menu",new a(b.mix({srcNode:c,prefixCls:e},this.get("menuCfg"))))},destructor:function(){var a=this.get("menu");e(window).detach("resize",this._reposition,this);a&&a.destroy()}},{ATTRS:{activeItem:{view:!0},menuAlign:{value:{}},menuCfg:{},decorateChildCls:{value:"popupmenu"},menu:{setter:function(a){a.set("parent",this)}},collapsed:{value:!0,
view:!0}},DefaultRender:j});g.UIStore.setUIByClass("menu-button",{priority:g.UIStore.PRIORITY.LEVEL2,ui:n});return n},{requires:"uibase,node,button,./menubuttonrender,menu,component".split(",")});
KISSY.add("menubutton/menubuttonrender",function(b,d,k){return d.create(k.Render,{createDom:function(){var d=this.get("innerEl"),j=b.substitute('<div class="{prefixCls}inline-block {prefixCls}menu-button-caption">{content}</div><div class="{prefixCls}inline-block {prefixCls}menu-button-dropdown">&nbsp;</div>',{content:this.get("content")||"",prefixCls:this.get("prefixCls")});d.html(j).attr("aria-haspopup",!0)},_uiSetContent:function(b){var d=this.get("el").one("."+this.getCls("menu-button-caption"));
d.html("");b&&d.append(b)},_uiSetCollapsed:function(b){var d=this.get("el"),a=this.getCls("menu-button-open");d[b?"removeClass":"addClass"](a).attr("aria-expanded",!b)},_uiSetActiveItem:function(b){this.get("el").attr("aria-activedescendant",b&&b.get("el").attr("id")||"")}},{ATTRS:{activeItem:{},collapsed:{}}})},{requires:["uibase","button"]});
KISSY.add("menubutton/option",function(b,d,k,h){b=d.create(h.Item,{},{ATTRS:{selectable:{value:!0}}});k.UIStore.setUIByClass("option",{priority:10,ui:b});return b},{requires:["uibase","component","menu"]});
KISSY.add("menubutton/select",function(b,d,k,h,j,a,g){function f(a){return a.get("menu")&&a.get("menu").get("children")||[]}var l=k.create(j,{__bindMenu:function(){var a=this.get("menu");l.superclass.__bindMenu.call(this);if(a)a.on("show",this._handleMenuShow,this)},_handleMenuShow:function(){this.get("menu").set("highlightedItem",this.get("selectedItem")||this.get("menu").getChildAt(0))},_updateCaption:function(){var a=this.get("selectedItem");this.set("content",a?a.get("content"):this.get("defaultCaption"))},
_handleMenuClick:function(a){this.set("selectedItem",a.target);this.set("collapsed",!0);l.superclass._handleMenuClick.call(this,a)},removeItems:function(){l.superclass.removeItems.apply(this,arguments);this.set("selectedItem",null)},removeItem:function(a){l.superclass.removeItem.apply(this,arguments);a==this.get("selectedItem")&&this.set("selectedItem",null)},_uiSetSelectedItem:function(a,b){b&&b.prevVal&&b.prevVal.set("selected",!1);this._updateCaption()},_uiSetDefaultCaption:function(){this._updateCaption()}},
{ATTRS:{value:{getter:function(){var a=this.get("selectedItem");return a&&a.get("value")},setter:function(a){for(var b=f(this),d=0;d<b.length;d++){var g=b[d];if(g.get("value")==a){this.set("selectedItem",g);return}}this.set("selectedItem",null);return null}},selectedItem:{},selectedIndex:{setter:function(a){var b=f(this);if(0>a||a>=b.length)return-1;this.set("selectedItem",b[a])},getter:function(){return b.indexOf(this.get("selectedItem"),f(this))}},defaultCaption:{value:""}}});l.decorate=function(a,
c){a=b.one(a);c=c||{};c.elBefore=a;var f=new l(c),h,j,k=a.val();a.all("option").each(function(a){var b=new g({content:a.text(),prefixCls:c.prefixCls,elCls:a.attr("class"),value:a.val()});k==a.val()&&(j=b);f.addItem(b)});f.set("selectedItem",j);f.render();if(h=a.attr("name")){var p=(new d("<input type='hidden' name='"+h+"' value='"+k+"'>")).insertBefore(a);f.on("afterSelectedItemChange",function(a){a.newVal?p.val(a.newVal.get("value")):p.val("")})}a.remove();return f};h.UIStore.setUIByClass("select",
{priority:h.UIStore.PRIORITY.LEVEL3,ui:l});return l},{requires:"node,uibase,component,./menubutton,menu,./option".split(",")});KISSY.add("menubutton",function(b,d,k,h,j){d.Render=k;d.Select=h;d.Option=j;return d},{requires:["menubutton/menubutton","menubutton/menubuttonrender","menubutton/select","menubutton/option"]});
KISSY.add("tree/basenode",function(b,d,k,h,j){var a=d.all,g=j.ITEM_CLS,f=d.KeyCodes,l=k.create(h.ModelControl,[h.DecorateChild],{_keyNav:function(a){var b=!0,d,g=this.get("children");switch(a.keyCode){case f.HOME:d=this.get("tree");break;case f.END:d=this.get("tree").getLastVisibleDescendant();break;case f.UP:d=this.getPreviousVisibleNode();break;case f.DOWN:d=this.getNextVisibleNode();break;case f.LEFT:this.get("expanded")&&(g.length||!1===this.get("isLeaf"))?this.set("expanded",!1):d=this.get("parent");
break;case f.RIGHT:if(g.length||!1===this.get("isLeaf"))this.get("expanded")?g[0].select():this.set("expanded",!0);break;default:b=!1}d&&d.select();return b},getLastVisibleDescendant:function(){var a=this.get("children");return!this.get("expanded")||!a.length?this:a[a.length-1].getLastVisibleDescendant()},getNextVisibleNode:function(){var a=this.get("children"),b=this.get("parent");if(this.get("expanded")&&a.length)return a[0];for(a=this.next();b&&!a;)a=b.next(),b=b.get("parent");return a},getPreviousVisibleNode:function(){var a=
this.prev();return a=a?a.getLastVisibleDescendant():this.get("parent")},next:function(){var a=this.get("parent");if(!a)return null;var a=a.get("children"),c=b.indexOf(this,a);return c==a.length-1?null:a[c+1]},prev:function(){var a=this.get("parent");if(!a)return null;var a=a.get("children"),c=b.indexOf(this,a);return 0===c?null:a[c-1]},select:function(){this.get("tree").set("selectedItem",this)},_performInternal:function(b){var c=a(b.target),d=this.get("tree"),f=this.get("view");d.get("el")[0].focus();
c.equals(f.get("expandIconEl"))?"dblclick"!=b.type&&this.set("expanded",!this.get("expanded")):"dblclick"==b.type?this.set("expanded",!this.get("expanded")):(this.select(),d.fire("click",{target:this}))},decorateChildrenInternal:function(a,b,d){this.addChild(new a({srcNode:b,tree:this.get("tree"),prefixCls:d}))},addChild:function(a){var c=this.get("tree");a.set("tree",c);a.set("depth",this.get("depth")+1);l.superclass.addChild.call(this,a);this._updateRecursive();c._register(a);b.each(a.get("children"),
function(a){c._register(a)})},_computeClass:function(a){this.get("view")._computeClass(this.get("children"),this.get("parent"),a)},_updateRecursive:function(){var a=this.get("children").length;this._computeClass("_updateRecursive");b.each(this.get("children"),function(b,d){b._computeClass("_updateRecursive_children");b.get("view").set("ariaPosInSet",d+1);b.get("view").set("ariaSize",a)})},removeChild:function(a){var c=this.get("tree");c._unregister(a);b.each(a.get("children"),function(a){c._unregister(a)});
l.superclass.removeChild.apply(this,b.makeArray(arguments));this._updateRecursive()},_uiSetExpanded:function(a){var b=this.get("tree");this._computeClass("expanded-"+a);a?b.fire("expand",{target:this}):b.fire("collapse",{target:this})},_uiSetSelected:function(a){this._forwardSetAttrToView("selected",a)},expandAll:function(){this.set("expanded",!0);b.each(this.get("children"),function(a){a.expandAll()})},collapseAll:function(){this.set("expanded",!1);b.each(this.get("children"),function(a){a.collapseAll()})}},
{DefaultRender:j,ATTRS:{handleMouseEvents:{value:!1},id:{getter:function(){var a=this.get("el").attr("id");a||this.get("el").attr("id",a=b.guid("tree-node"));return a}},content:{view:!0},isLeaf:{view:!0},expandIconEl:{view:!0},iconEl:{view:!0},selected:{},expanded:{value:!1,view:!0},tooltip:{view:!0},tree:{},depth:{value:0,view:!0},focusable:{value:!1},decorateChildCls:{value:"tree-children"}},HTML_PARSER:{expanded:function(a){a=a.one("."+this.getCls("tree-children"));return!a?!1:"none"!=a.css("display")}}});
h.UIStore.setUIByClass(g,{priority:10,ui:l});return l},{requires:["node","uibase","component","./basenoderender"]});
KISSY.add("tree/basenoderender",function(b,d,k,h){var j=d.all;return k.create(h.Render,{_computeClass:function(a,d){var f=this.get("expanded"),h=this.get("isLeaf"),e=this.get("iconEl"),c=this.get("expandIconEl"),j=this.get("childrenEl"),k="inline-block tree-icon tree-expand-icon ",o=this.getCls("inline-block tree-icon tree-file-icon "),q=this.getCls(["inline-block tree-icon",f?"tree-expanded-folder-icon":"tree-collapsed-folder-icon",""].join(" ")),p=!d||d.get("children")[d.get("children").length-
1].get("view")==this;!1===h||void 0===h&&a.length?(e.attr("class",q),c.attr("class",this.getCls(b.substitute(f?k+"tree-expand-icon-{t}minus":k+"tree-expand-icon-{t}plus",{t:p?"l":"t"})))):(e.attr("class",o),c.attr("class",this.getCls(b.substitute(k+"tree-expand-icon-{t}",{t:p?"l":"t"}))));j&&j.attr("class",this.getCls(p?"tree-lchildren":"tree-children"))},createDom:function(){var a=this.get("el"),d,f,h=this.get("labelEl");f=j("<div class='"+this.getCls("tree-row")+"'/>");d=b.guid("tree-item");this.set("rowEl",
f);var e=j("<div/>").appendTo(f),c=j("<div />").appendTo(f);h||(h=j("<span id='"+d+"' class='"+this.getCls("tree-item-label")+"'/>"),this.set("labelEl",h));h.appendTo(f);a.attr({role:"treeitem","aria-labelledby":d}).prepend(f);this.set("expandIconEl",e);this.set("iconEl",c)},_uiSetExpanded:function(a){var b=this.get("childrenEl");b&&(a?a&&b.show():b.hide());this.get("el").attr("aria-expanded",a)},_setSelected:function(a,b){this.get("rowEl")[a?"addClass":"removeClass"](this._completeClasses(b,"-selected"));
this.get("el").attr("aria-selected",a)},_uiSetContent:function(a){this.get("labelEl").html(a)},_uiSetDepth:function(a){this.get("el").attr("aria-level",a)},_uiSetAriaSize:function(a){this.get("el").attr("aria-setsize",a)},_uiSetAriaPosInSet:function(a){this.get("el").attr("aria-posinset",a)},_uiSetTooltip:function(a){this.get("el").attr("title",a)},getContentElement:function(){if(this.get("childrenEl"))return this.get("childrenEl");var a=j("<div "+(this.get("expanded")?"":"style='display:none'")+
" role='group'></div>").appendTo(this.get("el"));this.set("childrenEl",a);return a}},{ATTRS:{ariaSize:{},ariaPosInSet:{},childrenEl:{},expandIconEl:{},tooltip:{},iconEl:{},expanded:{},rowEl:{},depth:{},labelEl:{},content:{},isLeaf:{}},HTML_PARSER:{childrenEl:function(a){return a.children("."+this.getCls("tree-children"))},labelEl:function(a){return a.children("."+this.getCls("tree-item-label"))},content:function(a){return a.children("."+this.getCls("tree-item-label")).html()},isLeaf:function(a){if(a.hasClass(this.getCls("tree-item-leaf")))return!0;
if(a.hasClass(this.getCls("tree-item-folder")))return!1}},ITEM_CLS:"tree-item"})},{requires:["node","uibase","component"]});
KISSY.add("tree/checknode",function(b,d,k,h,j,a){var g=d.all,d=k.create(j,{_performInternal:function(a){this.get("tree").get("el")[0].focus();var b=g(a.target),e=this.get("view"),c=this.get("tree");if("dblclick"==a.type){if(b.equals(e.get("expandIconEl"))||b.equals(e.get("checkEl")))return;this.set("expanded",!this.get("expanded"))}b.equals(e.get("expandIconEl"))?this.set("expanded",!this.get("expanded")):(a=this.get("checkState"),this.set("checkState",1==a?0:1),c.fire("click",{target:this}))},_uiSetCheckState:function(a){(1==
a||0==a)&&b.each(this.get("children"),function(b){b.set("checkState",a)});var d=this.get("parent");if(d){for(var e=0,c=d.get("children"),g=0;g<c.length;g++){var h=c[g].get("checkState");if(2==h){d.set("checkState",2);return}1==h&&e++}e==c.length?d.set("checkState",1):0===e?d.set("checkState",0):d.set("checkState",2)}}},{ATTRS:{checkState:{view:!0,value:0}},CHECK_CLS:"tree-item-check",DefaultRender:a,PARTIAL_CHECK:2,CHECK:1,EMPTY:0});h.UIStore.setUIByClass("tree-item-check",{priority:h.UIStore.PRIORITY.LEVEL2,
ui:d});return d},{requires:["node","uibase","component","./basenode","./checknoderender"]});
KISSY.add("tree/checknoderender",function(b,d,k,h,j){var a=d.all;return k.create(j,{createDom:function(){var b=this.get("expandIconEl");this.set("checkEl",a("<div class='"+this.getCls("inline-block  tree-icon")+"'/>").insertAfter(b))},_uiSetCheckState:function(a){this.get("checkEl").removeClass(this.getCls("tree-item-checked0 tree-item-checked1 tree-item-checked2")).addClass(this.getCls("tree-item-checked"+a))}},{ATTRS:{checkEl:{},checkState:{}},CHECK_CLS:"tree-item-check"})},{requires:["node","uibase",
"component","./basenoderender"]});KISSY.add("tree/checktree",function(b,d,k,h,j,a){b=j.CHECK_TREE_CLS;d=d.create(h,[k.DelegateChildren,a],{},{DefaultRender:j});k.UIStore.setUIByClass(b,{priority:k.UIStore.PRIORITY.LEVEL4,ui:d});return d},{requires:["uibase","component","./checknode","./checktreerender","./treemgr"]});KISSY.add("tree/checktreerender",function(b,d,k,h,j){return d.create(h,[j],{},{CHECK_TREE_CLS:"tree-root-check"})},{requires:["uibase","component","./checknoderender","./treemgrrender"]});
KISSY.add("tree/tree",function(b,d,k,h,j,a){b=j.TREE_CLS;d=d.create(h,[k.DelegateChildren,a],{},{DefaultRender:j});k.UIStore.setUIByClass(b,{priority:k.UIStore.PRIORITY.LEVEL3,ui:d});return d},{requires:["uibase","component","./basenode","./treerender","./treemgr"]});
KISSY.add("tree/treemgr",function(b,d){function k(){}k.ATTRS={showRootNode:{view:!0},selectedItem:{},tree:{valueFn:function(){return this}},focusable:{value:!0}};b.augment(k,{__getAllNodes:function(){this._allNodes||(this._allNodes={});return this._allNodes},__renderUI:function(){this.get("children").length||this._computeClass("root_renderUI")},_register:function(b){this.__getAllNodes()[b.get("id")]=b},_unregister:function(b){delete this.__getAllNodes()[b.get("id")]},_handleKeyEventInternal:function(b){var j=
this.get("selectedItem");return b.keyCode==d.KeyCodes.ENTER?j._performInternal(b):j._keyNav(b)},getOwnerControl:function(b){for(var d,a=this.__getAllNodes(),g=this.get("el")[0];b&&b!==g;){if(d=a[b.id])return d;b=b.parentNode}return this},_uiSetSelectedItem:function(b,d){d.prevVal&&d.prevVal.set("selected",!1);b.set("selected",!0)},_uiSetFocused:function(b){this.constructor.superclass._uiSetFocused.call(this,b);b&&!this.get("selectedItem")&&this.select()}});return k},{requires:["event"]});
KISSY.add("tree/treemgrrender",function(b){function d(){}d.ATTRS={showRootNode:{}};b.augment(d,{__renderUI:function(){this.get("el").attr("role","tree")[0].hideFocus=!0;this.get("rowEl").addClass(this.getCls("tree-root-row"))},_uiSetShowRootNode:function(b){this.get("rowEl")[b?"show":"hide"]()},_uiSetFocused:function(b){this.get("el")[b?"addClass":"removeClass"](this.getCls("tree-item-focused"))}});return d});
KISSY.add("tree/treerender",function(b,d,k,h,j){return d.create(h,[j],{},{TREE_CLS:"tree-root"})},{requires:["uibase","component","./basenoderender","./treemgrrender"]});KISSY.add("tree",function(b,d,k,h,j){d.Node=k;d.CheckNode=h;d.CheckTree=j;return d},{requires:["tree/tree","tree/basenode","tree/checknode","tree/checktree"]});
KISSY.add("waterfall/base",function(b,d,k){function h(){h.superclass.constructor.apply(this,arguments);this._init()}function j(a,c,d,f){var g=[].concat(b.makeArray(a)),h={},j;0<g.length?j=setTimeout(function(){var b=+new Date;do{var h=g.shift();c.call(d,h)}while(0<g.length&&50>+new Date-b);0<g.length?j=setTimeout(arguments.callee,25):f&&f.call(d,a)},25):f&&b.later(f,0,!1,d,[a]);h.stop=function(){j&&(clearTimeout(j),g=[])};return h}function a(){var a=this._containerRegion;a&&this.get("container").width()===
a.width||this.adjust()}function g(){var a=this.get("container").width(),c=this.get("curColHeights");c.length=Math.max(parseInt(a/this.get("colWidth")),this.get("minColCount"));this._containerRegion={width:a};b.each(c,function(a,b){c[b]=0})}function f(a){for(var b=this.get("effect"),a=l(a),d=this.get("curColHeights"),f=this.get("container"),g=d.length,h=0,j=this._containerRegion,k=Number.MAX_VALUE,r=0;r<g;r++)d[r]<k&&(k=d[r],h=r);g||(k=0);g=Math.max(j.width-g*this.get("colWidth"),0)/2;a.css({left:h*
this.get("colWidth")+g,top:k});f.contains(a)||(b&&"fadeIn"==b.effect&&a.css("opacity",0),f.append(a));d[h]+=a.outerHeight(!0);return a}var l=d.all;h.ATTRS={container:{setter:function(a){return l(a)}},curColHeights:{value:[]},minColCount:{value:1},effect:{value:{effect:"fadeIn",duration:1}},colWidth:{}};b.extend(h,k,{isAdjusting:function(){return!!this._adjuster},_init:function(){a.call(this);this.__onResize=b.buffer(a,50,this);l(window).on("resize",this.__onResize)},adjust:function(a){b.log("waterfall:adjust");
var c=this,d=c.get("container").all(".ks-waterfall"),f=d.length;c.isAdjusting()&&c._adjuster.stop();g.call(c);return c._adjuster=j(d,c._addItem,c,function(){c.get("container").height(Math.max.apply(Math,c.get("curColHeights")));c._adjuster=0;a&&a.call(c);f&&c.fire("adjustComplete",{items:d})})},addItems:function(a,b){var d=this,f=a.length;d._adder=j(a,d._addItem,d,function(){d.get("container").height(Math.max.apply(Math,d.get("curColHeights")));d._adder=0;b&&b.call(d);f&&d.fire("addComplete",{items:a})});
return d._adder},_addItem:function(a){this.get("curColHeights");this.get("container");var b=f.call(this,a),a=this.get("effect");a.effect&&"fadeIn"===a.effect&&b.animate({opacity:1},{duration:a.duration,easing:a.easing,complete:function(){b.css("opacity","")}})},destroy:function(){l(window).detach("resize",this.__onResize)}});return h},{requires:["node","base"]});
KISSY.add("waterfall/loader",function(b,d,k){function h(){h.superclass.constructor.apply(this,arguments)}function j(){if(!this.__pause&&(b.log("waterfall:doScroll"),!this.__loading))if(this.isAdjusting())this.__onScroll();else{var d=this.get("container").offset().top,h=this.get("diff"),e=this.get("curColHeights");e.length&&(d+=Math.min.apply(Math,e));h+g(window).scrollTop()+g(window).height()>d&&(b.log("waterfall:loading"),a.call(this))}}function a(){function a(b){e.__loading=0;e.addItems(b)}function b(){e.end()}
var e=this;this.get("container");e.__loading=1;var c=e.get("load");c&&c(a,b)}var g=d.all;h.ATTRS={diff:{getter:function(a){return a||0}}};b.extend(h,k,{_init:function(){h.superclass._init.apply(this,arguments);this.__onScroll=b.buffer(j,50,this);g(window).on("scroll",this.__onScroll);j.call(this)},end:function(){g(window).detach("scroll",this.__onScroll)},pause:function(){this.__pause=1},resume:function(){this.__pause=0},destroy:function(){h.superclass.destroy.apply(this,arguments);g(window).detach("scroll",
this.__onScroll)}});return h},{requires:["node","./base"]});KISSY.add("waterfall",function(b,d,k){d.Loader=k;return d},{requires:["waterfall/base","waterfall/loader"]});
KISSY.add("validation/base",function(b,d,k,h,j,a,g,f){function l(a,c){b.isString(a)&&(a=b.get(a));a?this._init(a,c||{}):h.log("\u8bf7\u914d\u7f6e\u6b63\u786e\u7684form ID.")}b.augment(l,b.EventTarget,{_init:function(a,c){this.config=b.merge(j.Config,c);this.form=a;this.fields=new h.storage;this._initfields()},_initfields:function(){var a=this,c=a.config;b.each(a.form.elements,function(b){var f=d.attr(b,c.attrname);f&&a.add(b,h.toJSON(f.replace(/'/g,'"')))})},add:function(e,c){var f=this.fields,g=b.merge(this.config,c);if(b.isObject(e)&&
e instanceof a)return f.add(d.attr(e.el,"id"),e),this;var j=d.get(e)||d.get("#"+e),k=d.attr(j,"id");!j||j.form!=this.form?h.log("\u5b57\u6bb5"+e+"\u4e0d\u5b58\u5728\u6216\u4e0d\u5c5e\u4e8e\u8be5form"):(k||(k=g.prefix+b.guid(),d.attr(j,"id",k)),f.add(k,new a(j,g)))},remove:function(a){this.fields.remove(a)},get:function(a){return this.fields.get(a)},isValid:function(a){var b=this.fields;if(a&&b.get(a))return b.get(a).isValid();var d=!0;b.each(function(a,b){if(!b.isValid()&&(d=!1,b.single))return!1});return d},submit:function(){this.fire("submit",
this.fields)&&this.isValid()&&this.form.submit()}});b.mix(l,{Util:h,Define:j,Field:a,Warn:g,Rule:f});return l},{requires:"dom,event,./utils,./define,./field,./warn,./rule".split(",")});KISSY.add("validation/define",function(){return{Config:{attrname:"data-valid",prefix:"auth-f",defaultwarn:"alert"},Const:{enumvalidsign:{error:0,ok:1,hint:2,ignore:3}}}});
KISSY.add("validation/field",function(b,d,k,h,j,a,g,f){function l(a,c){(a=b.get(a))?(this.el=a,this.rule=new h.storage,this._init(c)):h.log("\u5b57\u6bb5\u4e0d\u5b58\u5728\u3002")}var e=j.Const.enumvalidsign,c=document;l.Config={required:[!0,"\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\u3002"],initerror:"data-showerror"};b.augment(l,{_init:function(a){a=b.merge(l.Config,a||{});b.mix(this,a,"label");this._initField();this._initVType(a);this._initWarn(a);d.attr(this.el,a.initerror)&&this.showMessage(!1,d.attr(this.el,a.initerror))},_initField:function(){var a=this.el;if(-1<
"checkbox,radio".indexOf(d.attr(a,"type"))){var e=a.form,a=d.attr(a,"name"),f=[];b.each(c.getElementsByName(a),function(a){a.form==e&&f.push(a)});this.el=f}},_initVType:function(a){var c=this,e=c.el,d;for(d in a)c.addRule(d,a[d]);if(a.remote){var a=b.isArray(a.remote)?{url:a.remote[0]}:a.remote,f=new g(e,a,function(a,b){c.showMessage(a,b)});c.addRule("ajax",function(a){return f.check(a)})}},_initWarn:function(a){var c=this,e,d={};a.warn&&(e=b.isFunction(a.warn)?a.warn:f.get(a.warn),d=b.merge(a,{}));
a.style&&f.getStyle(a.style)&&(d=f.getStyle(a.style),e=f.get(d.core),d=b.merge(a,d));e?(e=new e(c.el,d),e._bindEvent(c.el,a.event||e.event,function(){var a=c._validateValue();b.isArray(a)&&a.length==2&&c.showMessage(a[1],a[0])}),b.mix(c,{warn:e,single:e.single})):h.log("\u63d0\u793a\u4fe1\u606f\u7c7b\u914d\u7f6e\u9519\u8bef.")},_validateValue:function(){var a=this.rule,b=this._getValue(),a=a.getAll();if(d.attr(this.el,"disabled")||d.hasClass(this.el,"disabled")||a.depend&&!0!==a.depend.call(this,b))return[void 0,e.ignore];for(var c in a){if("required"==
c){var f=a.required.call(this,b);if(f)return this.label?[this.label,e.hint]:[f,e.error];if(h.isEmpty(b))return["",e.ignore]}if(!(-1<"depend".indexOf(c))){if(-1<"ajax".indexOf(c))break;f=a[c].call(this,b);if(!h.isEmpty(f))return this._ajaxtimer&&this._ajaxtimer.cancel(),[f,e.error]}}return a.ajax?a.ajax.call(this,b):[this.okMsg||"OK",e.ok]},_getValue:function(){var a=this.el,c=[];switch(d.attr(a,"type")){case "select-multiple":b.each(a.options,function(a){a.selected&&c.push(a.value)});break;case "radio":case "checkbox":b.each(a,
function(a){a.checked&&c.push(a.value)});break;default:c=d.val(a)}return c},addRule:function(c,e){var d=this.rule;if(b.isFunction(c))return d.add(b.guid(),c),this;var f=a.get(c,e);if(f)return d.add(c,f),this},removeRule:function(a){this.rule.remove(a)},showMessage:function(a,b,c){this.warn.showMessage(a,b,c)},isValid:function(){var a=this._validateValue();this.showMessage(a[1],a[0]);return 0!=a[1]}});return l},{requires:"dom,event,./utils,./define,./rule,./rule/remote,./warn".split(",")});
KISSY.add("validation/rule",function(b,d,k){return k},{requires:["./utils","./rule/base","./rule/normal"]});
KISSY.add("validation/rule/base",function(b,d,k,h){return new function(){var d=new h.storage;this.add=function(a,g,f){b.isFunction(f)&&d.add(a,{name:a,fun:f,text:g})};this.get=function(a,g){var f=d.get(a);if(!f)return null;var h=f.fun,f=f.text,e=h.length-1,c=[];g?b.isArray(g)?g.length>=e?(c.push(g[g.length-1]),c=c.concat(g.slice(0,-1))):(c.push(f),c=c.concat(g)):0<e?(c.push(f),c.push(g)):c.push(f):c=[f];return function(a){return h.apply(this,[a].concat(c))}};this.toString=function(a,b){var f=d.get(a);
if(f)return h.format(b||"\u3010\u89c4\u5219\u540d\u3011\n {0}\n\n\u3010\u9ed8\u8ba4\u63d0\u793a\u4fe1\u606f\u3011\n {1}\n\n\u3010\u51fd\u6570\u4f53\u3011\n {2}",f.name,f.text,f.fun.toString())}}},{requires:["dom","event","../utils"]});
KISSY.add("validation/rule/normal",function(b,d,k,h,j){j.add("func","\u6821\u9a8c\u5931\u8d25\u3002",function(a,b,d){a=d.call(this,a);if(!1===a)return b;if(!h.isEmpty(a))return a});j.add("regex","\u6821\u9a8c\u5931\u8d25\u3002",function(a,b,d){if(!RegExp(d).test(a))return b});j.add("depend","\u8be5\u5b57\u6bb5\u65e0\u9700\u6821\u9a8c",function(a,b,d){return d.call(this,a)});j.add("ajax","\u6821\u9a8c\u5931\u8d25\u3002",function(a,b,d){return d.call(this,a)});j.add("required","\u6b64\u9879\u4e3a\u5fc5\u586b\u9879\u3002",function(a,d,f){if(b.isArray(a)&&0==a.length||h.isEmpty(a)&&f)return d});j.add("equalTo","\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\u3002",function(a,g,f){if(a!==
d.val(b.get(f)))return g});j.add("length","\u5b57\u7b26\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e{0},\u4e14\u4e0d\u80fd\u5927\u4e8e{1}",function(a,b,d,j,e){a=h.getStrLen(a,e);d=h.toNumber(d);j=h.toNumber(j);if(!(a>=d&&a<=j))return h.format(b,d,j)});j.add("minLength","\u4e0d\u80fd\u5c0f\u4e8e{0}\u4e2a\u5b57\u7b26\u3002",function(a,b,d,j){a=h.getStrLen(a,j);d=h.toNumber(d);if(a<d)return h.format(b,d)});j.add("maxLength","\u4e0d\u80fd\u5927\u4e8e{0}\u4e2a\u5b57\u7b26\u3002",function(a,b,d,j){a=h.getStrLen(a,j);d=h.toNumber(d);if(a>d)return h.format(b,d)});j.add("fiter","\u5141\u8bb8\u7684\u683c\u5f0f{0}\u3002",function(a,b,d){if(!RegExp("^.+.(?=EXT)(EXT)$".replace(/EXT/g,d.split(/\s*,\s*/).join("|")),
"gi").test(a))return h.format(b,d)});j.add("range","\u53ea\u80fd\u5728{0}\u81f3{1}\u4e4b\u95f4\u3002",function(a,b,d,j){d=h.toNumber(d);j=h.toNumber(j);if(a<d||a>j)return h.format(b,d,j)});j.add("group","\u53ea\u80fd\u5728{0}\u81f3{1}\u4e4b\u95f4\u3002",function(a,d,f,j){if(b.isArray(a)&&(a=a.length,!(a>=f&&a<=j)))return h.format(d,f,j)});j.add("trim","\u4e24\u7aef\u4e0d\u80fd\u542b\u6709\u7a7a\u683c\u3002",function(a,b){if(/(^\s+)|(\s+$)/g.test(a))return b});j.add("ltrim","\u5b57\u7b26\u4e32\u6700\u524d\u9762\u4e0d\u80fd\u5305\u542b\u7a7a\u683c",function(a,b){if(/^\s+/g.test(a))return b});j.add("rtrim","\u5b57\u7b26\u4e32\u672b\u5c3e\u4e0d\u80fd\u5305\u542b\u7a7a\u683c",function(a,b){if(/\s+$/g.test(a))return b});j.add("card",
"\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u6b63\u786e",function(a,b){var d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],h=0;for(i=0;17>i;i++)h+=parseInt(a.charAt(i))*d[i];d=(12-h%11)%11;10==d&&(d="x");if(a.charAt(17).toLowerCase()!=d)return b});b.each([["chinese",/^[\u0391-\uFFE5]+$/,"\u53ea\u80fd\u8f93\u5165\u4e2d\u6587"],["english",/^[A-Za-z]+$/,"\u53ea\u80fd\u8f93\u5165\u82f1\u6587\u5b57\u6bcd"],["currency",/^\d+(\.\d+)?$/,"\u91d1\u989d\u683c\u5f0f\u4e0d\u6b63\u786e\u3002"],["phone",/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/,"\u7535\u8bdd\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e\u3002"],["mobile",/^((\(\d{2,3}\))|(\d{3}\-))?13\d{9}$/,"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e\u3002"],["url",/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]':+!]*([^<>""])*$/,
"url\u683c\u5f0f\u4e0d\u6b63\u786e\u3002"],["email",/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684email\u683c\u5f0f"]],function(a){j.add(a[0],a[2],function(b,d){if(!RegExp(a[1]).test(b))return d})})},{requires:["dom","event","../utils","./base"]});
KISSY.add("validation/rule/remote",function(b,d,k,h){return function(j,a,g){function f(d){return function(f,h,j){f&&(!0===f.state||!1===f.state)?(g(f.state,f.message),f.state&&c.add(d,{est:f.state,msg:f.message})):g(0,"failure");b.isFunction(a.success)&&a.success.call(this,f,h,j);e=null}}var k=null,e=null,c=new h.storage,m=d.attr(j,"name"),n={loading:"loading",type:"POST",dataType:"json",data:{}};b.mix(n,a);n.error=function(c,d,e){b.isFunction(a.error)&&a.success.call(this,c,d,e)};this.check=function(a){var d=
c.get(a);if(d)return[d.msg,d.est];k&&k.cancel();k=b.later(function(){e&&e.abort();n.data[m]=a;n.success=f(a);e=b.io(n)},500);return[n.loading,0]}}},{requires:["dom","event","../utils"]});
KISSY.add("validation/utils",function(b,d){var k={log:b.log,toJSON:function(b){try{eval("var result="+b)}catch(d){return{}}return result},isEmpty:function(b){return null===b||b===d||""===b},format:function(b){var d=Array.prototype.slice.call(arguments,1);return b.replace(/\{(\d+)\}/g,function(a,b){return d[b]})},toNumber:function(b){b=new String(b);b=-1<b.indexOf(".")?parseFloat(b):parseInt(b);return isNaN(b)?0:b},getStrLen:function(b,d){return d?b.replace(/[^\x00-\xFF]/g,"**").length:b.length},storage:function(){this.cache=
{}}};b.augment(k.storage,{add:function(b,d,a){var g=this.cache;if(!g[b]||g[b]&&(null==a||a))g[b]=d},remove:function(b){var d=this.cache;d[b]&&delete d[b]},get:function(b){var d=this.cache;return d[b]?d[b]:null},getAll:function(){return this.cache},each:function(b){var d=this.cache,a;for(a in d)if(!1===b.call(this,a,d[a]))break}});return k});KISSY.add("validation/warn",function(b,d,k,h,j,a,g){k.extend("Alert",j);k.extend("Static",a);k.extend("Float",g);k.BaseClass=h;return k},{requires:"./utils,./warn/base,./warn/baseclass,./warn/alert,./warn/static,./warn/float".split(",")});
KISSY.add("validation/warn/alert",function(b,d,k,h,j){var a=j.Const.enumvalidsign;return function(){return{init:function(){this.single=!0},showMessage:function(b,f){if(b==a.error)return this.invalidClass&&d.addClass(this.target,this.invalidClass),alert(f),this.target.focus(),!1;this.invalidClass&&d.removeClass(this.target,this.invalidClass)},style:{alert:{invalidClass:"vailInvalid"}}}}},{requires:["dom","event","../utils","../define"]});
KISSY.add("validation/warn/base",function(b,d,k,h,j){var a=new h.storage,g=new h.storage;return{extend:function(d,g){var e=function(a,b){e.superclass.constructor.call(this,a,b)},c=b.isFunction(g)?g():g;if(c.style){for(var h in c.style)this.addStyle(h,b.merge(c.style[h],{core:d}));delete c.style}b.extend(e,j,c);a.add(d,e);return e},addStyle:function(a,b){g.add(a,b)},getStyle:function(a){return g.get(a)},get:function(b){return a.get(b)}}},{requires:["dom","event","../utils","./baseclass"]});
KISSY.add("validation/warn/baseclass",function(b,d,k){function h(d,a){this.target=b.isArray(d)?d[d.length-1]:d;this.el=d;this.single=!1;b.mix(this,a||{});this.init()}b.augment(h,b.EventTarget,{init:function(){},_bindEvent:function(h,a,g){if("select"==b.get(h).tagName.toLowerCase())k.on(h,"change",g);else switch((d.attr(h,"type")||"input").toLowerCase()){case "radio":case "checkbox":k.on(h,"click",g);break;case "file":k.on(h,"change",g);break;default:k.on(h,a,g)}},showMessage:function(){evttype=1}});
return h},{requires:["dom","event"]});
KISSY.add("validation/warn/float",function(b,d,k,h,j){var a=j.Const.enumvalidsign;return function(){return{invalidCls:"J_Invalid",init:function(){var a=this,f=a.target,h=d.create(a.template),e=d.get("div.msg",h);b.ready(function(){document.body.appendChild(h)});b.mix(a,{panel:b.one(h),msg:b.one(e)});k.on(a.el,"focus",function(b){d.hasClass(f,a.invalidCls)&&a._toggleError(!0,b.target)});k.on(a.el,"blur",function(){a._toggleError(!1)})},showMessage:function(b,f,h,e){var c=this.target,j=this.msg;a.ok==
b?(d.removeClass(c,this.invalidClass),j.html("OK")):("submit"!=h&&this._toggleError(!0,e),d.addClass(c,this.invalidClass),j.html(f))},_pos:function(a){var a=d.offset(a||this.target),b=this.panel.height(),b=a.top-b-20;this.panel.css("left",a.left-10).css("top",b)},_toggleError:function(a,b){var h=this.panel;a?(d.show(h),this._pos(b)):d.hide(h)},style:{"float":{template:'<div class="valid-float" style="display:none;"><div class="msg">&nbsp;</div><s>\u25e5\u25e4</s></div>',event:"focus blur",invalidClass:"vailInvalid"}}}}},
{requires:["dom","event","../utils","../define"]});
KISSY.add("validation/warn/static",function(b,d,k,h){var j=h.Const.enumvalidsign,a=d.all;return function(){return{init:function(){var b=a(this.target);if(b=b.attr("data-message")?a(b.attr("data-messagebox")):this.messagebox?a(this.messagebox):d(this.template).appendTo(b.parent()))this.panel=b,this.panelheight=b.css("height"),this.estate=b.one(".estate"),this.label=b.one(".label"),this.estate&&this.label&&b.hide()},showMessage:function(d,f){var h=a(this.el),e=this.panel,c=this.estate,k=this.label,
n=b.isNumber(this.anim)?this.anim:0.1;this.invalidClass&&(d==j.ignore&&d==j.ok?h.removeClass(this.invalidClass):h.addClass(this.invalidClass));var h="none"==e.css("display")?!1:!0,o=this.panelheight;d==j.ignore?h&&e.slideUp(n):(c.removeClass("ok tip error"),d==j.error?(c.addClass("error"),k.html(f),h||e.height(o).slideDown(n)):d==j.ok?!1===this.isok?h&&e.slideUp(n):(h||e.height(o).slideDown(n),c.addClass("ok"),k.html(this.oktext?this.oktext:f)):d==j.hint&&(c.addClass("tip"),k.html(f),h||e.height(o).slideDown(n)))},
style:{text:{template:'<label class="valid-text"><span class="estate"><em class="label"></em></span></label>',event:"focus blur keyup"},under:{template:'<div class="valid-under"><p class="estate"><span class="label"></span></p></div>',event:"focus blur keyup"}}}}},{requires:["node","../utils","../define"]});KISSY.add("validation",function(b,d){return b.Validation=d},{requires:["validation/base","validation/assets/base.css"]});KISSY.add("mvc/base",function(b,d){return{sync:d}},{requires:["./sync"]});
KISSY.add("mvc/collection",function(b,d,k,h,j){function a(){a.superclass.constructor.apply(this,arguments)}a.ATTRS={model:{value:k},models:{setter:function(a){this.remove(this.get("models"),{silent:1});this.add(a,{silent:1});return this.get("models")},value:[]},url:{value:b.noop},comparator:{},sync:{value:function(){h.sync.apply(this,arguments)}},parse:{value:function(a){return a}}};b.extend(a,j,{sort:function(){var a=this.get("comparator");a&&this.get("models").sort(function(b,d){return a(b)-a(d)})},
toJSON:function(){return b.map(this.get("models"),function(a){return a.toJSON()})},add:function(a,d){var h=this,e=!0;if(b.isArray(a)){var c=[].concat(a);b.each(c,function(a){a=h._add(a,d);e=e&&a})}else e=h._add(a,d);return e},remove:function(a,d){var h=this;if(b.isArray(a)){var e=[].concat(a);b.each(e,function(a){h._remove(a,d)})}else a&&h._remove(a,d)},at:function(a){return this.get("models")[a]},_normModel:function(a){var b=!0;a instanceof k||(b=a,a=new (this.get("model")),b=a.set(b,{silent:1}));
return b&&a},load:function(a){var b=this,a=a||{},d=a.success;a.success=function(e){if(e){var c=b.get("parse").call(b,e);c&&b.set("models",c,a)}d&&d.apply(this,arguments)};b.get("sync").call(b,b,"read",a);return b},create:function(a,b){var d=this,b=b||{};if(a=this._normModel(a)){a.addToCollection(d);var e=b.success;b.success=function(){d.add(a,b);e&&e()};a.save(b)}return a},_add:function(a,b){if(a=this._normModel(a)){var b=b||{},d=this.get("models"),e=this.get("comparator"),c=d.length;if(e)for(var h=
e(a),c=0;c<d.length;c++){var j=e(d[c]);if(h<j)break}this.get("models").splice(c,0,a);a.addToCollection(this);b.silent||this.fire("add",{model:a})}return a},_remove:function(a,d){var d=d||{},h=b.indexOf(a,this.get("models"));-1!=h&&(this.get("models").splice(h,1),a.removeFromCollection(this));d.silent||this.fire("remove",{model:a})},getById:function(a){for(var b=this.get("models"),d=0;d<b.length;d++){var e=b[d];if(e.getId()===a)return e}return null},getByCid:function(a){for(var b=this.get("models"),
d=0;d<b.length;d++){var e=b[d];if(e.get("clientId")===a)return e}return null}});return a},{requires:["event","./model","./base","base"]});
KISSY.add("mvc/model",function(b,d,k){function h(){h.superclass.constructor.apply(this,arguments);this.publish("*Change",{bubbles:1});this.collections={}}var j="idAttribute,clientId,urlRoot,url,parse,sync".split(",");b.extend(h,d,{addToCollection:function(a){this.collections[b.stamp(a)]=a;this.addTarget(a)},removeFromCollection:function(a){delete this.collections[b.stamp(a)];this.removeTarget(a)},getId:function(){return this.get(this.get("idAttribute"))},setId:function(a){return this.set(this.get("idAttribute"),
a)},__set:function(){this.__isModified=1;return h.superclass.__set.apply(this,arguments)},isNew:function(){return!this.getId()},isModified:function(){return!(!this.isNew()&&!this.__isModified)},destroy:function(a){var b=this,a=a||{},d=a.success;a.success=function(h){var e=b.collections;if(h){var c=b.get("parse").call(b,h);c&&b.set(c,a)}for(var j in e)e[j].remove(b,a),b.removeFromCollection(e[j]);b.fire("destroy");d&&d.apply(this,arguments)};!b.isNew()&&a["delete"]?b.get("sync").call(b,b,"delete",
a):(a.success(),a.complete&&a.complete());return b},load:function(a){var b=this,a=a||{},d=a.success;a.success=function(h){if(h){var e=b.get("parse").call(b,h);e&&b.set(e,a)}b.__isModified=0;d&&d.apply(this,arguments)};b.get("sync").call(b,b,"read",a);return b},save:function(a){var b=this,a=a||{},d=a.success;a.success=function(h){if(h){var e=b.get("parse").call(b,h);e&&b.set(e,a)}b.__isModified=0;d&&d.apply(this,arguments)};b.get("sync").call(b,b,b.isNew()?"create":"update",a);return b},toJSON:function(){var a=
this.getAttrVals();b.each(j,function(b){delete a[b]});return a}},{ATTRS:{idAttribute:{value:"id"},clientId:{valueFn:function(){return b.guid("mvc-client")}},url:{value:function(){var a,d,f=this.collections;for(a in f)if(f.hasOwnProperty(a)){d=f[a];break}a=d;var h;a=(a&&(h=a.get("url"))?b.isString(h)?h:h.call(a):h)||this.get("urlRoot");if(this.isNew())return a;a+="/"==a.charAt(a.length-1)?"":"/";return a+encodeURIComponent(this.getId())+"/"}},urlRoot:{value:""},sync:{value:function(){k.sync.apply(this,
arguments)}},parse:{value:function(a){return a}}}});return h},{requires:["base","./base"]});
KISSY.add("mvc/router",function(b,d,k){function h(a){var b,c;for(c=0;c<a.length;c++)if(b=a.charAt(c),"\\"==b)c++;else if("("==b)return c;throw Error("impossible to not to get capture group in kissy mvc route");}function j(){return n.nativeHistory&&v?u.pathname.substr(n.urlRoot.length)+u.search:u.href.replace(/^[^#]*#?!?(.*)$/,"$1")}function a(a){b.endsWith(a,"/")&&(a=a.substring(0,a.length-1));return a}function g(a){b.startsWith(a,"/")&&(a=a.substring(1));return a}function f(b,c){b=a(b);c=a(c);return b==
c}function l(a){var c,d={};return(c=a.match(o))?b.unparam(c[1]):d}function e(){var a=j(),b=a,c=0,d=-1,e="",f=-1,g=0,k=0,a=b.replace(o,"");q(s,function(b){var j=0;q(b[w],function(l){var m=l.regStr,n=l.paramNames,o=-1,p,r=l.callback;if(p=a.match(l.reg)){p.shift();var s=function(){if(n){var a={};q(p,function(b,c){a[n[c]]=b});return a}return[].concat(p)},l=function(){e=m;f=o;g=r;k=s();c=b;d=p.length};if(p.length)m?(o=h(m),o>f?l():o==f&&d>=p.length?p.length<d?l():m.length>e.length&&l():c||l()):l();else return l(),
j=1,!1}});if(j)return!1});k&&(b=l(b),g.apply(c,[k,b]),b={name:name,paths:k,query:b},c.fire("route:"+name,b),c.fire("route",b))}function c(a,c,d){var e=c,f=[];return b.isFunction(d)?(c=b.escapeRegExp(c),c=c.replace(p,function(a,b,c,d,e){f.push(c||e);if(c)return"([^/]+)";if(e)return"(.*)"}),{name:e,paramNames:f,reg:RegExp("^"+c+"$"),regStr:c,callback:d}):{name:e,reg:d.reg,callback:!b.isFunction(d.callback)&&b.isString(d.callback)?a[d.callback]:d.callback}}function m(a){this[w]={};this.addRoutes(a.newVal)}
function n(){n.superclass.constructor.apply(this,arguments);this.on("afterRoutesChange",m,this);m.call(this,{newVal:this.get("routes")});s.push(this)}var o=/\?(.*)/,q=b.each,p=/(:([\w\d]+))|(\\\*([\w\d]+))/g,s=[],r=window,u=r.location,t=r.history,v=!(!t||!t.pushState),w="__routerMap";n.ATTRS={routes:{}};b.extend(n,k,{addRoutes:function(a){var d=this;q(a,function(a,e){d[w][e]=c(d,e,!b.isFunction(a)&&b.isString(a)?d[a]:a)})}},{navigate:function(b,c){j()!==b?n.nativeHistory&&v?(t.pushState({},"",u.protocol+
"//"+u.host+a(n.urlRoot)+("/"+g(b))),e()):u.hash="!"+b:c&&c.triggerRoute&&e()},start:function(c){c=c||{};c.urlRoot=c.urlRoot||"";var h,k=c.nativeHistory,l=u.pathname,m=j(),o=u.hash.match(/#!.+/);h=n.urlRoot=c.urlRoot;if(n.nativeHistory=k)if(v)o&&(f(l,h)?(t.replaceState({},"",u.protocol+"//"+u.host+a(n.urlRoot)+("/"+g(m))),c.triggerRoute=1):b.error("location path must be same with urlRoot!"));else if(!f(l,h)){u.replace(a(h)+"/#!"+m);return}setTimeout(function(){if(k&&v)d.on(r,"popstate",e);else d.on(r,
"hashchange",e),c.triggerRoute=1;c.triggerRoute&&e();c.success&&c.success()},100)}});return n},{requires:["event","base"]});KISSY.add("mvc/sync",function(b,d,k){var h={create:"POST",update:"POST","delete":"POST",read:"GET"};return function(j,a,g){var g=b.merge({type:h[a],dataType:"json"},g),f=g.data=g.data||{};f._method=a;g.url||(g.url=b.isString(j.get("url"))?j.get("url"):j.get("url").call(j));if("create"==a||"update"==a)f.model=k.stringify(j.toJSON());return d(g)}},{requires:["ajax","json"]});
KISSY.add("mvc/view",function(b,d,k){function h(){h.superclass.constructor.apply(this,arguments);var a;(a=this.get("events"))&&this._afterEventsChange({newVal:a})}var j=d.all;h.ATTRS={el:{value:"<div />",getter:function(a){b.isString(a)&&(a=j(a),this.__set("el",a));return a}},events:{}};b.extend(h,k,{_afterEventsChange:function(a){var b=a.prevVal;b&&this._removeEvents(b);this._addEvents(a.newVal)},_removeEvents:function(a){var d=this.get("el"),f;for(f in a){var h=a[f],e;for(e in h){var c=b.isString(h[e])?
this[h[e]]:h[e];d.undelegate(e,f,c,this)}}},_addEvents:function(a){var d=this.get("el"),f;for(f in a){var h=a[f],e;for(e in h){var c=b.isString(h[e])?this[h[e]]:h[e];d.delegate(e,f,c,this)}}},render:function(){return this},destroy:function(){this.get("el").remove()}});return h},{requires:["node","base"]});KISSY.add("mvc",function(b,d,k,h,j,a){return b.mix(d,{Model:k,View:j,Collection:h,Router:a})},{requires:["mvc/base","mvc/model","mvc/collection","mvc/view","mvc/router"]});
