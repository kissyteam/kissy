/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable",function(d){function g(c,b){b=b||{};if(!("markupType"in b))if(b.panelCls)b.markupType=1;else if(b.panels)b.markupType=2;for(var e=this.constructor;e;){b=d.merge(e.Config,b);e=e.superclass?e.superclass.constructor:null}this.container=j.get(c);this.config=b;this.activeIndex=this.completedIndex=b.activeIndex;if(!(this.activeIndex>-1))if(typeof b.switchTo!="number")this.completedIndex=this.activeIndex=0;this._init();this._initPlugins();this.fire(p);this.activeIndex>-1||typeof b.switchTo==
"number"&&this.switchTo(b.switchTo)}function n(c){var b={};b.type=c.originalEvent.type;b.target=c.originalEvent.target||c.originalEvent.srcElement;return{originalEvent:b}}var j=d.DOM,o=d.Event,u=d.EventTarget,p="init";g.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};
g.getDomEvent=n;g.Plugins=[];d.augment(g,u,{_initPlugins:function(){for(var c=this,b=c.constructor;b;){d.each(b.Plugins,function(e){e.init&&e.init(c)});b=b.superclass?b.superclass.constructor:null}},_init:function(){var c=this.config;this._parseMarkup();c.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var c=this.container,b=this.config,e,i,f=[],k=[];switch(b.markupType){case 0:if(e=j.get("."+b.navCls,c))f=j.children(e);i=j.get("."+b.contentCls,c);k=j.children(i);break;case 1:f=j.query("."+
b.triggerCls,c);k=j.query("."+b.panelCls,c);break;case 2:f=b.triggers;k=b.panels}c=k.length;this.length=c/b.steps;if(b.hasTriggers&&c>0&&f.length===0)f=this._generateTriggersMarkup(this.length);this.triggers=d.makeArray(f);this.panels=d.makeArray(k);this.content=i||k[0].parentNode;this.nav=e||b.hasTriggers&&f[0].parentNode},_generateTriggersMarkup:function(c){var b=this.config,e=j.create("<ul>"),i,f;e.className=b.navCls;for(f=0;f<c;f++){i=j.create("<li>");if(f===this.activeIndex)i.className=b.activeTriggerCls;
i.innerHTML=f+1;e.appendChild(i)}this.container.appendChild(e);return j.children(e)},_bindTriggers:function(){var c=this,b=c.config,e=c.triggers,i,f,k=e.length;for(f=0;f<k;f++)(function(q){i=e[q];o.on(i,"click",function(x){c._onFocusTrigger(q,x)});if(b.triggerType==="mouse"){o.on(i,"mouseenter",function(x){c._onMouseEnterTrigger(q,x)});o.on(i,"mouseleave",function(){c._onMouseLeaveTrigger(q)})}})(f)},_onFocusTrigger:function(c,b){if(this._triggerIsValid(c)){this._cancelSwitchTimer();this.switchTo(c,
undefined,n(b))}},_onMouseEnterTrigger:function(c,b){var e=this;if(e._triggerIsValid(c)){var i=n(b);e.switchTimer=d.later(function(){e.switchTo(c,undefined,i)},e.config.delay*1E3)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(c){return this.activeIndex!==c},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=undefined}},switchTo:function(c,b,e,i){var f=this,k=f.config,q=f.triggers,x=f.panels,y=f.activeIndex,r=k.steps,
s=y*r,B=c*r;if(!f._triggerIsValid(c))return f;if(f.fire("beforeSwitch",{toIndex:c})===false)return f;if(k.hasTriggers)f._switchTrigger(y>-1?q[y]:null,q[c]);if(b===undefined)b=c>y?"forward":"backward";f._switchView(y>-1?x.slice(s,s+r):null,x.slice(B,B+r),c,b,e,function(){i&&i.call(f,c);f.completedIndex=c});f.activeIndex=c;return f},_switchTrigger:function(c,b){var e=this.config.activeTriggerCls;c&&j.removeClass(c,e);j.addClass(b,e)},_switchView:function(c,b,e,i,f,k){c&&j.css(c,"display","none");j.css(b,
"display","block");this._fireOnSwitch(e,f);k&&k.call(this)},_fireOnSwitch:function(c,b){this.fire("switch",d.mix(b||{},{currentIndex:c}))},prev:function(c){var b=this.activeIndex;this.switchTo(b>0?b-1:this.length-1,"backward",c)},next:function(c){var b=this.activeIndex;this.switchTo(b<this.length-1?b+1:0,"forward",c)}});return d.Switchable=g});
KISSY.add("switchable/aria",function(d,g,n,j){function o(){this.stop&&this.stop()}function u(){this.start&&this.start()}g=d.DOM;n=d.Event;j=d.Switchable;var p=!document.documentElement.hasAttribute?function(b,e){e=e.toLowerCase();var i=g.get(b).getAttributeNode(e);return!!(i&&i.specified)}:function(b,e){e=e.toLowerCase();return g.get(b).hasAttribute(e)};j.Plugins.push({name:"aria",init:function(b){if(b.config.aria){var e=b.container;n.on(e,"focusin",o,b);n.on(e,"focusout",u,b)}}});var c=["a","input",
"button","object"];j.Aria={setTabIndex:function(b,e){b.tabIndex=e;g.query("*",b).each(function(i){var f=i.nodeName.toLowerCase();if(d.inArray(f,c)){p(i,"oriTabIndex")||g.attr(i,"oriTabIndex",i.tabIndex);i.tabIndex=e!=-1?g.attr(i,"oriTabIndex"):e}})}}});
KISSY.add("switchable/accordion/base",function(d,g,n){function j(o,u){if(!(this instanceof j))return new j(o,u);j.superclass.constructor.apply(this,arguments);return 0}n=d.Switchable;g=d.DOM;d.extend(j,n,{_switchTrigger:function(o,u){var p=this.config;p.multiple?g.toggleClass(u,p.activeTriggerCls):j.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(o){return j.superclass._triggerIsValid.call(this,o)||this.config.multiple},_switchView:function(o,u,p,c,b,e){var i=u[0];if(this.config.multiple){g.toggle(i);
this._fireOnSwitch(p,b);e.call(this)}else j.superclass._switchView.apply(this,arguments)}});j.Plugins=[];j.Config={markupType:1,triggerType:"click",multiple:false};return d.Accordion=j});
KISSY.add("switchable/accordion/aria",function(d,g,n){function j(h){var v;d.each(this.triggers,function(A){if(A==h||k.contains(A,h))v=A});return v}function o(h){switch(h.keyCode){case q:case x:h.ctrlKey&&!h.altKey&&!h.shiftKey&&h.halt();break;case a:h.ctrlKey&&!h.altKey&&h.halt()}}function u(h){var v=h.target,A=this.triggers,C=!h.ctrlKey&&!h.shiftKey&&!h.altKey,E=h.ctrlKey&&!h.shiftKey&&!h.altKey;switch(h.keyCode){case z:case t:if(j.call(this,v)&&C){this.switchTo(this.focusIndex);h.halt()}break;case s:case B:if(j.call(this,
v)){c.call(this);h.halt()}break;case m:case l:if(j.call(this,v)){b.call(this);h.halt()}break;case x:if(E){h.halt();b.call(this)}break;case q:if(E){h.halt();c.call(this)}break;case r:if(C){v=this.focusIndex;this.focusIndex=0;p.call(this,v,0,true);h.halt()}break;case y:if(C){v=A.length-1;A=this.focusIndex;this.focusIndex=v;p.call(this,A,v,true);h.halt()}break;case a:if(h.ctrlKey&&!h.altKey){h.halt();h.shiftKey?c.call(this):b.call(this)}}}function p(h,v,A){var C=this.triggers;if(typeof h=="number")var E=
C[h];h=C[v];if(E){w(E,"-1");k.removeClass(E,i);E.setAttribute("aria-selected","false")}A&&h.focus();w(h,"0");k.addClass(h,i);h.setAttribute("aria-selected","true")}function c(){var h=this.triggers,v=this.focusIndex;h=this.focusIndex=v==0?h.length-1:v-1;p.call(this,v,h,true)}function b(){var h=this.focusIndex,v=this.focusIndex=h==this.triggers.length-1?0:h+1;p.call(this,h,v,true)}function e(h){var v=!!(h.originalEvent.target||h.originalEvent.srcElement),A=this.config.multiple,C=this.completedIndex;
h=h.currentIndex;var E=this.triggers[h],F=this.panels[h];if(C>-1){var D=this.triggers[C];C=this.panels[C];w(D,"-1");v&&E.focus();if(!A){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}w(E,"0");v=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",v=="false"?"true":"false");E.setAttribute("aria-expanded",v=="false"?"false":"true");p.call(this,this.focusIndex,h);this.focusIndex=h}g=d.Switchable.Aria;n=d.Accordion;var i="ks-switchable-select",f=d.Event,k=d.DOM,q=
33,x=34,y=35,r=36,s=37,B=38,m=39,l=40,a=9,t=32,z=13;d.mix(n.Config,{aria:false});n.Plugins.push({name:"aria",init:function(h){if(h.config.aria){var v=h.container,A=h.activeIndex;k.attr(v,"aria-multiselectable",h.config.multiple?"true":"false");k.attr(v,"role","tablist");var C=h.triggers,E=h.panels,F=0;d.each(E,function(D){if(!D.id)D.id=d.guid("ks-switchable-tab-panel")});d.each(C,function(D){if(!D.id)D.id=d.guid("ks-switchable-tab")});d.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",
A==F?"true":"false");D.setAttribute("aria-selected",A==F?"true":"false");D.setAttribute("aria-controls",E[F].id);w(D,A==F?"0":"-1");F++});F=0;d.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",A==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});h.on("switch",e,h);if(A>-1)h.focusIndex=A;f.on(v,"keydown",u,h);f.on(v,"keypress",o,h)}}});var w=g.setTabIndex});
KISSY.add("switchable/autoplay",function(d,g,n,j){g=d.Event;n=d.Switchable;d.mix(n.Config,{autoplay:false,interval:5,pauseOnHover:true});n.Plugins.push({name:"autoplay",init:function(o){function u(){b=d.later(function(){o.paused||o.switchTo(o.activeIndex<o.length-1?o.activeIndex+1:0,"forward")},c,true)}var p=o.config,c=p.interval*1E3,b;if(p.autoplay){if(p.pauseOnHover){g.on(o.container,"mouseenter",function(){o.stop()});g.on(o.container,"mouseleave",function(){o.start()})}u();o.stop=function(){if(b){b.cancel();
b=j}o.paused=true};o.start=function(){if(b){b.cancel();b=j}o.paused=false;u()}}}});return n});KISSY.add("switchable/autorender",function(d,g,n,j){g=d.DOM;n=d.JSON;j=d.Switchable;j.autoRender=function(o,u){o="."+(o||"KS_Widget");g.query(o,u).each(function(p){var c=p.getAttribute("data-widget-type"),b;if(c&&"Switchable Tabs Slide Carousel Accordion".indexOf(c)>-1)try{if(b=p.getAttribute("data-widget-config"))b=b.replace(/'/g,'"');new d[c](p,n.parse(b))}catch(e){}})}});
KISSY.add("switchable/carousel/base",function(d,g,n,j,o){function u(c,b){if(!(this instanceof u))return new u(c,b);u.superclass.constructor.apply(this,arguments)}j=d.Switchable;g=d.DOM;n=d.Event;var p={originalEvent:{target:1}};u.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};u.Plugins=[];d.extend(u,j,{_init:function(){var c=this;u.superclass._init.call(c);var b=c.config,e=b.disableBtnCls,i=false;d.each(["prev",
"next"],function(f){var k=c[f+"Btn"]=g.get("."+b[f+"BtnCls"],c.container);k&&n.on(k,"click",function(q){q.preventDefault();i||g.hasClass(k,e)||c[f](p)})});if(!b.circular){c.on("beforeSwitch",function(){i=true});c.on("switch",function(f){f=f.currentIndex;f=f===0?c.prevBtn:f===c.length-1?c.nextBtn:o;g.removeClass([c.prevBtn,c.nextBtn],e);f&&g.addClass(f,e);i=false})}n.on(c.panels,"click",function(){c.fire("itemSelected",{item:this})})}});return d.Carousel=u});
KISSY.add("switchable/carousel/aria",function(d,g,n,j,o){function u(m){var l=m.currentIndex,a=this.completedIndex,t=this.panels,z=t[l*this.config.steps],w=this.triggers;l=w[l];if((m=!!(m.originalEvent.target||m.originalEvent.srcElement))||a==-1){d.each(w,function(h){s(h,-1)});d.each(t,function(h){s(h,-1)});l&&s(l,0);s(z,0);m&&z.focus()}}function p(m){var l;d.each(this.triggers,function(a){if(a==m||g.contains(a,m)){l=a;return false}});return l}function c(m){var l=m.target;switch(m.keyCode){case x:case q:if(l=
p.call(this,l)){l=l;var a=g.next(l),t=this.triggers;a||(a=t[0]);s(l,-1);if(a){s(a,0);a.focus()}m.halt()}break;case k:case f:if(l=p.call(this,l)){l=l;a=g.prev(l);t=this.triggers;a||(a=t[t.length-1]);s(l,-1);if(a){s(a,0);a.focus()}m.halt()}break;case r:case y:if(l=p.call(this,l)){this.switchTo(d.indexOf(l,this.triggers),undefined,B);m.halt()}}}function b(m){var l;d.each(this.panels,function(a){if(a==m||g.contains(a,m)){l=a;return false}});return l}function e(m){var l=d.indexOf(m,this.panels),a=this.config.steps,
t=Math.floor(l/a);if(t==this.activeIndex)return 1;if(l%a==0||l%a==a-1){this.switchTo(t,undefined,undefined,function(){m.focus()});return 0}return 1}function i(m){var l=m.target;switch(m.keyCode){case x:case q:if(l=b.call(this,l)){l=l;var a=g.next(l),t=this.panels;a||(a=t[0]);s(l,-1);s(a,0);e.call(this,a)&&a.focus();m.halt()}break;case k:case f:if(l=b.call(this,l)){l=l;a=g.prev(l);t=this.panels;a||(a=t[t.length-1]);s(l,-1);s(a,0);e.call(this,a)&&a.focus();m.halt()}break;case r:case y:if(l=b.call(this,
l)){this.fire("itemSelected",{item:l});m.halt()}}}g=d.DOM;n=d.Event;j=d.Switchable.Aria;o=d.Carousel;var f=37,k=38,q=39,x=40,y=32,r=13,s=j.setTabIndex,B={originalEvent:{target:1}};d.mix(o.Config,{aria:false});o.Plugins.push({name:"aria",init:function(m){if(m.config.aria){var l=m.triggers,a=m.panels,t=m.content,z=m.activeIndex;if(!t.id)t.id=d.guid("ks-switchbale-content");t.setAttribute("role","listbox");d.each(l,function(w){s(w,z==0?"0":"-1");w.setAttribute("role","button");w.setAttribute("aria-controls",
t.id)});d.each(a,function(w){s(w,-1);w.setAttribute("role","option")});m.on("switch",u,m);(l=m.nav)&&n.on(l,"keydown",c,m);n.on(t,"keydown",i,m);l=m.prevBtn;a=m.nextBtn;if(l){s(l,0);l.setAttribute("role","button");n.on(l,"keydown",function(w){if(w.keyCode==r||w.keyCode==y){m.prev(B);w.preventDefault()}})}if(a){s(a,0);a.setAttribute("role","button");n.on(a,"keydown",function(w){if(w.keyCode==r||w.keyCode==y){m.next(B);w.preventDefault()}})}}}})});
KISSY.add("switchable/effect",function(d,g,n,j,o,u){g=d.DOM;j=d.Anim;o=d.Switchable;var p;d.mix(o.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});o.Effects={none:function(c,b,e){c&&g.css(c,"display","none");g.css(b,"display","block");e()},fade:function(c,b,e){c&&c.length!==1&&d.error("fade effect only supports steps == 1.");var i=this,f=i.config,k=c?c[0]:null,q=b[0];if(i.anim){i.anim.stop();g.css(i.anim.fromEl,{zIndex:1,opacity:0});g.css(i.anim.toEl,{zIndex:9})}g.css(q,"opacity",
1);if(k){i.anim=(new j(k,{opacity:0},f.duration,f.easing,function(){i.anim=u;g.css(q,"z-index",9);g.css(k,"z-index",1);e&&e()},f.nativeAnim)).run();i.anim.toEl=q;i.anim.fromEl=k}else{g.css(q,"z-index",9);e&&e()}},scroll:function(c,b,e,i){var f=this;b=f.config;var k=b.effect==="scrollx",q={};q[k?"left":"top"]=-(f.viewSize[k?0:1]*i)+"px";f.anim&&f.anim.stop();if(c)f.anim=(new j(f.content,q,b.duration,b.easing,function(){f.anim=u;e&&e()},b.nativeAnim)).run();else{g.css(f.content,q);e&&e()}}};p=o.Effects;
p.scrollx=p.scrolly=p.scroll;o.Plugins.push({name:"effect",init:function(c){var b=c.config,e=b.effect,i=c.panels,f=c.content,k=b.steps,q=c.activeIndex,x=i.length;c.viewSize=[b.viewSize[0]||i[0].offsetWidth*k,b.viewSize[1]||i[0].offsetHeight*k];if(e!=="none"){d.each(i,function(B){g.css(B,"display","block")});switch(e){case "scrollx":case "scrolly":g.css(f,"position","absolute");g.css(f.parentNode,"position","relative");if(e==="scrollx"){g.css(i,"float","left");g.width(f,c.viewSize[0]*(x/k))}break;
case "fade":var y=q*k,r=y+k-1,s;d.each(i,function(B,m){s=m>=y&&m<=r;g.css(B,{opacity:s?1:0,position:"absolute",zIndex:s?9:1})})}}}});d.augment(o,{_switchView:function(c,b,e,i,f,k){var q=this,x=q.config.effect;(d.isFunction(x)?x:p[x]).call(q,c,b,function(){q._fireOnSwitch(e,f);k&&k.call(q)},e,i)}});return o});
KISSY.add("switchable/circular",function(d,g,n,j){function o(r,s,B,m,l){var a=this;r=a.config;s=a.length;var t=a.activeIndex,z=r.scrollType===y,w=z?e:i,h=a.viewSize[z?0:1];z=-h*m;var v={},A,C=l===x;if(A=C&&t===0&&m===s-1||l===q&&t===s-1&&m===0)z=u.call(a,a.panels,m,C,w,h);v[w]=z+k;a.anim&&a.anim.stop();a.anim=(new n(a.content,v,r.duration,r.easing,function(){A&&p.call(a,a.panels,m,C,w,h);a.anim=undefined;B()},r.nativeAnim)).run()}function u(r,s,B,m,l){var a=this.config.steps;s=this.length;var t=B?
s-1:0,z=(t+1)*a;for(a=t*a;a<z;a++){g.css(r[a],c,b);g.css(r[a],m,(B?-1:1)*l*s)}return B?l:-l*s}function p(r,s,B,m,l){var a=this.config.steps;s=this.length;var t=B?s-1:0,z=(t+1)*a;for(a=t*a;a<z;a++){g.css(r[a],c,f);g.css(r[a],m,f)}g.css(this.content,m,B?-l*(s-1):f)}g=d.DOM;n=d.Anim;j=d.Switchable;var c="position",b="relative",e="left",i="top",f="",k="px",q="forward",x="backward",y="scrollx";d.mix(j.Config,{circular:false});j.Plugins.push({name:"circular",init:function(r){r=r.config;if(r.circular&&(r.effect===
y||r.effect==="scrolly")){r.scrollType=r.effect;r.effect=o}}})});
KISSY.add("switchable/countdown",function(d,g,n,j,o,u){g=d.DOM;n=d.Event;j=d.Anim;o=d.Switchable;d.mix(o.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});o.Plugins.push({name:"countdown",init:function(p){function c(r){b();y=(new j(k[r],x,f-1)).run()}function b(){if(i){clearTimeout(i);i=null}if(y){y.stop();y=u}}var e=p.config,i,f=e.interval,k=[],q=e.countdownFromStyle,x=e.countdownToStyle,y;if(!(!e.autoplay||!e.hasTriggers||!e.countdown)){d.each(p.triggers,function(r,s){r.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+r.innerHTML+"</div>";k[s]=r.firstChild});if(e.pauseOnHover){n.on(p.container,"mouseenter",function(){b();var r=k[p.activeIndex];if(q)y=(new j(r,q,0.2,"easeOut")).run();else g.removeAttr(r,"style")});n.on(p.container,"mouseleave",function(){b();var r=p.activeIndex;g.removeAttr(k[r],"style");i=setTimeout(function(){c(r)},200)})}p.on("beforeSwitch",function(){b();if(p.activeIndex>-1)g.attr(k[p.activeIndex],"style",
q||"")});p.on("switch",function(r){p.paused||c(r.currentIndex)})}}});return o});
KISSY.add("switchable/lazyload",function(d,g,n){g=d.DOM;n=d.Switchable;var j="beforeSwitch",o="img-src",u="area-data",p={};p[o]="data-ks-lazyload-custom";p[u]="ks-datalazyload-custom";d.mix(n.Config,{lazyDataType:u});n.Plugins.push({name:"lazyload",init:function(c){function b(q){var x=i.steps;q=q.toIndex*x;e.loadCustomLazyData(c.panels.slice(q,q+x),f);a:{var y,r;if(q=(x=f===o)?"img":f===u?"textarea":""){q=g.query(q,c.container);y=0;for(r=q.length;y<r;y++)if(x?g.attr(q[y],k):g.hasClass(q[y],k)){x=
false;break a}}x=true}x&&c.detach(j,b)}var e=d.DataLazyload,i=c.config,f=i.lazyDataType,k=p[f];!e||!f||!k||c.on(j,b)}});return n});KISSY.add("switchable/slide/base",function(d,g){function n(j,o){if(!(this instanceof n))return new n(j,o);n.superclass.constructor.apply(this,arguments);return 0}g=d.Switchable;n.Config={autoplay:true,circular:true};n.Plugins=[];d.extend(n,g);return d.Slide=n});
KISSY.add("switchable/slide/aria",function(d,g,n,j,o){function u(k){switch(k.keyCode){case e:case b:this.next(i);k.halt();break;case c:case p:this.prev(i);k.halt()}}j=d.Switchable;g=d.DOM;n=d.Event;j=j.Aria;o=d.Slide;var p=37,c=38,b=39,e=40;d.mix(o.Config,{aria:false});var i={originalEvent:{target:1}},f=j.setTabIndex;o.Plugins.push({name:"aria",init:function(k){if(k.config.aria){var q=k.panels,x=0,y=k.activeIndex;d.each(k.triggers,function(s){f(s,"-1");x++});x=0;d.each(q,function(s){f(s,y==x?"0":
"-1");g.attr(s,"role","option");x++});var r=k.content;g.attr(r,"role","listbox");n.on(r,"keydown",u,k);f(q[0],0);k.on("switch",function(s){var B=!!(s.originalEvent.target||s.originalEvent.srcElement);s=s.currentIndex;var m=k.completedIndex;m>-1&&f(q[m],-1);f(q[s],0);B&&q[s].focus()})}}})});
KISSY.add("switchable/tabs/base",function(d,g){function n(j,o){if(!(this instanceof n))return new n(j,o);n.superclass.constructor.call(this,j,o);return 0}g=d.Switchable;d.extend(n,g);n.Config={};n.Plugins=[];return d.Tabs=n});
KISSY.add("switchable/tabs/aria",function(d,g,n){function j(a){var t;d.each(this.triggers,function(z){if(z==a||e.contains(z,a))t=z});return t}function o(a){switch(a.keyCode){case i:case f:a.ctrlKey&&!a.altKey&&!a.shiftKey&&a.halt();break;case B:a.ctrlKey&&!a.altKey&&a.halt()}}function u(a){var t=a.target,z=this.triggers,w=!a.ctrlKey&&!a.shiftKey&&!a.altKey,h=a.ctrlKey&&!a.shiftKey&&!a.altKey;switch(a.keyCode){case x:case y:if(j.call(this,t)){this.prev(m(a));a.halt()}break;case r:case s:if(j.call(this,
t)){this.next(m(a));a.halt()}break;case f:if(h){a.halt();this.next(m(a))}break;case i:if(h){a.halt();this.prev(m(a))}break;case q:if(w){this.switchTo(0,undefined,m(a));a.halt()}break;case k:if(w){this.switchTo(z.length-1,undefined,m(a));a.halt()}break;case B:if(a.ctrlKey&&!a.altKey){a.halt();a.shiftKey?this.prev(m(a)):this.next(m(a))}}}function p(a){var t=!!(a.originalEvent.target||a.originalEvent.srcElement),z=this.completedIndex,w=a.currentIndex;if(z!=w){a=this.triggers[z];var h=this.triggers[w];
z=this.panels[z];w=this.panels[w];a&&l(a,"-1");l(h,"0");t&&h.focus();z&&z.setAttribute("aria-hidden","true");w.setAttribute("aria-hidden","false")}}var c=d.Switchable;g=c.Aria;n=d.Tabs;var b=d.Event,e=d.DOM,i=33,f=34,k=35,q=36,x=37,y=38,r=39,s=40,B=9;d.mix(n.Config,{aria:false});var m=c.getDomEvent;n.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var t=a.triggers,z=a.activeIndex,w=a.panels,h=a.container;a.nav&&e.attr(a.nav,"role","tablist");var v=0;d.each(t,function(A){A.setAttribute("role",
"tab");l(A,z==v?"0":"-1");if(!A.id)A.id=d.guid("ks-switchable");v++});v=0;d.each(w,function(A){var C=t[v];A.setAttribute("role","tabpanel");A.setAttribute("aria-hidden",z==v?"false":"true");A.setAttribute("aria-labelledby",C.id);v++});a.on("switch",p,a);b.on(h,"keydown",u,a);b.on(h,"keypress",o,a)}}});var l=g.setTabIndex});
