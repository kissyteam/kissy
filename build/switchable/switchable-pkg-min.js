/*
Copyright 2011, KISSY UI Library v1.1.8dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("switchable",function(b){function h(c,a){a=a||{};if(!("markupType"in a))if(a.panelCls)a.markupType=1;else if(a.panels)a.markupType=2;for(var f=this.constructor;f;){a=b.merge(f.Config,a);f=f.superclass?f.superclass.constructor:null}this.container=j.get(c);this.config=a;this.ingIndex=this.activeIndex=a.activeIndex;this._init();this._initPlugins();this.fire(v);this.activeIndex>-1||typeof a.switchTo=="number"&&this.switchTo(a.switchTo)}var j=b.DOM,p=b.Event,o=b.EventTarget,v="init",m={originalEvent:{target:1}};
h.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",switchTo:0,steps:1,viewSize:[]};h.Plugins=[];b.augment(h,o,{_initPlugins:function(){for(var c=this,a=c.constructor;a;){b.each(a.Plugins,function(f){f.init&&f.init(c)});a=a.superclass?a.superclass.constructor:null}},_init:function(){var c=
this.config;this._parseMarkup();c.hasTriggers&&this._bindTriggers()},_parseMarkup:function(){var c=this.container,a=this.config,f,k,i=[],r=[];switch(a.markupType){case 0:if(f=j.get("."+a.navCls,c))i=j.children(f);k=j.get("."+a.contentCls,c);r=j.children(k);break;case 1:i=j.query("."+a.triggerCls,c);r=j.query("."+a.panelCls,c);break;case 2:i=a.triggers;r=a.panels}c=r.length;this.length=c/a.steps;if(a.hasTriggers&&c>0&&i.length===0)i=this._generateTriggersMarkup(this.length);this.triggers=b.makeArray(i);
this.panels=b.makeArray(r);this.content=k||r[0].parentNode;this.nav=f||a.hasTriggers&&i[0].parentNode},_generateTriggersMarkup:function(c){var a=this.config,f=j.create("<ul>"),k,i;f.className=a.navCls;for(i=0;i<c;i++){k=j.create("<li>");if(i===this.activeIndex)k.className=a.activeTriggerCls;k.innerHTML=i+1;f.appendChild(k)}this.container.appendChild(f);return j.children(f)},_bindTriggers:function(){var c=this,a=c.config,f=c.triggers,k,i,r=f.length;for(i=0;i<r;i++)(function(t){k=f[t];p.on(k,"click",
function(){c._onFocusTrigger(t)});if(a.triggerType==="mouse"){p.on(k,"mouseenter",function(){c._onMouseEnterTrigger(t)});p.on(k,"mouseleave",function(){c._onMouseLeaveTrigger(t)})}})(i)},_onFocusTrigger:function(c){if(this._triggerIsValid(c)){this._cancelSwitchTimer();this.switchTo(c,undefined,m)}},_onMouseEnterTrigger:function(c){var a=this;if(a._triggerIsValid(c))a.switchTimer=b.later(function(){a.switchTo(c,undefined,m)},a.config.delay*1E3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},
_triggerIsValid:function(c){return this.ingIndex!==c},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=undefined}},switchTo:function(c,a,f,k){var i=this,r=i.config,t=i.triggers,x=i.panels,s=i.ingIndex,n=r.steps,q=s*n,y=c*n;if(!i._triggerIsValid(c))return i;if(i.fire("beforeSwitch",{toIndex:c})===false)return i;if(r.hasTriggers)i._switchTrigger(s>-1?t[s]:null,t[c]);if(a===undefined)a=c>s?"forward":"backward";i.ingIndex=c;i._switchView(s>-1?x.slice(q,q+n):
null,x.slice(y,y+n),c,a,f,function(){k&&k.call(i,c);i.activeIndex=c});return i},_switchTrigger:function(c,a){var f=this.config.activeTriggerCls;c&&j.removeClass(c,f);j.addClass(a,f)},_switchView:function(c,a,f,k,i,r){c&&j.css(c,"display","none");j.css(a,"display","block");this._fireOnSwitch(f,i);r&&r.call(this)},_fireOnSwitch:function(c,a){this.fire("switch",b.mix(a||{},{currentIndex:c}))},prev:function(c){var a=this.activeIndex;this.switchTo(a>0?a-1:this.length-1,"backward",c)},next:function(c){var a=
this.activeIndex;this.switchTo(a<this.length-1?a+1:0,"forward",c)}});return b.Switchable=h});
KISSY.add("switchable/aria",function(b,h,j,p){function o(){this.stop&&this.stop()}function v(){this.start&&this.start()}h=b.DOM;j=b.Event;p=b.Switchable;var m=!document.documentElement.hasAttribute?function(a,f){f=f.toLowerCase();var k=h.get(a).getAttributeNode(f);return!!(k&&k.specified)}:function(a,f){f=f.toLowerCase();return h.get(a).hasAttribute(f)};p.Plugins.push({name:"aria",init:function(a){if(a.config.aria){var f=a.container;j.on(f,"focusin",o,a);j.on(f,"focusout",v,a)}}});var c=["a","input",
"button","object"];p.Aria={setTabIndex:function(a,f){a.tabIndex=f;h.query("*",a).each(function(k){var i=k.nodeName.toLowerCase();if(b.inArray(i,c)){m(k,"oriTabIndex")||h.attr(k,"oriTabIndex",k.tabIndex);k.tabIndex=f!=-1?h.attr(k,"oriTabIndex"):f}})}}});
KISSY.add("switchable/accordion/base",function(b,h,j){function p(o,v){if(!(this instanceof p))return new p(o,v);p.superclass.constructor.apply(this,arguments);return 0}j=b.Switchable;h=b.DOM;b.extend(p,j,{_switchTrigger:function(o,v){var m=this.config;m.multiple?h.toggleClass(v,m.activeTriggerCls):p.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(o){return p.superclass._triggerIsValid.call(this,o)||this.config.multiple},_switchView:function(o,v,m,c,a,f){var k=v[0];if(this.config.multiple){h.toggle(k);
this._fireOnSwitch(m,a);f.call(this)}else p.superclass._switchView.apply(this,arguments)}});p.Plugins=[];p.Config={markupType:1,triggerType:"click",multiple:false};return b.Accordion=p});
KISSY.add("switchable/accordion/aria",function(b,h,j){function p(e){var w;b.each(this.triggers,function(B){if(B==e||r.contains(B,e))w=B});return w}function o(e){switch(e.keyCode){case t:case x:e.ctrlKey&&!e.altKey&&!e.shiftKey&&e.halt();break;case g:e.ctrlKey&&!e.altKey&&e.halt()}}function v(e){var w=e.target,B=this.triggers,C=!e.ctrlKey&&!e.shiftKey&&!e.altKey,E=e.ctrlKey&&!e.shiftKey&&!e.altKey;switch(e.keyCode){case z:case u:if(p.call(this,w)&&C){this.switchTo(this.focusIndex);e.halt()}break;case q:case y:if(p.call(this,
w)){c.call(this);e.halt()}break;case l:case d:if(p.call(this,w)){a.call(this);e.halt()}break;case x:if(E){e.halt();a.call(this)}break;case t:if(E){e.halt();c.call(this)}break;case n:if(C){w=this.focusIndex;this.focusIndex=0;m.call(this,w,0,true);e.halt()}break;case s:if(C){w=B.length-1;B=this.focusIndex;this.focusIndex=w;m.call(this,B,w,true);e.halt()}break;case g:if(e.ctrlKey&&!e.altKey){e.halt();e.shiftKey?c.call(this):a.call(this)}}}function m(e,w,B){var C=this.triggers;if(typeof e=="number")var E=
C[e];e=C[w];if(E){A(E,"-1");r.removeClass(E,k);E.setAttribute("aria-selected","false")}B&&e.focus();A(e,"0");r.addClass(e,k);e.setAttribute("aria-selected","true")}function c(){var e=this.triggers,w=this.focusIndex;e=this.focusIndex=w==0?e.length-1:w-1;m.call(this,w,e,true)}function a(){var e=this.focusIndex,w=this.focusIndex=e==this.triggers.length-1?0:e+1;m.call(this,e,w,true)}function f(e){var w=!!e.originalEvent.target,B=this.config.multiple,C=this.activeIndex;e=e.currentIndex;var E=this.triggers[e],
F=this.panels[e];if(C>-1){var D=this.triggers[C];C=this.panels[C];A(D,"-1");w&&E.focus();if(!B){C.setAttribute("aria-hidden","true");D.setAttribute("aria-expanded","false")}}A(E,"0");w=F.getAttribute("aria-hidden");F.setAttribute("aria-hidden",w=="false"?"true":"false");E.setAttribute("aria-expanded",w=="false"?"false":"true");m.call(this,this.focusIndex,e);this.focusIndex=e}h=b.Switchable.Aria;j=b.Accordion;var k="ks-switchable-select",i=b.Event,r=b.DOM,t=33,x=34,s=35,n=36,q=37,y=38,l=39,d=40,g=
9,u=32,z=13;b.mix(j.Config,{aria:true});j.Plugins.push({name:"aria",init:function(e){if(e.config.aria){var w=e.container,B=e.activeIndex;r.attr(w,"aria-multiselectable",e.config.multiple?"true":"false");r.attr(w,"role","tablist");var C=e.triggers,E=e.panels,F=0;b.each(E,function(D){if(!D.id)D.id=b.guid("ks-switchable-tab-panel")});b.each(C,function(D){if(!D.id)D.id=b.guid("ks-switchable-tab")});b.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",B==F?"true":"false");D.setAttribute("aria-selected",
B==F?"true":"false");D.setAttribute("aria-controls",E[F].id);A(D,B==F?"0":"-1");F++});F=0;b.each(E,function(D){var G=C[F];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",B==F?"false":"true");D.setAttribute("aria-labelledby",G.id);F++});e.on("switch",f,e);if(B>-1)e.focusIndex=B;i.on(w,"keydown",v,e);i.on(w,"keypress",o,e)}}});var A=h.setTabIndex});
KISSY.add("switchable/autoplay",function(b,h,j,p){h=b.Event;j=b.Switchable;b.mix(j.Config,{autoplay:false,interval:5,pauseOnHover:true});j.Plugins.push({name:"autoplay",init:function(o){function v(){a=b.later(function(){o.paused||o.switchTo(o.activeIndex<o.length-1?o.activeIndex+1:0,"forward")},c,true)}var m=o.config,c=m.interval*1E3,a;if(m.autoplay){if(m.pauseOnHover){h.on(o.container,"mouseenter",function(){o.stop()});h.on(o.container,"mouseleave",function(){o.start()})}v();o.stop=function(){if(a){a.cancel();
a=p}o.paused=true};o.start=function(){if(a){a.cancel();a=p}o.paused=false;v()}}}});return j});KISSY.add("switchable/autorender",function(b,h,j,p){h=b.DOM;j=b.JSON;p=b.Switchable;p.autoRender=function(o,v){o="."+(o||"KS_Widget");h.query(o,v).each(function(m){var c=m.getAttribute("data-widget-type"),a;if(c&&"Switchable Tabs Slide Carousel Accordion".indexOf(c)>-1)try{if(a=m.getAttribute("data-widget-config"))a=a.replace(/'/g,'"');new b[c](m,j.parse(a))}catch(f){}})}});
KISSY.add("switchable/carousel/base",function(b,h,j,p,o){function v(m,c){if(!(this instanceof v))return new v(m,c);v.superclass.constructor.apply(this,arguments);return 0}p=b.Switchable;h=b.DOM;j=b.Event;v.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};v.Plugins=[];b.extend(v,p,{_init:function(){var m=this;v.superclass._init.call(m);var c=m.config,a=c.disableBtnCls,f=false;b.each(["prev","next"],function(k){var i=
m[k+"Btn"]=h.get("."+c[k+"BtnCls"],m.container);i&&j.on(i,"click",function(r){r.preventDefault();f||h.hasClass(i,a)||m[k]()})});if(!c.circular){m.on("beforeSwitch",function(){f=true});m.on("switch",function(k){k=k.currentIndex;k=k===0?m.prevBtn:k===m.length-1?m.nextBtn:o;h.removeClass([m.prevBtn,m.nextBtn],a);k&&h.addClass(k,a);f=false})}j.on(m.panels,"click",function(){m.fire("itemSelected",{item:this})})}});return b.Carousel=v});
KISSY.add("switchable/carousel/aria",function(b,h,j,p,o){function v(l){var d=l.currentIndex,g=this.activeIndex,u=this.panels,z=u[d*this.config.steps],A=this.triggers;d=A[d];if((l=!!l.originalEvent.target)||g==-1){b.each(A,function(e){q(e,-1)});b.each(u,function(e){q(e,-1)});q(d,0);q(z,0);l&&z.focus()}}function m(l){var d;b.each(this.triggers,function(g){if(g==l||h.contains(g,l)){d=g;return false}});return d}function c(l){var d=l.target;switch(l.keyCode){case x:case t:if(d=m.call(this,d)){d=d;var g=
h.next(d),u=this.triggers;g||(g=u[0]);q(d,-1);q(g,0);g.focus();l.halt()}break;case r:case i:if(d=m.call(this,d)){d=d;g=h.prev(d);u=this.triggers;g||(g=u[u.length-1]);q(d,-1);q(g,0);g.focus();l.halt()}break;case n:case s:if(d=m.call(this,d)){this.switchTo(b.indexOf(d,this.triggers),undefined,y);l.halt()}}}function a(l){var d;b.each(this.panels,function(g){if(g==l||h.contains(g,l)){d=g;return false}});return d}function f(l){var d=b.indexOf(l,this.panels),g=this.config.steps,u=Math.floor(d/g);if(u==
this.activeIndex)return 1;if(d%g==0||d%g==g-1){this.switchTo(u,undefined,undefined,function(){l.focus()});return 0}return 1}function k(l){var d=l.target;switch(l.keyCode){case x:case t:if(d=a.call(this,d)){d=d;var g=h.next(d),u=this.panels;g||(g=u[0]);q(d,-1);q(g,0);f.call(this,g)&&g.focus();l.halt()}break;case r:case i:if(d=a.call(this,d)){d=d;g=h.prev(d);u=this.panels;g||(g=u[u.length-1]);q(d,-1);q(g,0);f.call(this,g)&&g.focus();l.halt()}break;case n:case s:if(d=a.call(this,d)){this.fire("itemSelected",
{item:d});l.halt()}}}h=b.DOM;j=b.Event;p=b.Switchable.Aria;o=b.Carousel;var i=37,r=38,t=39,x=40,s=32,n=13,q=p.setTabIndex,y={originalEvent:{target:1}};b.mix(o.Config,{aria:true});o.Plugins.push({name:"aria",init:function(l){if(l.config.aria){var d=l.triggers,g=l.panels,u=l.content,z=l.activeIndex;if(!u.id)u.id=b.guid("ks-switchbale-content");u.setAttribute("role","listbox");b.each(d,function(e){q(e,z==0?"0":"-1");e.setAttribute("role","button");e.setAttribute("aria-controls",u.id)});b.each(g,function(e){q(e,
-1);e.setAttribute("role","option")});l.on("switch",v,l);(g=l.nav)&&j.on(g,"keydown",c,l);j.on(u,"keydown",k,l);g=l.prevBtn;var A=l.nextBtn;if(g){q(g,0);g.setAttribute("role","button");j.on(g,"keydown",function(e){if(e.keyCode==n||e.keyCode==s)l.switchTo(l.activeIndex>0?l.activeIndex-1:d.length-1,undefined,y)})}if(A){q(A,0);A.setAttribute("role","button");j.on(A,"keydown",function(e){if(e.keyCode==n||e.keyCode==s)l.switchTo(l.activeIndex==d-1?l.activeIndex+1:0,undefined,y)})}}}})});
KISSY.add("switchable/effect",function(b,h,j,p,o,v){h=b.DOM;p=b.Anim;o=b.Switchable;var m;b.mix(o.Config,{effect:"none",duration:0.5,easing:"easeNone",nativeAnim:true});o.Effects={none:function(c,a,f){c&&h.css(c,"display","none");h.css(a,"display","block");f()},fade:function(c,a,f){c&&c.length!==1&&b.error("fade effect only supports steps == 1.");var k=this,i=k.config,r=c?c[0]:null,t=a[0];k.anim&&k.anim.stop();h.css(t,"opacity",1);if(r)k.anim=(new p(r,{opacity:0},i.duration,i.easing,function(){k.anim=
v;h.css(t,"z-index",9);h.css(r,"z-index",1);f&&f()},i.nativeAnim)).run();else{h.css(t,"z-index",9);f&&f()}},scroll:function(c,a,f,k){var i=this;c=i.config;a=c.effect==="scrollx";var r={};r[a?"left":"top"]=-(i.viewSize[a?0:1]*k)+"px";i.anim&&i.anim.stop();i.anim=(new p(i.content,r,c.duration,c.easing,function(){i.anim=v;f()},c.nativeAnim)).run()}};m=o.Effects;m.scrollx=m.scrolly=m.scroll;o.Plugins.push({name:"effect",init:function(c){var a=c.config,f=a.effect,k=c.panels,i=c.content,r=a.steps,t=c.activeIndex,
x=k.length;c.viewSize=[a.viewSize[0]||k[0].offsetWidth*r,a.viewSize[1]||k[0].offsetHeight*r];if(f!=="none"){b.each(k,function(y){h.css(y,"display","block")});switch(f){case "scrollx":case "scrolly":h.css(i,"position","absolute");h.css(i.parentNode,"position","relative");if(f==="scrollx"){h.css(k,"float","left");h.width(i,c.viewSize[0]*(x/r))}break;case "fade":var s=t*r,n=s+r-1,q;b.each(k,function(y,l){q=l>=s&&l<=n;h.css(y,{opacity:q?1:0,position:"absolute",zIndex:q?9:1})})}}}});b.augment(o,{_switchView:function(c,
a,f,k,i,r){var t=this,x=t.config.effect;(b.isFunction(x)?x:m[x]).call(t,c,a,function(){t._fireOnSwitch(f,i);r&&r.call(t)},f,k)}});return o});
KISSY.add("switchable/circular",function(b,h,j,p){function o(n,q,y,l,d){var g=this;n=g.config;q=g.length;var u=g.activeIndex,z=n.scrollType===s,A=z?f:k,e=g.viewSize[z?0:1];z=-e*l;var w={},B,C=d===x;if(B=C&&u===0&&l===q-1||d===t&&u===q-1&&l===0)z=v.call(g,g.panels,l,C,A,e);w[A]=z+r;g.anim&&g.anim.stop();g.anim=(new j(g.content,w,n.duration,n.easing,function(){B&&m.call(g,g.panels,l,C,A,e);g.anim=undefined;y()},n.nativeAnim)).run()}function v(n,q,y,l,d){var g=this.config.steps;q=this.length;var u=y?
q-1:0,z=(u+1)*g;for(g=u*g;g<z;g++){h.css(n[g],c,a);h.css(n[g],l,(y?-1:1)*d*q)}return y?d:-d*q}function m(n,q,y,l,d){var g=this.config.steps;q=this.length;var u=y?q-1:0,z=(u+1)*g;for(g=u*g;g<z;g++){h.css(n[g],c,i);h.css(n[g],l,i)}h.css(this.content,l,y?-d*(q-1):i)}h=b.DOM;j=b.Anim;p=b.Switchable;var c="position",a="relative",f="left",k="top",i="",r="px",t="forward",x="backward",s="scrollx";b.mix(p.Config,{circular:false});p.Plugins.push({name:"circular",init:function(n){n=n.config;if(n.circular&&(n.effect===
s||n.effect==="scrolly")){n.scrollType=n.effect;n.effect=o}}})});
KISSY.add("switchable/countdown",function(b,h,j,p,o,v){h=b.DOM;j=b.Event;p=b.Anim;o=b.Switchable;b.mix(o.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});o.Plugins.push({name:"countdown",init:function(m){function c(n){a();s=(new p(r[n],x,i-1)).run()}function a(){if(k){clearTimeout(k);k=null}if(s){s.stop();s=v}}var f=m.config,k,i=f.interval,r=[],t=f.countdownFromStyle,x=f.countdownToStyle,s;if(!(!f.autoplay||!f.hasTriggers||!f.countdown)){b.each(m.triggers,function(n,q){n.innerHTML=
'<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+n.innerHTML+"</div>";r[q]=n.firstChild});if(f.pauseOnHover){j.on(m.container,"mouseenter",function(){a();var n=r[m.ingIndex];if(t)s=(new p(n,t,0.2,"easeOut")).run();else h.removeAttr(n,"style")});j.on(m.container,"mouseleave",function(){a();var n=m.ingIndex;h.removeAttr(r[n],"style");k=setTimeout(function(){c(n)},200)})}m.on("beforeSwitch",function(){a();h.attr(r[m.activeIndex],"style",t||"")});m.on("switch",
function(n){m.paused||c(n.currentIndex)})}}});return o});
KISSY.add("switchable/lazyload",function(b,h,j){h=b.DOM;j=b.Switchable;var p="beforeSwitch",o="img-src",v="area-data",m={};m[o]="data-ks-lazyload-custom";m[v]="ks-datalazyload-custom";b.mix(j.Config,{lazyDataType:v});j.Plugins.push({name:"lazyload",init:function(c){function a(t){var x=k.steps;t=t.toIndex*x;f.loadCustomLazyData(c.panels.slice(t,t+x),i);a:{var s,n;if(t=(x=i===o)?"img":i===v?"textarea":""){t=h.query(t,c.container);s=0;for(n=t.length;s<n;s++)if(x?h.attr(t[s],r):h.hasClass(t[s],r)){x=
false;break a}}x=true}x&&c.detach(p,a)}var f=b.DataLazyload,k=c.config,i=k.lazyDataType,r=m[i];!f||!i||!r||c.on(p,a)}});return j});KISSY.add("switchable/slide/base",function(b,h){function j(p,o){if(!(this instanceof j))return new j(p,o);j.superclass.constructor.apply(this,arguments);return 0}h=b.Switchable;j.Config={autoplay:true,circular:true};j.Plugins=[];b.extend(j,h);return b.Slide=j});
KISSY.add("switchable/slide/aria",function(b,h,j,p,o){function v(s){var n=this.panels,q=this.__slideIndex;switch(s.keyCode){case k:case f:q++;if(q==n.length)q=0;this.__slideIndex=q;this.switchTo(q,i,undefined,function(){n[q].focus()});s.halt();break;case a:case c:q--;if(q==-1)q=n.length-1;this.__slideIndex=q;this.switchTo(q,r,undefined,function(){n[q].focus()});s.halt()}}function m(s){var n=this;if(b.inArray(s.target,n.panels)){if(x){clearTimeout(x);x=undefined}switch(s.keyCode){case k:case a:case c:case f:s.halt()}x=
setTimeout(function(){v.call(n,s);x=undefined},200)}}p=b.Switchable;h=b.DOM;j=b.Event;p=p.Aria;o=b.Slide;var c=37,a=38,f=39,k=40,i="forward",r="backward";b.mix(o.Config,{aria:true});var t=p.setTabIndex;o.Plugins.push({name:"aria",init:function(s){if(s.config.aria){var n=s.panels,q=s.activeIndex;b.each(s.triggers,function(l){t(l,-1)});b.each(n,function(l){t(l,q==0?"0":"-1");h.attr(l,"role","option")});var y=s.content;h.attr(y,"role","listbox");j.on(y,"keydown",m,s);t(n[0],0);if(q>-1)s.__slideIndex=
q;s.on("switch",function(l){l=l.currentIndex;var d=s.activeIndex;s.__slideIndex=l;d!=-1&&t(n[d],-1);t(n[l],0)})}}});var x});KISSY.add("switchable/tabs/base",function(b,h){function j(p,o){if(!(this instanceof j))return new j(p,o);j.superclass.constructor.call(this,p,o);return 0}h=b.Switchable;b.extend(j,h);j.Config={};j.Plugins=[];return b.Tabs=j});
KISSY.add("switchable/tabs/aria",function(b,h,j){function p(d){var g;b.each(this.triggers,function(u){if(u==d||a.contains(u,d))g=u});return g}function o(d){switch(d.keyCode){case f:case k:d.ctrlKey&&!d.altKey&&!d.shiftKey&&d.halt();break;case q:d.ctrlKey&&!d.altKey&&d.halt()}}function v(d){var g=d.target,u=this.triggers,z=!d.ctrlKey&&!d.shiftKey&&!d.altKey,A=d.ctrlKey&&!d.shiftKey&&!d.altKey;switch(d.keyCode){case t:case x:if(p.call(this,g)){this.prev(y);d.halt()}break;case s:case n:if(p.call(this,
g)){this.next(d);d.halt()}break;case k:if(A){d.halt();this.next(y)}break;case f:if(A){d.halt();this.prev(y)}break;case r:if(z){this.switchTo(0,undefined,y);d.halt()}break;case i:if(z){this.switchTo(u.length-1,undefined,y);d.halt()}break;case q:if(d.ctrlKey&&!d.altKey){d.halt();d.shiftKey?this.prev(y):this.next(y)}}}function m(d){var g=!!d.originalEvent.target,u=this.activeIndex,z=d.currentIndex;if(u!=z){d=this.triggers[u];var A=this.triggers[z];u=this.panels[u];z=this.panels[z];d&&l(d,"-1");l(A,"0");
g&&A.focus();u&&u.setAttribute("aria-hidden","true");z.setAttribute("aria-hidden","false")}}h=b.Switchable.Aria;j=b.Tabs;var c=b.Event,a=b.DOM,f=33,k=34,i=35,r=36,t=37,x=38,s=39,n=40,q=9,y={originalEvent:{target:1}};b.mix(j.Config,{aria:true});j.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var g=d.triggers,u=d.activeIndex,z=d.panels,A=d.container;a.attr(A,"role","tablist");var e=0;b.each(g,function(w){w.setAttribute("role","tab");l(w,u==e?"0":"-1");if(!w.id)w.id=b.guid("ks-switchable");
e++});e=0;b.each(z,function(w){var B=g[e];w.setAttribute("role","tabpanel");w.setAttribute("aria-hidden",u==e?"false":"true");w.setAttribute("aria-labelledby",B.id);e++});d.on("switch",m,d);c.on(A,"keydown",v,d);c.on(A,"keypress",o,d)}}});var l=h.setTabIndex});
