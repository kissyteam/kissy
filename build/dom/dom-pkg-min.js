/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 819 Jul 8 12:35
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(r){return r&&r.nodeType===1}}});
KISSY.add("selector",function(c,r){function p(a,b){var j,d=[],f,n;b=o(b);if(c.isString(a)){a=c.trim(a);if(e.test(a)){if(a=s(a.slice(1)))d=[a]}else if(j=m.exec(a)){f=j[1];n=j[2];j=j[3];if(b=f?s(f):b)if(j)if(!f||a.indexOf(l)!==-1)d=i(j,n,b);else{if((a=s(f))&&q.hasClass(a,j))d=[a]}else if(n)d=u(b,n)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else g(a)}else if(a&&a.nodeType)d=[a];else if(a&&(c.isArray(a)||a.item||a.getDOMNode))d=a;if(d.item)d=c.makeArray(d);return d}function o(a){if(a===
r)a=k;else if(c.isString(a)&&e.test(a))a=s(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function s(a){return k.getElementById(a)}function u(a,b){return a.getElementsByTagName(b)}function i(a,b,j){j=a=j.getElementsByClassName(a);var d=0,f=0,n=a.length,t;if(b&&b!==h){j=[];for(b=b.toUpperCase();d<n;++d){t=a[d];if(t.tagName===b)j[f++]=t}}return j}function g(a){c.error("Unsupported selector: "+a)}var k=document,q=c.DOM,l=" ",h="*",e=/^#[\w-]+$/,m=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;
(function(){var a=k.createElement("div");a.appendChild(k.createComment(""));if(a.getElementsByTagName(h).length>0)u=function(b,j){b=b.getElementsByTagName(j);if(j===h){j=[];for(var d=0,f=0,n;n=b[d++];)if(n.nodeType===1)j[f++]=n;b=j}return b}})();k.getElementsByClassName||(i=k.querySelectorAll?function(a,b,j){return j.querySelectorAll((b?b:"")+"."+a)}:function(a,b,j){b=j.getElementsByTagName(b||h);j=[];var d=0,f=0,n=b.length,t,v;for(a=l+a+l;d<n;++d){t=b[d];if((v=t.className)&&(l+v+l).indexOf(a)>-1)j[f++]=
t}return j});c.query=p;c.get=function(a,b){return p(a,b)[0]||null};c.mix(q,{query:p,get:c.get,filter:function(a,b){var j=p(a),d,f,n,t=[];if(c.isString(b)&&(d=m.exec(b))&&!d[1]){f=d[2];n=d[3];b=function(v){return!(f&&v.tagName!==f.toUpperCase()||n&&!q.hasClass(v,n))}}if(c.isFunction(b))t=c.filter(j,b);else if(b&&c.ExternalSelector)t=c.ExternalSelector._filter(a,b);else g(b);return t},test:function(a,b){a=p(a);return q.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,r){function p(i,g,k,q){if(!(g=c.trim(g)))return q?false:r;i=c.query(i);var l=0,h=i.length;g=g.split(s);for(var e;l<h;l++){e=i[l];if(e.nodeType===1){e=k(e,g,g.length);if(e!==r)return e}}if(q)return false}var o=c.DOM,s=/[\.\s]\s*\.?/,u=/[\n\t]/g;c.mix(o,{hasClass:function(i,g){return p(i,g,function(k,q,l){if(k=k.className){k=" "+k+" ";for(var h=0,e=true;h<l;h++)if(k.indexOf(" "+q[h]+" ")<0){e=false;break}if(e)return true}},true)},addClass:function(i,g){p(i,g,function(k,
q,l){var h=k.className;if(h){var e=" "+h+" ";h=h;for(var m=0;m<l;m++)if(e.indexOf(" "+q[m]+" ")<0)h+=" "+q[m];k.className=c.trim(h)}else k.className=g})},removeClass:function(i,g){p(i,g,function(k,q,l){var h=k.className;if(h)if(l){h=(" "+h+" ").replace(u," ");for(var e=0,m;e<l;e++)for(m=" "+q[e]+" ";h.indexOf(m)>=0;)h=h.replace(m," ");k.className=c.trim(h)}else k.className=""})},replaceClass:function(i,g,k){o.removeClass(i,g);o.addClass(i,k)},toggleClass:function(i,g,k){var q=c.isBoolean(k),l;p(i,
g,function(h,e,m){for(var a=0,b;a<m;a++){b=e[a];l=q?!k:o.hasClass(h,b);o[l?"removeClass":"addClass"](h,b)}})}})});
KISSY.add("dom-attr",function(c,r){function p(a,b){return b&&b.nodeName.toUpperCase()===a.toUpperCase()}var o=c.UA,s=o.ie,u=s&&s<8,i=document.documentElement.textContent!==r?"textContent":"innerText",g=c.DOM,k=g._isElementNode,q=/href|src|style/,l=/href|src|colspan|rowspan/,h=/\r/g,e=/radio|checkbox/,m={readonly:"readOnly"};u&&c.mix(m,{"for":"htmlFor","class":"className"});c.mix(g,{attr:function(a,b,j){if(b=c.trim(b)){b=b.toLowerCase();b=m[b]||b;if(j===r){a=c.get(a);if(!k(a))return r;var d;q.test(b)||
(d=a[b]);if(d===r)d=a.getAttribute(b);if(u)if(l.test(b))d=a.getAttribute(b,2);else if(b==="style")d=a.style.cssText;return d===null?r:d}c.each(c.query(a),function(f){if(k(f))if(u&&b==="style")f.style.cssText=j;else f.setAttribute(b,""+j)})}},removeAttr:function(a,b){c.each(c.query(a),function(j){k(j)&&j.removeAttribute(b)})},val:function(a,b){if(b===r){var j=c.get(a);if(!k(j))return r;if(p("option",j))return(j.attributes.value||{}).specified?j.value:j.text;if(p("select",j)){var d=j.selectedIndex;
a=j.options;if(d<0)return null;else if(j.type==="select-one")return g.val(a[d]);j=[];for(var f=0,n=a.length;f<n;++f)a[f].selected&&j.push(g.val(a[f]));return j}if(o.webkit&&e.test(j.type))return j.getAttribute("value")===null?"on":j.value;return(j.value||"").replace(h,"")}c.each(c.query(a),function(t){if(p("select",t)){if(c.isNumber(b))b+="";var v=c.makeArray(b),x=t.options,w;f=0;for(n=x.length;f<n;++f){w=x[f];w.selected=c.inArray(g.val(w),v)}if(!v.length)t.selectedIndex=-1}else if(k(t))t.value=b})},
text:function(a,b){if(b===r){a=c.get(a);if(k(a))return a[i]||""}else c.each(c.query(a),function(j){if(k(j))j[i]=b})}})});
KISSY.add("dom-style",function(c,r){function p(h,e){var m=c.get(h),a=e===i?m.offsetWidth:m.offsetHeight;c.each(e===i?["Left","Right"]:["Top","Bottom"],function(b){a-=parseFloat(o._getComputedStyle(m,"padding"+b))||0;a-=parseFloat(o._getComputedStyle(m,"border"+b+"Width"))||0});return a}var o=c.DOM,s=document,u=s.documentElement,i="width",g=/width|height|top|left|right|bottom|margin|padding/i,k=/-([a-z])/ig,q=function(h,e){return e.toUpperCase()},l={};c.mix(o,{_CUSTOM_STYLES:l,_getComputedStyle:function(h,
e){var m="",a=h.ownerDocument;if(h.style)m=a.defaultView.getComputedStyle(h,null)[e];return m},css:function(h,e,m){if(c.isPlainObject(e))for(var a in e)o.css(h,a,e[a]);else{if(e.indexOf("-")>0)e=e.replace(k,q);e=l[e]||e;if(m===r){h=c.get(h);a="";if(h&&h.style){a=e.get?e.get(h):h.style[e];if(a===""&&!e.get)a=o._getComputedStyle(h,e)}return a===r?"":a}else{if(m===null||m==="")m="";else if(!isNaN(new Number(m))&&g.test(e))m+="px";(e===i||e==="height")&&parseFloat(m)<0||c.each(c.query(h),function(b){if(b&&
b.style)e.set?e.set(b,m):(b.style[e]=m)})}}},width:function(h,e){if(e===r)return p(h,i);else o.css(h,i,e)},height:function(h,e){if(e===r)return p(h,"height");else o.css(h,"height",e)},addStyleSheet:function(h,e){var m;if(e)m=c.get(e);m||(m=o.create("<style>",{id:e}));c.get("head").appendChild(m);if(m.styleSheet)m.styleSheet.cssText=h;else m.appendChild(s.createTextNode(h))}});if(u.style.cssFloat!==r)l["float"]="cssFloat";else if(u.style.styleFloat!==r)l["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,r){if(c.UA.ie){var p=c.DOM,o=document,s=o.documentElement,u=p._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,g=/^-?\d/,k=/^auto$/i;try{if(s.style.opacity===r&&s.filters)u.opacity={get:function(l){var h=100;try{h=l.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{h=l.filters("alpha").opacity}catch(m){}}return h/100+""},set:function(l,h){l=l.style;l.zoom=1;l.filter="alpha(opacity="+h*100+")"}}}catch(q){c.log("IE filters ActiveX is disabled. ex = "+q)}if(!(o.defaultView||
{}).getComputedStyle&&s.currentStyle)p._getComputedStyle=function(l,h){var e=l.style;l=l.currentStyle[h];if(!i.test(l)&&g.test(l)||k.test(l)){var m=e.left;e.left=h==="fontSize"?"1em":l||0;l=e.pixelLeft+"px";e.left=m}return l}}});
KISSY.add("dom-offset",function(c,r){function p(b){var j=0,d=0;if(b!==g.body&&b!==k&&b[a]){b=b[a]();j=b.left+s.scrollLeft();d=b.top+s.scrollTop()}return{left:j,top:d}}function o(b,j){var d=s.css(b,e);if(d==="static")d=b.style[e]=m;var f=p(b);d=d===m;var n=h(s.css(b,"left"),10),t=h(s.css(b,"top"),10);n=c.isNumber(n)?n:d?0:b.offsetLeft;t=c.isNumber(t)?t:d?0:b.offsetTop;s.css(b,{left:n+j.left-f.left,top:t+j.top-f.top})}var s=c.DOM,u=c.UA,i=window,g=document,k=g.documentElement,q=g.compatMode==="CSS1Compat",
l=Math.max,h=parseInt,e="position",m="relative",a="getBoundingClientRect";c.mix(s,{offset:function(b,j){if(!(b=c.get(b))||!b.ownerDocument)return null;if(j===r)return p(b);o(b,j)},scrollLeft:function(){return i.pageXOffset||k.scrollLeft||g.body.scrollLeft},scrollTop:function(){return i.pageYOffset||k.scrollTop||g.body.scrollTop},docHeight:function(){return l(!q?g.body.scrollHeight:k.scrollHeight,s.viewportHeight())},docWidth:function(){return l(!q?g.body.scrollWidth:k.scrollWidth,s.viewportWidth())},
viewportHeight:function(){return u.ie?q?k.clientHeight:g.body.clientHeight:i.innerHeight},viewportWidth:function(){return!q&&!u.opera?g.body.clientWidth:u.ie?k.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(c,r){function p(i,g,k,q){if(!(i=c.get(i)))return null;if(g===r)g=1;var l=null,h,e;if(c.isNumber(g)&&g>=0){if(g===0)return i;h=0;e=g;g=function(){return++h===e}}for(;i=i[k];)if(u(i)&&(!g||s.test(i,g))&&(!q||q(i))){l=i;break}return l}function o(i,g,k){var q=[];var l=i=c.get(i);if(i&&k)l=i.parentNode;if(l){k=0;for(l=l.firstChild;l;l=l.nextSibling)if(u(l)&&l!==i&&(!g||s.test(l,g)))q[k++]=l}return q}var s=c.DOM,u=s._isElementNode;c.mix(s,{parent:function(i,g){return p(i,
g,"parentNode",function(k){return k.nodeType!=11})},next:function(i,g){return p(i,g,"nextSibling")},prev:function(i,g){return p(i,g,"previousSibling")},siblings:function(i,g){return o(i,g,true)},children:function(i,g){return o(i,g)},contains:function(i,g){var k=false;if((i=c.get(i))&&(g=c.get(g)))if(i.contains)return i.contains(g);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(g)&16);else for(;!k&&(g=g.parentNode);)k=g==i;return k}})});
KISSY.add("dom-create",function(c,r){function p(d,f){if(k(d)&&f)for(var n in f)u.attr(d,n,f[n]);return d}function o(d,f){var n=null,t;if(d&&(d.push||d.item)&&d[0]){f=f||d[0].ownerDocument;n=f.createDocumentFragment();if(d.item)d=c.makeArray(d);f=0;for(t=d.length;f<t;f++)n.appendChild(d[f])}else c.log("Unable to convert "+d+" to fragment.");return n}var s=document,u=c.DOM,i=c.UA,g=i.ie,k=u._isElementNode,q=s.createElement("div"),l=/<(\w+)/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(u,{create:function(d,
f,n){if(k(d))return d;if(!(d=c.trim(d)))return null;var t=null;t=u._creators;var v,x="div",w;if(v=h.exec(d))t=(n||s).createElement(v[1]);else{if((v=l.exec(d))&&(w=v[1])&&c.isFunction(t[w=w.toLowerCase()]))x=w;d=t[x](d,n).childNodes;t=d.length===1?d[0].parentNode.removeChild(d[0]):o(d,n||s)}return p(t,f)},_creators:{div:function(d,f){f=f?f.createElement("div"):q;f.innerHTML=d;return f}},html:function(d,f){if(f===r){d=c.get(d);if(k(d))return d.innerHTML}else c.each(c.query(d),function(n){if(k(n)){try{n.innerHTML=
""}catch(t){for(;n.firstChild;)n.removeChild(n.firstChild)}f&&n.appendChild(u.create(f))}})},remove:function(d){c.each(c.query(d),function(f){k(f)&&f.parentNode&&f.parentNode.removeChild(f)})}});var e=u._creators,m=u.create,a=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,b={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||g){for(var j in b)(function(d){e[j]=function(f,n){return m("<"+d+">"+f+"</"+d+">",null,n)}})(b[j]);if(g){e.script=function(d,
f){f=f?f.createElement("div"):q;f.innerHTML="-"+d;f.removeChild(f.firstChild);return f};if(g<8)e.tbody=function(d,f){f=m("<table>"+d+"</table>",null,f);var n=f.children.tags("tbody")[0];f.children.length>1&&n&&!a.test(d)&&n.parentNode.removeChild(n);return f}}c.mix(e,{optgroup:e.option,th:e.td,thead:e.tbody,tfoot:e.tbody,caption:e.tbody,colgroup:e.tbody})}});
KISSY.add("dom-insertion",function(c){var r=c.DOM;c.mix(r,{insertBefore:function(p,o){p=r.create(p);o=c.get(o);p&&o&&o.parentNode&&o.parentNode.insertBefore(p,o);return p},insertAfter:function(p,o){p=r.create(p);o=c.get(o);if(p&&o&&o.parentNode)o.nextSibling?o.parentNode.insertBefore(p,o.nextSibling):o.parentNode.appendChild(p);return p}})});
