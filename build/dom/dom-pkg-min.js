/*
Copyright 2010, KISSY UI Library v1.0.8
MIT Licensed
build: 735 Jun 28 22:29
*/
KISSY.add("dom",function(c){c.DOM={_isElementNode:function(s){return s&&s.nodeType===1}}});
KISSY.add("selector",function(c,s){function n(a,e){var b,d=[],m,o;if(c.isString(a)){a=c.trim(a);if(u.test(a)){if(e=r(a.slice(1)))d=[e]}else if(b=q.exec(a)){m=b[1];o=b[2];b=b[3];if(e=m?r(m):p(e))if(b)if(!m||a.indexOf(j)!==-1)d=i(b,o,e);else{if((e=r(m))&&f.hasClass(e,b))d=[e]}else if(o)d=t(e,o)}else if(a.indexOf(",")>-1)if(h.querySelectorAll)d=h.querySelectorAll(a);else{m=a.split(",");o=[];d=0;for(a=m.length;d<a;++d)o=o.concat(n(m[d],e));d=g(o)}else if(c.ExternalSelector)return c.ExternalSelector(a,
e);else k(a)}else if(a&&a.nodeType)d=[a];else if(a&&(a.item||c.isArray(a)))d=a;if(d.item)d=c.makeArray(d);return d}function p(a){if(a===s)a=h;else if(c.isString(a)&&u.test(a))a=r(a.slice(1));else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function r(a){return h.getElementById(a)}function t(a,e){return a.getElementsByTagName(e)}function i(a,e,b){b=a=b.getElementsByClassName(a);var d=0,m=0,o=a.length,v;if(e&&e!==l){b=[];for(e=e.toUpperCase();d<o;++d){v=a[d];if(v.tagName===e)b[m++]=v}}return b}
function g(a){var e=false;a.sort(function(d,m){d=d.sourceIndex-m.sourceIndex;if(d===0)e=true;return d});if(e)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a}function k(a){c.error("Unsupported selector: "+a)}var h=document,f=c.DOM,j=" ",l="*",u=/^#[\w-]+$/,q=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=h.createElement("div");a.appendChild(h.createComment(""));if(a.getElementsByTagName(l).length>0)t=function(e,b){e=e.getElementsByTagName(b);if(b===l){b=[];for(var d=
0,m=0,o;o=e[d++];)if(o.nodeType===1)b[m++]=o;e=b}return e}})();h.getElementsByClassName||(i=h.querySelectorAll?function(a,e,b){return b.querySelectorAll((e?e:"")+"."+a)}:function(a,e,b){e=b.getElementsByTagName(e||l);b=[];var d=0,m=0,o=e.length,v,w;for(a=j+a+j;d<o;++d){v=e[d];if((w=v.className)&&(j+w+j).indexOf(a)>-1)b[m++]=v}return b});c.query=n;c.get=function(a,e){return n(a,e)[0]||null};c.mix(f,{query:n,get:c.get,filter:function(a,e){var b=n(a),d,m,o,v=[];if(c.isString(e)&&(d=q.exec(e))&&!d[1]){m=
d[2];o=d[3];e=function(w){return!(m&&w.tagName!==m.toUpperCase()||o&&!f.hasClass(w,o))}}if(c.isFunction(e))v=c.filter(b,e);else if(e&&c.ExternalSelector)v=c.ExternalSelector._filter(a,e);else k(e);return v},test:function(a,e){a=n(a);return f.filter(a,e).length===a.length}})});
KISSY.add("dom-class",function(c,s){function n(i,g,k,h){if(!(g=c.trim(g)))return h?false:s;i=c.query(i);var f=0,j=i.length;g=g.split(r);for(var l;f<j;f++){l=i[f];if(l.nodeType===1){l=k(l,g,g.length);if(l!==s)return l}}if(h)return false}var p=c.DOM,r=/[\.\s]\s*\.?/,t=/[\n\t]/g;c.mix(p,{hasClass:function(i,g){return n(i,g,function(k,h,f){if(k=k.className){k=" "+k+" ";for(var j=0,l=true;j<f;j++)if(k.indexOf(" "+h[j]+" ")<0){l=false;break}if(l)return true}},true)},addClass:function(i,g){n(i,g,function(k,
h,f){var j=k.className;if(j){var l=" "+j+" ";j=j;for(var u=0;u<f;u++)if(l.indexOf(" "+h[u]+" ")<0)j+=" "+h[u];k.className=c.trim(j)}else k.className=g})},removeClass:function(i,g){n(i,g,function(k,h,f){var j=k.className;if(j)if(f){j=(" "+j+" ").replace(t," ");for(var l=0;l<f;l++)j=j.replace(" "+h[l]+" "," ");k.className=c.trim(j)}else k.className=""})},replaceClass:function(i,g,k){p.removeClass(i,g);p.addClass(i,k)},toggleClass:function(i,g,k){var h=c.isBoolean(k),f;n(i,g,function(j,l,u){for(var q=
0,a;q<u;q++){a=l[q];f=h?!k:p.hasClass(j,a);p[f?"removeClass":"addClass"](j,a)}})}})});
KISSY.add("dom-attr",function(c,s){function n(q,a){return a&&a.nodeName.toUpperCase()===q.toUpperCase()}var p=c.UA,r=p.ie,t=r&&r<8,i=document.documentElement.textContent!==s?"textContent":"innerText",g=c.DOM,k=g._isElementNode,h=/href|src|style/,f=/href|src|colspan|rowspan/,j=/\r/g,l=/radio|checkbox/,u={readonly:"readOnly"};t&&c.mix(u,{"for":"htmlFor","class":"className"});c.mix(g,{attr:function(q,a,e){if(a=c.trim(a)){a=a.toLowerCase();a=u[a]||a;if(e===s){q=c.get(q);if(!k(q))return s;var b;h.test(a)||
(b=q[a]);if(b===s)b=q.getAttribute(a);if(t)if(f.test(a))b=q.getAttribute(a,2);else if(a==="style")b=q.style.cssText;return b===null?s:b}c.each(c.query(q),function(d){if(k(d))if(t&&a==="style")d.style.cssText=e;else d.setAttribute(a,""+e)})}},removeAttr:function(q,a){c.each(c.query(q),function(e){k(e)&&e.removeAttribute(a)})},val:function(q,a){if(a===s){var e=c.get(q);if(!k(e))return s;if(n("option",e))return(e.attributes.value||{}).specified?e.value:e.text;if(n("select",e)){var b=e.selectedIndex;
q=e.options;if(b<0)return null;else if(e.type==="select-one")return g.val(q[b]);e=[];for(var d=0,m=q.length;d<m;++d)q[d].selected&&e.push(g.val(q[d]));return e}if(p.webkit&&l.test(e.type))return e.getAttribute("value")===null?"on":e.value;return(e.value||"").replace(j,"")}c.each(c.query(q),function(o){if(n("select",o)){var v=c.makeArray(a),w=o.options,x;d=0;for(m=w.length;d<m;++d){x=w[d];x.selected=c.inArray(g.val(x),v)}if(!v.length)o.selectedIndex=-1}else if(k(o))o.value=a})},text:function(q,a){if(a===
s){q=c.get(q);if(k(q))return q[i]||""}else c.each(c.query(q),function(e){if(k(e))e[i]=a})}})});
KISSY.add("dom-style",function(c,s){var n=c.DOM,p=document,r=p.documentElement,t=/width|height|top|left|right|bottom|margin|padding/i,i=/-([a-z])/ig,g=function(h,f){return f.toUpperCase()},k={};c.mix(n,{_CUSTOM_STYLES:k,_getComputedStyle:function(h,f){var j="",l=h.ownerDocument;if(h.style)j=l.defaultView.getComputedStyle(h,null)[f];return j},css:function(h,f,j){if(c.isPlainObject(f))for(var l in f)n.css(h,l,f[l]);else{if(f.indexOf("-")>0)f=f.replace(i,g);f=k[f]||f;if(j===s){h=c.get(h);l="";if(h&&
h.style){l=f.get?f.get(h):h.style[f];if(l===""&&!f.get)l=n._getComputedStyle(h,f)}return l===s?"":l}else{if(j===null||j==="")j="";else if(!isNaN(new Number(j))&&t.test(f))j+="px";(f==="width"||f==="height")&&parseFloat(j)<0||c.each(c.query(h),function(u){if(u&&u.style)f.set?f.set(u,j):(u.style[f]=j)})}}},addStyleSheet:function(h,f){var j;if(f)j=c.get(f);j||(j=n.create("<style>",{id:f}));c.get("head").appendChild(j);if(j.styleSheet)j.styleSheet.cssText=h;else j.appendChild(p.createTextNode(h))}});
if(r.style.cssFloat!==s)k["float"]="cssFloat";else if(r.style.styleFloat!==s)k["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,s){if(c.UA.ie){var n=c.DOM,p=document,r=p.documentElement,t=n._CUSTOM_STYLES,i=/^-?\d+(?:px)?$/i,g=/^-?\d/;try{if(r.style.opacity===s&&r.filters)t.opacity={get:function(h){var f=100;try{f=h.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(j){try{f=h.filters("alpha").opacity}catch(l){}}return f/100+""},set:function(h,f){h=h.style;h.zoom=1;h.filter="alpha(opacity="+f*100+")"}}}catch(k){c.log("IE filters ActiveX is disabled. ex = "+k)}if(!(p.defaultView||
{}).getComputedStyle&&r.currentStyle)n._getComputedStyle=function(h,f){var j=h.style;h=h.currentStyle[f];if(!i.test(h)&&g.test(h)){var l=j.left;j.left=f==="fontSize"?"1em":h||0;h=j.pixelLeft+"px";j.left=l}return h}}});
KISSY.add("dom-offset",function(c,s){function n(a){var e=0,b=0;if(a!==g.body&&a!==k&&a[q]){a=a[q]();e=a.left+r.scrollLeft();b=a.top+r.scrollTop()}return{left:e,top:b}}function p(a,e){var b=r.css(a,l);if(b==="static")b=a.style[l]=u;var d=n(a);b=b===u;var m=j(r.css(a,"left"),10),o=j(r.css(a,"top"),10);m=c.isNumber(m)?m:b?0:a.offsetLeft;o=c.isNumber(o)?o:b?0:a.offsetTop;r.css(a,{left:m+e.left-d.left,top:o+e.top-d.top})}var r=c.DOM,t=c.UA,i=window,g=document,k=g.documentElement,h=g.compatMode==="CSS1Compat",
f=Math.max,j=parseInt,l="position",u="relative",q="getBoundingClientRect";c.mix(r,{offset:function(a,e){if(!(a=c.get(a))||!a.ownerDocument)return null;if(e===s)return n(a);p(a,e)},scrollLeft:function(){return i.pageXOffset||k.scrollLeft||g.body.scrollLeft},scrollTop:function(){return i.pageYOffset||k.scrollTop||g.body.scrollTop},docHeight:function(){return f(!h?g.body.scrollHeight:k.scrollHeight,r.viewportHeight())},docWidth:function(){return f(!h?g.body.scrollWidth:k.scrollWidth,r.viewportWidth())},
viewportHeight:function(){return t.ie?h?k.clientHeight:g.body.clientHeight:i.innerHeight},viewportWidth:function(){return!h&&!t.opera?g.body.clientWidth:t.ie?k.clientWidth:i.innerWidth}})});
KISSY.add("dom-traversal",function(c,s){function n(i,g,k,h){if(!(i=c.get(i)))return null;if(g===s)g=1;var f=null,j,l;if(c.isNumber(g)&&g>=0){if(g===0)return i;j=0;l=g;g=function(){return++j===l}}for(;i=i[k];)if(t(i)&&(!g||r.test(i,g))&&(!h||h(i))){f=i;break}return f}function p(i,g,k){var h=[];var f=i=c.get(i);if(i&&k)f=i.parentNode;if(f){k=0;for(f=f.firstChild;f;f=f.nextSibling)if(t(f)&&f!==i&&(!g||r.test(f,g)))h[k++]=f}return h}var r=c.DOM,t=r._isElementNode;c.mix(r,{parent:function(i,g){return n(i,
g,"parentNode",function(k){return k.nodeType!=11})},next:function(i,g){return n(i,g,"nextSibling")},prev:function(i,g){return n(i,g,"previousSibling")},siblings:function(i,g){return p(i,g,true)},children:function(i,g){return p(i,g)},contains:function(i,g){var k=false;if((i=c.get(i))&&(g=c.get(g)))if(i.contains)return i.contains(g);else if(i.compareDocumentPosition)return!!(i.compareDocumentPosition(g)&16);else for(;!k&&(g=g.parentNode);)k=g==i;return k}})});
KISSY.add("dom-create",function(c,s){function n(b,d){if(k(b)&&d)for(var m in d)t.attr(b,m,d[m]);return b}function p(b,d){var m=null,o;if(b&&(b.push||b.item)&&b[0]){d=d||b[0].ownerDocument;m=d.createDocumentFragment();if(b.item)b=c.makeArray(b);d=0;for(o=b.length;d<o;d++)m.appendChild(b[d])}else c.log("Unable to convert "+b+" to fragment.");return m}var r=document,t=c.DOM,i=c.UA,g=i.ie,k=t._isElementNode,h=r.createElement("div"),f=/<(\w+)/,j=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(t,{create:function(b,
d,m){if(k(b))return b;if(!(b=c.trim(b)))return null;var o=null;o=t._creators;var v,w="div",x;if(v=j.exec(b))o=(m||r).createElement(v[1]);else{if((v=f.exec(b))&&(x=v[1])&&c.isFunction(o[x=x.toLowerCase()]))w=x;b=o[w](b,m).childNodes;o=b.length===1?b[0].parentNode.removeChild(b[0]):p(b,m||r)}return n(o,d)},_creators:{div:function(b,d){d=d?d.createElement("div"):h;d.innerHTML=b;return d}},html:function(b,d){if(d===s){b=c.get(b);if(k(b))return b.innerHTML}else c.each(c.query(b),function(m){if(k(m)){m.innerHTML=
"";m.appendChild(t.create(d))}})}});var l=t._creators,u=t.create,q=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,a={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};if(i.gecko||g){for(var e in a)(function(b){l[e]=function(d,m){return u("<"+b+">"+d+"</"+b+">",null,m)}})(a[e]);if(g){l.script=function(b,d){d=d?d.createElement("div"):h;d.innerHTML="-"+b;d.removeChild(d.firstChild);return d};if(g<8)l.tbody=function(b,d){d=u("<table>"+b+"</table>",null,d);var m=
d.children.tags("tbody")[0];d.children.length>1&&m&&!q.test(b)&&m.parentNode.removeChild(m);return d}}c.mix(l,{optgroup:l.option,th:l.td,thead:l.tbody,tfoot:l.tbody,caption:l.tbody,colgroup:l.tbody})}});
KISSY.add("dom-insertion",function(c){var s=c.DOM;c.mix(s,{insertBefore:function(n,p){n=s.create(n);p=c.get(p);n&&p&&p.parentNode&&p.parentNode.insertBefore(n,p);return n},insertAfter:function(n,p){n=s.create(n);p=c.get(p);if(n&&p&&p.parentNode)p.nextSibling?p.parentNode.insertBefore(n,p.nextSibling):p.parentNode.appendChild(n);return n}})});
