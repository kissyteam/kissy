/*
Copyright 2010, KISSY UI Library v1.1.3
MIT Licensed
build time: Sep 9 12:58
*/
KISSY.add("dom",function(c,s){function q(v,n){return v&&v.nodeType===n}c.DOM={_isElementNode:function(v){return q(v,1)},_isKSNode:function(v){return c.Node&&q(v,c.Node.TYPE)},_getWin:function(v){return v&&"scrollTo"in v&&v.document?v:q(v,9)?v.defaultView||v.parentWindow:v===s?window:false},_nodeTypeIs:q}});
KISSY.add("selector",function(c,s){function q(a,b){var e,g=[],r,x;b=v(b);if(c.isString(a)){a=c.trim(a);if(B.test(a)){if(a=n(a.slice(1),b))g=[a]}else if(e=t.exec(a)){r=e[1];x=e[2];e=e[3];if(b=r?n(r,b):b)if(e)if(!r||a.indexOf(l)!==-1)g=j(e,x,b);else{if((a=n(r,b))&&o.hasClass(a,e))g=[a]}else if(x)g=C(x,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else f(a)}else if(a&&(a[u]||a[A]))g=a[u]?[a[u]()]:a[A]();else if(a&&(c.isArray(a)||a.item&&!a.nodeType))g=a;else if(a)g=[a];if(g.item)g=c.makeArray(g);
g.each=function(m,k){return c.each(g,m,k)};return g}function v(a){if(a===s)a=i;else if(c.isString(a)&&B.test(a))a=n(a.slice(1),i);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function n(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function C(a,b){return b.getElementsByTagName(a)}function j(a,b,e){e=a=e.getElementsByClassName(a);var g=0,r=0,x=a.length,m;if(b&&b!==p){e=[];for(b=b.toUpperCase();g<x;++g){m=a[g];if(m.tagName===b)e[r++]=m}}return e}function f(a){c.error("Unsupported selector: "+
a)}var i=document,o=c.DOM,l=" ",p="*",u="getDOMNode",A=u+"s",B=/^#[\w-]+$/,t=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=i.createElement("div");a.appendChild(i.createComment(""));if(a.getElementsByTagName(p).length>0)C=function(b,e){e=e.getElementsByTagName(b);if(b===p){b=[];for(var g=0,r=0,x;x=e[g++];)if(x.nodeType===1)b[r++]=x;e=b}return e}})();i.getElementsByClassName||(j=i.querySelectorAll?function(a,b,e){return e.querySelectorAll((b?b:"")+"."+a)}:function(a,b,e){b=e.getElementsByTagName(b||
p);e=[];var g=0,r=0,x=b.length,m,k;for(a=l+a+l;g<x;++g){m=b[g];if((k=m.className)&&(l+k+l).indexOf(a)>-1)e[r++]=m}return e});c.query=q;c.get=function(a,b){return q(a,b)[0]||null};c.mix(o,{query:q,get:c.get,filter:function(a,b){var e=q(a),g,r,x,m=[];if(c.isString(b)&&(g=t.exec(b))&&!g[1]){r=g[2];x=g[3];b=function(k){return!(r&&k.tagName!==r.toUpperCase()||x&&!o.hasClass(k,x))}}if(c.isFunction(b))m=c.filter(e,b);else if(b&&c.ExternalSelector)m=c.ExternalSelector._filter(a,b);else f(b);return m},test:function(a,
b){a=q(a);return o.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,s){function q(j,f,i,o){if(!(f=c.trim(f)))return o?false:s;j=c.query(j);var l=0,p=j.length;f=f.split(n);for(var u;l<p;l++){u=j[l];if(v._isElementNode(u)){u=i(u,f,f.length);if(u!==s)return u}}if(o)return false}var v=c.DOM,n=/[\.\s]\s*\.?/,C=/[\n\t]/g;c.mix(v,{hasClass:function(j,f){return q(j,f,function(i,o,l){if(i=i.className){i=" "+i+" ";for(var p=0,u=true;p<l;p++)if(i.indexOf(" "+o[p]+" ")<0){u=false;break}if(u)return true}},true)},addClass:function(j,f){q(j,f,function(i,
o,l){var p=i.className;if(p){var u=" "+p+" ";p=p;for(var A=0;A<l;A++)if(u.indexOf(" "+o[A]+" ")<0)p+=" "+o[A];i.className=c.trim(p)}else i.className=f})},removeClass:function(j,f){q(j,f,function(i,o,l){var p=i.className;if(p)if(l){p=(" "+p+" ").replace(C," ");for(var u=0,A;u<l;u++)for(A=" "+o[u]+" ";p.indexOf(A)>=0;)p=p.replace(A," ");i.className=c.trim(p)}else i.className=""})},replaceClass:function(j,f,i){v.removeClass(j,f);v.addClass(j,i)},toggleClass:function(j,f,i){var o=c.isBoolean(i),l;q(j,
f,function(p,u,A){for(var B=0,t;B<A;B++){t=u[B];l=o?!i:v.hasClass(p,t);v[l?"removeClass":"addClass"](p,t)}})}})});
KISSY.add("dom-attr",function(c,s){function q(t,a){return a&&a.nodeName.toUpperCase()===t.toUpperCase()}var v=c.UA,n=v.ie,C=n&&n<8,j=document.documentElement.textContent!==s?"textContent":"innerText",f=c.DOM,i=f._isElementNode,o=function(t){return f._nodeTypeIs(t,3)},l=/href|src|style/,p=/href|src|colspan|rowspan/,u=/\r/g,A=/radio|checkbox/,B={readonly:"readOnly"};C&&c.mix(B,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(t,a,b){if(c.isPlainObject(a))for(var e in a)f.attr(t,e,a[e]);
else if(a=c.trim(a)){a=a.toLowerCase();a=B[a]||a;if(b===s){t=c.get(t);if(!i(t))return s;var g;l.test(a)||(g=t[a]);if(g===s)g=t.getAttribute(a);if(C)if(p.test(a))g=t.getAttribute(a,2);else if(a==="style")g=t.style.cssText;return g===null?s:g}c.each(c.query(t),function(r){if(i(r))if(a==="style")r.style.cssText=b;else{if(a==="checked")r[a]=!!b;r.setAttribute(a,""+b)}})}},removeAttr:function(t,a){c.each(c.query(t),function(b){if(i(b)){f.attr(b,a,"");b.removeAttribute(a)}})},val:function(t,a){if(a===s){var b=
c.get(t);if(!i(b))return s;if(q("option",b))return(b.attributes.value||{}).specified?b.value:b.text;if(q("select",b)){var e=b.selectedIndex;t=b.options;if(e<0)return null;else if(b.type==="select-one")return f.val(t[e]);b=[];for(var g=0,r=t.length;g<r;++g)t[g].selected&&b.push(f.val(t[g]));return b}if(v.webkit&&A.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(u,"")}c.each(c.query(t),function(x){if(q("select",x)){if(c.isNumber(a))a+="";var m=c.makeArray(a),
k=x.options,y;g=0;for(r=k.length;g<r;++g){y=k[g];y.selected=c.inArray(f.val(y),m)}if(!m.length)x.selectedIndex=-1}else if(i(x))x.value=a})},text:function(t,a){if(a===s){t=c.get(t);if(i(t))return t[j]||"";else if(o(t))return t.nodeValue}else c.each(c.query(t),function(b){if(i(b))b[j]=a;else if(o(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,s){function q(a,b){var e=c.get(a),g=b===i?e.offsetWidth:e.offsetHeight;c.each(b===i?["Left","Right"]:["Top","Bottom"],function(r){g-=parseFloat(n._getComputedStyle(e,"padding"+r))||0;g-=parseFloat(n._getComputedStyle(e,"border"+r+"Width"))||0});return g}function v(a,b,e){var g=e;if(e===o&&p.test(b)){g=0;if(n.css(a,"position")==="absolute"){e=a[b==="left"?"offsetLeft":"offsetTop"];if(C.ie===8||C.opera)e-=l(n.css(a.offsetParent,"border-"+b+"-width"))||0;g=e-(l(n.css(a,
"margin-"+b))||0)}}return g}var n=c.DOM,C=c.UA,j=document,f=j.documentElement,i="width",o="auto",l=parseInt,p=/^left|top$/,u=/width|height|top|left|right|bottom|margin|padding/i,A=/-([a-z])/ig,B=function(a,b){return b.toUpperCase()},t={};c.mix(n,{_CUSTOM_STYLES:t,_getComputedStyle:function(a,b){var e="",g=a.ownerDocument;if(a.style)e=g.defaultView.getComputedStyle(a,null)[b];return e},css:function(a,b,e){if(c.isPlainObject(b))for(var g in b)n.css(a,g,b[g]);else{if(b.indexOf("-")>0)b=b.replace(A,B);
b=t[b]||b;if(e===s){a=c.get(a);g="";if(a&&a.style){g=b.get?b.get(a):a.style[b];if(g===""&&!b.get)g=v(a,b,n._getComputedStyle(a,b))}return g===s?"":g}else{if(e===null||e==="")e="";else if(!isNaN(new Number(e))&&u.test(b))e+="px";(b===i||b==="height")&&parseFloat(e)<0||c.each(c.query(a),function(r){if(r&&r.style){b.set?b.set(r,e):(r.style[b]=e);if(e==="")r.style.cssText||r.removeAttribute("style")}})}}},width:function(a,b){if(b===s)return q(a,i);else n.css(a,i,b)},height:function(a,b){if(b===s)return q(a,
"height");else n.css(a,"height",b)},addStyleSheet:function(a,b){var e;if(b)e=c.get("#"+b);if(!e){e=n.create("<style>",{id:b});c.get("head").appendChild(e);if(e.styleSheet)e.styleSheet.cssText=a;else e.appendChild(j.createTextNode(a))}}});if(f.style.cssFloat!==s)t["float"]="cssFloat";else if(f.style.styleFloat!==s)t["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,s){if(c.UA.ie){var q=c.DOM;c=document;var v=c.documentElement,n=q._CUSTOM_STYLES,C=/^-?\d+(?:px)?$/i,j=/^-?\d/,f=/^width|height$/;try{if(v.style.opacity===s&&v.filters)n.opacity={get:function(o){var l=100;try{l=o.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(p){try{l=o.filters("alpha").opacity}catch(u){}}return l/100+""},set:function(o,l){var p=o.style;o=(o.currentStyle||0).filter||"";p.zoom=1;if(o)if(o=o.replace(/alpha\(opacity=.+\)/ig,""))o+=", ";
p.filter=o+"alpha(opacity="+l*100+")"}}}catch(i){}if(!(c.defaultView||{}).getComputedStyle&&v.currentStyle)q._getComputedStyle=function(o,l){var p=o.style,u=o.currentStyle[l];if(f.test(l))u=q[l](o)+"px";else if(!C.test(u)&&j.test(u)){var A=p.left,B=o.runtimeStyle.left;o.runtimeStyle.left=o.currentStyle.left;p.left=l==="fontSize"?"1em":u||0;u=p.pixelLeft+"px";p.left=A;o.runtimeStyle.left=B}return u}}});
KISSY.add("dom-offset",function(c,s){function q(m){var k=0,y=0,d=l(m[a]);if(m[x]){m=m[x]();k=m[b];y=m[e];if(C.mobile!=="apple"){k+=n[g](d);y+=n[r](d)}}return{left:k,top:y}}function v(m,k){if(n.css(m,B)==="static")m.style[B]=t;var y=q(m),d={},h,w;for(w in k){h=A(n.css(m,w),10)||0;d[w]=h+k[w]-y[w]}n.css(m,d)}var n=c.DOM,C=c.UA,j=window,f=document,i=n._isElementNode,o=n._nodeTypeIs,l=n._getWin,p=f.compatMode==="CSS1Compat",u=Math.max,A=parseInt,B="position",t="relative",a="ownerDocument",b="left",e=
"top",g="scrollLeft",r="scrollTop",x="getBoundingClientRect";c.mix(n,{offset:function(m,k){if(!(m=c.get(m))||!m[a])return null;if(k===s)return q(m);v(m,k)},scrollIntoView:function(m,k,y,d){if((m=c.get(m))&&m[a]){d=d===s?true:!!d;y=y===s?true:!!y;if(!k||k===j)return m.scrollIntoView(y);k=c.get(k);if(o(k,9))k=l(k);var h=k&&"scrollTo"in k&&k.document,w=n.offset(m),z=h?{left:n.scrollLeft(k),top:n.scrollTop(k)}:n.offset(k),D={left:w[b]-z[b],top:w[e]-z[e]};w=h?n.viewportHeight(k):k.clientHeight;z=h?n.viewportWidth(k):
k.clientWidth;var G=n[g](k),E=n[r](k),F=G+z,M=E+w,I=m.offsetHeight;m=m.offsetWidth;var H=D.left+G-(A(n.css(k,"borderLeftWidth"))||0);D=D.top+E-(A(n.css(k,"borderTopWidth"))||0);var N=H+m,J=D+I,K,L;if(I>w||D<E||y)K=D;else if(J>M)K=J-w;if(d)if(m>z||H<G||y)L=H;else if(N>F)L=N-z;if(h){if(K!==s||L!==s)k.scrollTo(L,K)}else{if(K!==s)k[r]=K;if(L!==s)k[g]=L}}}});c.each(["Left","Top"],function(m,k){var y="scroll"+m;n[y]=function(d){var h=0,w=l(d),z;if(w&&(z=w.document))h=w[k?"pageYOffset":"pageXOffset"]||z.documentElement[y]||
z.body[y];else if(i(d=c.get(d)))h=d[y];return h}});c.each(["Width","Height"],function(m){n["doc"+m]=function(k){k=k||f;return u(p?k.documentElement["scroll"+m]:k.body["scroll"+m],n["viewport"+m](k))};n["viewport"+m]=function(k){var y="inner"+m;k=l(k);var d=k.document;return y in k?k[y]:p?d.documentElement["client"+m]:d.body["client"+m]}})});
KISSY.add("dom-traversal",function(c,s){function q(j,f,i,o){if(!(j=c.get(j)))return null;if(f===s)f=1;var l=null,p,u;if(c.isNumber(f)&&f>=0){if(f===0)return j;p=0;u=f;f=function(){return++p===u}}for(;j=j[i];)if(C(j)&&(!f||n.test(j,f))&&(!o||o(j))){l=j;break}return l}function v(j,f,i){var o=[];var l=j=c.get(j);if(j&&i)l=j.parentNode;if(l){i=0;for(l=l.firstChild;l;l=l.nextSibling)if(C(l)&&l!==j&&(!f||n.test(l,f)))o[i++]=l}return o}var n=c.DOM,C=n._isElementNode;c.mix(n,{parent:function(j,f){return q(j,
f,"parentNode",function(i){return i.nodeType!=11})},next:function(j,f){return q(j,f,"nextSibling")},prev:function(j,f){return q(j,f,"previousSibling")},siblings:function(j,f){return v(j,f,true)},children:function(j,f){return v(j,f)},contains:function(j,f){var i=false;if((j=c.get(j))&&(f=c.get(f)))if(j.contains)return j.contains(f);else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(f)&16);else for(;!i&&(f=f.parentNode);)i=f==j;return i}})});
KISSY.add("dom-create",function(c,s){function q(d,h){u(d)&&c.isPlainObject(h)&&i.attr(d,h);return d}function v(d,h){var w=null,z;if(d&&(d.push||d.item)&&d[0]){h=h||d[0].ownerDocument;w=h.createDocumentFragment();if(d.item)d=c.makeArray(d);h=0;for(z=d.length;h<z;h++)w.appendChild(d[h])}return w}function n(d){var h=d.cloneNode(true);if(o.ie<8)h.innerHTML=d.innerHTML;return h}function C(d,h,w,z){if(w){var D=c.guid("ks-tmp-"),G=new RegExp(a);h+='<span id="'+D+'"></span>';c.available(D,function(){var E=
c.get("head"),F,M,I,H,N,J;for(G.lastIndex=0;F=G.exec(h);)if((I=(M=F[1])?M.match(e):false)&&I[2]){F=f.createElement("script");F.src=I[2];if((H=M.match(g))&&H[2])F.charset=H[2];F.async=true;E.appendChild(F)}else if((J=F[2])&&J.length>0)c.globalEval(J);(N=f.getElementById(D))&&i.remove(N);c.isFunction(z)&&z()});j(d,h)}else{j(d,h);c.isFunction(z)&&z()}}function j(d,h){h=(h+"").replace(a,"");try{d.innerHTML=h}catch(w){for(;d.firstChild;)d.removeChild(d.firstChild);h&&d.appendChild(i.create(h))}}var f=
document,i=c.DOM,o=c.UA,l=o.ie,p=i._nodeTypeIs,u=i._isElementNode,A=i._isKSNode,B=f.createElement("div"),t=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,e=/\ssrc=(['"])(.*?)\1/i,g=/\scharset=(['"])(.*?)\1/i;c.mix(i,{create:function(d,h,w){if(p(d,1)||p(d,3))return n(d);if(A(d))return n(d[0]);if(!(d=c.trim(d)))return null;var z=null;z=i._creators;var D,G="div",E;if(D=b.exec(d))z=(w||f).createElement(D[1]);else{if((D=t.exec(d))&&(E=D[1])&&c.isFunction(z[E=E.toLowerCase()]))G=
E;d=z[G](d,w).childNodes;z=d.length===1?d[0].parentNode.removeChild(d[0]):v(d,w||f)}return q(z,h)},_creators:{div:function(d,h){h=h?h.createElement("div"):B;h.innerHTML=d;return h}},html:function(d,h,w,z){if(h===s){d=c.get(d);if(u(d))return d.innerHTML}else c.each(c.query(d),function(D){u(D)&&C(D,h,w,z)})},remove:function(d){c.each(c.query(d),function(h){u(h)&&h.parentNode&&h.parentNode.removeChild(h)})}});if(o.gecko||l){var r=i._creators,x=i.create,m=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
k={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var y in k)(function(d){r[y]=function(h,w){return x("<"+d+">"+h+"</"+d+">",null,w)}})(k[y]);if(l){r.script=function(d,h){h=h?h.createElement("div"):B;h.innerHTML="-"+d;h.removeChild(h.firstChild);return h};if(l<8)r.tbody=function(d,h){h=x("<table>"+d+"</table>",null,h);var w=h.children.tags("tbody")[0];h.children.length>1&&w&&!m.test(d)&&w.parentNode.removeChild(w);return h}}c.mix(r,{optgroup:r.option,th:r.td,
thead:r.tbody,tfoot:r.tbody,caption:r.tbody,colgroup:r.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(s,q){if((s=c.get(s))&&(q=c.get(q))&&q.parentNode)q.parentNode.insertBefore(s,q);return s},insertAfter:function(s,q){if((s=c.get(s))&&(q=c.get(q))&&q.parentNode)q.nextSibling?q.parentNode.insertBefore(s,q.nextSibling):q.parentNode.appendChild(s);return s}})});
