/*
Copyright 2010, KISSY UI Library v1.1.4
MIT Licensed
build time: Sep 14 17:24
*/
KISSY.add("dom",function(b,u){function t(v,o){return v&&v.nodeType===o}b.DOM={_isElementNode:function(v){return t(v,1)},_isKSNode:function(v){return b.Node&&t(v,b.Node.TYPE)},_getWin:function(v){return v&&"scrollTo"in v&&v.document?v:t(v,9)?v.defaultView||v.parentWindow:v===u?window:false},_nodeTypeIs:t}});
KISSY.add("selector",function(b,u){function t(a,c){var g,p=[],B,q;c=o(c);if(b.isString(a)){a=b.trim(a);if(r.test(a)){if(a=z(a.slice(1),c))p=[a]}else if(g=d.exec(a)){B=g[1];q=g[2];g=g[3];if(c=B?z(B,c):c)if(g)if(!B||a.indexOf(m)!==-1)p=f(g,q,c);else{if((a=z(B,c))&&i.hasClass(a,g))p=[a]}else if(q)p=j(q,c)}else if(b.ExternalSelector)return b.ExternalSelector(a,c);else n(a)}else if(a&&(a[w]||a[A]))p=a[w]?[a[w]()]:a[A]();else if(a&&(b.isArray(a)||v(a)))p=a;else if(a)p=[a];if(v(p))p=b.makeArray(p);p.each=
function(k,x){return b.each(p,k,x)};return p}function v(a){return a&&!a.nodeType&&(a.namedItem||b.isFunction(a.item))}function o(a){if(a===u)a=h;else if(b.isString(a)&&r.test(a))a=z(a.slice(1),h);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function z(a,c){if(c.nodeType!==9)c=c.ownerDocument;return c.getElementById(a)}function j(a,c){return c.getElementsByTagName(a)}function f(a,c,g){g=a=g.getElementsByClassName(a);var p=0,B=0,q=a.length,k;if(c&&c!==s){g=[];for(c=c.toUpperCase();p<q;++p){k=
a[p];if(k.tagName===c)g[B++]=k}}return g}function n(a){b.error("Unsupported selector: "+a)}var h=document,i=b.DOM,m=" ",s="*",w="getDOMNode",A=w+"s",r=/^#[\w-]+$/,d=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=h.createElement("div");a.appendChild(h.createComment(""));if(a.getElementsByTagName(s).length>0)j=function(c,g){g=g.getElementsByTagName(c);if(c===s){c=[];for(var p=0,B=0,q;q=g[p++];)if(q.nodeType===1)c[B++]=q;g=c}return g}})();h.getElementsByClassName||(f=h.querySelectorAll?
function(a,c,g){return g.querySelectorAll((c?c:"")+"."+a)}:function(a,c,g){c=g.getElementsByTagName(c||s);g=[];var p=0,B=0,q=c.length,k,x;for(a=m+a+m;p<q;++p){k=c[p];if((x=k.className)&&(m+x+m).indexOf(a)>-1)g[B++]=k}return g});b.query=t;b.get=function(a,c){return t(a,c)[0]||null};b.mix(i,{query:t,get:b.get,filter:function(a,c){var g=t(a),p,B,q,k=[];if(b.isString(c)&&(p=d.exec(c))&&!p[1]){B=p[2];q=p[3];c=function(x){return!(B&&x.tagName!==B.toUpperCase()||q&&!i.hasClass(x,q))}}if(b.isFunction(c))k=
b.filter(g,c);else if(c&&b.ExternalSelector)k=b.ExternalSelector._filter(a,c);else n(c);return k},test:function(a,c){a=t(a);return i.filter(a,c).length===a.length}})});
KISSY.add("dom-data",function(b,u){function t(h){return h&&h.nodeType}var v=window,o=b.DOM,z="_ks_data_"+b.now(),j={},f={},n={EMBED:1,OBJECT:1,APPLET:1};b.mix(o,{data:function(h,i,m){if(b.isPlainObject(i))for(var s in i)o.data(h,s,i[s]);else if(m===u){h=b.get(h);if(h==v)h=f;s=t(h);h=(s?j:h)[s?h[z]:z];if(b.isString(i)&&h)return h[i];return h}else b.query(h).each(function(w){if(!(!w||n[w.nodeName])){if(w==v)w=f;var A=j,r;if(t(w)){if(!(r=w[z]))r=w[z]=b.guid()}else{r=z;A=w}if(i&&m!==u){A[r]||(A[r]={});
A[r][i]=m}}})},removeData:function(h,i){b.query(h).each(function(m){if(m){if(m==v)m=f;var s,w=j,A,r=t(m);if(r)s=m[z];else{w=m;s=z}if(s){A=w[s];if(i){if(A){delete A[i];b.isEmptyObject(A)&&o.removeData(m)}}else{if(r)m.removeAttribute&&m.removeAttribute(z);else try{delete m[z]}catch(d){}r&&delete w[s]}}}})}})});
KISSY.add("dom-class",function(b,u){function t(j,f,n,h){if(!(f=b.trim(f)))return h?false:u;j=b.query(j);var i=0,m=j.length;f=f.split(o);for(var s;i<m;i++){s=j[i];if(v._isElementNode(s)){s=n(s,f,f.length);if(s!==u)return s}}if(h)return false}var v=b.DOM,o=/[\.\s]\s*\.?/,z=/[\n\t]/g;b.mix(v,{hasClass:function(j,f){return t(j,f,function(n,h,i){if(n=n.className){n=" "+n+" ";for(var m=0,s=true;m<i;m++)if(n.indexOf(" "+h[m]+" ")<0){s=false;break}if(s)return true}},true)},addClass:function(j,f){t(j,f,function(n,
h,i){var m=n.className;if(m){var s=" "+m+" ";m=m;for(var w=0;w<i;w++)if(s.indexOf(" "+h[w]+" ")<0)m+=" "+h[w];n.className=b.trim(m)}else n.className=f})},removeClass:function(j,f){t(j,f,function(n,h,i){var m=n.className;if(m)if(i){m=(" "+m+" ").replace(z," ");for(var s=0,w;s<i;s++)for(w=" "+h[s]+" ";m.indexOf(w)>=0;)m=m.replace(w," ");n.className=b.trim(m)}else n.className=""})},replaceClass:function(j,f,n){v.removeClass(j,f);v.addClass(j,n)},toggleClass:function(j,f,n){var h=b.isBoolean(n),i;t(j,
f,function(m,s,w){for(var A=0,r;A<w;A++){r=s[A];i=h?!n:v.hasClass(m,r);v[i?"removeClass":"addClass"](m,r)}})}})});
KISSY.add("dom-attr",function(b,u){function t(r,d){return d&&d.nodeName.toUpperCase()===r.toUpperCase()}var v=b.UA,o=v.ie,z=o&&o<8,j=document.documentElement.textContent!==u?"textContent":"innerText",f=b.DOM,n=f._isElementNode,h=function(r){return f._nodeTypeIs(r,3)},i=/href|src|style/,m=/href|src|colspan|rowspan/,s=/\r/g,w=/radio|checkbox/,A={readonly:"readOnly"};z&&b.mix(A,{"for":"htmlFor","class":"className"});b.mix(f,{attr:function(r,d,a){if(b.isPlainObject(d))for(var c in d)f.attr(r,c,d[c]);
else if(d=b.trim(d)){d=d.toLowerCase();d=A[d]||d;if(a===u){r=b.get(r);if(!n(r))return u;var g;i.test(d)||(g=r[d]);if(g===u)g=r.getAttribute(d);if(z)if(m.test(d))g=r.getAttribute(d,2);else if(d==="style")g=r.style.cssText;return g===null?u:g}b.each(b.query(r),function(p){if(n(p))if(d==="style")p.style.cssText=a;else{if(d==="checked")p[d]=!!a;p.setAttribute(d,""+a)}})}},removeAttr:function(r,d){b.each(b.query(r),function(a){if(n(a)){f.attr(a,d,"");a.removeAttribute(d)}})},val:function(r,d){if(d===u){var a=
b.get(r);if(!n(a))return u;if(t("option",a))return(a.attributes.value||{}).specified?a.value:a.text;if(t("select",a)){var c=a.selectedIndex;r=a.options;if(c<0)return null;else if(a.type==="select-one")return f.val(r[c]);a=[];for(var g=0,p=r.length;g<p;++g)r[g].selected&&a.push(f.val(r[g]));return a}if(v.webkit&&w.test(a.type))return a.getAttribute("value")===null?"on":a.value;return(a.value||"").replace(s,"")}b.each(b.query(r),function(B){if(t("select",B)){if(b.isNumber(d))d+="";var q=b.makeArray(d),
k=B.options,x;g=0;for(p=k.length;g<p;++g){x=k[g];x.selected=b.inArray(f.val(x),q)}if(!q.length)B.selectedIndex=-1}else if(n(B))B.value=d})},text:function(r,d){if(d===u){r=b.get(r);if(n(r))return r[j]||"";else if(h(r))return r.nodeValue}else b.each(b.query(r),function(a){if(n(a))a[j]=d;else if(h(a))a.nodeValue=d})}})});
KISSY.add("dom-style",function(b,u){function t(d,a){var c=b.get(d),g=a===n?c.offsetWidth:c.offsetHeight;b.each(a===n?["Left","Right"]:["Top","Bottom"],function(p){g-=parseFloat(o._getComputedStyle(c,"padding"+p))||0;g-=parseFloat(o._getComputedStyle(c,"border"+p+"Width"))||0});return g}function v(d,a,c){var g=c;if(c===h&&m.test(a)){g=0;if(o.css(d,"position")==="absolute"){c=d[a==="left"?"offsetLeft":"offsetTop"];if(z.ie===8||z.opera)c-=i(o.css(d.offsetParent,"border-"+a+"-width"))||0;g=c-(i(o.css(d,
"margin-"+a))||0)}}return g}var o=b.DOM,z=b.UA,j=document,f=j.documentElement,n="width",h="auto",i=parseInt,m=/^left|top$/,s=/width|height|top|left|right|bottom|margin|padding/i,w=/-([a-z])/ig,A=function(d,a){return a.toUpperCase()},r={};b.mix(o,{_CUSTOM_STYLES:r,_getComputedStyle:function(d,a){var c="",g=d.ownerDocument;if(d.style)c=g.defaultView.getComputedStyle(d,null)[a];return c},css:function(d,a,c){if(b.isPlainObject(a))for(var g in a)o.css(d,g,a[g]);else{if(a.indexOf("-")>0)a=a.replace(w,A);
a=r[a]||a;if(c===u){d=b.get(d);g="";if(d&&d.style){g=a.get?a.get(d):d.style[a];if(g===""&&!a.get)g=v(d,a,o._getComputedStyle(d,a))}return g===u?"":g}else{if(c===null||c==="")c="";else if(!isNaN(new Number(c))&&s.test(a))c+="px";(a===n||a==="height")&&parseFloat(c)<0||b.each(b.query(d),function(p){if(p&&p.style){a.set?a.set(p,c):(p.style[a]=c);if(c==="")p.style.cssText||p.removeAttribute("style")}})}}},width:function(d,a){if(a===u)return t(d,n);else o.css(d,n,a)},height:function(d,a){if(a===u)return t(d,
"height");else o.css(d,"height",a)},show:function(d){b.query(d).each(function(a){a.style.display=o.data(a,"display")||""})},hide:function(d){b.query(d).each(function(a){var c=a.style,g=c.display;if(g!=="none"){g&&o.data(a,"display",g);c.display="none"}})},toggle:function(d){b.query(d).each(function(a){if(a)a.style.display==="none"?o.show(a):o.hide(a)})},addStyleSheet:function(d,a){var c;if(a)c=b.get("#"+a);if(!c){c=o.create("<style>",{id:a});b.get("head").appendChild(c);if(c.styleSheet)c.styleSheet.cssText=
d;else c.appendChild(j.createTextNode(d))}}});if(f.style.cssFloat!==u)r["float"]="cssFloat";else if(f.style.styleFloat!==u)r["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(b,u){if(b.UA.ie){var t=b.DOM;b=document;var v=b.documentElement,o=t._CUSTOM_STYLES,z=/^-?\d+(?:px)?$/i,j=/^-?\d/,f=/^width|height$/;try{if(v.style.opacity===u&&v.filters)o.opacity={get:function(h){var i=100;try{i=h.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(m){try{i=h.filters("alpha").opacity}catch(s){}}return i/100+""},set:function(h,i){var m=h.style;h=(h.currentStyle||0).filter||"";m.zoom=1;if(h)if(h=h.replace(/alpha\(opacity=.+\)/ig,""))h+=", ";
m.filter=h+"alpha(opacity="+i*100+")"}}}catch(n){}if(!(b.defaultView||{}).getComputedStyle&&v.currentStyle)t._getComputedStyle=function(h,i){var m=h.style,s=h.currentStyle[i];if(f.test(i))s=t[i](h)+"px";else if(!z.test(s)&&j.test(s)){var w=m.left,A=h.runtimeStyle.left;h.runtimeStyle.left=h.currentStyle.left;m.left=i==="fontSize"?"1em":s||0;s=m.pixelLeft+"px";m.left=w;h.runtimeStyle.left=A}return s}}});
KISSY.add("dom-offset",function(b,u){function t(q){var k=0,x=0,e=i(q[d]);if(q[B]){q=q[B]();k=q[a];x=q[c];if(z.mobile!=="apple"){k+=o[g](e);x+=o[p](e)}}return{left:k,top:x}}function v(q,k){if(o.css(q,A)==="static")q.style[A]=r;var x=t(q),e={},l,y;for(y in k){l=w(o.css(q,y),10)||0;e[y]=l+k[y]-x[y]}o.css(q,e)}var o=b.DOM,z=b.UA,j=window,f=document,n=o._isElementNode,h=o._nodeTypeIs,i=o._getWin,m=f.compatMode==="CSS1Compat",s=Math.max,w=parseInt,A="position",r="relative",d="ownerDocument",a="left",c=
"top",g="scrollLeft",p="scrollTop",B="getBoundingClientRect";b.mix(o,{offset:function(q,k){if(!(q=b.get(q))||!q[d])return null;if(k===u)return t(q);v(q,k)},scrollIntoView:function(q,k,x,e){if((q=b.get(q))&&q[d]){e=e===u?true:!!e;x=x===u?true:!!x;if(!k||k===j)return q.scrollIntoView(x);k=b.get(k);if(h(k,9))k=i(k);var l=k&&"scrollTo"in k&&k.document,y=o.offset(q),C=l?{left:o.scrollLeft(k),top:o.scrollTop(k)}:o.offset(k),D={left:y[a]-C[a],top:y[c]-C[c]};y=l?o.viewportHeight(k):k.clientHeight;C=l?o.viewportWidth(k):
k.clientWidth;var G=o[g](k),E=o[p](k),F=G+C,M=E+y,I=q.offsetHeight;q=q.offsetWidth;var H=D.left+G-(w(o.css(k,"borderLeftWidth"))||0);D=D.top+E-(w(o.css(k,"borderTopWidth"))||0);var N=H+q,J=D+I,K,L;if(I>y||D<E||x)K=D;else if(J>M)K=J-y;if(e)if(q>C||H<G||x)L=H;else if(N>F)L=N-C;if(l){if(K!==u||L!==u)k.scrollTo(L,K)}else{if(K!==u)k[p]=K;if(L!==u)k[g]=L}}}});b.each(["Left","Top"],function(q,k){var x="scroll"+q;o[x]=function(e){var l=0,y=i(e),C;if(y&&(C=y.document))l=y[k?"pageYOffset":"pageXOffset"]||C.documentElement[x]||
C.body[x];else if(n(e=b.get(e)))l=e[x];return l}});b.each(["Width","Height"],function(q){o["doc"+q]=function(k){k=k||f;return s(m?k.documentElement["scroll"+q]:k.body["scroll"+q],o["viewport"+q](k))};o["viewport"+q]=function(k){var x="inner"+q;k=i(k);var e=k.document;return x in k?k[x]:m?e.documentElement["client"+q]:e.body["client"+q]}})});
KISSY.add("dom-traversal",function(b,u){function t(j,f,n,h){if(!(j=b.get(j)))return null;if(f===u)f=1;var i=null,m,s;if(b.isNumber(f)&&f>=0){if(f===0)return j;m=0;s=f;f=function(){return++m===s}}for(;j=j[n];)if(z(j)&&(!f||o.test(j,f))&&(!h||h(j))){i=j;break}return i}function v(j,f,n){var h=[];var i=j=b.get(j);if(j&&n)i=j.parentNode;if(i){n=0;for(i=i.firstChild;i;i=i.nextSibling)if(z(i)&&i!==j&&(!f||o.test(i,f)))h[n++]=i}return h}var o=b.DOM,z=o._isElementNode;b.mix(o,{parent:function(j,f){return t(j,
f,"parentNode",function(n){return n.nodeType!=11})},next:function(j,f){return t(j,f,"nextSibling")},prev:function(j,f){return t(j,f,"previousSibling")},siblings:function(j,f){return v(j,f,true)},children:function(j,f){return v(j,f)},contains:function(j,f){var n=false;if((j=b.get(j))&&(f=b.get(f)))if(j.contains)return j.contains(f);else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(f)&16);else for(;!n&&(f=f.parentNode);)n=f==j;return n}})});
KISSY.add("dom-create",function(b,u){function t(e,l){s(e)&&b.isPlainObject(l)&&n.attr(e,l);return e}function v(e,l){var y=null,C;if(e&&(e.push||e.item)&&e[0]){l=l||e[0].ownerDocument;y=l.createDocumentFragment();if(e.item)e=b.makeArray(e);l=0;for(C=e.length;l<C;l++)y.appendChild(e[l])}return y}function o(e){var l=e.cloneNode(true);if(h.ie<8)l.innerHTML=e.innerHTML;return l}function z(e,l,y,C){if(y){var D=b.guid("ks-tmp-"),G=new RegExp(d);l+='<span id="'+D+'"></span>';b.available(D,function(){var E=
b.get("head"),F,M,I,H,N,J;for(G.lastIndex=0;F=G.exec(l);)if((I=(M=F[1])?M.match(c):false)&&I[2]){F=f.createElement("script");F.src=I[2];if((H=M.match(g))&&H[2])F.charset=H[2];F.async=true;E.appendChild(F)}else if((J=F[2])&&J.length>0)b.globalEval(J);(N=f.getElementById(D))&&n.remove(N);b.isFunction(C)&&C()});j(e,l)}else{j(e,l);b.isFunction(C)&&C()}}function j(e,l){l=(l+"").replace(d,"");try{e.innerHTML=l}catch(y){for(;e.firstChild;)e.removeChild(e.firstChild);l&&e.appendChild(n.create(l))}}var f=
document,n=b.DOM,h=b.UA,i=h.ie,m=n._nodeTypeIs,s=n._isElementNode,w=n._isKSNode,A=f.createElement("div"),r=/<(\w+)/,d=/<script([^>]*)>([\s\S]*?)<\/script>/ig,a=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,c=/\ssrc=(['"])(.*?)\1/i,g=/\scharset=(['"])(.*?)\1/i;b.mix(n,{create:function(e,l,y){if(m(e,1)||m(e,3))return o(e);if(w(e))return o(e[0]);if(!(e=b.trim(e)))return null;var C=null;C=n._creators;var D,G="div",E;if(D=a.exec(e))C=(y||f).createElement(D[1]);else{if((D=r.exec(e))&&(E=D[1])&&b.isFunction(C[E=E.toLowerCase()]))G=
E;e=C[G](e,y).childNodes;C=e.length===1?e[0].parentNode.removeChild(e[0]):v(e,y||f)}return t(C,l)},_creators:{div:function(e,l){l=l?l.createElement("div"):A;l.innerHTML=e;return l}},html:function(e,l,y,C){if(l===u){e=b.get(e);if(s(e))return e.innerHTML}else b.each(b.query(e),function(D){s(D)&&z(D,l,y,C)})},remove:function(e){b.each(b.query(e),function(l){s(l)&&l.parentNode&&l.parentNode.removeChild(l)})}});if(h.gecko||i){var p=n._creators,B=n.create,q=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,
k={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var x in k)(function(e){p[x]=function(l,y){return B("<"+e+">"+l+"</"+e+">",null,y)}})(k[x]);if(i){p.script=function(e,l){l=l?l.createElement("div"):A;l.innerHTML="-"+e;l.removeChild(l.firstChild);return l};if(i<8)p.tbody=function(e,l){l=B("<table>"+e+"</table>",null,l);var y=l.children.tags("tbody")[0];l.children.length>1&&y&&!q.test(e)&&y.parentNode.removeChild(y);return l}}b.mix(p,{optgroup:p.option,th:p.td,
thead:p.tbody,tfoot:p.tbody,caption:p.tbody,colgroup:p.tbody})}});KISSY.add("dom-insertion",function(b){b.mix(b.DOM,{insertBefore:function(u,t){if((u=b.get(u))&&(t=b.get(t))&&t.parentNode)t.parentNode.insertBefore(u,t);return u},insertAfter:function(u,t){if((u=b.get(u))&&(t=b.get(t))&&t.parentNode)t.nextSibling?t.parentNode.insertBefore(u,t.nextSibling):t.parentNode.appendChild(u);return u}})});
