/*
Copyright 2010, KISSY UI Library v1.1.5
MIT Licensed
build time: Nov 2 13:10
*/
KISSY.add("dom",function(a,u){function r(l,p){return l&&l.nodeType===p}a.DOM={_isElementNode:function(l){return r(l,1)},_isKSNode:function(l){return a.Node&&r(l,a.Node.TYPE)},_getWin:function(l){return l&&"scrollTo"in l&&l.document?l:r(l,9)?l.defaultView||l.parentWindow:l===u?window:false},_nodeTypeIs:r}});
KISSY.add("selector",function(a,u){function r(e,f){var d,b,c=[],m;f=l(f);if(a.isString(e)){e=a.trim(e);if(x.test(e)){if(b=p(e.slice(1),f))c=[b]}else if(d=n.exec(e)){b=d[1];m=d[2];d=d[3];if(f=b?p(b,f):f)if(d)if(!b||e.indexOf(i)!==-1)c=g(d,m,f);else{if((b=p(b,f))&&w.hasClass(b,d))c=[b]}else if(m)c=z(m,f)}else if(a.ExternalSelector)return a.ExternalSelector(e,f);else j(e)}else if(e&&(e[q]||e[s]))c=e[q]?[e[q]()]:e[s]();else if(e&&(a.isArray(e)||e&&!e.nodeType&&e.item&&e!=window))c=e;else if(e)c=[e];if(c&&
!c.nodeType&&c.item&&c!=window)c=a.makeArray(c);c.each=function(y,h){return a.each(c,y,h)};return c}function l(e){if(e===u)e=k;else if(a.isString(e)&&x.test(e))e=p(e.slice(1),k);else if(e&&e.nodeType!==1&&e.nodeType!==9)e=null;return e}function p(e,f){if(f.nodeType!==9)f=f.ownerDocument;return f.getElementById(e)}function z(e,f){return f.getElementsByTagName(e)}function g(e,f,d){d=e=d.getElementsByClassName(e);var b=0,c=0,m=e.length,y;if(f&&f!==o){d=[];for(f=f.toUpperCase();b<m;++b){y=e[b];if(y.tagName===
f)d[c++]=y}}return d}function j(e){a.error("Unsupported selector: "+e)}var k=document,w=a.DOM,i=" ",o="*",q="getDOMNode",s=q+"s",x=/^#[\w-]+$/,n=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var e=k.createElement("div");e.appendChild(k.createComment(""));if(e.getElementsByTagName(o).length>0)z=function(f,d){var b=d.getElementsByTagName(f);if(f===o){for(var c=[],m=0,y=0,h;h=b[m++];)if(h.nodeType===1)c[y++]=h;b=c}return b}})();k.getElementsByClassName||(g=k.querySelectorAll?function(e,f,
d){return d.querySelectorAll((f?f:"")+"."+e)}:function(e,f,d){f=d.getElementsByTagName(f||o);d=[];var b=0,c=0,m=f.length,y,h;for(e=i+e+i;b<m;++b){y=f[b];if((h=y.className)&&(i+h+i).indexOf(e)>-1)d[c++]=y}return d});a.query=r;a.get=function(e,f){return r(e,f)[0]||null};a.mix(w,{query:r,get:a.get,filter:function(e,f){var d=r(e),b,c,m,y=[];if(a.isString(f)&&(b=n.exec(f))&&!b[1]){c=b[2];m=b[3];f=function(h){return!(c&&h.tagName!==c.toUpperCase()||m&&!w.hasClass(h,m))}}if(a.isFunction(f))y=a.filter(d,
f);else if(f&&a.ExternalSelector)y=a.ExternalSelector._filter(e,f);else j(f);return y},test:function(e,f){var d=r(e);return w.filter(d,f).length===d.length}})});
KISSY.add("dom-data",function(a,u){var r=window,l=a.DOM,p="_ks_data_"+a.now(),z={},g={},j={EMBED:1,OBJECT:1,APPLET:1};a.mix(l,{data:function(k,w,i){if(a.isPlainObject(w))for(var o in w)l.data(k,o,w[o]);else if(i===u){k=a.get(k);var q;if(!(!k||j[k.nodeName])){if(k==r)k=g;q=(o=k&&k.nodeType)?z:k;k=q[o?k[p]:p];if(a.isString(w)&&k)return k[w];return k}}else a.query(k).each(function(s){if(!(!s||j[s.nodeName])){if(s==r)s=g;var x=z,n;if(s&&s.nodeType){if(!(n=s[p]))n=s[p]=a.guid()}else{n=p;x=s}if(w&&i!==
u){x[n]||(x[n]={});x[n][w]=i}}})},removeData:function(k,w){a.query(k).each(function(i){if(i){if(i==r)i=g;var o,q=z,s,x=i&&i.nodeType;if(x)o=i[p];else{q=i;o=p}if(o){s=q[o];if(w){if(s){delete s[w];a.isEmptyObject(s)&&l.removeData(i)}}else{if(x)i.removeAttribute&&i.removeAttribute(p);else try{delete i[p]}catch(n){}x&&delete q[o]}}}})}})});
KISSY.add("dom-class",function(a,u){function r(g,j,k,w){if(!(j=a.trim(j)))return w?false:u;g=a.query(g);var i=0,o=g.length;j=j.split(p);for(var q;i<o;i++){q=g[i];if(l._isElementNode(q)){q=k(q,j,j.length);if(q!==u)return q}}if(w)return false}var l=a.DOM,p=/[\.\s]\s*\.?/,z=/[\n\t]/g;a.mix(l,{hasClass:function(g,j){return r(g,j,function(k,w,i){if(k=k.className){k=" "+k+" ";for(var o=0,q=true;o<i;o++)if(k.indexOf(" "+w[o]+" ")<0){q=false;break}if(q)return true}},true)},addClass:function(g,j){r(g,j,function(k,
w,i){var o=k.className;if(o){var q=" "+o+" ";o=o;for(var s=0;s<i;s++)if(q.indexOf(" "+w[s]+" ")<0)o+=" "+w[s];k.className=a.trim(o)}else k.className=j})},removeClass:function(g,j){r(g,j,function(k,w,i){var o=k.className;if(o)if(i){o=(" "+o+" ").replace(z," ");for(var q=0,s;q<i;q++)for(s=" "+w[q]+" ";o.indexOf(s)>=0;)o=o.replace(s," ");k.className=a.trim(o)}else k.className=""})},replaceClass:function(g,j,k){l.removeClass(g,j);l.addClass(g,k)},toggleClass:function(g,j,k){var w=a.isBoolean(k),i;r(g,
j,function(o,q,s){for(var x=0,n;x<s;x++){n=q[x];i=w?!k:l.hasClass(o,n);l[i?"removeClass":"addClass"](o,n)}})}})});
KISSY.add("dom-attr",function(a,u){var r=a.UA,l=document.documentElement,p=!l.hasAttribute,z=l.textContent!==u?"textContent":"innerText",g=a.DOM,j=g._isElementNode,k=/^(?:href|src|style)/,w=/^(?:href|src|colspan|rowspan)/,i=/\r/g,o=/^(?:radio|checkbox)/,q={readonly:"readOnly"},s={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1};p&&a.mix(q,{"for":"htmlFor","class":"className"});a.mix(g,{attr:function(x,n,e,f){if(a.isPlainObject(n)){f=e;for(var d in n)g.attr(x,d,n[d],f)}else if(n=a.trim(n)){n=
n.toLowerCase();if(f&&s[n])return g[n](x,e);n=q[n]||n;if(e===u){x=a.get(x);if(!j(x))return u;var b;k.test(n)||(b=x[n]);if(b===u)b=x.getAttribute(n);if(p)if(w.test(n))b=x.getAttribute(n,2);else if(n==="style")b=x.style.cssText;return b===null?u:b}a.each(a.query(x),function(c){if(j(c))if(n==="style")c.style.cssText=e;else{if(n==="checked")c[n]=!!e;c.setAttribute(n,""+e)}})}},removeAttr:function(x,n){a.each(a.query(x),function(e){if(j(e)){g.attr(e,n,"");e.removeAttribute(n)}})},val:function(x,n){if(n===
u){var e=a.get(x);if(!j(e))return u;if(e&&e.nodeName.toUpperCase()==="option".toUpperCase())return(e.attributes.value||{}).specified?e.value:e.text;if(e&&e.nodeName.toUpperCase()==="select".toUpperCase()){var f=e.selectedIndex,d=e.options;if(f<0)return null;else if(e.type==="select-one")return g.val(d[f]);e=[];for(var b=0,c=d.length;b<c;++b)d[b].selected&&e.push(g.val(d[b]));return e}if(r.webkit&&o.test(e.type))return e.getAttribute("value")===null?"on":e.value;return(e.value||"").replace(i,"")}a.each(a.query(x),
function(m){if(m&&m.nodeName.toUpperCase()==="select".toUpperCase()){if(a.isNumber(n))n+="";var y=a.makeArray(n),h=m.options,t;b=0;for(c=h.length;b<c;++b){t=h[b];t.selected=a.inArray(g.val(t),y)}if(!y.length)m.selectedIndex=-1}else if(j(m))m.value=n})},text:function(x,n){if(n===u){var e=a.get(x);if(j(e))return e[z]||"";else if(g._nodeTypeIs(e,3))return e.nodeValue}else a.each(a.query(x),function(f){if(j(f))f[z]=n;else if(g._nodeTypeIs(f,3))f.nodeValue=n})}})});
KISSY.add("dom-style",function(a,u){function r(f,d){var b=a.get(f),c=d===k?b.offsetWidth:b.offsetHeight;a.each(d===k?["Left","Right"]:["Top","Bottom"],function(m){c-=parseFloat(p._getComputedStyle(b,"padding"+m))||0;c-=parseFloat(p._getComputedStyle(b,"border"+m+"Width"))||0});return c}function l(f,d,b){var c=b;if(b===w&&o.test(d)){c=0;if(p.css(f,"position")==="absolute"){b=f[d==="left"?"offsetLeft":"offsetTop"];if(z.ie===8||z.opera)b-=i(p.css(f.offsetParent,"border-"+d+"-width"))||0;c=b-(i(p.css(f,
"margin-"+d))||0)}}return c}var p=a.DOM,z=a.UA,g=document,j=g.documentElement,k="width",w="auto",i=parseInt,o=/^(?:left|top)/,q=/^(?:width|height|top|left|right|bottom|margin|padding)/i,s=/-([a-z])/ig,x=function(f,d){return d.toUpperCase()},n={},e={};a.mix(p,{_CUSTOM_STYLES:n,_getComputedStyle:function(f,d){var b="",c=f.ownerDocument;if(f.style)b=c.defaultView.getComputedStyle(f,null)[d];return b},css:function(f,d,b){if(a.isPlainObject(d))for(var c in d)p.css(f,c,d[c]);else{if(d.indexOf("-")>0)d=
d.replace(s,x);d=n[d]||d;if(b===u){f=a.get(f);c="";if(f&&f.style){c=d.get?d.get(f):f.style[d];if(c===""&&!d.get)c=l(f,d,p._getComputedStyle(f,d))}return c===u?"":c}else{if(b===null||b==="")b="";else if(!isNaN(new Number(b))&&q.test(d))b+="px";(d===k||d==="height")&&parseFloat(b)<0||a.each(a.query(f),function(m){if(m&&m.style){d.set?d.set(m,b):m.style[d]=b;if(b==="")m.style.cssText||m.removeAttribute("style")}})}}},width:function(f,d){if(d===u)return r(f,k);else p.css(f,k,d)},height:function(f,d){if(d===
u)return r(f,"height");else p.css(f,"height",d)},show:function(f){a.query(f).each(function(d){if(d){d.style.display=p.data(d,"display")||"";if(p.css(d,"display")==="none"){var b=d.tagName,c=e[b],m;if(!c){m=g.createElement(b);g.body.appendChild(m);c=p.css(m,"display");p.remove(m);e[b]=c}p.data(d,"display",c);d.style.display=c}}})},hide:function(f){a.query(f).each(function(d){if(d){var b=d.style,c=b.display;if(c!=="none"){c&&p.data(d,"display",c);b.display="none"}}})},toggle:function(f){a.query(f).each(function(d){if(d)d.style.display===
"none"?p.show(d):p.hide(d)})},addStyleSheet:function(f,d){var b;if(d)b=a.get("#"+d);if(!b){b=p.create("<style>",{id:d});a.get("head").appendChild(b);if(b.styleSheet)b.styleSheet.cssText=f;else b.appendChild(g.createTextNode(f))}}});if(j.style.cssFloat!==u)n["float"]="cssFloat";else if(j.style.styleFloat!==u)n["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(a,u){if(a.UA.ie){var r=a.DOM,l=document,p=l.documentElement,z=r._CUSTOM_STYLES,g=/^-?\d+(?:px)?$/i,j=/^-?\d/,k=/^(?:width|height)$/;try{if(p.style.opacity===u&&p.filters)z.opacity={get:function(i){var o=100;try{o=i.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(q){try{o=i.filters("alpha").opacity}catch(s){}}return o/100+""},set:function(i,o){var q=i.style,s=(i.currentStyle||0).filter||"";q.zoom=1;if(s)if(s=s.replace(/alpha\(opacity=.+\)/ig,""))s+=", ";
q.filter=s+"alpha(opacity="+o*100+")"}}}catch(w){}if(!(l.defaultView||{}).getComputedStyle&&p.currentStyle)r._getComputedStyle=function(i,o){var q=i.style,s=i.currentStyle[o];if(k.test(o))s=r[o](i)+"px";else if(!g.test(s)&&j.test(s)){var x=q.left,n=i.runtimeStyle.left;i.runtimeStyle.left=i.currentStyle.left;q.left=o==="fontSize"?"1em":s||0;s=q.pixelLeft+"px";q.left=x;i.runtimeStyle.left=n}return s}}});
KISSY.add("dom-offset",function(a,u){function r(b){var c=0,m=0,y=w(b[s]);if(b[d]){b=b[d]();c=b[x];m=b[n];if(p.mobile!=="apple"){c+=l[e](y);m+=l[f](y)}}return{left:c,top:m}}var l=a.DOM,p=a.UA,z=window,g=document,j=l._isElementNode,k=l._nodeTypeIs,w=l._getWin,i=g.compatMode==="CSS1Compat",o=Math.max,q=parseInt,s="ownerDocument",x="left",n="top",e="scrollLeft",f="scrollTop",d="getBoundingClientRect";a.mix(l,{offset:function(b,c){if(!(b=a.get(b))||!b[s])return null;if(c===u)return r(b);var m=b;if(l.css(m,
"position")==="static")m.style.position="relative";var y=r(m),h={},t,v;for(v in c){t=q(l.css(m,v),10)||0;h[v]=t+c[v]-y[v]}l.css(m,h)},scrollIntoView:function(b,c,m,y){if((b=a.get(b))&&b[s]){y=y===u?true:!!y;m=m===u?true:!!m;if(!c||c===z)return b.scrollIntoView(m);c=a.get(c);if(k(c,9))c=w(c);var h=c&&"scrollTo"in c&&c.document,t=l.offset(b),v=h?{left:l.scrollLeft(c),top:l.scrollTop(c)}:l.offset(c),A={left:t[x]-v[x],top:t[n]-v[n]};t=h?l.viewportHeight(c):c.clientHeight;v=h?l.viewportWidth(c):c.clientWidth;
var C=l[e](c),F=l[f](c),B=C+v,D=F+t,H=b.offsetHeight;b=b.offsetWidth;var G=A.left+C-(q(l.css(c,"borderLeftWidth"))||0);A=A.top+F-(q(l.css(c,"borderTopWidth"))||0);var I=G+b,K=A+H,E,J;if(H>t||A<F||m)E=A;else if(K>D)E=K-t;if(y)if(b>v||G<C||m)J=G;else if(I>B)J=I-v;if(h){if(E!==u||J!==u)c.scrollTo(J,E)}else{if(E!==u)c[f]=E;if(J!==u)c[e]=J}}}});a.each(["Left","Top"],function(b,c){var m="scroll"+b;l[m]=function(y){var h=0,t=w(y),v;if(t&&(v=t.document))h=t[c?"pageYOffset":"pageXOffset"]||v.documentElement[m]||
v.body[m];else if(j(y=a.get(y)))h=y[m];return h}});a.each(["Width","Height"],function(b){l["doc"+b]=function(c){c=c||g;return o(i?c.documentElement["scroll"+b]:c.body["scroll"+b],l["viewport"+b](c))};l["viewport"+b]=function(c){var m="inner"+b;c=w(c);var y=c.document;return m in c?c[m]:i?y.documentElement["client"+b]:y.body["client"+b]}})});
KISSY.add("dom-traversal",function(a,u){function r(g,j,k,w){if(!(g=a.get(g)))return null;if(j===u)j=1;var i=null,o,q;if(a.isNumber(j)&&j>=0){if(j===0)return g;o=0;q=j;j=function(){return++o===q}}for(;g=g[k];)if(z(g)&&(!j||p.test(g,j))&&(!w||w(g))){i=g;break}return i}function l(g,j,k){var w=[];var i=g=a.get(g);if(g&&k)i=g.parentNode;if(i){k=0;for(i=i.firstChild;i;i=i.nextSibling)if(z(i)&&i!==g&&(!j||p.test(i,j)))w[k++]=i}return w}var p=a.DOM,z=p._isElementNode;a.mix(p,{parent:function(g,j){return r(g,
j,"parentNode",function(k){return k.nodeType!=11})},next:function(g,j){return r(g,j,"nextSibling")},prev:function(g,j){return r(g,j,"previousSibling")},siblings:function(g,j){return l(g,j,true)},children:function(g,j){return l(g,j)},contains:function(g,j){var k=false;if((g=a.get(g))&&(j=a.get(j)))if(g.contains)return g.contains(j);else if(g.compareDocumentPosition)return!!(g.compareDocumentPosition(j)&16);else for(;!k&&(j=j.parentNode);)k=j==g;return k}})});
KISSY.add("dom-create",function(a,u){function r(h){var t=h.cloneNode(true);if(j.ie<8)t.innerHTML=h.innerHTML;return t}function l(h,t,v,A){if(v){var C=a.guid("ks-tmp-"),F=RegExp(x);t+='<span id="'+C+'"></span>';a.available(C,function(){var B=a.get("head"),D,H,G,I,K,E;for(F.lastIndex=0;D=F.exec(t);)if((G=(H=D[1])?H.match(e):false)&&G[2]){D=z.createElement("script");D.src=G[2];if((I=H.match(f))&&I[2])D.charset=I[2];D.async=true;B.appendChild(D)}else if((E=D[2])&&E.length>0)a.globalEval(E);(K=z.getElementById(C))&&
g.remove(K);a.isFunction(A)&&A()});p(h,t)}else{p(h,t);a.isFunction(A)&&A()}}function p(h,t){t=(t+"").replace(x,"");try{h.innerHTML=t}catch(v){for(;h.firstChild;)h.removeChild(h.firstChild);t&&h.appendChild(g.create(t))}}var z=document,g=a.DOM,j=a.UA,k=j.ie,w=g._nodeTypeIs,i=g._isElementNode,o=g._isKSNode,q=z.createElement("div"),s=/<(\w+)/,x=/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/ig,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,e=/\ssrc=(['"])(.*?)\1/i,f=/\scharset=(['"])(.*?)\1/i;a.mix(g,{create:function(h,
t,v){if(w(h,1)||w(h,3))return r(h);if(o(h))return r(h[0]);if(!(h=a.trim(h)))return null;var A=null;A=g._creators;var C,F="div",B;if(C=n.exec(h))A=(v||z).createElement(C[1]);else{if((C=s.exec(h))&&(B=C[1])&&a.isFunction(A[B=B.toLowerCase()]))F=B;h=A[F](h,v).childNodes;if(h.length===1)v=h[0].parentNode.removeChild(h[0]);else{h=h;B=v||z;v=null;if(h&&(h.push||h.item)&&h[0]){B=B||h[0].ownerDocument;v=B.createDocumentFragment();if(h.item)h=a.makeArray(h);B=0;for(A=h.length;B<A;B++)v.appendChild(h[B])}v=
v}A=v}v=A;i(v)&&a.isPlainObject(t)&&g.attr(v,t,true);return v},_creators:{div:function(h,t){var v=t?t.createElement("div"):q;v.innerHTML=h;return v}},html:function(h,t,v,A){if(t===u){h=a.get(h);if(i(h))return h.innerHTML}else a.each(a.query(h),function(C){i(C)&&l(C,t,v,A)})},remove:function(h){a.each(a.query(h),function(t){i(t)&&t.parentNode&&t.parentNode.removeChild(t)})}});if(k||j.gecko||j.webkit){var d=g._creators,b=g.create,c=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,m={option:"select",
td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"},y;for(y in m)(function(h){d[y]=function(t,v){return b("<"+h+">"+t+"</"+h+">",null,v)}})(m[y]);if(k){d.script=function(h,t){var v=t?t.createElement("div"):q;v.innerHTML="-"+h;v.removeChild(v.firstChild);return v};if(k<8)d.tbody=function(h,t){var v=b("<table>"+h+"</table>",null,t),A=v.children.tags("tbody")[0];v.children.length>1&&A&&!c.test(h)&&A.parentNode.removeChild(A);return v}}a.mix(d,{optgroup:d.option,th:d.td,thead:d.tbody,tfoot:d.tbody,
caption:d.tbody,colgroup:d.tbody})}});KISSY.add("dom-insertion",function(a){a.mix(a.DOM,{insertBefore:function(u,r){if((u=a.get(u))&&(r=a.get(r))&&r.parentNode)r.parentNode.insertBefore(u,r);return u},insertAfter:function(u,r){if((u=a.get(u))&&(r=a.get(r))&&r.parentNode)r.nextSibling?r.parentNode.insertBefore(u,r.nextSibling):r.parentNode.appendChild(u);return u}})});
