modulex.add("event-dom/gesture/pinch",["event-dom/gesture/util","event-dom/base","feature","modulex-util"],function(e,t,a){var n,r=e("event-dom/gesture/util"),u=e("event-dom/base"),s=e("feature"),i=e("modulex-util");n=function(e){function t(e,t){var a=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(a*a+n*n)}function a(){}function n(e){2===e.targetTouches.length&&e.preventDefault()}e={};var o=r,c=o.DoubleTouch,d=o.addEvent,v=u,p=s,h="pinch",l="pinchStart",g="pinchEnd",m=i;m.extend(a,c,{requiredGestureType:"touch",move:function(e){var n=this;a.superclass.move.apply(n,arguments);var r=n.lastTouches;if(r[0].pageX>0&&r[0].pageY>0&&r[1].pageX>0&&r[1].pageY>0){var u=t(r[0],r[1]);if(n.isStarted)v.fire(n.target,h,m.mix(e,{distance:u,scale:u/n.startDistance}));else{n.isStarted=!0,n.startDistance=u;var s=n.target=n.getCommonTarget(e);v.fire(s,l,m.mix(e,{distance:u,scale:1}))}}},end:function(e){var t=this;a.superclass.end.apply(t,arguments),v.fire(t.target,g,m.mix(e,{touches:t.lastTouches}))}});var f=new a;d([l,g],{handle:f});var T={handle:f};return p.isTouchEventSupported()&&(T.setup=function(){this.addEventListener("touchmove",n,!1)},T.tearDown=function(){this.removeEventListener("touchmove",n,!1)}),d(h,T),e={PINCH:h,PINCH_START:l,PINCH_END:g}}(),a.exports=n});