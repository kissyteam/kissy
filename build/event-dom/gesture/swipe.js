modulex.add("event-dom/gesture/swipe",["modulex-util","dom","event-dom/gesture/util","event-dom/base"],function(e,t,r){var i,n=e("modulex-util"),a=e("dom"),s=e("event-dom/gesture/util"),o=e("event-dom/base");i=function(e){function t(e,t,r){var i,n,a=e.lastTouches,s=a[0],o=s.pageX,u=s.pageY,l=o-e.startX,v=u-e.startY,p=Math.abs(l),d=Math.abs(v),z=t.timeStamp;if(e.isStarted=1,z-e.startTime>f)return!1;if(e.isVertical&&p>g&&(e.isVertical=0),e.isHorizontal&&d>g&&(e.isHorizontal=0),e.isVertical&&e.isHorizontal&&(d>p?e.isHorizontal=0:e.isVertical=0),r||(e.isVertical&&h>d&&(e.isVertical=0),e.isHorizontal&&h>p&&(e.isHorizontal=0)),e.isHorizontal)n=0>l?"left":"right",i=p;else{if(!e.isVertical)return!1;n=0>v?"up":"down",i=d}if(r){var H=t.originalEvent._ksSwipePrevent;return H&&(H===!0||H[n])&&t.preventDefault(),void 0}c.fire(s.target,m,{originalEvent:t.originalEvent,pageX:s.pageX,pageY:s.pageY,which:1,direction:n,distance:i,duration:(t.timeStamp-e.startTime)/1e3})}function r(){}function i(e,t,r){for(var i=!1;e!==t&&!(i=l.test(e,r));)e=e.parentNode;return i}e={};var u=n,l=a,v=s,p=v.addEvent,c=o,d=v.SingleTouch,m="swipe",f=1e3,g=35,h=50;return u.extend(r,d,{requiredGestureType:"touch",start:function(){var e=this;r.superclass.start.apply(e,arguments);var t=e.lastTouches[0];e.isHorizontal=1,e.isVertical=1,e.startX=t.pageX,e.startY=t.pageY},move:function(e){return r.superclass.move.apply(this,arguments),t(this,e,1)},end:function(e){return r.superclass.end.apply(this,arguments),t(this,e,0)}}),p([m],{handle:new r,add:function(e){var t=e.config,r=t.preventDefault;if(r){var n=t.filter;e._preventFn=function(e){(!n||i(e.target,e.currentTarget,n))&&(e._ksSwipePrevent=r)},this.addEventListener("touchmove",e._preventFn)}},remove:function(e){e._preventFn&&(this.removeEventListener("touchmove",e._preventFn),e._preventFn=null)}}),e={SWIPE:m}}(),r.exports=i});