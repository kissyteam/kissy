/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Oct 15 14:04
*/
KISSY.add("editor/plugin/flash-common/utils",function(j){var e=j.DOM,o=j.Node,p=j.UA,k={insertFlash:function(a,c,b,d,e){c=k.createSWF(c,{attrs:b},a.get("document")[0]);b=a.createFakeElement(c.el,d||"ke_flash",e||"flash",!0,c.html,b);a.insertElement(b);return b},isFlashEmbed:function(a){return"application/x-shockwave-flash"==a.getAttribute("type")||/\.swf(?:$|\?)/i.test(a.getAttribute("src")||"")},getUrl:function(a){var c="";if("object"==a.nodeName())for(var a=a[0].childNodes,b=0;b<a.length;b++)1==
a[b].nodeType&&("movie"==(e.attr(a[b],"name")||"").toLowerCase()?c=e.attr(a[b],"value"):"embed"==e.nodeName(a[b])?c=e.attr(a[b],"src"):"object"==e.nodeName(a[b])&&(c=e.attr(a[b],"data")));else"embed"==a.nodeName()&&(c=a.attr("src"));return c},createSWF:function(a,c,b){var d=c.attrs||{},e=c.flashVars,i="",h="",c=c.params||{},f="",b=b||document;j.mix(d,{wmode:"transparent"});for(var g in d)i+=g+"='"+d[g]+"' ";j.mix(c,{quality:"high",movie:a,wmode:"transparent"});for(var l in c)h+="<param name='"+l+
"' value='"+c[l]+"'/>";if(e){for(var m in e)f+="&"+m+"="+encodeURIComponent(e[m]);f=f.substring(1)}a="<object "+i+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+h+(f?'<param name="flashVars" value="'+f+'"/>':"")+"<embed "+i+" "+(f?'FlashVars="'+f+'"':"")+' pluginspage="http://www.macromedia.com/go/getflashplayer"  quality="high"  src="'+a+'"  type="application/x-shockwave-flash"/></object>';return{el:new o(a,null,b),html:a}},createSWFRuntime2:function(a,c,b){var b=b||document,d=(new o("<div style='width:0;height:0;overflow:hidden;'>",
null,b)).appendTo(b.body),d=k.createSWF.apply(this,arguments).el.appendTo(d);p.ie||(d=d.one("object"));return d[0]},createSWFRuntime:function(a,c,b){var d=c.attrs||{},k=c.flashVars||{},i=c.params||{},h="",f="",g="",b=b||document;d.id=d.id||j.guid("ks-editor-runtimeflash-");for(var l in d)h+=l+"='"+d[l]+"' ";for(var m in i)f+="<param name='"+m+"' value='"+i[m]+"'/>";for(var q in k)g+="&"+q+"="+encodeURIComponent(k[q]);var g=g.substring(1),a=p.ie?"<object "+h+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+
f+'<param name="movie" value="'+a+'" />'+(g?'<param name="flashVars" value="'+g+'" />':"")+"</object>":"<object type='application/x-shockwave-flash' data='"+a+"' "+h+">"+f+(g?'<param name="flashVars" value="'+g+'"/>':"")+"</object>",n=c.holder;n||(n=(new o("<div style='"+(c.style?c.style:"width:1px;height:1px;position:absolute;NaN")+"'>",null,b)).appendTo(b.body),setTimeout(function(){n.offset({left:e.scrollLeft(),top:e.scrollTop()})},100));n.html(a);return b.getElementById(d.id)}};return k});
