/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: May 29 14:52
*/
KISSY.add("editor/plugin/color/btn",function(d,f,i,j,k){function g(){g.superclass.constructor.apply(this,arguments)}var l=d.Node;d.DOM.addStyleSheet(".ke-color-panel a {display: block;color:black;text-decoration: none;}.ke-color-panel a:hover {color:black;text-decoration: none;}.ke-color-panel a:active {color:black;}.ke-color-palette {    margin: 5px 8px 8px;}.ke-color-palette table {    border: 1px solid #666666;    border-collapse: collapse;}.ke-color-palette td {    border-right: 1px solid #666666;    height: 18px;    width: 18px;}a.ke-color-a {    height: 18px;    width: 18px;}a.ke-color-a:hover {    border: 1px solid #ffffff;    height: 16px;    width: 16px;}a.ke-color-remove {  padding:3px 8px;  margin:2px 0 3px 0;}a.ke-color-remove:hover {    background-color: #D6E9F8;}",
"ke-color-plugin");var m=["000,444,666,999,CCC,EEE,F3F3F3,FFF".split(","),"F00,F90,FF0,0F0,0FF,00F,90F,F0F".split(","),"F4CCCC,FCE5CD,FFF2CC,D9EAD3,D0E0E3,CFE2F3,D9D2E9,EAD1DC,EA9999,F9CB9C,FFE599,B6D7A8,A2C4C9,9FC5E8,B4A7D6,D5A6BD,E06666,F6B26B,FFD966,93C47D,76A5AF,6FA8DC,8E7CC3,C27BAD,CC0000,E69138,F1C232,6AA84F,45818E,3D85C6,674EA7,A64D79,990000,B45F06,BF9000,38761D,134F5C,0B5394,351C75,741B47,660000,783F04,7F6000,274E13,0C343D,073763,20124D,4C1130".split(",")],b;(function(){b="<div class='ke-color-panel'><a class='ke-color-remove' href=\"javascript:void('清除');\">清除</a>";
for(var a=0;3>a;a++){b+="<div class='ke-color-palette'><table>";for(var e=m[a],n=e.length/8,c=0;c<n;c++){b+="<tr>";for(var h=0;8>h;h++){var d="#"+e[8*c+h];b+="<td>";b+="<a href='javascript:void(0);' class='ke-color-a' style='background-color:"+d+"'></a>";b+="</td>"}b+="</tr>"}b+="</table></div>"}b+="<div><a class='ke-button ke-color-others'>其他颜色</a></div></div>"})();d.extend(g,i,{offClick:function(){this._prepare()},onClick:function(){this.colorWin&&this.colorWin.hide()},_prepare:function(){var a=
this,e=a.get("editor"),d;a.colorWin=new j({elAttrs:{tabindex:0},elCls:"ke-popup",content:b,autoRender:!0,width:170,zIndex:f.baseZIndex(f.zIndexManager.POPUP_MENU)});var c=a.colorWin;d=c.get("contentEl");d.on("click",a._selectColor,a);c.get("el").on("blur",function(){c.hide()});c.on("show",a.bon,a);c.on("hide",a.boff,a);d.one(".ke-color-others").on("click",function(b){b.halt();c.hide();k.useDialog(e,"color/colorPicker/dialog",a.get("cmdType"))});a._prepare=a._show;a._show()},_show:function(){var a=
this.get("el"),b=this.colorWin;b.align(a,["bl","tl"],[0,2]);b.show();b.get("el")[0].focus()},_selectColor:function(a){a.halt();a=new l(a.target);a.hasClass("ke-color-a")&&this.get("editor").execCommand(this.get("cmdType"),a.style("background-color"))},destroy:function(){this.colorWin&&this.colorWin.destroy()}},{ATTRS:{mode:{value:f.WYSIWYG_MODE}}});return g},{requires:["editor","../button/","../overlay/","../dialogLoader/"]});
