/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 9 23:50
*/
KISSY.add("grid/bar",function(f,g,d,c){return g.extend({getItem:function(b){var a=this.get("children"),h=null;f.each(a,function(a){if(a.get("id")===b)return h=a,!1});return h}},{ATTRS:{focusable:{value:!1},xrender:{value:d}},BarItem:c},{xclass:"grid-bar",priority:1})},{requires:["toolbar","./barrender","./baritem"]});
KISSY.add("grid/baritem",function(f,g,d,c){var b=c.KeyCodes,g=g.Controller.extend({createDom:function(){var a=this.get("el");a.addClass("ks-inline-block");a.attr("id")||a.attr("id",f.guid("ks-bar-item"))}},{ATTRS:{focusable:{value:!1}}},{xclass:"grid-bar-item",priority:1}),c=g.extend({initializer:function(){var a=this.get("children"),b=this.get("text");a.push(new d({content:b,disabled:this.get("disabled")}))},handleKeyEventInternal:function(a){return a.keyCode==b.ENTER&&"keydown"==a.type||a.keyCode==
b.SPACE&&"keyup"==a.type?this.performActionInternal.call(this,a):a.keyCode==b.SPACE},performActionInternal:function(){this.fire("click")},_uiSetDisabled:function(a){var b=this.get("children");b[0]&&b[0].set("disabled",a)},_uiSetChecked:function(a){var b=this.get("children");if(b[0])b[0].get("el")[a?"addClass":"removeClass"]("ks-button-checked")},_uiSetText:function(a){var b=this.get("children");b[0]&&b[0].set("content",a)}},{ATTRS:{checked:{value:!1},text:{value:""}}},{xclass:"grid-bar-item-button",
priority:2}),a=g.extend({renderUI:function(){this.get("el").attr("role","separator")}},{xclass:"grid-bar-item-separator",priority:2}),h=g.extend({},{ATTRS:{width:{value:2}}},{xclass:"grid-bar-item-spacer",priority:2}),e=g.extend({_uiSetText:function(a){this.get("el").html(a)}},{ATTRS:{text:{value:""}}},{xclass:"grid-bar-item-text",priority:2});g.types={button:c,separator:a,spacer:h,text:e};return g},{requires:["component","button","node"]});
KISSY.add("grid/barrender",function(f,g){return g.Render.extend({renderUI:function(){var d=this.get("el");d.attr("role","toolbar");d.attr("id")||d.attr("id",f.guid("ks-bar"))}},"Grid_Bar_Render")},{requires:["component"]});
KISSY.add("grid/base",function(f,g,d,c,b){return g.Controller.extend({createDom:function(){this.get("width")&&this.get("el").addClass("ks-grid-width");this.get("height")&&this.get("el").addClass("ks-grid-height");this._initHeader();this._initBody();this._initBars();this._initLoadMask()},renderUI:function(){var a=this;f.each(["tbar","header","body","bbar"],function(b){(b=a.get(b))&&b.render()})},addColumn:function(a,b){return a=this.get("header").addColumn(a,b)},bindUI:function(){this._bindHeaderEvent();
this._bindBodyEvent()},clearSelection:function(){this.get("body").clearSelection()},removeColumn:function(a){this.get("header").removeColumn(a)},setSelection:function(a){this.get("body").setSelection(a)},setAllSelection:function(){this.get("body").setAllSelection()},showData:function(a){this.get("body").showData(a)},_initHeader:function(){var a=this.get("header");a||(a=(new d({columns:this.get("columns"),tableCls:this.get("tableCls"),forceFit:this.get("forceFit"),width:this.get("width"),render:this.get("el"),
parent:this})).create(),this.set("header",a))},_initBody:function(){var a=this.get("body");if(!a){var a=this.getAttrs(),b={},e;for(e in a)a.hasOwnProperty(e)&&a[e].toBody&&(b[e]=this.get(e));e=f.merge(b,this.get("bodyConfig"));e.render=this.get("el");e.parent=this;a=(new c(e)).create();this.set("body",a)}},_initBars:function(){var a=this.get("bbar"),b=this.get("tbar");this._initBar(a,"ks-grid-bbar","bbar");this._initBar(b,"ks-grid-tbar","tbar")},_initBar:function(a,b,e){a&&(a.xclass&&(a.render=this.get("el"),
a.parent=this,a=g.create(a).create()),a.set("elCls",b),this.set(e,a));return a},_initLoadMask:function(){var a=this.get("loadMask");a&&!a.show&&(a=new b.LoadMask(this.get("el")),this.set("loadMask",a))},_bindHeaderEvent:function(){var a=this,b=a.get("header"),e=a.get("body"),c=a.get("store");b.on("afterWidthChange",function(a){a=a.target;a!==b&&e.resetColumnsWidth(a)});b.on("afterSortStateChange",function(a){var b=a.target;a.newVal&&c&&c.sort(b.get("dataIndex"),b.get("sortState"))});b.on("afterVisibleChange",
function(a){a=a.target;a!==b&&e.setColumnVisible(a)});b.on("forceFitWidth",function(){a.get("rendered")&&e.resetColumns()});b.on("add",function(){a.get("rendered")&&e.resetColumns()});b.on("remove",function(){a.get("rendered")&&e.resetColumns()})},_bindBodyEvent:function(){var a=this.get("body"),b=this.get("header");a.on("scroll",function(a){b.scrollTo({left:a.scrollLeft,top:a.scrollTop})})},_uiSetWidth:function(a){this.get("header").set("width",a);this.get("body").set("width",a);this.get("el").addClass("ks-grid-width")},
_uiSetHeight:function(a){var b=this.get("header"),e=this.get("tbar"),c=this.get("bbar"),a=a-b.get("el").height();e&&(a-=e.get("el").height()+10);c&&(a-=c.get("el").height()+10);this.get("body").set("height",a);this.get("rendered")&&(this.get("forceFit")&&b.forceFitColumns(),b.setTableWidth());this.get("el").addClass("ks-grid-height")},_uiSetForceFit:function(a){this.get("header").set("forceFit",a);this.get("body").set("forceFit",a)},_uiSetMultiSelect:function(a){this.get("body").set("multiSelect",
a)}},{ATTRS:{header:{},body:{},bodyConfig:{value:{}},checkable:{value:!1},columns:{toBody:!0,value:[]},forceFit:{toBody:!0,value:!1},height:{},tableCls:{toBody:!0,value:""},multiSelect:{toBody:!0,value:!1},stripeRows:{toBody:!0,value:!0},store:{toBody:!0},loadMask:{toBody:!0},width:{toBody:!0},events:{value:"aftershow,cellclick,rowclick,rowcreated,rowremoved,rowselected,rowunselected,scroll".split(",")}}},{xclass:"grid",priority:1})},{requires:["component","./header","./gridbody","./util"]});
KISSY.add("grid/bindable",function(f){function g(){}g.ATTRS={store:{},loadMask:{value:!0}};f.augment(g,{__bindUI:function(){var d=this,c=d.get("store"),b=d.get("loadMask");if(c&&(c.on("beforeload",function(){b&&b.show&&b.show()}),c.on("load",function(a){d.onLoad(a);b&&b.hide&&b.hide()}),c.on("exception",function(a){d.onException(a)}),c.on("addrecords",function(a){d.onAdd(a)}),c.on("removerecords",function(a){d.onRemove(a)}),c.on("updaterecord",function(a){d.onUpdate(a)}),c.on("localsort",function(a){d.onLocalSort(a)}),
c.autoLoad&&c.getCount()))d.onLoad(c.oldParams)},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){}});return g});
KISSY.add("grid/column",function(f,g,d){var c=g.Render.extend({renderUI:function(){this._setContent()},_getTpl:function(){var b=this.getAttrVals(),a=this.get("tpl");return d(a).render(b)},_setContent:function(){var b=this.get("el"),a=this._getTpl();b.empty();(new f.Node(a)).appendTo(b)},_uiSetTitle:function(){this.get("rendered")&&this._setContent()},_uiSetDraggable:function(){this.get("rendered")&&this._setContent()},_uiSetSortable:function(){this.get("rendered")&&this._setContent()},_uiSetTpl:function(){this.get("rendered")&&
this._setContent()},_uiSetSortState:function(b){var a=this.get("el");a.removeClass("sort-asc sort-desc");"ASC"===b?a.addClass("sort-asc"):"DESC"===b&&a.addClass("sort-desc")}},{ATTRS:{elTagName:{value:"th"},tpl:{}}}),g=g.Controller.extend({_toggleSortState:function(){var b=this.get("sortState");this.set("sortState",b?"ASC"===b?"DESC":"ASC":"ASC")},bindUI:function(){var b=this,a=b.get("events");f.each(a,function(a){b.publish(a,{bubbles:1})})},performActionInternal:function(b){var b=f.one(b.target),
a=this.get("prefixCls");b.hasClass(a+"grid-hd-menu-trigger")||this.get("sortable")&&this._toggleSortState();this.fire("click")}},{ATTRS:{dataIndex:{view:!0,value:""},draggable:{view:!0,value:!0},editor:{},focusable:{value:!1},id:{},renderer:{},resizable:{value:!0},sortable:{view:!0,value:!0},sortState:{view:!0,value:null},title:{view:!0,value:"&#160;"},width:{value:100},tpl:{view:!0,value:'<div class="ks-grid-hd-inner"><span class="ks-grid-hd-title">{{title}}</span>{{#if sortable}}<span class="ks-grid-sort-icon">&nbsp;</span>{{/if}}<span class="ks-grid-hd-menu-trigger"></span></div>'},
cellTpl:{value:""},events:{value:"afterWidthChange,afterSortStateChange,afterVisibleChange,click,resize,move".split(",")},xrender:{value:c}}},{xclass:"grid-hd",priority:1});g.Empty=g.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:!0,value:!1},width:{view:!0,value:null},tpl:{value:""}}},{xclass:"grid-hd-empty",priority:1});return g},{requires:["component","template"]});
KISSY.add("grid/editing",function(f,g,d){function c(a){c.superclass.constructor.call(this,a)}function b(a){b.superclass.constructor.call(this,a)}function a(b){a.superclass.constructor.call(this,b)}var h=f.DOM,e=f.Event,m=document;f.extend(c,f.Base);c.ATTRS={currentEditorPanel:{value:null},currentCell:{},editorPanels:{value:[]},grid:{},triggerEvent:{value:"cellclick"}};f.augment(c,{renderUI:function(a){var b=a.get("columns");this.set("grid",a);this._initEditors(b)},bindUI:function(a){var b=this,h=
b.get("triggerEvent"),c=b.get("editorPanels");f.each(c,function(a){b._initPanelEvent(a)});a.on(h,function(a){b.showEditor(a.field,a.record,a.cell,a.row)});e.on(m,"click",function(a){var a=a.target,h=b.get("currentEditorPanel"),e=b.get("currentCell");if(h&&e&&!h.containsElement(a)&&!(e==a||f.one(e).contains(a))&&h.get("visible"))h.hide(),b.set("currentEditorPanel",null),b.set("currentCell",null)})},cancelEdit:function(){},showEditor:function(a,b,h,e){var a=this._findEditorPanel(a),e=this._getAlignNode(h,
e),c=this.get("currentEditorPanel");a&&(c&&c!=a&&c.hide(),this.set("currentEditorPanel",a),this.set("currentCell",h),a.set("record",b),a.set("align",{node:e,points:["tl","tl"]}),this._beforeShowEditor(a,h),a.show(),a.focus())},_beforeShowEditor:function(){},_findEditorPanel:function(){return this.get("editorPanels")[0]},_getAlignNode:function(a,b){return b},_initEditors:function(){},_initPanelEvent:function(){},destroy:function(){var a=this.get("editorPanels");f.each(a,function(a){a.destroy()})}});
f.extend(b,c);f.augment(b,{_beforeShowEditor:function(a,b){a.get("children")[0].set("width",h.width(b))},_getAlignNode:function(a){return a},_findEditorPanel:function(a){var b=this.get("editorPanels"),h=null;f.each(b,function(b){if(b.get("children")[0].get("field")===a)return h=b,!1});return h},_initEditors:function(a){var b=this.get("editorPanels");f.each(a,function(a){var h=a.get("editor");h&&(h instanceof g.Controller||(h.field=a.get("dataIndex"),h.type&&(h.xclass="grid-"+h.type+"-editor")),a=
new d({children:[h]}),a.render(),b.push(a))})},_initPanelEvent:function(a){var b=this.get("grid").get("store");a.on("changed",function(a){var h=a.target,a=h.get("record"),e=h.get("field"),h=h.getValue();b.setValue(a,e,h)})}});f.extend(a,c);f.augment(a,{_beforeShowEditor:function(a,b){var e=a.get("children");f.each(e,function(a){a.set("width",h.width(b))})},_initEditors:function(a){this.get("editorPanels");var b=[];f.each(a,function(a){var h=a.get("editor");h&&(h instanceof g.Controller||(h.field=
a.get("dataIndex")),b.push(panel))})}});c.CellEditing=b;c.RowEditing=a;return c},{requires:["component","grid/editorpanel"]});
KISSY.add("grid/editor",function(f,g,d){var c=g.Render.extend({createDom:function(){var b=this.get("el"),a=this.get("tpl");(new f.Node(a)).appendTo(b)}}),g=g.Controller.extend({bindUI:function(){var b=this,a=b.get("binder"),h=b.get("events");a&&a.call(this);f.each(h,function(a){b.publish(a,{bubbles:1})});b.bindControlEvent()},bindControlEvent:function(){var b=this,a=b.getEditControl(),h=b.get("triggerEvent"),e=b.get("validEvent");a.on(h,function(){var a;b.hasError()||(a=b._getControlText(),b.fire("changed",
{target:b,text:a,value:b.getValue(a)}))});a.on(e,function(){var a=b._getControlText(),h=b.get("record");b.validEditor(a,h)});a.on("mouseenter",function(){b.hasError()&&b.showValidError()});a.on("mouseleave",function(){b.hasError()&&b.hideValidError()})},containsElement:function(b){var a=this.get("el");return a.contains(b)||a[0]==b},focus:function(){var b=this.getEditControl();b&&b[0]&&b[0].focus&&b[0].focus()},getEditControl:function(){return this.get("el").one(".ks-grid-editor-control")},getValue:function(b){var a=
this.get("formatter"),b=b||this._getControlText();return a(b)},hasError:function(){return this.get("el").hasClass("ks-grid-editor-error")},hideValidError:function(){var b=this.get("overlay");b&&b.hide()},setValue:function(b){this.getEditControl().val(b)},showValidError:function(){var b=this.getEditControl(),a=b.attr("data-error"),h=this.get("errorIconTpl"),e=this.get("overlay");e||(e=this._createOverlay());e.set("content",h+a);e.set("align",{node:b,points:["br","tl"]});e.show()},_clearError:function(){var b=
this.getEditControl();this.get("el").removeClass("ks-grid-editor-error");b.removeAttr("data-error")},_getControlText:function(){return this.getEditControl().val()},_getError:function(b,a){var h=this.get("basicValidator"),e=this.get("validator"),a=a||this.get("record");return h(b)||e(b,a)},_createOverlay:function(){var b=new d({elCls:"ks-grid-editor-overlay",effect:{effect:"fade",duration:0.5}});this.set("overlay",b);return b},_setError:function(b){var a=this.getEditControl();this.get("el").addClass("ks-grid-editor-error");
a.attr("data-error",b)},validEditor:function(b,a){var h,b=b||this._getControlText();(h=this._getError(b,a))?(this.fire("error",{target:this,msg:h,text:b}),this._setError(h)):this._clearError();return!h},_uiSetValue:function(b){b=b?b.toString():"";this.setValue(b);this.validEditor()},_uiSetRecord:function(b){if(b){var a=this.get("field");a&&this.set("value",b[a])}},destructor:function(){}},{ATTRS:{basicValidator:{value:function(){return""}},binder:{},data:{value:{}},editFunction:{value:function(){return!1}},
errorIconTpl:{value:'<span class="badge badge-error">i</span>'},events:{value:["changed","error"]},field:{},focusable:{value:!1},formatter:{value:function(b){return b}},overlay:function(){},record:{value:null},rules:{},triggerEvent:{value:"change"},validEvent:{value:"keyup"},tpl:{view:!0,value:'<input type="text" class="ks-grid-editor-control"/>'},validator:{value:function(){return""}},value:{getter:function(){return this.getValue()}},xrender:{value:c}}},{xclass:"grid-editor",priority:1});g.extend({},
{xclass:"grid-text-editor",priority:2});g.extend({},{ATTRS:{basicValidator:{value:function(b){return isNaN(Number(b))?"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01":""}},formatter:{value:function(b){return Number(b)}}}},{xclass:"grid-number-editor",priority:2});return g},{requires:["component","overlay"]});
KISSY.add("grid/editorpanel",function(f,g){var d=g.Render.extend([g.UIBase.Position.Render,g.UIBase.Align.Render],{renderUI:function(){var c=this.get("el"),b=this.get("tpl");(new f.Node(b)).appendTo(c)},getContentElement:function(){return this.get("el").one(".ks-grid-editor-container")}});return g.Controller.extend([g.UIBase.Position,g.UIBase.Align],{containsElement:function(c){var b=this.get("children"),a=!1;f.each(b,function(b){if(b.containsElement(c))return a=!0,!1});return a},focus:function(){var c=
this.get("children")[0];c&&c.focus()},_uiSetRecord:function(c){var b=this.get("children");f.each(b,function(a){a.get("field")&&a.set("record",c)})}},{ATTRS:{focusable:{value:!1},record:{},tpl:{view:!0,value:'<div class="ks-grid-editor-container"></div>'},xrender:{value:d}}},{xclass:"grid-editor-panel",priority:1})},{requires:["component","grid/editor"]});
KISSY.add("grid",function(f,g,d,c,b,a,h,e,m){g.Bar=d;g.Store=c;g.PagingBar=b;g.PagingBar.Number=a;g.Plugins=h;g.Plugins.CellEditing=e.CellEditing;g.Util=m;return g},{requires:"grid/base,grid/bar,grid/store,grid/pagingbar,grid/numberpagingbar,grid/plugins,grid/editing,grid/util".split(",")});
KISSY.add("grid/gridbody",function(f,g,d,c){var b=g.Render.extend({renderUI:function(){var a=this.get("el"),b=this._getTpl();(new f.Node(b)).appendTo(a);this.set("tbodyEl",a.one("tbody"),{silent:1});this.set("headerRowEl",this._createHeaderRow())},clearData:function(){this.get("tbodyEl").children(".ks-grid-row").remove()},clearRowSelected:function(){this.get("tbodyEl").all(".ks-grid-row").removeClass("ks-grid-row-selected")},findCell:function(a,b){return b.one(".grid-td-"+a)},findRow:function(a){if(!a)return null;
var b=null;this.get("tbodyEl").children(".ks-grid-row").each(function(e){if(e.data("row-element")===a)return b=e,!1});return b},getSelectedRows:function(){return this.get("tbodyEl").all(".ks-grid-row-selected")},getAllRows:function(){return this.get("tbodyEl").all(".ks-grid-row")},isRowSelected:function(a){return f.one(a).hasClass("ks-grid-row-selected")},isRowHover:function(a){return f.one(a).hasClass("ks-grid-row-hover")},removeRow:function(a){(a=this.findRow(a))&&a.remove();return a},resetHeaderRow:function(){var a=
this.get("headerRowEl"),b=this.get("tbodyEl");a.remove();a=this._createHeaderRow();a.prependTo(b);this.set("headerRowEl",a)},setRowSelected:function(a,b){var e=f.one(a);b?e.addClass("ks-grid-row-selected"):e.removeClass("ks-grid-row-selected")},setRowHover:function(a,b){var e=f.one(a);b?e.addClass("ks-grid-row-hover"):e.removeClass("ks-grid-row-hover")},setColumnVisible:function(a){var b=!a.get("visible"),a=a.get("id"),a=this.get("tbodyEl").all(".grid-td-"+a);b?a.hide():a.show()},setColumnsWidth:function(a){var b=
this.get("headerRowEl");(b=this.findCell(a.get("id"),b))&&b.width(a.get("width"));this.setTableWidth()},setTableWidth:function(a){var b=this.get("width"),e=this.get("height"),c=this.get("tbodyEl").parent();this.get("forceFit");this.get("headerRowEl");a=a||this._getColumnsWidth();b&&(b>=a&&(a=b,e&&(a=b-17)),c.width(a))},updateRow:function(a){var b=this,e=b.findRow(a),c=b._getColumns();e&&f.each(c,function(c){b._updateCell(c,a,e)})},_updateCell:function(a,b,e){e=this.findCell(a.get("id"),e);a=this._getCellText(a,
b);e.one(".ks-grid-cell-inner").html(a)},_createRow:function(a,b){var e=this,c=e._getColumns(),g=e.get("tbodyEl"),j=e.get("rowTpl"),i=0===b%2?"ks-grid-row-odd":"ks-grid-row-even",k=[];f.each(c,function(b){var h=b.get("dataIndex");k.push(e._getCellTpl(b,h,a))});k.push(e._getEmptyCellTpl());j=d(j).render({cellsTpl:k.join(""),oddCls:i});c=(new f.Node(j)).appendTo(g);c.data("row-element",a);0===b&&c.addClass("ks-grid-row-first");return c},_createHeaderRow:function(){var a=this,b=a._getColumns(),e=a.get("tbodyEl"),
c=a.get("headerRowTpl"),g=[];f.each(b,function(b){g.push(a._getHeaderCellTpl(b))});g.push(a._getEmptyCellTpl());c=d(c).render({cellsTpl:g.join("")});return f.Node(c).appendTo(e)},_getColumns:function(){return this.get("columns")},_getColumnsWidth:function(){var a,b=0;a=this.get("columns");f.each(a,function(a){a.get("visible")&&(b+=a.get("el").outerWidth())});return b},_getCellText:function(a,b){var e=a.get("cellTpl")||this.get("cellTextTpl"),c=a.get("dataIndex"),f=a.get("renderer"),f=f?f(b[c],b):
b[c];return d(e).render({text:f,tips:this._getTips(a,c,b)})},_getCellTpl:function(a,b,e){var e=this._getCellText(a,e),c=this.get("cellTpl");return d(c).render({id:a.get("id"),dataIndex:b,cellText:e,hide:!a.get("visible")})},_getTips:function(a,b,e){var a=a.get("showTip"),c="";a&&(c=e[b],f.isFunction(a)&&(c=a(c,e)));return c},_getHeaderCellTpl:function(a){var b=this.get("headerCellTpl");return d(b).render({id:a.get("id"),width:a.get("width"),hide:!a.get("visible")})},_getEmptyCellTpl:function(){return'<td class="ks-grid-cell-empty"></td>'},
_getTpl:function(){var a=this.getAttrVals(),b=this.get("tpl");return d(b).render(a)}},{ATTRS:{tbodyEl:{},headerRowEl:{}}});return g.Controller.extend([c],{bindUI:function(){this._publishEvent();this._bindScrollEvent();this._bindRowEvent()},clearData:function(){this.get("view").clearData()},clearSelection:function(){var a=this;a.get("view").getSelectedRows().each(function(b){a.onRowSelected(b,!1)})},findCell:function(a,b){var e=null;return(e=b instanceof f.Node?b:this.findRow(b))?this.get("view").findCell(a,
e):null},findRow:function(a){return this.get("view").findRow(a)},setColumnVisible:function(a){this.get("view").setColumnVisible(a)},onLoad:function(){this.showData(this.get("store").getResult())},onAdd:function(a){var a=a.data,b=this.get("store").getCount();this._addData(a,b)},onRemove:function(a){var b=this,e=null;f.each(a.data,function(a){(e=b.get("view").removeRow(a))&&b.fire("rowremoved",{record:a,row:e[0]})})},onUpdate:function(a){a=a.record;this.get("view").updateRow(a)},onLocalSort:function(){this.onLoad()},
onRowSelected:function(a,b){var e=this.get("view"),c;c=b?"rowselected":"rowunselected";e.setRowSelected(a,b);this.fire(c,{row:a[0],record:a.data("row-element")})},setSelection:function(a){var b=this,e=b.get("view");a&&(f.isArray(a)||(a=[a]),f.each(a,function(a){if((a=b.findRow(a))&&!e.isRowSelected(a))b.onRowSelected(a,!0)}))},showData:function(a){this.clearData();this._addData(a);this.fire("aftershow")},resetColumns:function(){var a=this.get("store");this.get("view").resetHeaderRow();if(a)this.onLoad()},
resetColumnsWidth:function(a){this.get("view").setColumnsWidth(a)},setAllSelection:function(){var a=this;a.get("view").getAllRows().each(function(b){a.onRowSelected(b,!0)})},setTableWidth:function(a){this.get("forceFit")&&this.resetColumns();this.get("view").setTableWidth(a)},_addData:function(a,b){var b=b||0,e=this;f.each(a,function(a,c){var f=e.get("view")._createRow(a,b+c);e.fire("rowcreated",{record:a,data:a,row:f[0]})})},_bindScrollEvent:function(){var a=this,b=a.get("el");b.on("scroll",function(){var e=
b.scrollLeft(),c=b.scrollTop();a.fire("scroll",{scrollLeft:e,scrollTop:c})})},_bindRowEvent:function(){var a=this;a.get("tbodyEl").delegate("click",".ks-grid-row",function(b){a._rowClickEvent(b)})},_publishEvent:function(){var a=this,b=a.get("parent"),e=a.get("events");b&&f.each(e,function(b){a.publish(b,{bubbles:1})})},_rowClickEvent:function(a){var b=this.get("multiSelect"),e=f.one(a.currentTarget),c=this.get("view"),d=e.data("row-element"),g=f.one(a.target).closest(".ks-grid-cell"),c=c.isRowSelected(e);
g&&this.fire("cellclick",{record:d,row:e[0],cell:g[0],field:g.attr("data-column-field"),domTarget:a.target});this.fire("rowclick",{record:d,row:e[0]});if(b)this.onRowSelected(e,!c);else c||(this.clearSelection(),this.onRowSelected(e,!0))},_uiSetWidth:function(){this.setTableWidth()},_uiSetHeight:function(){this.setTableWidth()}},{ATTRS:{columns:{view:!0,value:[]},tbodyEl:{view:!0},tableCls:{view:!0,value:""},forceFit:{view:!0,value:!1},multiSelect:{value:!1},stripeRows:{view:!0,value:!0},tpl:{view:!0,
value:'<table cellspacing="0" cellpadding="0" class="ks-grid-table {{tableCls}}"><tbody></tbody></table>'},headerRowTpl:{view:!0,value:'<tr class="ks-grid-header-row">{{cellsTpl}}</tr>'},rowTpl:{view:!0,value:'<tr class="ks-grid-row {{oddCls}}">{{cellsTpl}}</tr>'},cellTpl:{view:!0,value:'<td  class="ks-grid-cell grid-td-{{id}}" data-column-id="{{id}}" data-column-field = {{dataIndex}}  {{#if hide}} style="display : none" {{/if}}><div class="ks-grid-cell-inner" >{{cellText}}</div></td>'},cellTextTpl:{view:!0,
value:'<span class="ks-grid-cell-text " title = "{{tips}}">{{text}}</span>'},headerCellTpl:{view:!0,value:'<td class="grid-td-{{id}}" style=" {{#if width}}width:{{width}}px;{{/if}}height:0;{{#if hide}} display : none {{/if}}"></td>'},events:{value:"aftershow,cellclick,rowclick,rowcreated,rowremoved,rowselected,rowunselected,scroll".split(",")},xrender:{value:b}}},{xclass:"grid-body",priority:1})},{requires:["component","template","./bindable"]});
KISSY.add("grid/header",function(f,g,d){var c=f.UA,b=g.Render.extend({renderUI:function(){var a=this.get("el"),b=this.get("tableCls"),a=(new f.Node('<table cellspacing="0" class="ks-grid-table" cellpadding="0"><thead><tr></tr></thead></table>')).appendTo(a);a.addClass(b);this.set("tableEl",a)},getContentElement:function(){return this.get("el").one("tr")},scrollTo:function(a){var b=this.get("el");void 0!==a.top&&b.scrollTop(a.top);void 0!==a.left&&b.scrollLeft(a.left)}},{ATTRS:{emptyCellEl:{},tableEl:{}}});
return g.Controller.extend({addColumn:function(a,b){var e=0,c=this.get("columns"),a=this._createColumn(a);void 0===b&&(b=c.length,e=this.get("children").length-1);c.splice(b,0,a);this.addChild(a,e);this.fire("add",{column:a,index:b});return a},removeColumn:function(a){var b=this.get("columns"),e,a=f.isNumber(a)?b[a]:a;e=f.indexOf(a,b);b.splice(e,1);this.fire("remove",{column:a,index:e});return this.removeChild(a,!0)},bindUI:function(){this._bindColumnsEvent()},initializer:function(){var a=this,b=
a.get("children"),e=a.get("columns"),c=a._createEmptyColumn();f.each(e,function(c,d){var f=a._createColumn(c);b[d]=f;e[d]=f});b.push(c);a.set("emptyColumn",c)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var a=this.getColumns(),b=0;f.each(a,function(a){a.get("visible")&&(b+=a.get("el").outerWidth())});return b},getColumnByIndex:function(a){return this.getColumns()[a]},getColumnById:function(a){var b=this.getColumns(),c=null;f.each(b,function(b){if(b.get("id")===a)return c=
b,!1});return c},getColumnIndex:function(a){var b=this.getColumns();return f.indexOf(a,b)},scrollTo:function(a){this.get("view").scrollTo(a)},_bindColumnsEvent:function(){var a=this;a.on("afterWidthChange",function(b){b.target!==a&&a.setTableWidth()});a.on("afterVisibleChange",function(b){b.target!==a&&a.setTableWidth()});a.on("afterSortStateChange",function(b){var c=b.target,d=a.getColumns();b.newVal&&f.each(d,function(a){a!==c&&a.set("sortState","")})});a.on("add",function(){a.setTableWidth()});
a.on("remove",function(){a.setTableWidth()})},_createColumn:function(a){if(a instanceof d)return a;a.id||(a.id=f.guid("col"));return new d(a)},_createEmptyColumn:function(){return new d.Empty},_isAllowScrollLeft:function(){var a=this.get("parent");return a&&!!a.get("height")},forceFitColumns:function(){function a(a,b){var c=a.get("el");a.set("width",b,{silent:1});c.width(b)}var b=this.getColumns(),e=this.get("width"),d=e,g=0,j=null,i=this._isAllowScrollLeft();if(e){i&&(d=e-=17);var k=0;f.each(b,function(a){a.get("visible")&&
a.get("resizable")&&k++;a.get("visible")&&!a.get("resizable")&&(e=e-a.get("el").outerWidth())});var l=Math.floor(e/k);f.each(b,function(b,e){if(b.get("visible")&&b.get("resizable")){a(b,l-(c.ie?1:e==0?0:1));g=g+l;j=b}});j&&a(j,j.get("width")+(d-g));this.fire("forceFitWidth")}},setTableWidth:function(){var a=this.get("width"),b=0,c=null;this.get("forceFit")?this.forceFitColumns():this._isAllowScrollLeft()&&(b=this.getColumnsWidth(),c=this.get("emptyColumn"),a<b?c.get("el").width(17):c.get("el").width("auto"))},
_uiSetWidth:function(){this.setTableWidth()},_uiSetForceFit:function(a){a&&this.setTableWidth()}},{ATTRS:{activeItem:{value:null},columns:{value:[]},emptyColumn:{},focusable:{value:!1},forceFit:{view:!0,value:!1},tableCls:{view:!0,value:"ks-grid-table"},xrender:{value:b},events:{value:["add","remove"]}}},{xclass:"grid-header",priority:1})},{requires:["component","./column"]});
KISSY.add("grid/numberpagingbar",function(f,g,d,c){g=d.extend({_getItems:function(){var b=this.get("items"),a;if(b)return b;b=[];b.push(this._getButtonItem(d.ID_PREV));a=new c({id:"numberContainer",elCls:"ks-inline-block"});b.push(a);this.set("numberContainer",a);b.push(this._getButtonItem(d.ID_NEXT));b.push(this._getTextItem(d.ID_TOTAL_PAGE));b.push(this._getTextItem(d.ID_CURRENT_PAGE));b.push(this._getButtonItem(d.ID_SKIP));return b},_bindButtonEvent:function(){var b=this,a=b.get("numberContainer");
b.constructor.superclass._bindButtonEvent.call(this);a.get("el").delegate("click",".ks-grid-button-number",function(a){a=f.one(a.target);a=parseInt(a.text(),10);b.jumpToPage(a)})},_setNumberPages:function(){this.constructor.superclass._setNumberPages.call(this);this._setNumberButtons()},_setNumberButtons:function(){var b=this.get("numberContainer"),a=this.get("curPage"),c=this.get("totalPage"),c=this._getNumberItems(a,c);b.removeChildren(!0);f.each(c,function(a){b.addChild(a)});(a=b.getItem(a))&&
a.set("checked",!0)},_getNumberItems:function(b,a){function c(a,b){for(var h=a;h<=b;h++)d.push(e._getNumberItem(h))}var e=this,d=[],f=e.get("maxLimitCount"),g=e.get("showRangeCount");if(a<f)f=a,c(1,a);else{var i=b<=f?1:b-g,g=b+g,g=g<a?g>f?g:f:a;1<i&&(c(1,1),2<i&&d.push(e._getEllipsisItem()));f=g;c(i,g)}f<a&&(f<a-1&&d.push(e._getEllipsisItem()),c(a,a));return d},_getEllipsisItem:function(){return{xclass:"grid-bar-item-text",text:this.get("ellipsisTpl")}},_getNumberItem:function(b){return{id:b,xclass:"grid-bar-item-button",
text:""+b+"",elCls:this.get("numberButtonCls")}}},{ATTRS:{skipText:{value:"\u786e\u5b9a"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:"ks-grid-button-number"},ellipsisTpl:{value:"..."},curPageTpl:{value:'\u5230\u7b2c <input type="text" autocomplete="off" class="ks-pb-page" size="20" name="inputItem"> \u9875'}}},{xclass:"grid-pagingbar-number",priority:3});return d.Number=g},{requires:["component","./pagingbar","./bar"]});
KISSY.add("grid/pagingbar",function(f,g,d,c){return d.extend([c],{initializer:function(){var b=this.get("children"),a=this._getItems(),c=this.get("store");f.each(a,function(a){b.push(a)});c&&c.pageSize&&this.set("pageSize",c.pageSize)},bindUI:function(){this._bindButtonEvent()},jumpToPage:function(b){if(!(0>=b||b>this.get("totalPage"))){var a=this.get("store"),c=this.get("pageSize"),e=b-1,d=e*c,b=this.fire("beforepagechange",{from:this.get("curPage"),to:b});a&&!1!==b&&a.load({start:d,limit:c,pageIndex:e})}},
_afterStoreLoad:function(b,a){var c=this.get("pageSize"),e=0,d,f,g,e=a?a.start||0:0;f=b.getTotalCount();d=f-e>c?e+b.getCount():f;g=parseInt((f+c-1)/c,10);g=0<g?g:1;c=parseInt(e/c,10)+1;this.set("start",e);this.set("end",d);this.set("totalCount",f);this.set("curPage",c);this.set("totalPage",g);this._setAllButtonsState();this._setNumberPages()},_bindButtonEvent:function(){function b(){var b=parseInt(a._getCurrentPageValue(),10);a._isPageAllowRedirect(b)?a.jumpToPage(b):a._setCurrentPageValue(a.get("curPage"))}
var a=this;a._bindButtonItemEvent("first",function(){a.jumpToPage(1)});a._bindButtonItemEvent("prev",function(){a.jumpToPage(a.get("curPage")-1)});a._bindButtonItemEvent("next",function(){a.jumpToPage(a.get("curPage")+1)});a._bindButtonItemEvent("last",function(){a.jumpToPage(a.get("totalPage"))});a._bindButtonItemEvent("skip",function(){b()});a.getItem("curPage").get("el").on("keyup",function(a){a.stopPropagation();13===a.keyCode&&b()})},_bindButtonItemEvent:function(b,a){var c=this.getItem(b);if(c)c.get("el").on("click",
a)},onLoad:function(b){this._afterStoreLoad(this.get("store"),b)},_getItems:function(){var b=this.get("items");if(b)return b;b=[];b.push(this._getButtonItem("first"));b.push(this._getButtonItem("prev"));b.push(this._getSeparator());b.push(this._getTextItem("totalPage"));b.push(this._getTextItem("curPage"));b.push(this._getButtonItem("skip"));b.push(this._getSeparator());b.push(this._getButtonItem("next"));b.push(this._getButtonItem("last"));b.push(this._getSeparator());b.push(this._getTextItem("totalCount"));
return b},_getButtonItem:function(b){return{id:b,xclass:"grid-bar-item-button",text:this.get(b+"Text"),disabled:!0,elCls:this.get(b+"Cls")}},_getSeparator:function(){return{xclass:"grid-bar-item-separator"}},_getTextItem:function(b){return{id:b,xclass:"grid-bar-item-text",text:this._getTextItemTpl(b)}},_getTextItemTpl:function(b){var a={};a[b]=this.get(b);return f.substitute(this.get(b+"Tpl"),a)},_isPageAllowRedirect:function(b){return b&&0<b&&b<=this.get("totalPage")&&b!==this.get("curPage")},_setAllButtonsState:function(){this.get("store")&&
this._setButtonsState(["prev","next","first","last","skip"],!0);1===this.get("curPage")&&this._setButtonsState(["prev","first"],!1);this.get("curPage")===this.get("totalPage")&&this._setButtonsState(["next","last"],!1)},_setButtonsState:function(b,a){var c=this.get("children");f.each(c,function(c){f.inArray(c.get("id"),b)&&c.set("disabled",!a)})},_setNumberPages:function(){var b=this.getItem("totalPage"),a=this.getItem("totalCount");b&&b.set("content",this._getTextItemTpl("totalPage"));this._setCurrentPageValue(this.get("curPage"));
a&&a.set("content",this._getTextItemTpl("totalCount"))},_getCurrentPageValue:function(b){b=b||this.getItem("curPage");return b.get("el").one("input").val()},_setCurrentPageValue:function(b,a){a=a||this.getItem("curPage");a.get("el").one("input").val(b)}},{ATTRS:{firstText:{value:"\u9996 \u9875"},fistCls:{value:"ks-pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:"ks-pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:"ks-pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:"ks-pb-last"},skipText:{value:"\u8df3 \u8f6c"},skipCls:{value:"ks-pb-skip"},
totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="ks-pb-page" size="20" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:"first",ID_PREV:"prev",ID_NEXT:"next",ID_LAST:"last",ID_SKIP:"skip",ID_TOTAL_PAGE:"totalPage",ID_CURRENT_PAGE:"curPage",ID_TOTAL_COUNT:"totalCount"},{xclass:"grid-pagingbar",priority:2})},{requires:["component","./bar",
"./bindable"]});
KISSY.add("grid/plugins",function(f){function g(c){g.superclass.constructor.call(this,c)}f.extend(g,f.Base);g.ATTRS={width:{value:40},column:{},cellInner:{value:'<span class="ks-grid-checkBox-container"><input  class="ks-grid-checkBox" type="checkbox"></span>'}};f.augment(g,{createDom:function(c){var b={title:"",width:this.get("width"),resizable:!1,sortable:!1,tpl:'<div class="ks-grid-hd-inner">'+this.get("cellInner")+"</div>",cellTpl:this.get("cellInner")},b=c.addColumn(b,0);c.set("multiSelect",!0);
this.set("column",b)},bindUI:function(c){var b=this,a=b.get("column").get("el").one(".ks-grid-checkBox");a.on("click",function(){var b=a.attr("checked");a.attr("checked",b);b?c.setAllSelection():c.clearSelection()});c.on("rowselected",function(a){b._setRowChecked(a.row,!0)});c.on("rowunselected",function(c){b._setRowChecked(c.row,!1);a.attr("checked",!1)})},_setRowChecked:function(c,b){f.one(c).one(".ks-grid-checkBox").attr("checked",b)}});var d=function(c){d.superclass.constructor.call(this,c)};
f.extend(d,f.Base);d.ATTRS={width:{value:40},column:{},cellInner:{value:'<span class="ks-grid-radio-container"><input  class="ks-grid-radio" type="radio"></span>'}};f.augment(d,{createDom:function(c){var b={title:"",width:this.get("width"),resizable:!1,sortable:!1,cellTpl:this.get("cellInner")},b=c.addColumn(b,0);c.set("multiSelect",!1);this.set("column",b)},bindUI:function(c){var b=this;c.on("rowselected",function(a){b._setRowChecked(a.row,!0)});c.on("rowunselected",function(a){b._setRowChecked(a.row,
!1)})},_setRowChecked:function(c,b){f.one(c).one(".ks-grid-radio").attr("checked",b)}});return{CheckSelection:g,RadioSelection:d}});
KISSY.add("grid/store",function(f){function g(d){d=d||{};d=f.merge({root:"rows",totalProperty:"results",dataType:"json",autoLoad:!1,sortInfo:{field:"",direction:"ASC"},proxy:{method:"post",url:""},params:{},remoteSort:!1,matchFunction:function(c,b){return c===b},compareFunction:function(c,b){void 0===c&&(c="");void 0===b&&(b="");return f.isString(c)?c.localeCompare(b):c>b?1:c===b?0:-1}},d);f.mix(this,d);f.mix(this,{hasLoad:!1,resultRows:[],newRecords:[],modifiedRecords:[],deletedRecords:[],rowCount:0,
totalCount:0});this.events="acceptchanges,load,beforeload,beforeProcessLoad,addrecords,exception,removerecords,updaterecord,localsort".split(",");this._init()}f.augment(g,f.EventTarget);f.augment(g,{acceptChanges:function(){this._clearChanges();this.fire("acceptchanges")},add:function(d,c,b){var a=this,h=[],b=b||a._getDefaultMatch();f.isArray(d)||(d=[d]);f.each(d,function(e){if(!c||!a.contains(e,b))a._addRecord(e),h.push(e),a.newRecords.push(e),a._removeFrom(e,a.deletedRecords),a._removeFrom(e,a.modifiedRecords)});
a.fire("addrecords",{data:h})},clear:function(){this.setResult([])},compare:function(d,c,b,a){b=b||this.sortInfo.field;a=a||this.sortInfo.direction;return!b||!a?1:this.compareFunction(d[b],c[b])*("ASC"===a?1:-1)},contains:function(d,c){return-1!==this.findIndexBy(d,c)},findIndexBy:function(d,c){var b=-1,a=this.resultRows,c=c||this._getDefaultMatch();if(f.isUndefined(d)||f.isNull(d))return-1;f.each(a,function(a,e){if(c(d,a))return b=e,!1});return b},find:function(d,c){var b=null;f.each(this.resultRows,
function(a){if(a[d]===c)return b=a,!1});return b},findByIndex:function(d){return this.resultRows[d]},findAll:function(d,c){var b=[];f.each(this.resultRows,function(a){a[d]===c&&b.push(a)});return b},findNextRecord:function(d){d=this.findIndexBy(d);if(0<=d)return this.findByIndex(d+1)},load:function(d){this._loadData(d)},getResult:function(){return this.resultRows},getCount:function(){return this.resultRows.length},getNewRecords:function(){return this.newRecords},getModifiedRecords:function(){return this.modifiedRecords},
getDeletedRecords:function(){return this.deletedRecords},getTotalCount:function(){return this.totalCount},remove:function(d,c){var b=this,a=[],c=c||b._getDefaultMatch();f.isArray(d)||(d=[d]);f.each(d,function(d){d=b.findIndexBy(d,c);d=b._removeAt(d);!f.inArray(d,b.newRecords)&&!f.inArray(d,b.deletedRecords)&&b.deletedRecords.push(d);b._removeFrom(d,b.newRecords);b._removeFrom(d,b.modifiedRecords);a.push(d)});b.fire("removerecords",{data:a})},setResult:function(d){this.resultRows=d=d||[];this.totalCount=
this.rowCount=d.length;this._sortData();this.fire("load",this.oldParams)},setValue:function(d,c,b,a){var h=d,e=null,e=null;a&&(e=this._getDefaultMatch(),e=this.findIndexBy(d,e),0<=e&&(h=this.resultRows[e]));h[c]=b;!f.inArray(h,this.newRecords)&&!f.inArray(h,this.modifiedRecords)&&this.modifiedRecords.push(h);this.fire("updaterecord",{record:h,field:c,value:b})},sort:function(d,c){this.sortInfo.field=d||this.sortInfo.field;this.sortInfo.direction=c||this.sortInfo.direction;if(this.remoteSort){var b=
this.proxy.memoryData;b&&this._sortData(d,c,b);this.load()}else this._sortData(d,c),this.fire("localsort",{field:d,direction:c})},update:function(d,c){var b=d,a=null,a=null;c&&(a=this._getDefaultMatch(),a=this.findIndexBy(d,a),0<=a&&(b=this.resultRows[a]));b=f.mix(b,d);!f.inArray(b,this.newRecords)&&!f.inArray(b,this.modifiedRecords)&&this.modifiedRecords.push(b);this.fire("updaterecord",{record:b})},_addRecord:function(d,c){var b=this.resultRows;f.isUndefined(c)&&(c=b.length);b[c]=d},_clearChanges:function(){this.newRecords.splice(0);
this.modifiedRecords.splice(0);this.deletedRecords.splice(0)},_loadData:function(d){var c=this,b=d||{};c.fire("beforeload");b=f.merge(c.oldParams,c.sortInfo,b);c.oldParams=b;c.proxy.url?(d="post"===c.proxy.method?b:b?f.param(b):"",f.ajax({cache:!1,url:c.proxy.url,dataType:c.dataType,type:c.proxy.method,data:d,success:function(a){c.fire("beforeProcessLoad",{data:a});var d=[],e=0,g=0;if(a.hasError)c.resultRows=d,c.rowCount=e,c.totalCount=g,c.fire("exception",{error:a.error});else{if(f.isArray(a)||f.isObject(a))f.isArray(a)?
(d=a,g=e=d.length):a&&((d=a[c.root])||(d=[]),e=d.length,g=parseInt(a[c.totalProperty],10));c.resultRows=d;c.rowCount=e;c.totalCount=g;c.remoteSort||c._sortData();c.fire("load",b);c._clearChanges()}},error:function(a,b,e){c.resultRows=[];c.rowCount=0;c.totalCount=0;c.fire("exception",{error:b,responseText:e.responseText})}})):c._loadByMemory(b)},_loadByMemory:function(d){var c=this.proxy.memoryData,b=[],a=[];c&&(b=d.filter?f.filter(c,d.filter):c,d.start=d.start||0,d.limit=d.limit||this.pageSize,a=
d.limit?b.slice(d.start,d.start+d.limit):b,this._setResult(a,a.length,b.length),this.remoteSort||this._sortData(),this.fire("load",d))},_removeAt:function(d,c){if(!(0>d)){var b=c||this.resultRows,a=b[d];b.splice(d,1);return a}},_removeFrom:function(d,c){var b=f.indexOf(d,c);0<=b&&this._removeAt(b,c)},_setResult:function(d,c,b){this.resultRows=d;this.rowCount=c;this.totalCount=b},_sortData:function(d,c,b){var a=this,b=b||a.resultRows,d=d||a.sortInfo.field,c=c||a.sortInfo.direction;d&&c&&b.sort(function(b,
e){return a.compare(b,e,d,c)})},_getDefaultMatch:function(){return this.matchFunction},_init:function(){this.oldParams=this.params||{};this.proxy.url||(this.proxy.url=this.url);this.resultRows=[];this.autoLoad&&this.load()}});return g});
KISSY.add("grid/util",function(f){function g(a){return 10>a?"0"+a:a}function d(a,b){this.el=a;d.superclass.constructor.call(this,b);this._init()}var c=f.DOM,b=f.UA,a={maskElement:function(a,e,d){var a=f.one(a),g=a.getDOMNode(),j=f.one(".ks-ext-mask",g),i=null,k=i=null,l=null;if(!j&&(j=f.one(c.create('<div class="ks-ext-mask"></div>')).appendTo(g),a.addClass("x-masked-relative x-masked"),6===b.ie&&j.height(a.height()),e)){i=['<div class="ks-ext-mask-msg"><div>',e,"</div></div>"].join("");i=f.one(c.create(i)).appendTo(g);
d&&i.addClass(d);try{k=(a.height()-i.height())/2,l=(a.width()-i.width())/2,i.css({left:l,top:k})}catch(n){}}return j},unmaskElement:function(a){var a=f.one(a),b=a.children(".ks-ext-mask-msg"),c=a.children(".ks-ext-mask");b&&b.remove();c&&c.remove();a.removeClass("x-masked-relative x-masked")},Format:{dateRenderer:function(a){if(!a)return"";if(f.isString(a))return a;var b=null;try{b=new Date(a)}catch(c){return""}return!b||!b.getFullYear?"":b.getFullYear()+"-"+g(b.getMonth()+1)+"-"+g(b.getDate())},
datetimeRenderer:function(a){if(!a)return"";if(f.isString(a))return a;var b=null;try{b=new Date(a)}catch(c){return""}return!b||!b.getFullYear?"":b.getFullYear()+"-"+g(b.getMonth()+1)+"-"+g(b.getDate())+" "+g(b.getHours())+":"+g(b.getMinutes())+":"+g(b.getSeconds())},cutTextRenderer:function(a){return function(b){b=b||"";return b.toString().length>a?b.toString().substring(0,a)+"...":b}},enumRenderer:function(a){return function(b){return a[b]||""}},multipleItemsRenderer:function(a){var b=Grid.Util.Format.enumRenderer(a);
return function(a){var c=[];if(!a)return"";f.isArray(a)||(a=a.toString().split(","));f.each(a,function(a){c.push(b(a))});return c.join(",")}},moneyCentRenderer:function(a){f.isString(a)&&(a=parseFloat(a));return f.isNumber(a)?(0.01*a).toFixed(2):a}}};f.extend(d,f.Base);f.augment(d,{msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,_init:function(){this.msg=this.get("msg")||this.msg},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){a.unmaskElement(this.el)},
onBeforeLoad:function(){this.disabled||a.maskElement(this.el,this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.el=null}});a.LoadMask=d;return a});
