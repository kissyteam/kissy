/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 19 22:27
*/
KISSY.add("tabs/bar-render",function(c,b){return b.getDefaultRender().extend({beforeCreateDom:function(a){a.elAttrs.role="tablist"}},{name:"TabsBarRender"})},{requires:["toolbar"]});
KISSY.add("tabs/bar",function(c,b,a,e){b=b.extend({bindUI:function(){var a=this;a.on("afterSelectedChange",function(b){b.newVal&&b.target.isTabsTab&&a.set("selectedTab",b.target)})},syncUI:function(){var a=this,b=a.get("children");c.each(b,function(b){return b.get("selected")?(a.setInternal("selectedTab",b),!1):e})},handleKeyDownInternal:function(a){var b=this.get("selectedTab"),a=this.getNextItemByKeyDown(a,b);if("boolean"===typeof a)return a;a.set("selected",!0);return!0},_onSetSelectedTab:function(a,
b){var l;a&&(b&&(l=b.prevVal)&&l.set("selected",!1),a.set("selected",!0))},_onSetHighlightedItem:function(a,b){this.callSuper(a,b);"mouse"==this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{value:{xclass:"tabs-tab"}},xrender:{value:a}},xclass:"tabs-bar"});b.ChangeType={CLICK:"click",MOUSE:"mouse"};return b},{requires:["toolbar","./bar-render"]});
KISSY.add("tabs/body",function(c,b,a,e){function n(a,b,i){if(a.get("lazyRender")){var g=a.get("children")[i];if(!g.get("selected"))return g}return k.superclass[b].call(a,i)}var k=b.extend({bindUI:function(){var a=this;a.on("afterSelectedPanelIndexChange",function(b){var i=a.get("children"),g=b.newVal,d;i[g]&&((d=i[b.prevVal])&&d.set("selected",!1),a.selectPanelByIndex(g))})},syncUI:function(){var a=this,b=a.get("children");c.each(b,function(b,g){return b.get("selected")?(a.set("selectedPanelIndex",
g),!1):e})},createChild:function(a){return n(this,"createChild",a)},renderChild:function(a){return n(this,"renderChild",a)},selectPanelByIndex:function(a){this.get("children")[a].set("selected",!0);this.get("lazyRender")&&this.renderChild(a)}},{ATTRS:{selectedPanelIndex:{},allowTextSelection:{value:!0},focusable:{value:!1},lazyRender:{},handleMouseEvents:{value:!1},defaultChildCfg:{value:{xclass:"tabs-panel"}}},xclass:"tabs-body"});return k},{requires:["component/container"]});
KISSY.add("tabs/tab-render",function(c,b){return b.getDefaultRender().extend({beforeCreateDom:function(a){var b=a.elAttrs;b.role="tab";a.selected&&(b["aria-selected"]=!0,a.elCls.push(this.getBaseCssClasses("selected")))},_onSetSelected:function(a){var b=this.$el,c=this.getBaseCssClasses("selected");b[a?"addClass":"removeClass"](c).attr("aria-selected",!!a)}},{name:"TabsTabRender",HTML_PARSER:{selected:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}})},{requires:["button"]});
KISSY.add("tabs/tab",function(c,b,a){return b.extend({isTabsTab:!0,bindUI:function(){this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},xrender:{value:a}},xclass:"tabs-tab"})},{requires:["button","./tab-render"]});
KISSY.add("tabs/panel-render",function(c,b){return b.getDefaultRender().extend({beforeCreateDom:function(a){a.elAttrs.role="tabpanel";a.selected?a.elCls.push(this.getBaseCssClasses("selected")):a.elAttrs["aria-hidden"]=!1},_onSetSelected:function(a){var b=this.$el,c=this.getBaseCssClasses("selected");b[a?"addClass":"removeClass"](c).attr("aria-hidden",!a)}},{name:"TabsPanelRender",HTML_PARSER:{selected:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}})},{requires:["component/container"]});
KISSY.add("tabs/panel",function(c,b,a){return b.extend({isTabsPanel:1},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},xrender:{value:a}},xclass:"tabs-panel"})},{requires:["component/container","./panel-render"]});
KISSY.add("tabs/render",function(c,b){return b.getDefaultRender().extend({beforeCreateDom:function(a){a.elCls.push(this.getBaseCssClass(this.control.get("barOrientation")))},decorateDom:function(){var a=this.control;a.get("bar").set("changeType",a.get("changeType"))},_onSetBarOrientation:function(a){this.$el.removeClass(this.getBaseCssClass("top bottom left right")).addClass(this.getBaseCssClass(a))}},{name:"TabsRender",HTML_PARSER:{barOrientation:function(a){return(a=a[0].className.match(/(top|bottom|left|right)\b/))&&
a[1]||"top"}}})},{requires:["component/container"]});
KISSY.add("tabs",function(c,b,a,e,n,k,l){b=b.extend({initializer:function(){var a=this.get("items");if(a){var b=this.get("children"),d=this.get("barOrientation"),o,f=this.get("prefixCls"),j={prefixCls:f,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},f={prefixCls:f,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},h=j.children,e=f.children;c.each(a,function(a){o=o||a.selected;h.push({content:a.title,selected:a.selected});e.push({content:a.content,selected:a.selected})});
!o&&h.length&&(h[0].selected=!0,e[0].selected=!0);b[m[d]]=j;b[1-m[d]]=f}},addItem:function(a,b){var d=this.get("bar"),c,f,e=d.get("children"),h=this.get("body");"undefined"==typeof b&&(b=e.length);c={content:a.title};f={content:a.content};d.addChild(c,b);c=e[b];h.addChild(f,b);a.selected&&(d.set("selectedTab",c),h.set("selectedPanelIndex",b));return this},removeItemAt:function(a,b){var d=this.get("bar"),c=d.get("children"),e=d.getChildAt(a),j=this.get("body");e.get("selected")&&(1==c.length?d.set("selectedTab",
null):0==a?d.set("selectedTab",d.getChildAt(a+1)):d.set("selectedTab",d.getChildAt(a-1)));d.removeChild(d.getChildAt(a),b);j.removeChild(j.getChildAt(a),b);return this},removeItemByTab:function(a,b){return this.removeItemAt(c.indexOf(a,this.get("bar").get("children")),b)},removeItemByPanel:function(a,b){return this.removeItemAt(c.indexOf(a,this.get("body").get("children")),b)},getSelectedTab:function(){var a=this.get("bar"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=
a,!1});return b},getSelectedPanel:function(){var a=this.get("body"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},setSelectedTab:function(a){var b=this.get("bar"),d=this.get("body");b.set("selectedTab",a);
d.set("selectedPanelIndex",c.indexOf(a,b.get("children")));return this},setSelectedPanel:function(a){var b=this.get("bar"),d=this.get("body"),a=c.indexOf(a,d.get("children"));d.set("selectedPanelIndex",a);b.set("selectedTab",this.getTabAt(a));return this},bindUI:function(){this.on("afterSelectedTabChange",function(a){this.setSelectedTab(a.newVal)})}},{ATTRS:{items:{},changeType:{},lazyRender:{value:!1},handleMouseEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{getter:function(){return this.get("children")[m[this.get("barOrientation")]]}},
body:{getter:function(){return this.get("children")[1-m[this.get("barOrientation")]]}},barOrientation:{view:1,value:"top"},xrender:{value:l}},xclass:"tabs"});b.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};var m={top:0,left:0,bottom:1,right:0};b.ChangeType=a.ChangeType;b.Bar=a;b.Body=e;b.Panel=k;return b},{requires:"component/container,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});
