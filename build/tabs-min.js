/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 3 13:58
*/
KISSY.add("tabs/bar-render",function(c,b){return b.ATTRS.xrender.value.extend({beforeCreateDom:function(a){a.elAttrs.role="tablist"}},{name:"TabsBarRender"})},{requires:["toolbar"]});
KISSY.add("tabs/bar",function(c,b,a,g){var f=b.extend({bindUI:function(){var a=this;a.on("afterSelectedChange",function(d){d.newVal&&d.target.isTabsTab&&a.set("selectedTab",d.target)})},syncUI:function(){var a=this,d=a.get("children");c.each(d,function(d){return d.get("selected")?(a.setInternal("selectedTab",d),!1):g})},handleKeyDownInternal:function(a){var d=this.get("selectedTab"),a=this.getNextItemByKeyDown(a,d);if(c.isBoolean(a))return a;a.set("selected",!0);return!0},_onSetSelectedTab:function(a,
d){var b;a&&(d&&(b=d.prevVal)&&b.set("selected",!1),a.set("selected",!0))},_onSetHighlightedItem:function(){f.superclass._onSetHighlightedItem.apply(this,arguments);"mouse"==this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{value:{xclass:"tabs-tab"}},xrender:{value:a}},xclass:"tabs-bar"});f.ChangeType={CLICK:"click",MOUSE:"mouse"};return f},{requires:["toolbar","./bar-render"]});
KISSY.add("tabs/body",function(c,b,a,g){function f(a,b,h){if(a.get("lazyRender")){var i=a.get("children")[h];if(!i.get("selected"))return i}return k.superclass[b].call(a,h)}var k=b.extend({bindUI:function(){var a=this;a.on("afterSelectedPanelIndexChange",function(b){var h=a.get("children"),i=b.newVal,e;h[i]&&((e=h[b.prevVal])&&e.set("selected",!1),a.selectPanelByIndex(i))})},syncUI:function(){var a=this,b=a.get("children");c.each(b,function(h,i){return h.get("selected")?(a.set("selectedPanelIndex",
i),!1):g})},createChild:function(a){return f(this,"createChild",a)},renderChild:function(a){return f(this,"renderChild",a)},selectPanelByIndex:function(a){this.get("children")[a].set("selected",!0);this.get("lazyRender")&&this.renderChild(a)}},{ATTRS:{selectedPanelIndex:{},allowTextSelection:{value:!0},focusable:{value:!1},lazyRender:{},handleMouseEvents:{value:!1},defaultChildCfg:{value:{xclass:"tabs-panel"}}},xclass:"tabs-body"});return k},{requires:["component/container"]});
KISSY.add("tabs/tab-render",function(c,b){return b.ATTRS.xrender.value.extend({beforeCreateDom:function(a){var b=a.elAttrs;b.role="tab";a.selected&&(b["aria-selected"]=!0,a.elCls.push(this.getBaseCssClasses("selected")))},_onSetSelected:function(a){var b=this.$el,c=this.getBaseCssClasses("selected");b[a?"addClass":"removeClass"](c).attr("aria-selected",!!a)}},{name:"TabsTabRender",HTML_PARSER:{selected:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}})},{requires:["button"]});
KISSY.add("tabs/tab",function(c,b,a){return b.extend({isTabsTab:!0,bindUI:function(){this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},xrender:{value:a}},xclass:"tabs-tab"})},{requires:["button","./tab-render"]});
KISSY.add("tabs/panel-render",function(c,b){return b.ATTRS.xrender.value.extend({beforeCreateDom:function(a){a.elAttrs.role="tabpanel";a.selected?a.elCls.push(this.getBaseCssClasses("selected")):a.elAttrs["aria-hidden"]=!1},_onSetSelected:function(a){var b=this.$el,c=this.getBaseCssClasses("selected");b[a?"addClass":"removeClass"](c).attr("aria-hidden",!a)}},{name:"TabsPanelRender",HTML_PARSER:{selected:function(a){return a.hasClass(this.getBaseCssClass("selected"))}}})},{requires:["component/container"]});
KISSY.add("tabs/panel",function(c,b,a){return b.extend({isTabsPanel:1},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},xrender:{value:a}},xclass:"tabs-panel"})},{requires:["component/container","./panel-render"]});
KISSY.add("tabs/render",function(c,b){return b.ATTRS.xrender.value.extend({beforeCreateDom:function(a){a.elCls.push(this.getBaseCssClass(this.control.get("barOrientation")))},decorateDom:function(){var a=this.control;a.get("bar").set("changeType",a.get("changeType"))},_onSetBarOrientation:function(a){this.$el.removeClass(this.getBaseCssClass("top bottom left right")).addClass(this.getBaseCssClass(a))}},{name:"TabsRender",HTML_PARSER:{barOrientation:function(a){return(a=a[0].className.match(/(top|bottom|left|right)\b/))&&
a[1]||"top"}}})},{requires:["component/container"]});
KISSY.add("tabs",function(c,b,a,g,f,k,d){b=b.extend({initializer:function(){var a=this.get("items");if(a){var b=this.get("children"),e=this.get("barOrientation"),d,j=this.get("prefixCls"),m={prefixCls:j,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},j={prefixCls:j,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},f=m.children,g=j.children;c.each(a,function(a){d=d||a.selected;f.push({content:a.title,selected:a.selected});g.push({content:a.content,selected:a.selected})});
!d&&f.length&&(f[0].selected=!0,g[0].selected=!0);b[l[e]]=m;b[1-l[e]]=j}},addItem:function(a,b){var e=this.get("bar"),c,d,f=e.get("children"),g=this.get("body");"undefined"==typeof b&&(b=f.length);c={content:a.title};d={content:a.content};e.addChild(c,b);c=f[b];g.addChild(d,b);a.selected&&(e.set("selectedTab",c),g.set("selectedPanelIndex",b));return this},removeItemAt:function(a,b){var e=this.get("bar"),c=e.get("children"),d=e.getChildAt(a),f=this.get("body");d.get("selected")&&(1==c.length?e.set("selectedTab",
null):0==a?e.set("selectedTab",e.getChildAt(a+1)):e.set("selectedTab",e.getChildAt(a-1)));e.removeChild(e.getChildAt(a),b);f.removeChild(f.getChildAt(a),b);return this},removeItemByTab:function(a,b){return this.removeItemAt(c.indexOf(a,this.get("bar").get("children")),b)},removeItemByPanel:function(a,b){return this.removeItemAt(c.indexOf(a,this.get("body").get("children")),b)},getSelectedTab:function(){var a=this.get("bar"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=
a,!1});return b},getSelectedPanel:function(){var a=this.get("body"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},setSelectedTab:function(a){var b=this.get("bar"),d=this.get("body");b.set("selectedTab",a);
d.set("selectedPanelIndex",c.indexOf(a,b.get("children")));return this},setSelectedPanel:function(a){var b=this.get("bar"),d=this.get("body"),a=c.indexOf(a,d.get("children"));d.set("selectedPanelIndex",a);b.set("selectedTab",this.getTabAt(a));return this},bindUI:function(){this.on("afterSelectedTabChange",function(a){this.setSelectedTab(a.newVal)})}},{ATTRS:{items:{},changeType:{},lazyRender:{value:!1},handleMouseEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{getter:function(){return this.get("children")[l[this.get("barOrientation")]]}},
body:{getter:function(){return this.get("children")[1-l[this.get("barOrientation")]]}},barOrientation:{view:1,value:"top"},xrender:{value:d}},xclass:"tabs"});b.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};var l={top:0,left:0,bottom:1,right:0};b.ChangeType=a.ChangeType;b.Bar=a;b.Body=g;b.Panel=k;return b},{requires:"component/container,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});
