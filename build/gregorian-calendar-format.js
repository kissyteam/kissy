modulex.add("gregorian-calendar-format",["gregorian-calendar"],function(e,t,r){var a,n=e("gregorian-calendar");a=function(e){function t(e,t){for(var r in t)e[r]=t[r]}function r(e,t,r){return"string"==typeof e&&t?e.replace(r||D,function(e,r){return"\\"===e.charAt(0)?e.slice(1):void 0===t[r]?b:t[r]}):e}function a(e,t,r){r.push({field:e,count:t})}function i(e){for(var t=e.length,r=!1,n=[],i=null,s=0,o=-1,u=0;t>u;u++){var f=e.charAt(u);if("'"!==f)if(r)i+=f;else if(f>="a"&&"z">=f||f>="A"&&"Z">=f){if(-1===m.indexOf(f))throw new Error('Illegal pattern character "'+f+'"');-1!==o&&o!==f?(a(o,s,n),o=f,s=1):(o=f,s++)}else 0!==s&&(a(o,s,n),o=-1,s=0),n.push({text:f});else{if(t>u+1&&(f=e.charAt(u+1),"'"===f)){u++,0!==s&&(a(o,s,n),o=-1,s=0),r&&(i+=f);continue}r?(n.push({text:i}),r=!1):(0!==s&&(a(o,s,n),o=-1,s=0),i="",r=!0)}}if(r)throw new Error("Unterminated quote");return 0!==s&&a(o,s,n),n}function s(e,t,r,a){if(a=a||[],r=r||d,e>=0){if(100>e&&t>=1&&2>=t)return 10>e&&2===t&&a.push(y),a.push(e),a.join("");if(e>=1e3&&1e4>e){if(4===t)return a.push(e),a.join("");if(2===t&&2===r)return s(e%100,2,2,a)}}return a.push(e+""),a.join("")}function o(e,t,r){this.locale=t,this.pattern=i(e),this.timezoneOffset=r}function u(e,t,r,a){var n,i;switch(e){case"G":i=a.getYear()>0?1:0,n=r.eras[i];break;case"y":i=a.getYear(),0>=i&&(i=1-i),n=s(i,2,2!==t?d:2);break;case"M":i=a.getMonth(),n=t>=4?r.months[i]:3===t?r.shortMonths[i]:s(i+1,t);break;case"k":n=s(a.getHourOfDay()||24,t);break;case"E":i=a.getDayOfWeek(),n=t>=4?r.weekdays[i]:r.shortWeekdays[i];break;case"a":n=r.ampms[a.getHourOfDay()>=12?1:0];break;case"h":n=s(a.getHourOfDay()%12||12,t);break;case"K":n=s(a.getHourOfDay()%12,t);break;case"Z":var o=a.getTimezoneOffset(),u=[0>o?"-":"+"];o=Math.abs(o),u.push(s(Math.floor(o/60)%100,2),s(o%60,2)),n=u.join("");break;default:var f=p[e];i=a.get(f),n=s(i,t)}return n}function f(e,t,r){var a,n=-1,i=-1,s=r.length;for(a=0;s>a;a++){var o=r[a],u=o.length;u>n&&c(e,t,o,u)&&(n=u,i=a)}return i>=0?{value:i,startIndex:t+n}:null}function c(e,t,r,a){for(var n=0;a>n;n++)if(e.charAt(t+n)!==r.charAt(n))return!1;return!0}function l(e){var t,r,a=e.length;for(t=0;a>t&&(r=e.charAt(t),!("0">r||r>"9"));t++);return t}function h(e,t,r,a){var n,i=e;if(a){if(e.length<=t+r)return null;if(i=e.substring(t,r),!i.match(/^\d+$/))return null}else i=i.substring(t);return n=parseInt(i,10),isNaN(n)?null:{value:n,startIndex:t+l(i)}}function v(e,t,r,a,n,i,s,o){var u,c,l;if(t.length<=r)return r;switch(a){case"G":(u=f(t,r,i.eras))&&(e.isSetYear()?0===u.value&&(c=e.getYear(),e.setYear(1-c)):o.era=u.value);break;case"y":(u=h(t,r,n,s))&&(c=u.value,"era"in o&&0===o.era&&(c=1-c),e.setYear(c));break;case"M":var v;n>=3?(u=f(t,r,i[3===n?"shortMonths":"months"]))&&(v=u.value):(u=h(t,r,n,s))&&(v=u.value-1),u&&e.setMonth(v);break;case"k":(u=h(t,r,n,s))&&e.setHourOfDay(u.value%24);break;case"E":(u=f(t,r,i[n>3?"weekdays":"shortWeekdays"]))&&e.setDayOfWeek(u.value);break;case"a":(u=f(t,r,i.ampms))&&(e.isSetHourOfDay()?u.value&&(l=e.getHourOfDay(),12>l&&e.setHourOfDay((l+12)%24)):o.ampm=u.value);break;case"h":(u=h(t,r,n,s))&&(l=u.value%=12,o.ampm&&(l+=12),e.setHourOfDay(l));break;case"K":(u=h(t,r,n,s))&&(l=u.value,o.ampm&&(l+=12),e.setHourOfDay(l));break;case"Z":var g=1,d=t.charAt(r);if("-"===d)g=-1,r++;else{if("+"!==d)break;r++}if(u=h(t,r,2,!0)){var O=60*u.value;r=u.startIndex,(u=h(t,r,2,!0))&&(O+=u.value),e.setTimezoneOffset(O)}break;default:if(u=h(t,r,n,s)){var m=p[a];e.set(m,u.value)}}return u&&(r=u.startIndex),r}var g=n,d=Number.MAX_VALUE,O={FULL:0,LONG:1,MEDIUM:2,SHORT:3},m=new Array(g.DAY_OF_WEEK_IN_MONTH+2).join("1"),k=0,p={};m=m.split(""),m[k]="G",m[g.YEAR]="y",m[g.MONTH]="M",m[g.DAY_OF_MONTH]="d",m[g.HOUR_OF_DAY]="H",m[g.MINUTES]="m",m[g.SECONDS]="s",m[g.MILLISECONDS]="S",m[g.WEEK_OF_YEAR]="w",m[g.WEEK_OF_MONTH]="W",m[g.DAY_OF_YEAR]="D",m[g.DAY_OF_WEEK_IN_MONTH]="F",function(){for(var e in m)p[m[e]]=e}();var D=/\\?\{([^{}]+)\}/g,b="";m=m.join("")+"ahkKZE";var y="0";return t(o.prototype,{format:function(e){var t=e.getTime();e=new g(this.timezoneOffset,this.locale),e.setTime(t);var r,a=[],n=this.pattern,i=n.length;for(r=0;i>r;r++){var s=n[r];s.text?a.push(s.text):"field"in s&&a.push(u(s.field,s.count,this.locale,e))}return a.join("")},parse:function(e){var t,r,a=new g(this.timezoneOffset,this.locale),n={},i=!1,s=e.length,o=-1,u=0,f=0,c=this.pattern,l=c.length;e:for(t=0;0>o&&l>t;t++){var h,d,O=c[t];if(f=u,h=O.text)if(d=h.length,d+u>s)o=u;else{for(r=0;d>r;r++)if(h.charAt(r)!==e.charAt(r+u)){o=u;break e}u+=d}else if("field"in O){i=!1;var m=c[t+1];if(m)if("field"in m)i=!0;else{var k=m.text.charAt(0);k>="0"&&"9">=k&&(i=!0)}u=v(a,e,u,O.field,O.count,this.locale,i,n),u===f&&(o=u)}}return o>=0?(console.error("error when parsing date"),console.error(e),console.error(e.substring(0,o)+"^"),void 0):a}}),t(o,{Style:O,getInstance:function(e,t){return this.getDateTimeInstance(O.SHORT,O.SHORT,e,t)},getDateInstance:function(e,t,r){return this.getDateTimeInstance(e,void 0,t,r)},getDateTimeInstance:function(e,t,a,n){a=a||g.locales["default"];var i="";void 0!==e&&(i=a.datePatterns[e]);var s="";void 0!==t&&(s=a.timePatterns[t]);var u=i;return s&&(u=i?r(a.dateTimePattern,{date:i,time:s}):s),new o(u,a,n)},getTimeInstance:function(e,t,r){return this.getDateTimeInstance(void 0,e,t,r)}}),e=o}(),r.exports=a});