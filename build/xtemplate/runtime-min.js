/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Dec 27 23:54
*/
KISSY.add("xtemplate/runtime/base",function(f){function a(d,b){this.tpl=d;b=f.merge(g,b);b.subTpls=f.merge(b.subTpls,a.subTpls);b.commands=f.merge(b.commands,a.commands);this.option=b}var g={silent:!0,name:"",utils:{getProperty:function(d,b){var d=d.split("."),e=d.length,c,a,h,f,g,i=b.length;for(a=0;a<i;a++){h=b[a];g=1;for(c=0;c<e;c++){f=d[c];if(!(f in h)){g=0;break}h=h[f]}if(g)return"function"==typeof h&&(h=h.call(b[i-1])),[h]}return!1}}};a.prototype={constructor:a,removeSubTpl:function(d){delete this.option.subTpls[d]},
removeCommand:function(d){delete this.option.commands[d]},addSubTpl:function(d,b){this.option.subTpls[d]=b},addCommand:function(d,b){this.option.commands[d]=b},render:function(d){f.isArray(d)||(d=[d]);return this.tpl(d,this.option)}};return a});
KISSY.add("xtemplate/runtime/commands",function(f,a,g){var d=f.error;return{each:function(b,e){var c=e.params;(!c||1!=c.length)&&d("each must has one param");var c=c[0],a="",h,k;if(c!==g)if(f.isArray(c)){var l=[0].concat(b);h=c.length;for(var i=0;i<h;i++){var j={};k=c[i];j["this"]=k;j.xcount=h;j.xindex=i;f.isObject(k)&&f.mix(j,k);l[0]=j;a+=e.fn(l)}}else d("each can only apply to array");return a},"with":function(b,e){var c=e.params;(!c||1!=c.length)&&d("with must has one param");var c=c[0],a=[0].concat(b),
h="";c!==g&&(f.isObject(c)?(a[0]=c,h=e.fn(a)):d("with can only apply to object"));return h},"if":function(b,e){var c=e.params;(!c||1!=c.length)&&d("if must has one param");var a="";c[0]?a=e.fn(b):e.inverse&&(a=e.inverse(b));return a},set:function(a,e){f.mix(a[0],e.hash);return""},include:a.include}},{requires:["./include-command"]});
KISSY.add("xtemplate/runtime/include-command",function(f,a){var g={invokeEngine:function(d,b,e){return(new a(d,f.merge(e))).render(b)},include:function(a,b){var e=b.params;(!e||1!=e.length)&&error("include must has one param");var e=e[0],c;(c=b.subTpls[e])||error('does not include sub template "'+e+'"');b.name=e;return g.invokeEngine(c,a,b)}};return g},{requires:["./base"]});
KISSY.add("xtemplate/runtime",function(f,a,g,d){a.addCommand=function(a,b){g[a]=b};a.removeCommand=function(a){delete g[a]};a.commands=g;a.includeCommand=d;var b={};a.subTpls=b;a.addSubTpl=function(a,c){b[a]=c};a.removeSubTpl=function(a){delete b[a]};return a.IncludeEngine=a},{requires:["./runtime/base","./runtime/commands","./runtime/include-command"]});
