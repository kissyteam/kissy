/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 9 14:23
*/
KISSY.add("xtemplate/runtime/commands",function(e){var g;return g={each:function(c,a){var b=a.params[0],d="",f;if(b){var h=[0,0].concat(c);if(e.isArray(b)){f=b.length;for(var i=0;i<f;i++)h[0]=b[i],h[1]={xcount:f,xindex:i},d+=a.fn(h)}else for(f in b)h[0]=b[f],h[1]={xkey:f},d+=a.fn(h)}else a.inverse&&(d=a.inverse(c));return d},"with":function(c,a){var b=a.params[0],d=[0].concat(c),f="";b?(d[0]=b,f=a.fn(d)):a.inverse&&(f=a.inverse(c));return f},"if":function(c,a){var b="";a.params[0]?a.fn&&(b=a.fn(c)):
a.inverse&&(b=a.inverse(c));return b},set:function(c,a){for(var b=c.length-1;0<=b;b--)if("object"==typeof c[b]){e.mix(c[b],a.hash);break}return""},include:function(c,a){var b=a.params,c=(a.hash?[a.hash]:[]).concat(c);if(!b||1!=b.length)return e[a.silent?"log":"error"]("include must has one param"),"";var d=this.config.name,b=b[0];if("."==b.charAt(0)){if("unspecified"==d)return"";b=e.Path.resolve(d,"../",b)}d=this.config.loader.call(this,b);a=e.merge(this.config);a.name=b;return this.invokeEngine(d,
c,a)},parse:function(c,a){return g.include.call(this,[],a)}}});
KISSY.add("xtemplate/runtime",function(e,g){function c(d,f){this.tpl=d;f=e.merge(b,f);f.commands=e.merge(f.commands,c.commands);f.utils=a;this.config=f}var a={getProperty:function(d,f,a){"."===d&&(d="this");for(var d=d.split("."),b=d.length,c=a||0,e,g,j,k=f.length;c<k;c++){e=f[c];j=1;for(a=0;a<b;a++)if(g=d[a],"this"!==g){if("object"!=typeof e||!(g in e)){j=0;break}e=e[g]}if(j)return"function"==typeof e&&(e=e.call(f[k-1])),[e]}return!1}},b={silent:!0,name:"unspecified",escapeHtml:!0,loader:function(d){var a=
"";e.use(d,{success:function(d,b){a=b},sync:1});if(!a)e[this.config.silent?"log":"error"]('template "'+d+'" does not exist, need to be required or used first!');return a}};c.prototype={constructor:c,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a)}};e.mix(c,{commands:g,utils:a,addCommand:function(a,b){g[a]=b},removeCommand:function(a){delete g[a]}});
return c},{requires:["./runtime/commands"]});
