/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 3 13:58
*/
KISSY.add("xtemplate/runtime/commands",function(f){var g;return g={each:function(c,a){var b=a.params[0],d="",e;if(b){var h=[0,0].concat(c);if(f.isArray(b)){e=b.length;for(var i=0;i<e;i++)h[0]=b[i],h[1]={xcount:e,xindex:i},d+=a.fn(h)}else for(e in b)h[0]=b[e],h[1]={xkey:e},d+=a.fn(h)}else a.inverse&&(d=a.inverse(c));return d},"with":function(c,a){var b=a.params[0],d=[0].concat(c),e="";b?(d[0]=b,e=a.fn(d)):a.inverse&&(e=a.inverse(c));return e},"if":function(c,a){var b="";a.params[0]?a.fn&&(b=a.fn(c)):
a.inverse&&(b=a.inverse(c));return b},set:function(c,a){for(var b=c.length-1;0<=b;b--)if("object"==typeof c[b]){f.mix(c[b],a.hash);break}return""},include:function(c,a){var b=a.params,c=(a.hash?[a.hash]:[]).concat(c);if(!b||1!=b.length)return f[a.silent?"log":"error"]("include must has one param"),"";var d=this.config.name,b=b[0];if("."==b.charAt(0)){if("unspecified"==d)return"";b=f.Path.resolve(d,"../",b)}d=this.config.loader.call(this,b);a=f.merge(this.config);a.name=b;return this.invokeEngine(d,
c,a)},parse:function(c,a){return g.include.call(this,[],a)}}});
KISSY.add("xtemplate/runtime",function(f,g){function c(d,e){this.tpl=d;e=f.merge(b,e);e.commands=f.merge(e.commands,c.commands);e.utils=a;this.config=e}var a={getProperty:function(d,e,a){if("this"==d||"."==d)return e.length?[e[0]]:!1;for(var d=d.split("."),b=d.length,c=a||0,f,g,j,k=e.length;c<k;c++){f=e[c];j=1;for(a=0;a<b;a++){g=d[a];if("object"!=typeof f||!(g in f)){j=0;break}f=f[g]}if(j)return"function"==typeof f&&(f=f.call(e[k-1])),[f]}return!1}},b={silent:!0,name:"unspecified",escapeHtml:!0,loader:function(d){var a=
"";f.use(d,{success:function(d,b){a=b},sync:1});if(!a)f[this.config.silent?"log":"error"]('template "'+d+'" does not exist, need to be required or used first!');return a}};c.prototype={constructor:c,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a)}};f.mix(c,{commands:g,utils:a,addCommand:function(a,b){g[a]=b},removeCommand:function(a){delete g[a]}});
return c},{requires:["./runtime/commands"]});
