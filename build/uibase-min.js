/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Jan 6 17:21
*/
KISSY.add("uibase/align",function(g,m,f,k){function q(b){var d=b.ownerDocument.body,e=f.css(b,"position"),h=e=="fixed"||e=="absolute";for(b=b.parentNode;b&&b!=d;b=b.parentNode){e=f.css(b,"position");h=h&&e=="static";if(f.css(b,"overflow")!="visible"&&(!h||e=="fixed"||e=="absolute"||e=="relative"))return b}return null}function a(b){for(var d in b)if(d.indexOf("fail")===0)return true;return false}function j(b){var d=b.offset,e=b.node,h=b.points,p,c=this.get("el");d=d||[0,0];p=c.offset();e=o(e,h[0]);
h=o(c,h[1]);h=[h.left-e.left,h.top-e.top];p={left:p.left-h[0]+ +d[0],top:p.top-h[1]+ +d[1]};a:{d=p;p=this.get("el");c={};h={width:p.outerWidth(),height:p.outerHeight()};e=g.clone(h);if(!g.isEmptyObject(b.overflow)){c={left:0,right:Infinity,top:0,bottom:Infinity};for(var l=p[0];l=q(l);){var r=l.clientWidth;if(!m.ie||r!==0){var s=l.clientLeft,t=l.clientTop;r=f.offset(l);s={left:s,top:t};r.left+=s.left;r.top+=s.top;c.top=Math.max(c.top,r.top);c.right=Math.min(c.right,r.left+l.clientWidth);c.bottom=Math.min(c.bottom,
r.top+l.clientHeight);c.left=Math.max(c.left,r.left)}}l=f.scrollLeft();r=f.scrollTop();c.left=Math.max(c.left,l);c.top=Math.max(c.top,r);c.right=Math.min(c.right,l+f.viewportWidth());c.bottom=Math.min(c.bottom,r+f.viewportHeight());c=c.top>=0&&c.left>=0&&c.bottom>c.top&&c.right>c.left?c:null;b=b.overflow||{};l={};if(d.left<c.left&&b.adjustX){d.left=c.left;l.adjustX=1}if(d.left<c.left&&d.left+e.width>c.right&&b.resizeWidth){e.width-=d.left+e.width-c.right;l.resizeWidth=1}if(d.left+e.width>c.right&&
b.adjustX){d.left=Math.max(c.right-e.width,c.left);l.adjustX=1}if(b.failX)l.failX=d.left<c.left||d.left+e.width>c.right;if(d.top<c.top&&b.adjustY){d.top=c.top;l.adjustY=1}if(d.top>=c.top&&d.top+e.height>c.bottom&&b.resizeHeight){e.height-=d.top+e.height-c.bottom;l.resizeHeight=1}if(d.top+e.height>c.bottom&&b.adjustY){d.top=Math.max(c.bottom-e.height,c.top);l.adjustY=1}if(b.failY)l.failY=d.top<c.top||d.top+e.height>c.bottom;c=l;if(a(c)){b=c;break a}}this.set("x",d.left);this.set("y",d.top);if(e.width!=
h.width||e.height!=h.height){p.width(e.width);p.height(e.height)}b=c}return b}function n(b,d,e){var h=[];g.each(b,function(p){h.push(p.replace(d,function(c){return e[c]}))});return h}function i(){}function o(b,d){var e=d.charAt(0),h=d.charAt(1),p,c,l,r;if(b){b=k.one(b);p=b.offset();c=b.outerWidth();l=b.outerHeight()}else{p={left:f.scrollLeft(),top:f.scrollTop()};c=f.viewportWidth();l=f.viewportHeight()}r=p.left;p=p.top;if(e==="c")p+=l/2;else if(e==="b")p+=l;if(h==="c")r+=c/2;else if(h==="r")r+=c;
return{left:r,top:p}}i.ATTRS={align:{}};i.prototype={_uiSetAlign:function(b){g.isPlainObject(b)&&this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,d,e,h){var p={};h=g.clone(h||{});e=e&&[].concat(e)||[0,0];if(h.failX)p.failX=1;if(h.failY)p.failY=1;var c=j.call(this,{node:b,points:d,offset:e,overflow:p});if(a(c)){if(c.failX){d=n(d,/[lr]/ig,{l:"r",r:"l"});e=e;e[0]=-e[0];e=e}if(c.failY){d=n(d,/[tb]/ig,{t:"b",b:"t"});c=e;c[1]=-c[1];e=c}}c=j.call(this,{node:b,points:d,offset:e,overflow:p});
if(a(c)){delete h.failX;delete h.failY;j.call(this,{node:b,points:d,offset:e,overflow:h})}},center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]})}};return i},{requires:["ua","dom","node"]});
KISSY.add("uibase/base",function(g,m,f){function k(i){return i.charAt(0).toUpperCase()+i.substring(1)}function q(i){m.apply(this,arguments);for(var o=this.constructor;o;){if(i&&i[j]&&o.HTML_PARSER)if(i[j]=f.one(i[j])){var b=i[j],d=o.HTML_PARSER,e=void 0,h=void 0;for(e in d)if(d.hasOwnProperty(e)){h=d[e];if(g.isFunction(h))this.__set(e,h.call(this,b));else if(g.isString(h))this.__set(e,b.one(h));else g.isArray(h)&&h[0]&&this.__set(e,b.all(h[0]))}}o=o.superclass&&o.superclass.constructor}a(this,"initializer",
"constructor");i&&i.autoRender&&this.render()}function a(i,o,b){for(var d=i.constructor,e=[],h,p,c,l;d;){l=[];if(c=d.__ks_exts)for(var r=0;r<c.length;r++)if(h=c[r]){if(b!="constructor")h=h.prototype.hasOwnProperty(b)?h.prototype[b]:null;h&&l.push(h)}if(d.prototype.hasOwnProperty(o)&&(p=d.prototype[o]))l.push(p);l.length&&e.push.apply(e,l.reverse());d=d.superclass&&d.superclass.constructor}for(r=e.length-1;r>=0;r--)e[r]&&e[r].call(i)}var j="srcNode",n=g.noop;q.HTML_PARSER={};q.ATTRS={rendered:{value:false},
created:{value:false}};g.extend(q,m,{create:function(){if(!this.get("created")){this._createDom();this.fire("createDom");a(this,"createDom","__createDom");this.fire("afterCreateDom");this.__set("created",true)}},render:function(){if(!this.get("rendered")){this.create();this._renderUI();this.fire("renderUI");a(this,"renderUI","__renderUI");this.fire("afterRenderUI");this._bindUI();this.fire("bindUI");a(this,"bindUI","__bindUI");this.fire("afterBindUI");this._syncUI();this.fire("syncUI");a(this,"syncUI",
"__syncUI");this.fire("afterSyncUI");this.__set("rendered",true)}return this},_createDom:n,_renderUI:n,renderUI:n,_bindUI:function(){var i=this,o=i.__attrs,b,d;for(b in o)if(o.hasOwnProperty(b)){d="_uiSet"+k(b);i[d]&&function(e,h){i.on("after"+k(e)+"Change",function(p){i[h](p.newVal,p)})}(b,d)}},bindUI:n,_syncUI:function(){var i=this.__attrs,o;for(o in i)if(i.hasOwnProperty(o)){var b="_uiSet"+k(o);this[b]&&i[o].sync!==false&&this.get(o)!==undefined&&this[b](this.get(o))}},syncUI:n,destroy:function(){for(var i=
this.constructor,o,b,d;i;){i.prototype.hasOwnProperty("destructor")&&i.prototype.destructor.apply(this);if(o=i.__ks_exts)for(d=o.length-1;d>=0;d--)(b=o[d]&&o[d].prototype.__destructor)&&b.apply(this);i=i.superclass&&i.superclass.constructor}this.fire("destroy");this.detach()}},{create:function(i,o,b,d){function e(){q.apply(this,arguments)}if(g.isArray(i)){d=b;b=o;o=i;i=q}i=i||q;if(g.isObject(o)){d=b;b=o;o=[]}g.extend(e,i,b,d);if(o){e.__ks_exts=o;var h={};i=o.concat(e);g.each(i,function(c){c&&g.each(["ATTRS",
"HTML_PARSER"],function(l){if(c[l]){h[l]=h[l]||{};g.mix(h[l],c[l],true,undefined,true)}})});g.each(h,function(c,l){e[l]=c});var p={};g.each(i,function(c){if(c){c=c.prototype;for(var l in c)if(c.hasOwnProperty(l))p[l]=c[l]}});g.each(p,function(c,l){e.prototype[l]=c})}return e}});return q},{requires:["base","node"]});
KISSY.add("uibase/box",function(){function g(){}g.ATTRS={html:{view:true},width:{view:true},height:{view:true},elCls:{view:true},elStyle:{view:true},elAttrs:{view:true},elBefore:{view:true},el:{view:true},render:{view:true},visibleMode:{value:"display",view:true},visible:{view:true},srcNode:{view:true}};g.HTML_PARSER={el:function(m){this.decorateInternal&&this.decorateInternal(m);return m}};g.prototype={_uiSetVisible:function(m){this.fire(m?"show":"hide")},show:function(){this.render();this.set("visible",
true)},hide:function(){this.set("visible",false)}};return g});
KISSY.add("uibase/boxrender",function(g,m){function f(){}function k(a,j,n,i,o,b,d){j=j||{};d=d||"";if(typeof d!=="string")d="";if(n)j.width=typeof n=="number"?n+"px":n;if(i)j.height=typeof i=="number"?i+"px":i;n="";for(var e in j)if(j.hasOwnProperty(e))n+=e+":"+j[e]+";";j="";for(var h in b)if(b.hasOwnProperty(h))j+=" "+h+"='"+b[h]+"' ";return"<"+o+(n?" style='"+n+"' ":"")+j+(a?" class='"+a+"' ":"")+">"+d+"</"+o+">"}var q=g.all;f.ATTRS={el:{setter:function(a){return q(a)}},elCls:{sync:false},elStyle:{sync:false},
width:{sync:false},height:{sync:false},elTagName:{sync:false,value:"div"},elAttrs:{sync:false},html:{sync:false},elBefore:{},render:{},visible:{},visibleMode:{}};f.construct=k;f.HTML_PARSER={html:function(a){return a.html()}};f.prototype={__renderUI:function(){if(this.__boxRenderNew){var a=this.get("render"),j=this.get("el"),n=this.get("elBefore");if(n)j.insertBefore(n);else a?j.appendTo(a):j.appendTo(document.body)}},__createDom:function(){var a=this.get("el");if(!a){this.__boxRenderNew=true;a=new m(k(this.get("elCls"),
this.get("elStyle"),this.get("width"),this.get("height"),this.get("elTagName"),this.get("elAttrs"),this.get("html")));this.__set("el",a)}},_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){this.get("el").height(a)},_uiSetHtml:function(a){this.get("el").html(a)},_uiSetVisible:function(a){var j=this.get("el");this.get("visibleMode")==
"visibility"?j.css("visibility",a?"visible":"hidden"):j.css("display",a?"":"none")},show:function(){this.render();this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){var a=this.get("el");if(a){a.detach();a.remove()}}};return f},{requires:["node"]});
KISSY.add("uibase/close",function(){function g(){}g.ATTRS={closable:{view:true},closeAction:{value:"hide"}};var m={hide:"hide",destroy:"destroy"};g.prototype={__bindUI:function(){var f=this,k=f.get("view").get("closeBtn");k&&k.on("click",function(q){f[m[f.get("closeAction")]||"hide"]();q.preventDefault()})}};return g});
KISSY.add("uibase/closerender",function(g,m){function f(){}f.ATTRS={closable:{value:true},closeBtn:{}};f.HTML_PARSER={closeBtn:function(k){return k.one("."+this.get("prefixCls")+"ext-close")}};f.prototype={_uiSetClosable:function(k){var q=this.get("closeBtn");if(q)k?q.css("display",""):q.css("display","none")},__renderUI:function(){var k=this.get("closeBtn"),q=this.get("el");if(!k&&q){k=(new m("<a tabindex='0' role='button' class='"+this.get("prefixCls")+"ext-close'><span class='"+this.get("prefixCls")+
"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(q);this.set("closeBtn",k)}},__destructor:function(){var k=this.get("closeBtn");k&&k.detach()}};return f},{requires:["node"]});
KISSY.add("uibase/constrain",function(g,m,f){function k(){}function q(a){var j;if(!a)return j;var n=this.get("el");if(a!==true){a=f.one(a);j=a.offset();g.mix(j,{maxLeft:j.left+a.outerWidth()-n.outerWidth(),maxTop:j.top+a.outerHeight()-n.outerHeight()})}else{a=document.documentElement.clientWidth;j={left:m.scrollLeft(),top:m.scrollTop()};g.mix(j,{maxLeft:j.left+a-n.outerWidth(),maxTop:j.top+m.viewportHeight()-n.outerHeight()})}return j}k.ATTRS={constrain:{value:false}};k.prototype={__renderUI:function(){var a=
this,j=a.getAttrs(),n=j.x;j=j.y;var i=n.setter,o=j.setter;n.setter=function(b){var d=i&&i.call(a,b);if(d===undefined)d=b;if(!a.get("constrain"))return d;b=q.call(a,a.get("constrain"));return Math.min(Math.max(d,b.left),b.maxLeft)};j.setter=function(b){var d=o&&o.call(a,b);if(d===undefined)d=b;if(!a.get("constrain"))return d;b=q.call(a,a.get("constrain"));return Math.min(Math.max(d,b.top),b.maxTop)};a.addAttr("x",n);a.addAttr("y",j)}};return k},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function g(){}g.ATTRS={content:{view:true,sync:false},contentEl:{view:true},contentElAttrs:{view:true},contentElStyle:{view:true},contentTagName:{view:true}};g.prototype={};return g});
KISSY.add("uibase/contentboxrender",function(g,m,f){function k(){}k.ATTRS={contentEl:{},contentElAttrs:{},contentElCls:{},contentElStyle:{},contentTagName:{value:"div"},content:{sync:false}};k.HTML_PARSER={content:function(a){return a[0].innerHTML}};var q=f.construct;k.prototype={__renderUI:function(){},__createDom:function(){var a,j=this.get("content");a=this.get("el");var n="",i=g.makeArray(a[0].childNodes);if(i.length)n=a[0].innerHTML;if(j==n)j="";a=(new m(q(this.get("prefixCls")+"contentbox "+
(this.get("contentElCls")||""),this.get("contentElStyle"),undefined,undefined,this.get("contentTagName"),this.get("contentElAttrs"),j))).appendTo(a);this.__set("contentEl",a);if(j)typeof j!=="string"&&a.append(j);else{j=0;for(n=i.length;j<n;j++)a.append(i[j])}},_uiSetContentElCls:function(a){this.get("contentEl").addClass(a)},_uiSetContentElAttrs:function(a){this.get("contentEl").attr(a)},_uiSetContentElStyle:function(a){this.get("contentEl").css(a)},_uiSetContent:function(a){typeof a=="string"?this.get("contentEl").html(a):
this.get("contentEl").empty().append(a)}};return k},{requires:["node","./boxrender"]});
KISSY.add("uibase/drag",function(g){function m(){}m.ATTRS={handlers:{value:[]},draggable:{value:true}};m.prototype={_uiSetHandlers:function(f){f&&f.length>0&&this.__drag&&this.__drag.set("handlers",f)},__bindUI:function(){var f=g.require("dd/draggable"),k=this.get("el");if(this.get("draggable")&&f)this.__drag=new f({node:k})},_uiSetDraggable:function(f){var k=this.__drag;if(k)if(f){k.detach("drag");k.on("drag",this._dragExtAction,this)}else k.detach("drag")},_dragExtAction:function(f){this.set("xy",
[f.left,f.top])},__destructor:function(){var f=this.__drag;f&&f.destroy()}};return m});KISSY.add("uibase/loading",function(){function g(){}g.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return g});
KISSY.add("uibase/loadingrender",function(g,m){function f(){}f.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new m("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var k=this._loadingExtEl;k&&k.hide()}};return f},{requires:["node"]});
KISSY.add("uibase/mask",function(){function g(){}g.ATTRS={mask:{value:false}};g.prototype={_uiSetMask:function(m){if(m){this.on("show",this.get("view")._maskExtShow,this.get("view"));this.on("hide",this.get("view")._maskExtHide,this.get("view"))}else{this.detach("show",this.get("view")._maskExtShow,this.get("view"));this.detach("hide",this.get("view")._maskExtHide,this.get("view"))}}};return g},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(g,m,f){function k(){return i?e.width()+o:"100%"}function q(){return i?e.height()+o:"100%"}function a(){n=b("<div class='"+this.get("prefixCls")+"ext-mask'/>").prependTo("body");n.css({position:i?"absolute":"fixed",left:0,top:0,width:k(),height:q()});if(i)h=b("<iframe style='position:absolute;left:0px;top:0px;background:red;width:"+k()+";height:"+q()+";filter:alpha(opacity=0);z-index:-1;'/>").insertBefore(n);n.unselectable();n.on("mousedown click",function(l){l.halt()})}
function j(){}var n,i=m.ie===6,o="px",b=f.all,d=b(window),e=b(document),h,p=0,c=g.throttle(function(){var l={width:k(),height:q()};n.css(l);h&&h.css(l)},50);j.prototype={_maskExtShow:function(){n||a.call(this);var l={"z-index":this.get("zIndex")-1},r={display:""};n.css(l);h&&h.css(l);p++;if(p==1){n.css(r);h&&h.css(r);i&&d.on("resize scroll",c)}},_maskExtHide:function(){p--;if(p<=0)p=0;if(!p){var l={display:"none"};n&&n.css(l);h&&h.css(l);i&&d.detach("resize scroll",c)}},__destructor:function(){this._maskExtHide()}};
return j},{requires:["ua","node"]});KISSY.add("uibase/position",function(g){function m(){}m.ATTRS={x:{view:true},y:{view:true},xy:{setter:function(f){var k=g.makeArray(f);if(k.length){k[0]&&this.set("x",k[0]);k[1]&&this.set("y",k[1])}return f},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:true}};m.prototype={move:function(f,k){if(g.isArray(f)){k=f[1];f=f[0]}this.set("xy",[f,k])}};return m});
KISSY.add("uibase/positionrender",function(){function g(){}g.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999}};g.prototype={__renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_uiSetZIndex:function(m){this.get("el").css("z-index",m)},_uiSetX:function(m){this.get("el").offset({left:m})},_uiSetY:function(m){this.get("el").offset({top:m})}};
return g});KISSY.add("uibase/resize",function(g){function m(){}m.ATTRS={resize:{value:{}}};m.prototype={__destructor:function(){this.resizer&&this.resizer.destroy()},_uiSetResize:function(f){var k=g.require("resizable");if(k){this.resizer&&this.resizer.destroy();f.node=this.get("el");f.autoRender=true;if(f.handlers)this.resizer=new k(f)}}};return m});
KISSY.add("uibase/shimrender",function(g,m){function f(){}f.ATTRS={shim:{value:true}};f.prototype={_uiSetShim:function(k){var q=this.get("el");if(k&&!this.__shimEl){this.__shimEl=new m("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'/>");q.prepend(this.__shimEl)}else if(!k&&this.__shimEl){this.__shimEl.remove();delete this.__shimEl}}};return f},
{requires:["node"]});KISSY.add("uibase/stdmod",function(){function g(){}g.ATTRS={header:{view:true},body:{view:true},footer:{view:true},bodyStyle:{view:true},footerStyle:{view:true},headerStyle:{view:true},headerContent:{view:true},bodyContent:{view:true},footerContent:{view:true}};g.prototype={};return g});
KISSY.add("uibase/stdmodrender",function(g,m){function f(){}function k(a,j){var n=a.get("contentEl"),i=a.get(j);if(!i){i=(new m("<div class='"+a.get("prefixCls")+q+j+"'/>")).appendTo(n);a.set(j,i)}}var q="stdmod-";f.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};f.HTML_PARSER={header:function(a){return a.one("."+this.get("prefixCls")+q+"header")},body:function(a){return a.one("."+this.get("prefixCls")+q+"body")},footer:function(a){return a.one("."+
this.get("prefixCls")+q+"footer")}};f.prototype={_setStdModContent:function(a,j){if(g.isString(j))this.get(a).html(j);else{this.get(a).html("");this.get(a).append(j)}},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){this._setStdModContent("body",a)},_uiSetHeaderContent:function(a){this._setStdModContent("header",a)},_uiSetFooterContent:function(a){this._setStdModContent("footer",
a)},__renderUI:function(){k(this,"header");k(this,"body");k(this,"footer")}};return f},{requires:["node"]});
KISSY.add("uibase",function(g,m,f,k,q,a,j,n,i,o,b,d,e,h,p,c,l,r,s,t,u){a.Render=j;d.Render=e;h.Render=p;c.Render=l;t.Render=u;k.Render=q;i.Render=o;g.mix(m,{Align:f,Box:k,Close:a,Contrain:n,Contentbox:i,Drag:b,Loading:d,Mask:h,Position:c,Shim:{Render:r},Resize:s,StdMod:t});return m},{requires:["uibase/base","uibase/align","uibase/box","uibase/boxrender","uibase/close","uibase/closerender","uibase/constrain","uibase/contentbox","uibase/contentboxrender","uibase/drag","uibase/loading","uibase/loadingrender",
"uibase/mask","uibase/maskrender","uibase/position","uibase/positionrender","uibase/shimrender","uibase/resize","uibase/stdmod","uibase/stdmodrender"]});
