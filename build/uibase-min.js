/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Mar 7 19:03
*/
KISSY.add("uibase/align",function(i,n,f,k){function q(a){var b=a.ownerDocument.body,d=f.css(a,"position"),j=d=="fixed"||d=="absolute";for(a=a.parentNode;a&&a!=b;a=a.parentNode){d=f.css(a,"position");j=j&&d=="static";if(f.css(a,"overflow")!="visible"&&(!j||d=="fixed"||d=="absolute"||d=="relative"))return a}return null}function e(a){for(var b in a)if(b.indexOf("fail")===0)return true;return false}function g(a){var b=a.offset,d=a.node,j=a.points,p,c=this.get("el");b=b||[0,0];p=c.offset();d=o(d,j[0]);
j=o(c,j[1]);j=[j.left-d.left,j.top-d.top];p={left:p.left-j[0]+ +b[0],top:p.top-j[1]+ +b[1]};a:{b=p;p=this.get("el");c={};j={width:p.outerWidth(),height:p.outerHeight()};d=i.clone(j);if(!i.isEmptyObject(a.overflow)){c={left:0,right:Infinity,top:0,bottom:Infinity};for(var m=p[0];m=q(m);){var r=m.clientWidth;if(!n.ie||r!==0){var s=m.clientLeft,t=m.clientTop;r=f.offset(m);s={left:s,top:t};r.left+=s.left;r.top+=s.top;c.top=Math.max(c.top,r.top);c.right=Math.min(c.right,r.left+m.clientWidth);c.bottom=Math.min(c.bottom,
r.top+m.clientHeight);c.left=Math.max(c.left,r.left)}}m=f.scrollLeft();r=f.scrollTop();c.left=Math.max(c.left,m);c.top=Math.max(c.top,r);c.right=Math.min(c.right,m+f.viewportWidth());c.bottom=Math.min(c.bottom,r+f.viewportHeight());c=c.top>=0&&c.left>=0&&c.bottom>c.top&&c.right>c.left?c:null;a=a.overflow||{};m={};if(b.left<c.left&&a.adjustX){b.left=c.left;m.adjustX=1}if(b.left<c.left&&b.left+d.width>c.right&&a.resizeWidth){d.width-=b.left+d.width-c.right;m.resizeWidth=1}if(b.left+d.width>c.right&&
a.adjustX){b.left=Math.max(c.right-d.width,c.left);m.adjustX=1}if(a.failX)m.failX=b.left<c.left||b.left+d.width>c.right;if(b.top<c.top&&a.adjustY){b.top=c.top;m.adjustY=1}if(b.top>=c.top&&b.top+d.height>c.bottom&&a.resizeHeight){d.height-=b.top+d.height-c.bottom;m.resizeHeight=1}if(b.top+d.height>c.bottom&&a.adjustY){b.top=Math.max(c.bottom-d.height,c.top);m.adjustY=1}if(a.failY)m.failY=b.top<c.top||b.top+d.height>c.bottom;c=m;if(e(c)){a=c;break a}}this.set("x",b.left);this.set("y",b.top);if(d.width!=
j.width||d.height!=j.height){p.width(d.width);p.height(d.height)}a=c}return a}function l(a,b,d){var j=[];i.each(a,function(p){j.push(p.replace(b,function(c){return d[c]}))});return j}function h(){}function o(a,b){var d=b.charAt(0),j=b.charAt(1),p,c,m,r;if(a){p=a.offset();c=a.outerWidth();m=a.outerHeight()}else{p={left:f.scrollLeft(),top:f.scrollTop()};c=f.viewportWidth();m=f.viewportHeight()}r=p.left;p=p.top;if(d==="c")p+=m/2;else if(d==="b")p+=m;if(j==="c")r+=c/2;else if(j==="r")r+=c;return{left:r,
top:p}}h.ATTRS={align:{setter:function(a){var b;if(b=a.node)a.node=k.one(b)}}};h.prototype={_uiSetAlign:function(a){this.align(a.node,a.points,a.offset,a.overflow)},align:function(a,b,d,j){var p={};if(a)a=k.one(a);j=i.clone(j||{});d=d&&[].concat(d)||[0,0];if(j.failX)p.failX=1;if(j.failY)p.failY=1;var c=g.call(this,{node:a,points:b,offset:d,overflow:p});if(e(c)){if(c.failX){b=l(b,/[lr]/ig,{l:"r",r:"l"});d=d;d[0]=-d[0];d=d}if(c.failY){b=l(b,/[tb]/ig,{t:"b",b:"t"});c=d;c[1]=-c[1];d=c}}c=g.call(this,
{node:a,points:b,offset:d,overflow:p});if(e(c)){delete j.failX;delete j.failY;g.call(this,{node:a,points:b,offset:d,overflow:j})}},center:function(a){this.set("align",{node:a,points:["cc","cc"],offset:[0,0]})}};return h},{requires:["ua","dom","node"]});
KISSY.add("uibase/base",function(i,n,f){function k(h){return h.charAt(0).toUpperCase()+h.substring(1)}function q(h){n.apply(this,arguments);for(var o=this.constructor;o;){if(h&&h[g]&&o.HTML_PARSER)if(h[g]=f.one(h[g])){var a=h[g],b=o.HTML_PARSER,d=void 0,j=void 0;for(d in b)if(b.hasOwnProperty(d)){j=b[d];if(i.isFunction(j))this.__set(d,j.call(this,a));else if(i.isString(j))this.__set(d,a.one(j));else i.isArray(j)&&j[0]&&this.__set(d,a.all(j[0]))}}o=o.superclass&&o.superclass.constructor}e(this,"initializer",
"constructor");h&&h.autoRender&&this.render()}function e(h,o,a){for(var b=h.constructor,d=[],j,p,c,m;b;){m=[];if(c=b.__ks_exts)for(var r=0;r<c.length;r++)if(j=c[r]){if(a!="constructor")j=j.prototype.hasOwnProperty(a)?j.prototype[a]:null;j&&m.push(j)}if(b.prototype.hasOwnProperty(o)&&(p=b.prototype[o]))m.push(p);m.length&&d.push.apply(d,m.reverse());b=b.superclass&&b.superclass.constructor}for(r=d.length-1;r>=0;r--)d[r]&&d[r].call(h)}var g="srcNode",l=i.noop;q.HTML_PARSER={};q.ATTRS={rendered:{value:false},
created:{value:false}};i.extend(q,n,{create:function(){if(!this.get("created")){this._createDom();this.fire("createDom");e(this,"createDom","__createDom");this.fire("afterCreateDom");this.__set("created",true)}},render:function(){if(!this.get("rendered")){this.create();this._renderUI();this.fire("renderUI");e(this,"renderUI","__renderUI");this.fire("afterRenderUI");this._bindUI();this.fire("bindUI");e(this,"bindUI","__bindUI");this.fire("afterBindUI");this._syncUI();this.fire("syncUI");e(this,"syncUI",
"__syncUI");this.fire("afterSyncUI");this.__set("rendered",true)}return this},_createDom:l,_renderUI:l,renderUI:l,_bindUI:function(){var h=this,o=h.__attrs,a,b;for(a in o)if(o.hasOwnProperty(a)){b="_uiSet"+k(a);h[b]&&function(d,j){h.on("after"+k(d)+"Change",function(p){h[j](p.newVal,p)})}(a,b)}},bindUI:l,_syncUI:function(){var h=this.__attrs,o;for(o in h)if(h.hasOwnProperty(o)){var a="_uiSet"+k(o);this[a]&&h[o].sync!==false&&this.get(o)!==undefined&&this[a](this.get(o))}},syncUI:l,destroy:function(){for(var h=
this.constructor,o,a,b;h;){h.prototype.hasOwnProperty("destructor")&&h.prototype.destructor.apply(this);if(o=h.__ks_exts)for(b=o.length-1;b>=0;b--)(a=o[b]&&o[b].prototype.__destructor)&&a.apply(this);h=h.superclass&&h.superclass.constructor}this.fire("destroy");this.detach()}},{create:function(h,o,a,b){function d(){q.apply(this,arguments)}if(i.isArray(h)){b=a;a=o;o=h;h=q}h=h||q;if(i.isObject(o)){b=a;a=o;o=[]}i.extend(d,h,a,b);if(o){d.__ks_exts=o;var j={};h=o.concat(d);i.each(h,function(c){c&&i.each(["ATTRS",
"HTML_PARSER"],function(m){if(c[m]){j[m]=j[m]||{};i.mix(j[m],c[m],true,undefined,true)}})});i.each(j,function(c,m){d[m]=c});var p={};i.each(h,function(c){if(c){c=c.prototype;for(var m in c)if(c.hasOwnProperty(m))p[m]=c[m]}});i.each(p,function(c,m){d.prototype[m]=c})}return d}});return q},{requires:["base","node"]});
KISSY.add("uibase/box",function(i){function n(){}n.ATTRS={html:{view:true},width:{view:true},height:{view:true},elCls:{view:true},elStyle:{view:true},elAttrs:{view:true},elBefore:{view:true},el:{view:true},render:{view:true},visibleMode:{value:"display",view:true},visible:{view:true},srcNode:{view:true}};n.HTML_PARSER={el:function(f){this.decorateInternal&&this.decorateInternal(i.one(f));return f}};n.prototype={_uiSetVisible:function(f){this.fire(f?"show":"hide")},show:function(){this.render();this.set("visible",
true)},hide:function(){this.set("visible",false)}};return n});
KISSY.add("uibase/boxrender",function(i,n){function f(){}function k(g,l,h,o,a,b,d){l=l||{};d=d||"";if(typeof d!=="string")d="";if(h)l.width=typeof h=="number"?h+"px":h;if(o)l.height=typeof o=="number"?o+"px":o;h="";for(var j in l)if(l.hasOwnProperty(j))h+=j+":"+l[j]+";";l="";for(var p in b)if(b.hasOwnProperty(p))l+=" "+p+"='"+b[p]+"' ";return"<"+a+(h?" style='"+h+"' ":"")+l+(g?" class='"+g+"' ":"")+">"+d+"</"+a+">"}var q=i.all,e=i.Env.host.document;f.ATTRS={el:{setter:function(g){return q(g)}},elCls:{sync:false},
elStyle:{sync:false},width:{sync:false},height:{sync:false},elTagName:{sync:false,value:"div"},elAttrs:{sync:false},html:{sync:false},elBefore:{},render:{},visible:{},visibleMode:{}};f.construct=k;f.HTML_PARSER={html:function(g){return g.html()}};f.prototype={__renderUI:function(){if(this.__boxRenderNew){var g=this.get("render"),l=this.get("el"),h=this.get("elBefore");if(h)l.insertBefore(h);else g?l.appendTo(g):l.appendTo(e.body)}},__createDom:function(){var g=this.get("elCls"),l=this.get("elStyle"),
h=this.get("width"),o=this.get("height"),a=this.get("html"),b=this.get("elAttrs"),d=this.get("el");if(d){g&&d.addClass(g);l&&d.css(l);h!==undefined&&d.width(h);o!==undefined&&d.height(o);b&&d.attr(b)}else{this.__boxRenderNew=true;d=new n(k(g,l,h,o,this.get("elTagName"),b,a));this.__set("el",d)}},_uiSetElAttrs:function(g){this.get("el").attr(g)},_uiSetElCls:function(g){this.get("el").addClass(g)},_uiSetElStyle:function(g){this.get("el").css(g)},_uiSetWidth:function(g){this.get("el").width(g)},_uiSetHeight:function(g){this.get("el").height(g)},
_uiSetHtml:function(g){this.get("el").html(g)},_uiSetVisible:function(g){var l=this.get("el");this.get("visibleMode")=="visibility"?l.css("visibility",g?"visible":"hidden"):l.css("display",g?"":"none")},show:function(){this.render();this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){var g=this.get("el");if(g){g.detach();g.remove()}}};return f},{requires:["node"]});
KISSY.add("uibase/close",function(){function i(){}i.ATTRS={closable:{view:true},closeAction:{value:"hide"}};var n={hide:"hide",destroy:"destroy"};i.prototype={__bindUI:function(){var f=this,k=f.get("view").get("closeBtn");k&&k.on("click",function(q){f[n[f.get("closeAction")]||"hide"]();q.preventDefault()})}};return i});
KISSY.add("uibase/closerender",function(i,n){function f(){}f.ATTRS={closable:{value:true},closeBtn:{}};f.HTML_PARSER={closeBtn:function(k){return k.one("."+this.get("prefixCls")+"ext-close")}};f.prototype={_uiSetClosable:function(k){var q=this.get("closeBtn");if(q)k?q.css("display",""):q.css("display","none")},__renderUI:function(){var k=this.get("closeBtn"),q=this.get("el");if(!k&&q){k=(new n("<a tabindex='0' href='javascript:void(\"\u5173\u95ed\")' role='button' class='"+this.get("prefixCls")+"ext-close'><span class='"+
this.get("prefixCls")+"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(q);this.__set("closeBtn",k)}},__destructor:function(){var k=this.get("closeBtn");k&&k.detach()}};return f},{requires:["node"]});
KISSY.add("uibase/constrain",function(i,n,f){function k(){}function q(e){var g;if(!e)return g;var l=this.get("el");if(e!==true){e=f.one(e);g=e.offset();i.mix(g,{maxLeft:g.left+e.outerWidth()-l.outerWidth(),maxTop:g.top+e.outerHeight()-l.outerHeight()})}else{e=i.Env.host.document.documentElement.clientWidth;g={left:n.scrollLeft(),top:n.scrollTop()};i.mix(g,{maxLeft:g.left+e-l.outerWidth(),maxTop:g.top+n.viewportHeight()-l.outerHeight()})}return g}k.ATTRS={constrain:{value:false}};k.prototype={__renderUI:function(){var e=
this,g=e.getAttrs(),l=g.x;g=g.y;var h=l.setter,o=g.setter;l.setter=function(a){var b=h&&h.call(e,a);if(b===undefined)b=a;if(!e.get("constrain"))return b;a=q.call(e,e.get("constrain"));return Math.min(Math.max(b,a.left),a.maxLeft)};g.setter=function(a){var b=o&&o.call(e,a);if(b===undefined)b=a;if(!e.get("constrain"))return b;a=q.call(e,e.get("constrain"));return Math.min(Math.max(b,a.top),a.maxTop)};e.addAttr("x",l);e.addAttr("y",g)}};return k},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function i(){}i.ATTRS={content:{view:true,sync:false},contentEl:{view:true},contentElAttrs:{view:true},contentElStyle:{view:true},contentTagName:{view:true}};i.prototype={};return i});
KISSY.add("uibase/contentboxrender",function(i,n,f){function k(){}k.ATTRS={contentEl:{},contentElAttrs:{},contentElCls:{},contentElStyle:{},contentTagName:{value:"div"},content:{sync:false}};k.HTML_PARSER={content:function(e){return e[0].innerHTML}};var q=f.construct;k.prototype={__renderUI:function(){},__createDom:function(){var e,g=this.get("content"),l=this.get("el");e="";var h=i.makeArray(l[0].childNodes);if(h.length)e=l[0].innerHTML;if(g==e)g="";e=new n(q(this.get("prefixCls")+"contentbox "+
(this.get("contentElCls")||""),this.get("contentElStyle"),undefined,undefined,this.get("contentTagName"),this.get("contentElAttrs"),g));e.appendTo(l);this.__set("contentEl",e);if(g)typeof g!=="string"&&e.append(g);else{g=0;for(l=h.length;g<l;g++)e.append(h[g])}},_uiSetContentElCls:function(e){this.get("contentEl").addClass(e)},_uiSetContentElAttrs:function(e){this.get("contentEl").attr(e)},_uiSetContentElStyle:function(e){this.get("contentEl").css(e)},_uiSetContent:function(e){typeof e=="string"?
this.get("contentEl").html(e):this.get("contentEl").empty().append(e)}};return k},{requires:["node","./boxrender"]});
KISSY.add("uibase/drag",function(i){function n(){}n.ATTRS={handlers:{value:[]},draggable:{value:true}};n.prototype={_uiSetHandlers:function(f){f&&f.length>0&&this.__drag&&this.__drag.set("handlers",f)},__bindUI:function(){var f=i.require("dd/draggable"),k=this.get("el");if(this.get("draggable")&&f)this.__drag=new f({node:k})},_uiSetDraggable:function(f){var k=this.__drag;if(k)if(f){k.detach("drag");k.on("drag",this._dragExtAction,this)}else k.detach("drag")},_dragExtAction:function(f){this.set("xy",
[f.left,f.top])},__destructor:function(){var f=this.__drag;f&&f.destroy()}};return n});KISSY.add("uibase/loading",function(){function i(){}i.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return i});
KISSY.add("uibase/loadingrender",function(i,n){function f(){}f.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new n("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var k=this._loadingExtEl;k&&k.hide()}};return f},{requires:["node"]});
KISSY.add("uibase/mask",function(){function i(){}i.ATTRS={mask:{value:false}};i.prototype={_uiSetMask:function(n){if(n){this.on("show",this.get("view")._maskExtShow,this.get("view"));this.on("hide",this.get("view")._maskExtHide,this.get("view"))}else{this.detach("show",this.get("view")._maskExtShow,this.get("view"));this.detach("hide",this.get("view")._maskExtHide,this.get("view"))}}};return i},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(i,n,f){function k(){return h?d.width()+o:"100%"}function q(){return h?d.height()+o:"100%"}function e(){l=a("<div class='"+this.get("prefixCls")+"ext-mask'/>").prependTo("body");l.css({position:h?"absolute":"fixed",left:0,top:0,width:k(),height:q()});if(h)j=a("<iframe style='position:absolute;left:0px;top:0px;background:red;width:"+k()+";height:"+q()+";filter:alpha(opacity=0);z-index:-1;'/>").insertBefore(l);l.unselectable();l.on("mousedown click",function(m){m.halt()})}
function g(){}var l,h=n.ie===6,o="px",a=f.all;n=i.Env.host;var b=a(i.Env.host),d=a(n.document),j,p=0,c=i.throttle(function(){var m={width:k(),height:q()};l.css(m);j&&j.css(m)},50);g.prototype={_maskExtShow:function(){l||e.call(this);var m={"z-index":this.get("zIndex")-1},r={display:""};l.css(m);j&&j.css(m);p++;if(p==1){l.css(r);j&&j.css(r);h&&b.on("resize scroll",c)}},_maskExtHide:function(){p--;if(p<=0)p=0;if(!p){var m={display:"none"};l&&l.css(m);j&&j.css(m);h&&b.detach("resize scroll",c)}},__destructor:function(){this._maskExtHide()}};
return g},{requires:["ua","node"]});KISSY.add("uibase/position",function(i){function n(){}n.ATTRS={x:{view:true},y:{view:true},xy:{setter:function(f){var k=i.makeArray(f);if(k.length){k[0]&&this.set("x",k[0]);k[1]&&this.set("y",k[1])}return f},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:true}};n.prototype={move:function(f,k){if(i.isArray(f)){k=f[1];f=f[0]}this.set("xy",[f,k])}};return n});
KISSY.add("uibase/positionrender",function(){function i(){}i.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999}};i.prototype={__renderUI:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_uiSetZIndex:function(n){this.get("el").css("z-index",n)},_uiSetX:function(n){this.get("el").offset({left:n})},_uiSetY:function(n){this.get("el").offset({top:n})}};
return i});KISSY.add("uibase/resize",function(i){function n(){}n.ATTRS={resize:{value:{}}};n.prototype={__destructor:function(){var f=this.resizer;f&&f.destroy()},_uiSetResize:function(f){var k=i.require("resizable");if(k){this.resizer&&this.resizer.destroy();f.node=this.get("el");if(f.handlers)this.resizer=new k(f)}}};return n});
KISSY.add("uibase/shimrender",function(i,n){function f(){}f.ATTRS={shim:{value:true}};f.prototype={_uiSetShim:function(k){var q=this.get("el");if(k&&!this.__shimEl){this.__shimEl=new n("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'/>");q.prepend(this.__shimEl)}else if(!k&&this.__shimEl){this.__shimEl.remove();delete this.__shimEl}}};return f},
{requires:["node"]});KISSY.add("uibase/stdmod",function(){function i(){}i.ATTRS={header:{view:true},body:{view:true},footer:{view:true},bodyStyle:{view:true},footerStyle:{view:true},headerStyle:{view:true},headerContent:{view:true},bodyContent:{view:true},footerContent:{view:true}};i.prototype={};return i});
KISSY.add("uibase/stdmodrender",function(i,n){function f(){}function k(e,g){var l=e.get("contentEl"),h=e.get(g);if(!h){h=(new n("<div class='"+e.get("prefixCls")+q+g+"'/>")).appendTo(l);e.__set(g,h)}}var q="stdmod-";f.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};f.HTML_PARSER={header:function(e){return e.one("."+this.get("prefixCls")+q+"header")},body:function(e){return e.one("."+this.get("prefixCls")+q+"body")},footer:function(e){return e.one("."+
this.get("prefixCls")+q+"footer")}};f.prototype={_setStdModContent:function(e,g){if(i.isString(g))this.get(e).html(g);else{this.get(e).html("");this.get(e).append(g)}},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){this._setStdModContent("body",e)},_uiSetHeaderContent:function(e){this._setStdModContent("header",e)},_uiSetFooterContent:function(e){this._setStdModContent("footer",
e)},__renderUI:function(){k(this,"header");k(this,"body");k(this,"footer")}};return f},{requires:["node"]});
KISSY.add("uibase",function(i,n,f,k,q,e,g,l,h,o,a,b,d,j,p,c,m,r,s,t,u){e.Render=g;b.Render=d;j.Render=p;c.Render=m;t.Render=u;k.Render=q;h.Render=o;i.mix(n,{Align:f,Box:k,Close:e,Constrain:l,ContentBox:h,Drag:a,Loading:b,Mask:j,Position:c,Shim:{Render:r},Resize:s,StdMod:t});return n},{requires:["uibase/base","uibase/align","uibase/box","uibase/boxrender","uibase/close","uibase/closerender","uibase/constrain","uibase/contentbox","uibase/contentboxrender","uibase/drag","uibase/loading","uibase/loadingrender",
"uibase/mask","uibase/maskrender","uibase/position","uibase/positionrender","uibase/shimrender","uibase/resize","uibase/stdmod","uibase/stdmodrender"]});
