/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 8 12:09
*/
KISSY.add("date/picker/picker-tpl",'<div class="{{getBaseCssClasses \'header\'}}"> <a id="ks-date-picker-previous-month-{{id}}" class="{{getBaseCssClasses \'prev-month\'}}" href="#" role="button" title="{{previousMonthLabel}}" hidefocus="on"> </a> <div class="{{getBaseCssClasses \'month\'}}"> <a class="{{getBaseCssClasses \'month-select\'}}" role="button" href="#" hidefocus="on" title="{{monthSelectLabel}}" id="ks-date-picker-month-select-{{id}}">{{monthYearLabel}}</a> </div> <a id="ks-date-picker-next-month-{{id}}" class="{{getBaseCssClasses \'next-month\'}}" href="#" role="button" title="{{nextMonthLabel}}" hidefocus="on"> </a> </div> <div class="{{getBaseCssClasses \'body\'}}"> <table class="{{getBaseCssClasses \'table\'}}" cellspacing="0" role="grid"> <thead> <tr role="row"> {{#each weekdays}} <th role="columnheader" title="{{.}}">{{veryShortWeekdays[xindex]}}</th> {{/each}} </tr> </thead> <tbody id="ks-date-picker-tbody-{{id}}"> {{renderDates}} </tbody> </table> </div> {{#if showToday}} <div class="{{getBaseCssClasses \'footer\'}}"> <a class="{{getBaseCssClasses \'today\'}}" role="button" hidefocus="on" href="#" id="ks-date-picker-today-{{id}}" title="{{todayTimeLabel}}">{{todayLabel}}</a> </div> {{/if}}');
KISSY.add("date/picker/render",function(g,e,a,m,q,i,o){return e.getDefaultRender().extend({beforeCreateDom:function(a,c,e){var b=this.control.get("value");g.mix(c,{previousMonthEl:"#ks-date-picker-previous-month-{id}",monthSelectEl:"#ks-date-picker-month-select-{id}",nextMonthEl:"#ks-date-picker-next-month-{id}",tbodyEl:"#ks-date-picker-today-{id}"});g.mix(a,{monthYearLabel:(new m(i.monthYearFormat)).format(b),previousMonthLabel:i.previousMonth,monthSelectLabel:i.monthSelect,nextMonthLabel:i.nextMonth,
weekdays:q.weekdays,veryShortWeekdays:i.veryShortWeekdays,todayLabel:i.today,todayTimeLabel:(new m(i.dateFormat)).format(b)});e.renderDates=g.bind(this.renderDates,this)},renderDates:function(){var f,c,e=Array(6),b,k=this.control,d=k.get("value"),n=d.clone(),o=this.getBaseCssClass("cell"),s=this.getBaseCssClass("date"),r=k.get("dateRender"),k=k.get("disabledDate"),t=new m(i.dateFormat,q),u=this.getBaseCssClass("today"),v=this.getBaseCssClass("last-month-day"),w=this.getBaseCssClass("next-month-day"),
x=this.getBaseCssClass("disabled-day");n.setTimeInMillis(g.now());c=d.clone();c.set(d.get(a.YEAR),d.get(a.MONTH),1);f=(c.get(a.DAY_OF_WEEK)+7-d.getFirstDayOfWeek())%7;var l=c.clone();l.add(a.DAY_OF_MONTH,-f);var j=0;for(f=0;6>f;f++){e[f]=Array(7);for(c=0;7>c;c++)b=l,j&&(b=b.clone(),b.add(a.DAY_OF_MONTH,j)),e[f][c]=b,j++}l="";for(f=0;6>f;f++){j='<tr role="row">';for(c=0;7>c;c++){b=e[f][c];var h=o;b.get(a.YEAR)==n.get(a.YEAR)&&b.get(a.MONTH)==n.get(a.MONTH)&&b.get(a.DAY_OF_MONTH)==n.get(a.DAY_OF_MONTH)&&
(h+=" "+u);(b.get(a.YEAR)<d.get(a.YEAR)||b.get(a.YEAR)==d.get(a.YEAR)&&b.get(a.MONTH)<d.get(a.MONTH))&&(h+=" "+v);(b.get(a.YEAR)>d.get(a.YEAR)||b.get(a.YEAR)==d.get(a.YEAR)&&b.get(a.MONTH)>d.get(a.MONTH))&&(h+=" "+w);k&&k(b,d)&&(h+=" "+x);var p="";if(!r||!(p=r(b,d)))p=g.substitute('<a hidefocus="on" class="{cls}" href="#">content</a>',{cls:s,content:b.get(a.DAY_OF_MONTH)});j+=g.substitute('<td role="gridcell" title="{title}" class="{cls}">content</td>',{cls:h,title:t.format(b),content:p})}l+=j+"</tr>"}return l}},
{ATTRS:{contentTpl:{value:o}}})},{requires:"component/control,date/gregorian,date/format,i18n!date,i18n!date/picker,./picker-tpl".split(",")});
KISSY.add("date/picker/control",function(g,e,a,m){return a.extend({},{xclass:"date-picker",ATTRS:{value:{valueFn:function(){var a=new e;a.setTimeInMillis(g.now());return a}},previousMonthEl:{},monthSelectEl:{},nextMonthEl:{},tbodyEl:{},todayEl:{},dateRender:{},disabledDate:{},showToday:{view:1,value:!0},xrender:{value:m}}})},{requires:["date/gregorian","component/control","./render"]});KISSY.add("date/picker",function(g,e){return e},{requires:["./picker/control"]});
