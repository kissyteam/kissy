<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>KISSY Lazy Tree</title>
    <link href="../../../../build/css/dpl/base.css" rel="stylesheet"/>
    <link href="../../../../src/button/assets/dpl.css" rel="stylesheet"/>
    <link href="../../assets/dpl.css" rel="stylesheet"/>
</head>
<body>
<div class="container">


    <h1>KISSY Lazy Tree</h1>


    <div id="treeContainer" style="width: 200px;">

    </div>

    <hr/>

    <script src="../../../../build/kissy.js"></script>
    <script src="../../src/base.js"></script>
    <script src="../../src/basenode.js"></script>
    <script src="../../src/basenodeRender.js"></script>
    <script src="../../src/checknode.js"></script>
    <script src="../../src/checknodeRender.js"></script>
    <script src="../../src/checktree.js"></script>
    <script src="../../src/checktreeRender.js"></script>
    <script src="../../src/tree.js"></script>
    <script src="../../src/treemgr.js"></script>
    <script src="../../src/treemgrRender.js"></script>
    <script src="../../src/treeRender.js"></script>

    <script>
        KISSY.use("tree", function (S, Tree) {
            var $ = S.all;

            var data = {
                content: "淘宝网",
                children: [
                    {
                        content: "收藏夹",
                        children: [
                            {
                                content: "收藏的宝贝"
                            },
                            {
                                content: "收藏的店铺"
                            }
                        ]
                    },
                    {
                        content: "我的淘宝",
                        children: [
                            {
                                content: "已买到的宝贝"
                            },
                            {
                                content: "已卖出的宝贝"
                            }
                        ]
                    }
                ]
            };

            function getNode(node, content) {
                if (node.content == content) {
                    return node;
                }
                var c = node.children || [];
                for (var i = 0; i < c.length; i++) {
                    var t = getNode(c[i], content);
                    if (t) {
                        return t;
                    }
                }
                return null;
            }

            var tree = new Tree({
                content: "淘宝网",

                isLeaf: false,
                // showRootNode:false,
                render: "#treeContainer"
            });
            tree.on("expand", function (e) {
                var node = e.target;
                if (!node.get("children").length) {
                    var c = getNode(data, node.get("content")).children;
                    S.each(c, function (v) {
                        node.addChild(new Tree.Node({

                            isLeaf: !(v.children && v.children.length),
                            content: v.content
                        }));
                    });
                }
            });
            tree.render();
        });
    </script>
</div>
</body>
</html>