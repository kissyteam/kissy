<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=GB18030"/>
<title>Editor Test</title>
<link rel="stylesheet" href="../../build/cssreset-grids/reset-grids-min.css" type="text/css"/>

<script type="text/javascript" src="../../lib/yui2/yahoo-dom-event.js"></script>

<link rel="stylesheet" href="themes/default/editor.css" type="text/css"/>

<script type="text/javascript" src="editor-base.js"></script>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="lang/en.js"></script>

<!-- 所有 core 文件加载独立（顺序无关） -->
<script type="text/javascript" src="core/color.js"></script>
<script type="text/javascript" src="core/command.js"></script>
<script type="text/javascript" src="core/dom.js"></script>
<script type="text/javascript" src="core/instance.js"></script>
<script type="text/javascript" src="core/menu.js"></script>
<script type="text/javascript" src="core/plugin.js"></script>
<script type="text/javascript" src="core/range.js"></script>
<script type="text/javascript" src="core/toolbar.js"></script>

<!-- 所有 plugin 文件加载独立（顺序无关） -->
<script type="text/javascript" src="plugins/basic/plugin.js"></script>
<script type="text/javascript" src="plugins/blockquote/plugin.js"></script>
<script type="text/javascript" src="plugins/color/plugin.js"></script>
<script type="text/javascript" src="plugins/font/plugin.js"></script>
<script type="text/javascript" src="plugins/image/plugin.js"></script>
<script type="text/javascript" src="plugins/indent/plugin.js"></script>
<script type="text/javascript" src="plugins/justify/plugin.js"></script>
<script type="text/javascript" src="plugins/link/plugin.js"></script>
<script type="text/javascript" src="plugins/maximize/plugin.js"></script>
<script type="text/javascript" src="plugins/removeformat/plugin.js"></script>
<script type="text/javascript" src="plugins/save/plugin.js"></script>
<script type="text/javascript" src="plugins/smiley/plugin.js"></script>
<script type="text/javascript" src="plugins/source/plugin.js"></script>
<script type="text/javascript" src="plugins/undo/plugin.js"></script>

<style type="text/css">
    #demo-page {
        padding: 50px 20px;
        width: 1080px;
        margin: 0 auto;
        line-height: 18px;
    }
    #demo-page h1,
    #demo-page h2,
    #demo-page h3 {
        margin: 1em 0 0.3em;
    }
    #demo-page .section ol {
        margin: 5px 20px;
    }
    #demo-page .section ol li {
        list-style: decimal inside;
        margin: 5px 0;
    }
    #demo-page #submit-btn {
        padding: 4px 20px;
        margin: 10px 5px;
    }
</style>
</head>
<body>
<div id="demo-page">
    <h1>Editor: </h1>

    <form id="demo-form" action="" method="POST">
        <textarea id="demo" rows="50" cols="152" style="width: 900px; height: 395px">
            <p><img alt="" src="http://a.cksource.com/c/1/inc/img/demo-little-red.jpg" align="left" height="168" hspace="10" width="120"></p>

            <h2 class="firstheading" id="firstheading">Little Red Riding Hood</h2>

            <p>"<strong>Little Red Riding Hood</strong>" is a famous <a href="http://en.wikipedia.org/wiki/fairy_tale" title="fairy tale">fairy tale</a>
                about a young girl's encounter with a wolf. The story has been changed
                considerably in its history and subject to numerous modern adaptations
                and readings.</p>
            <table style="width: 200px;" align="right" border="1" cellpadding="1" cellspacing="1">
                <caption><strong>International Names</strong></caption>
                <tbody>
                <tr>
                    <td>Chinese</td>
                    <td><em>小t帽</em></td>
                </tr>
                <tr>
                    <td>Italian</td>
                    <td><em>Cappuccetto Rosso</em></td>
                </tr>
                <tr>
                    <td>Spanish</td>
                    <td><em>Caperucita Roja</em></td>
                </tr>
                </tbody>
            </table>
            <p>The version most widely known today is based on the <a href="http://en.wikipedia.org/wiki/brothers_grimm" title="brothers grimm">Brothers Grimm</a> variant. It is about a girl called Little Red Riding Hood, after the red <a href="http://en.wikipedia.org/wiki/hood_%28headgear%29" title="hood (headgear)">hooded</a> <a href="http://en.wikipedia.org/wiki/cape" title="cape">cape</a> or <a href="http://en.wikipedia.org/wiki/cloak" title="cloak">cloak</a> she wears. The girl walks through the woods to deliver food to her sick grandmother.</p>

            <p>A
                wolf wants to eat the girl but is afraid to do so in public. He
                approaches the girl, and she na07vely tells him where she is going. He
                suggests the girl pick some flowers, which she does. In the meantime,
                he goes to the grandmother's house and gains entry by pretending to be
                the girl. He swallows the grandmother whole, and waits for the girl,
                disguised as the grandmother.</p>

            <p>When the girl arrives, she notices
                he looks very strange to be her grandma. In most retellings, this
                eventually culminates with Little Red Riding Hood saying, "My, what big
                teeth you have!"<br>To which the wolf replies, "The better to eat you with," and swallows her whole, too.</p>

            <p>A <a class="mw-redirect" href="http://en.wikipedia.org/wiki/hunter" title="hunter">hunter</a>,
                however, comes to the rescue and cuts the wolf open. Little Red Riding
                Hood and her grandmother emerge unharmed. They fill the wolf's body
                with heavy stones, which drown him when he falls into a well. Other
                versions of the story have had the grandmother shut in the closet
                instead of eaten, and some have Little Red Riding Hood saved by the
                hunter as the wolf advances on her rather than after she is eaten.</p>

            <p>The tale makes the clearest contrast between the safe world of the village and the dangers of the <a href="http://en.wikipedia.org/wiki/enchanted_forest" title="enchanted forest">forest</a>, conventional antitheses that are essentially medieval, though no written versions are as old as that.</p>
        </textarea>
        <p><button id="submit-btn" type="submit">Submit</button></p>
    </form>

    <div class="section">
        <h2>Features:</h2>
        <ol>
            <li>编辑器基本功能</li>
            <li>小巧精简，仅依赖 yahoo-dom-event, 压缩后不超过 50k</li>
            <li>支持所有 A 级浏览器</li>
        </ol>
    </div>

    <div class="section">
        <h2>Test Cases:</h2>
        <ol>
            <li>[basic] B / I / U / Strike 生成的代码在 A 级浏览器下一致，分别为 strong, em, span, span</li>
            <li>[basic] ol / ul 和 google docs 的处理方式一致，各个浏览器下的差异由浏览器自身决定（比如光标在列表中某一项时，改变列表类别时的处理）</li>
            <li>[color] foreColor / backColor 在 IE 下生成 font 标签，其它浏览器下生成 span 标签</li>
            <li>[color] 打开 foreColor / backColor 的取色板时，自动选中当前色</li>
            <li>[font] font 在 IE 下生成 font 标签，其它浏览器下生成 span 标签</li>
            <li>[font] 来回改变 font-family 和 font-size 时，不会出现 YUI RTE 中编辑失效的问题</li>
            <li>[link] 有选中文本和没有选中文本时，创建链接的逻辑正确</li>
            <li>[link] 光标处于链接中时，打开的 Link 对话框处于修改状态</li>
            <li>[link] 有选中文本和没有选中文本时，都能移除当前链接</li>
            <li>[link] 将链接地址修改为空，等价移除链接</li>
            <li>[link] 用户输入的链接地址中无协议时，自动添加 http 协议</li>
            <li>[link] 选中图片时，添加/修改链接正常（需特别留意 ie）</li>
            <li>[justify] 选中图片时，改变对齐时不抛异常</li>
            <li>[indent] 对 li 的缩进，在 ie 下是整体缩进，与其它浏览器的细节处理不同</li>
            <li>[blockquote] 在 ie 和 fifefox 下效果一致，其它浏览器未做统一性处理</li>
            <li>[ie6] 字体等下拉选择框能覆盖住 select 等元素</li>
        </ol>
    </div>

    <div class="section">
        <h2>Known Issues:</h2>
        <ol>
            <li>ie6 下，selectbox 按钮在鼠标悬浮时，边框色未改变</li>
            <li>ie6 下，下拉选取框无法遮盖住下面的光标</li>
            <li>ie 下，iframe 编辑区域的选区是黑底白字，和默认的蓝底白字不同</li>
        </ol>
    </div>

    <div class="section">
        <h2>References:</h2>
        <ol>
            <li><a href="http://realazy.org/blog/2008/05/02/rte-basis/">富文本编辑器的基本原理与实践</a> (很好的入门介绍)</li>
            <li><a href="http://msdn.microsoft.com/en-us/library/ms533049%28VS.85%29.aspx">Command Identifiers</a> (MSDN)</li>
            <li><a href="http://msdn.microsoft.com/en-us/library/ms535872%28VS.85%29.aspx">TextRange Object</a> (MSDN)</li>
            <li><a href="https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla">Rich-Text Editing in Mozilla</a> (MDC)</li>
            <li><a href="http://www.mozilla.org/editor/midas-spec.html">Midas Specification</a> (MDC)</li>
            <li><a href="http://www.mozilla.org/editor/midasdemo/">Midas Demo</a></li>
            <li><a href="http://www.kevinroth.com/rte/demo.htm">Cross-Browser Rich Text Editor (RTE) Demo</a></li>
            <li><a href="http://www.quirksmode.org/dom/execCommand/">contentEditable Demo</a> (PPK 的尝试)</li>
            <li><a href="http://www.quirksmode.org/dom/execCommand.html">execCommand Compatibility</a> (让人佩服的 PPK)</li>
            <li><a href="http://www.quirksmode.org/dom/range_intro.html">Introduction to Range</a> (通俗易懂的 PPK)</li>
            <li><a href="http://www.quirksmode.org/dom/w3c_range.html">Range Compatibility Table</a> (谁有兴趣去帮 PPK 更新和完善下？)</li>
            <li><a href="http://starkravingfinkle.org/blog/2007/07/firefox-3-contenteditable/">Firefox 3 C ContentEditable</a> (Firefox 3 才开始支持 contentEditalbe)</li>
            <li><a href="http://docs.google.com/">Google Docs</a> (简单与复杂的权衡)</li>
            <li><a href="http://ckeditor.com/demo/">CKEditor</a> (FCKEditor 的新一代产品)</li>
            <li><a href="http://tinymce.moxiecode.com/examples/full.php">TinyMCE</a></li>
            <li><a href="http://developer.yahoo.com/yui/examples/editor/code_editor.html">YUI RTE</a></li>
            <li><a href="http://nicedit.com/demos.php">NicEditor</a></li>
            <li><a href="http://bai.sohu.com/app/blog/#/app/blog/entry/edit.do">白社会编辑器</a></li>
        </ol>
    </div>

</div>

<script type="text/javascript">

    var config = {
        base: "http://t-yubo/kissy/src/editor/"
    };
    
    var editorDemo = new KISSY.Editor("demo", config);
    //console.dir(KISSY.Editor);
    //console.dir(editorDemo);

</script>

</body>
</html>
