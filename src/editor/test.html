<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=GB18030"/>
<title>Editor Test</title>
<link rel="stylesheet" href="../../build/cssreset-grids/reset-grids-min.css" type="text/css"/>

<script type="text/javascript" src="../../lib/yui2/yahoo-dom-event.js"></script>
<script type="text/javascript" src="../../lib/yui3/yui-min.js"></script>

<link rel="stylesheet" href="themes/default/editor.css" type="text/css"/>

<script type="text/javascript" src="editor-base.js"></script>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="lang/en.js"></script>

<!-- 所有 core 文件加载独立（顺序无关） -->
<script type="text/javascript" src="core/color.js"></script>
<script type="text/javascript" src="core/command.js"></script>
<script type="text/javascript" src="core/dom.js"></script>
<script type="text/javascript" src="core/instance.js"></script>
<script type="text/javascript" src="core/menu.js"></script>
<script type="text/javascript" src="core/plugin.js"></script>
<script type="text/javascript" src="core/range.js"></script>
<script type="text/javascript" src="core/toolbar.js"></script>

<!-- 所有 plugin 文件加载独立（顺序无关） -->
<script type="text/javascript" src="plugins/basic/plugin.js"></script>
<script type="text/javascript" src="plugins/blockquote/plugin.js"></script>
<script type="text/javascript" src="plugins/color/plugin.js"></script>
<script type="text/javascript" src="plugins/font/plugin.js"></script>
<script type="text/javascript" src="plugins/image/plugin.js"></script>
<script type="text/javascript" src="plugins/indent/plugin.js"></script>
<script type="text/javascript" src="plugins/justify/plugin.js"></script>
<script type="text/javascript" src="plugins/link/plugin.js"></script>
<script type="text/javascript" src="plugins/maximize/plugin.js"></script>
<script type="text/javascript" src="plugins/save/plugin.js"></script>
<script type="text/javascript" src="plugins/smiley/plugin.js"></script>
<script type="text/javascript" src="plugins/source/plugin.js"></script>
<script type="text/javascript" src="plugins/undo/plugin.js"></script>

<style type="text/css">
    #page {
        padding: 50px 0;
        width: 1080px;
        margin: 0 auto;
        line-height: 18px;
    }
    h1, h2, h3 {
        margin: 1em 0 0.3em;
    }
    .section ol {
        margin: 5px 20px;
    }
    .section ol li {
        list-style: decimal inside;
        margin: 5px 0;
    }
    .hidden {
        display: none;
    }
    button {
        padding: 4px 20px;
        margin: 5px;
    }
    .yui-console {
        width: 280px !important;
    }
</style>
</head>
<body class="yui-skin-sam">
<div id="page">
    <h1>Editor: </h1>

    <form id="demoForm" action="" method="POST">
        <textarea id="demo" rows="10" cols="152" style="width: 800px; height: 200px"></textarea>
        <button id="submitBtn" type="submit">Submit</button>
    </form>

    <div class="section">
        <h2>Features:</h2>
        <ol>
            <li>编辑器基本功能</li>
            <li>小巧精简，仅依赖 yahoo-dom-event, 压缩后不超过 50k</li>
            <li>支持所有 A 级浏览器</li>
        </ol>
    </div>

    <div class="section">
        <h2>Test Cases:</h2>
        <ol>
            <li>B / I / U / Strike 生成的代码在 A 级浏览器下一致，分别为 strong, em, span, span</li>
            <li>ol / ul 和 google docs 的处理方式一致，各个浏览器下的差异由浏览器自身决定（比如光标在列表中某一项时，改变列表类别）</li>
            <li>foreColor / backColor 在 IE 下生成 font 标签，其它浏览器下生成 span 标签</li>
            <li>打开 foreColor / backColor 的取色板时，自动选中当前色</li>

        </ol>
    </div>
    
    <div class="section">
        <h2>References:</h2>
        <ol>
            <li><a href="http://realazy.org/blog/2008/05/02/rte-basis/">富文本编辑器的基本原理与实践</a> (很好的入门介绍)</li>
            <li><a href="http://msdn.microsoft.com/en-us/library/ms533049%28VS.85%29.aspx">Command Identifiers</a> (MSDN)</li>
            <li><a href="https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla">Rich-Text Editing in Mozilla</a> (MDC)</li>
            <li><a href="http://www.mozilla.org/editor/midas-spec.html">Midas Specification</a> (MDC)</li>
            <li><a href="http://www.mozilla.org/editor/midasdemo/">Midas Demo</a></li>
            <li><a href="http://www.kevinroth.com/rte/demo.htm">Cross-Browser Rich Text Editor (RTE) Demo</a></li>
            <li><a href="http://www.quirksmode.org/dom/execCommand/">contentEditable Demo</a> (PPK 的尝试)</li>
            <li><a href="http://www.quirksmode.org/dom/execCommand.html">execCommand Compatibility</a> (让人佩服的 PPK)</li>
            <li><a href="http://docs.google.com/">Google Docs</a> (无与伦比的细节)</li>
            <li><a href="http://ckeditor.com/">CKEditor</a> (FCKEditor 的下一代产品)</li>
            <li><a href="http://www.quirksmode.org/dom/range_intro.html">Introduction to Range</a> (通俗易懂的 PPK)</li>
            <li><a href="http://www.quirksmode.org/dom/w3c_range.html">Range Compatibility Table</a> (谁有兴趣去帮 PPK 更新和完善下？)</li>
            <li><a href="http://starkravingfinkle.org/blog/2007/07/firefox-3-contenteditable/">Firefox 3 C ContentEditable</a> (Firefox 3 才开始支持 contentEditalbe)</li>
        </ol>
    </div>

</div>

<script type="text/javascript">

    var config = {
        base: "http://t-yubo/kissy/src/editor/"
    };
    
    var editorDemo = new KISSY.Editor("demo", config);
    //console.dir(KISSY.Editor);
    //console.dir(editorDemo);

</script>

<div id="testLogger"></div>

<script type="text/javascript">

    YUI({debug: YAHOO.env.ua.gecko ? true : false}).use("node", "console", "test", function (Y) {
        var Assert = Y.Assert,
            E = KISSY.Editor;

        var testCase = new Y.Test.Case({

            name: "Only Test",

            setUp: function () {
                // nothing to do
            },

            tearDown: function () {
                // nothing to do
            },

            testColor : function () {

                // YUI bug
                //Assert.areEqual("#FF0A00", Y.Color.toHex("rgb(255, 10, 0)"));

                Assert.areEqual("#ff0a00", E.Color.toHex("rgb(255, 10, 0)"));

            }
        });

        var testSuite = new Y.Test.Suite("Editor Test Suite");
        testSuite.add(testCase);

        new Y.Console({
            verbose : true,
            newestOnTop : false

        }).render("#testLogger");

        Y.Test.Runner.add(testSuite);
        Y.Test.Runner.run();

    });
</script>


</body>
</html>
