<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * @ignore
 *  close extension for kissy dialog
 * @author yiminghe@gmail.com
 */
KISSY.add(&quot;overlay/extension/close-render&quot;, function (S, Node) {

    var CLS_PREFIX = 'ext-';

    function getCloseRenderBtn(prefixCls) {
        return new Node(&quot;&lt;a &quot; +
            &quot;tabindex='0' &quot; +
            &quot;href='javascript:void(\&quot;关闭\&quot;)' &quot; +
            &quot;role='button' &quot; +
            &quot;style='z-index:9' &quot; +
            &quot;class='&quot; + prefixCls + CLS_PREFIX + &quot;close&quot; + &quot;'&gt;&quot; +
            &quot;&lt;span class='&quot; +
            prefixCls + CLS_PREFIX + &quot;close-x&quot; +
            &quot;'&gt;关闭&lt;&quot; + &quot;/span&gt;&quot; +
            &quot;&lt;&quot; + &quot;/a&gt;&quot;);
    }

    function CloseRender() {
    }

    CloseRender.ATTRS = {
        closable: {
            value: true
        },
        closeBtn: {
        }
    };

    CloseRender.HTML_PARSER = {
        closeBtn: function (el) {
            return el.one(&quot;.&quot; + this.get('prefixCls') + CLS_PREFIX + 'close');
        }
    };

    CloseRender.prototype = {
        _onSetClosable: function (v) {
            var self = this,
                btn = self.get(&quot;closeBtn&quot;);
            if (v) {
                if (!btn) {
                    self.setInternal(&quot;closeBtn&quot;, btn = getCloseRenderBtn(self.get('prefixCls')));
                }
                self.get(&quot;el&quot;).prepend(btn);
            } else {
                if (btn) {
                    btn.remove();
                }
            }
        }
    };

    return CloseRender;

}, {
    requires: [&quot;node&quot;]
});</pre>
</body>
</html>
