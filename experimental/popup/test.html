<!doctype html>
<html>
<head>
<meta charset="gbk" />
<title>Couple Select Test</title>
<link rel="stylesheet" href="../../build/cssreset/reset.css" />
<script src="../../third-party/yui2/yahoo-dom-event/yahoo-dom-event.js"></script>
<script src="../../build/packages/kissy-core.js"></script>
<script src="coupleselect.js"></script>
<style type="text/css">
body{line-height:1.5em;}
#page{margin:10px;}
h1 {margin:15px 0;color:#00859D;font-family:Constantia,serif;font-size:26px;}
.box{margin-top:10px;}
.box .hd{padding:6px 0;border-bottom:1px solid #ccc;}
.box .hd h3{font-size:14px;}
.box .bd{padding:10px;}
p.code-switch { color: #09f; cursor: pointer; margin-top: 10px; }
pre.code {
	color: #444;
	cursor: auto;
	border-left: 2px solid #7F96AA;
	margin-top: 5px;
	padding: 0 10px 20px 10px;
	font-size: 14px;
}
</style>
</head>
<body>
<div id="page">
<h1>KISSY Couple Select</h1>

<!-- box START -->
<style>
.ks-coupleselect{position:relative;height:260px;}
.ks-coupleselect-source-box,
.ks-coupleselect-target-box{position:absolute;width:200px;height:253px;overflow-x:hidden;overflow-y:auto;border:2px solid #ddd;}
.ks-coupleselect-target-box{left:300px;}
.ks-coupleselect-item{margin-top:-1px;padding:5px;border-top:1px dashed #ddd;cursor:pointer;}
.ks-coupleselect-item-selected{background:#eee;}
.ks-coupleselect-button-box{position:absolute;left:220px;}
</style>
<div class="box">
    <div class="hd">
        <h3>范例</h3>
    </div>
    <div class="bd">
        <div class="ks-coupleselect" id="KSCoupleSelect">
			<div class="ks-coupleselect-source-box">
				<div class="ks-coupleselect-item"><img src="http://img.alimama.cn/bcrm/adboard/picture/2010-04-30/100430102025490.jpg"/></div>
				<div class="ks-coupleselect-item"><img src="http://img01.taobaocdn.com/tps/i1/T1zjXyXcRsXXXXXXXX-190-70.jpg"/></div>
				<div class="ks-coupleselect-item"><img src="http://img01.taobaocdn.com/tps/i1/T1zVRyXf4EXXXXXXXX-190-70.jpg"/></div>
			</div>
			<div class="ks-coupleselect-target-box"></div>
			<ul class="ks-coupleselect-button-box">
				<li><a href="#" class="ks-coupleselect-add">添加</a></li>
				<li><a href="#" class="ks-coupleselect-remove">移除</a></li>
				<li><a href="#" class="ks-coupleselect-move-top">移到顶部</a></li>
				<li><a href="#" class="ks-coupleselect-move-up">移到上一位</a></li>
				<li><a href="#" class="ks-coupleselect-move-down">移到下一位</a></li>
				<li><a href="#" class="ks-coupleselect-move-bottom">移到底部</a></li>
			</ul>
			
		</div>
    </div>
</div>
<script type="text/javascript">
KISSY.ready(function(S) {
    var myCoupleSelect = new S.CoupleSelect('#KSCoupleSelect');
    myCoupleSelect.on('afterAddItem',function(){
        window.status='您一共已添加'+myCoupleSelect.getTargetItems().length+'个item。';
    });
    myCoupleSelect.on('afterRemoveItem',function(){
        window.status='您刚刚删除了1个item。';
    });
    myCoupleSelect.on('afterMoveItem',function(){
        window.status='您刚刚移动了1个item。';
    });
});
</script>
<p class="code-switch">显示源码</p>
<!-- box END -->
</div>
</body>
</html>
<script>
    (function() {
        var S = KISSY, SHOW_CODE = '显示源码', HIDE_CODE = '隐藏源码';

        S.all('p.code-switch').each(function(p) {
            p.on('click', function() {
                var showing = (p.text() === SHOW_CODE),
                    next = p.next(),
                    pre = next;
                if (!next || (next[0].nodeName !== 'PRE')) {
                    pre = S.Node('PRE');
                    pre.attr('class', 'code')
                        .html(p.prev().html());

                    if (S.UA.ie) {
                        pre.html(pre.html() + '<br />// 请用非 ie 内核浏览器查看。');
                    }
                    if(!next){
                        p.parent()[0].appendChild(pre[0]);
                    }else{
                        p.parent()[0].insertBefore(pre[0], p.next()[0]);
                    }

                }

                pre.css('display', showing ? 'block' : 'none');
                p.html(showing ? HIDE_CODE : SHOW_CODE);
            });
        });

    })();

</script>

